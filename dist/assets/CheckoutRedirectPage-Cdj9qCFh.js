import{r as a,j as e,H as N,aq as o,aQ as w}from"./react-vendor-CdxBdSXn.js";import{C as d,a as m,b as x,g as u,c as y,B as c}from"./page-addrecipe-DiItHnEU.js";import"./vendor-Bm4oc8-A.js";import"./capacitor-vendor-Dh3Cr3CD.js";import"./services-TCLpZZGf.js";import"./supabase-vendor-D9HjG51c.js";import"./page-grocerylist-BWuPGfVx.js";import"./page-adminproducts-DHDRaIIe.js";import"./page-adminpayouts-CXMXNcRe.js";import"./page-blog-2K1uxyE3.js";function Y(){const[s,h]=a.useState(""),[n,p]=a.useState("checkout"),[t,b]=a.useState(3),[r,f]=a.useState(!1);a.useEffect(()=>{const i=l=>{(l.data.type==="checkout"||l.data.type==="search")&&(h(l.data.url),p(l.data.type))};return window.addEventListener("message",i),()=>window.removeEventListener("message",i)},[]),a.useEffect(()=>{if(!(!s||r)){if(t>0){const i=setTimeout(()=>b(t-1),1e3);return()=>clearTimeout(i)}t===0&&(window.location.href=s)}},[t,s,r]);const j=()=>{window.location.href=s},g=()=>{window.close()};return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsxs(d,{className:"w-full max-w-2xl",children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(o,{className:"w-6 h-6 text-blue-600"}),n==="checkout"?"Redirecting to Checkout":"Redirecting to Search"]}),e.jsx(u,{children:n==="checkout"?"You're being redirected to complete your purchase":"You're being redirected to search for products"})]}),e.jsxs(y,{className:"space-y-6",children:[!r&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center w-24 h-24 mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-100"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin",style:{animationDuration:"1s"}}),e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:t})]}),e.jsxs("p",{className:"text-lg text-gray-700 mb-2",children:["Redirecting in ",t," second",t!==1?"s":"","..."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"You'll be taken to the external site shortly"})]}),r&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Auto-redirect paused. Click the button below when you're ready."}),e.jsxs(c,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",size:"lg",children:[e.jsx(o,{className:"w-5 h-5 mr-2"}),"Continue to ",n==="checkout"?"Checkout":"Search"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Leaving Our App"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"You're being redirected to an external website. We use affiliate links to support the app."})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{variant:"outline",onClick:()=>f(!r),className:"flex-1",children:r?"Resume Auto-Redirect":"Wait, Let Me Review"}),e.jsxs(c,{variant:"outline",onClick:g,className:"flex-1",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Cancel & Go Back"]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",e.jsx("span",{className:"font-mono text-gray-700",children:new URL(s).hostname})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsx(d,{className:"w-full max-w-md",children:e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 animate-spin"}),"Loading..."]}),e.jsx(u,{children:"Preparing your checkout experience"})]})})})}export{Y as CheckoutRedirectPage};

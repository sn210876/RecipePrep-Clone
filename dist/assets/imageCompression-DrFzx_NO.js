function ot(S,C){return C.forEach(function(R){R&&typeof R!="string"&&!Array.isArray(R)&&Object.keys(R).forEach(function(s){if(s!=="default"&&!(s in S)){var e=Object.getOwnPropertyDescriptor(R,s);Object.defineProperty(S,s,e.get?e:{enumerable:!0,get:function(){return R[s]}})}})}),Object.freeze(S)}function Pe(S,C){return new Promise(function(R,s){let e;return at(S).then(function(t){try{return e=t,R(new Blob([C.slice(0,2),e,C.slice(2)],{type:"image/jpeg"}))}catch(h){return s(h)}},s)})}const at=S=>new Promise((C,R)=>{const s=new FileReader;s.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let h=0;if(t.getUint16(h)!==65496)return R("not a valid JPEG");for(h+=2;;){const a=t.getUint16(h);if(a===65498)break;const g=t.getUint16(h+2);if(a===65505&&t.getUint32(h+4)===1165519206){const w=h+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return R("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return R("TIFF header contains invalid version");const i=t.getUint32(w+4,r),n=w+i+2+12*t.getUint16(w+i,r);for(let f=w+i+2;f<n;f+=12)if(t.getUint16(f,r)==274){if(t.getUint16(f+2,r)!==3)return R("Orientation data type is invalid");if(t.getUint32(f+4,r)!==1)return R("Orientation data count is invalid");t.setUint16(f+8,1,r);break}return C(e.slice(h,h+2+g))}h+=2+g}return C(new Blob)}),s.readAsArrayBuffer(S)});var Te={},ft={get exports(){return Te},set exports(S){Te=S}};(function(S){var C,R,s={};ft.exports=s,s.parse=function(e,t){for(var h=s.bin.readUshort,a=s.bin.readUint,g=0,w={},r=new Uint8Array(e),i=r.length-4;a(r,i)!=101010256;)i--;g=i,g+=4;var n=h(r,g+=4);h(r,g+=2);var f=a(r,g+=2),d=a(r,g+=4);g+=4,g=d;for(var F=0;F<n;F++){a(r,g),g+=4,g+=4,g+=4,a(r,g+=4),f=a(r,g+=4);var M=a(r,g+=4),b=h(r,g+=4),D=h(r,g+2),O=h(r,g+4);g+=6;var _=a(r,g+=8);g+=4,g+=b+D+O,s._readLocal(r,_,w,f,M,t)}return w},s._readLocal=function(e,t,h,a,g,w){var r=s.bin.readUshort,i=s.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var f=r(e,t+=8),d=r(e,t+=2);t+=2;var F=s.bin.readUTF8(e,t,f);if(t+=f,t+=d,w)h[F]={size:g,csize:a};else{var M=new Uint8Array(e.buffer,t);if(n==0)h[F]=new Uint8Array(M.buffer.slice(t,t+a));else{if(n!=8)throw"unknown compression method: "+n;var b=new Uint8Array(g);s.inflateRaw(M,b),h[F]=b}}},s.inflateRaw=function(e,t){return s.F.inflate(e,t)},s.inflate=function(e,t){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},s.deflate=function(e,t){t==null&&(t={level:6});var h=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[h]=120,a[h+1]=156,h+=2,h=s.F.deflateRaw(e,a,h,t.level);var g=s.adler(e,0,e.length);return a[h+0]=g>>>24&255,a[h+1]=g>>>16&255,a[h+2]=g>>>8&255,a[h+3]=g>>>0&255,new Uint8Array(a.buffer,0,h+4)},s.deflateRaw=function(e,t){t==null&&(t={level:6});var h=new Uint8Array(50+Math.floor(1.1*e.length)),a=s.F.deflateRaw(e,h,a,t.level);return new Uint8Array(h.buffer,0,a)},s.encode=function(e,t){t==null&&(t=!1);var h=0,a=s.bin.writeUint,g=s.bin.writeUshort,w={};for(var r in e){var i=!s._noNeed(r)&&!t,n=e[r],f=s.crc.crc(n,0,n.length);w[r]={cpr:i,usize:n.length,crc:f,file:i?s.deflateRaw(n):n}}for(var r in w)h+=w[r].file.length+30+46+2*s.bin.sizeUTF8(r);h+=22;var d=new Uint8Array(h),F=0,M=[];for(var r in w){var b=w[r];M.push(F),F=s._writeHeader(d,F,r,b,0)}var D=0,O=F;for(var r in w)b=w[r],M.push(F),F=s._writeHeader(d,F,r,b,1,M[D++]);var _=F-O;return a(d,F,101010256),F+=4,g(d,F+=4,D),g(d,F+=2,D),a(d,F+=2,_),a(d,F+=4,O),F+=4,F+=2,d.buffer},s._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},s._writeHeader=function(e,t,h,a,g,w){var r=s.bin.writeUint,i=s.bin.writeUshort,n=a.file;return r(e,t,g==0?67324752:33639248),t+=4,g==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,a.cpr?8:0),r(e,t+=2,0),r(e,t+=4,a.crc),r(e,t+=4,n.length),r(e,t+=4,a.usize),i(e,t+=4,s.bin.sizeUTF8(h)),i(e,t+=2,0),t+=2,g==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=s.bin.writeUTF8(e,t,h),g==0&&(e.set(n,t),t+=n.length),t},s.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var h=t,a=0;a<8;a++)1&h?h=3988292384^h>>>1:h>>>=1;e[t]=h}return e}(),update:function(e,t,h,a){for(var g=0;g<a;g++)e=s.crc.table[255&(e^t[h+g])]^e>>>8;return e},crc:function(e,t,h){return 4294967295^s.crc.update(4294967295,e,t,h)}},s.adler=function(e,t,h){for(var a=1,g=0,w=t,r=t+h;w<r;){for(var i=Math.min(w+5552,r);w<i;)g+=a+=e[w++];a%=65521,g%=65521}return g<<16|a},s.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,h){e[t]=255&h,e[t+1]=h>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,h){e[t]=255&h,e[t+1]=h>>8&255,e[t+2]=h>>16&255,e[t+3]=h>>24&255},readASCII:function(e,t,h){for(var a="",g=0;g<h;g++)a+=String.fromCharCode(e[t+g]);return a},writeASCII:function(e,t,h){for(var a=0;a<h.length;a++)e[t+a]=h.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,h){for(var a,g="",w=0;w<h;w++)g+="%"+s.bin.pad(e[t+w].toString(16));try{a=decodeURIComponent(g)}catch{return s.bin.readASCII(e,t,h)}return a},writeUTF8:function(e,t,h){for(var a=h.length,g=0,w=0;w<a;w++){var r=h.charCodeAt(w);if(!(4294967168&r))e[t+g]=r,g++;else if(!(4294965248&r))e[t+g]=192|r>>6,e[t+g+1]=128|r>>0&63,g+=2;else if(!(4294901760&r))e[t+g]=224|r>>12,e[t+g+1]=128|r>>6&63,e[t+g+2]=128|r>>0&63,g+=3;else{if(4292870144&r)throw"e";e[t+g]=240|r>>18,e[t+g+1]=128|r>>12&63,e[t+g+2]=128|r>>6&63,e[t+g+3]=128|r>>0&63,g+=4}}return g},sizeUTF8:function(e){for(var t=e.length,h=0,a=0;a<t;a++){var g=e.charCodeAt(a);if(!(4294967168&g))h++;else if(!(4294965248&g))h+=2;else if(!(4294901760&g))h+=3;else{if(4292870144&g)throw"e";h+=4}}return h}},s.F={},s.F.deflateRaw=function(e,t,h,a){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],w=s.F.U,r=s.F._goodIndex;s.F._hash;var i=s.F._putsE,n=0,f=h<<3,d=0,F=e.length;if(a==0){for(;n<F;)i(t,f,n+(y=Math.min(65535,F-n))==F?1:0),f=s.F._copyExact(e,n,y,t,f+8),n+=y;return f>>>3}var M=w.lits,b=w.strt,D=w.prev,O=0,_=0,H=0,p=0,T=0,c=0;for(F>2&&(b[c=s.F._hash(e,0)]=0),n=0;n<F;n++){if(T=c,n+1<F-2){c=s.F._hash(e,n+1);var l=n+1&32767;D[l]=b[c],b[c]=l}if(d<=n){(O>14e3||_>26697)&&F-n>100&&(d<n&&(M[O]=n-d,O+=2,d=n),f=s.F._writeBlock(n==F-1||d==F?1:0,M,O,p,e,H,n-H,t,f),O=_=p=0,H=n);var m=0;n<F-2&&(m=s.F._bestMatch(e,n,D,T,Math.min(g[2],F-n),g[3]));var y=m>>>16,A=65535&m;if(m!=0){A=65535&m;var U=r(y=m>>>16,w.of0);w.lhst[257+U]++;var v=r(A,w.df0);w.dhst[v]++,p+=w.exb[U]+w.dxb[v],M[O]=y<<23|n-d,M[O+1]=A<<16|U<<8|v,O+=2,d=n+y}else w.lhst[e[n]]++;_++}}for(H==n&&e.length!=0||(d<n&&(M[O]=n-d,O+=2,d=n),f=s.F._writeBlock(1,M,O,p,e,H,n-H,t,f),O=0,_=0,O=_=p=0,H=n);7&f;)f++;return f>>>3},s.F._bestMatch=function(e,t,h,a,g,w){var r=32767&t,i=h[r],n=r-i+32768&32767;if(i==r||a!=s.F._hash(e,t-n))return 0;for(var f=0,d=0,F=Math.min(32767,t);n<=F&&--w!=0&&i!=r;){if(f==0||e[t+f]==e[t+f-n]){var M=s.F._howLong(e,t,n);if(M>f){if(d=n,(f=M)>=g)break;n+2<M&&(M=n+2);for(var b=0,D=0;D<M-2;D++){var O=t-n+D+32768&32767,_=O-h[O]+32768&32767;_>b&&(b=_,i=O)}}}n+=(r=i)-(i=h[r])+32768&32767}return f<<16|d},s.F._howLong=function(e,t,h){if(e[t]!=e[t-h]||e[t+1]!=e[t+1-h]||e[t+2]!=e[t+2-h])return 0;var a=t,g=Math.min(e.length,t+258);for(t+=3;t<g&&e[t]==e[t-h];)t++;return t-a},s.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,t,h,a,g,w,r,i,n){var f,d,F,M,b,D,O,_,H,p=s.F.U,T=s.F._putsF,c=s.F._putsE;p.lhst[256]++,d=(f=s.F.getTrees())[0],F=f[1],M=f[2],b=f[3],D=f[4],O=f[5],_=f[6],H=f[7];var l=32+(n+3&7?8-(n+3&7):0)+(r<<3),m=a+s.F.contSize(p.fltree,p.lhst)+s.F.contSize(p.fdtree,p.dhst),y=a+s.F.contSize(p.ltree,p.lhst)+s.F.contSize(p.dtree,p.dhst);y+=14+3*O+s.F.contSize(p.itree,p.ihst)+(2*p.ihst[16]+3*p.ihst[17]+7*p.ihst[18]);for(var A=0;A<286;A++)p.lhst[A]=0;for(A=0;A<30;A++)p.dhst[A]=0;for(A=0;A<19;A++)p.ihst[A]=0;var U=l<m&&l<y?0:m<y?1:2;if(T(i,n,e),T(i,n+1,U),n+=3,U==0){for(;7&n;)n++;n=s.F._copyExact(g,w,r,i,n)}else{var v,I;if(U==1&&(v=p.fltree,I=p.fdtree),U==2){s.F.makeCodes(p.ltree,d),s.F.revCodes(p.ltree,d),s.F.makeCodes(p.dtree,F),s.F.revCodes(p.dtree,F),s.F.makeCodes(p.itree,M),s.F.revCodes(p.itree,M),v=p.ltree,I=p.dtree,c(i,n,b-257),c(i,n+=5,D-1),c(i,n+=5,O-4),n+=4;for(var u=0;u<O;u++)c(i,n+3*u,p.itree[1+(p.ordr[u]<<1)]);n+=3*O,n=s.F._codeTiny(_,p.itree,i,n),n=s.F._codeTiny(H,p.itree,i,n)}for(var o=w,k=0;k<h;k+=2){for(var E=t[k],z=E>>>23,N=o+(8388607&E);o<N;)n=s.F._writeLit(g[o++],v,i,n);if(z!=0){var B=t[k+1],Q=B>>16,L=B>>8&255,x=255&B;c(i,n=s.F._writeLit(257+L,v,i,n),z-p.of0[L]),n+=p.exb[L],T(i,n=s.F._writeLit(x,I,i,n),Q-p.df0[x]),n+=p.dxb[x],o+=z}}n=s.F._writeLit(256,v,i,n)}return n},s.F._copyExact=function(e,t,h,a,g){var w=g>>>3;return a[w]=h,a[w+1]=h>>>8,a[w+2]=255-a[w],a[w+3]=255-a[w+1],w+=4,a.set(new Uint8Array(e.buffer,t,h),w),g+(h+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,t=s.F._hufTree(e.lhst,e.ltree,15),h=s.F._hufTree(e.dhst,e.dtree,15),a=[],g=s.F._lenCodes(e.ltree,a),w=[],r=s.F._lenCodes(e.dtree,w),i=0;i<a.length;i+=2)e.ihst[a[i]]++;for(i=0;i<w.length;i+=2)e.ihst[w[i]]++;for(var n=s.F._hufTree(e.ihst,e.itree,7),f=19;f>4&&e.itree[1+(e.ordr[f-1]<<1)]==0;)f--;return[t,h,n,g,r,f,a,w]},s.F.getSecond=function(e){for(var t=[],h=0;h<e.length;h+=2)t.push(e[h+1]);return t},s.F.nonZero=function(e){for(var t="",h=0;h<e.length;h+=2)e[h+1]!=0&&(t+=(h>>1)+",");return t},s.F.contSize=function(e,t){for(var h=0,a=0;a<t.length;a++)h+=t[a]*e[1+(a<<1)];return h},s.F._codeTiny=function(e,t,h,a){for(var g=0;g<e.length;g+=2){var w=e[g],r=e[g+1];a=s.F._writeLit(w,t,h,a);var i=w==16?2:w==17?3:7;w>15&&(s.F._putsE(h,a,r,i),a+=i)}return a},s.F._lenCodes=function(e,t){for(var h=e.length;h!=2&&e[h-1]==0;)h-=2;for(var a=0;a<h;a+=2){var g=e[a+1],w=a+3<h?e[a+3]:-1,r=a+5<h?e[a+5]:-1,i=a==0?-1:e[a-1];if(g==0&&w==g&&r==g){for(var n=a+5;n+2<h&&e[n+2]==g;)n+=2;(f=Math.min(n+1-a>>>1,138))<11?t.push(17,f-3):t.push(18,f-11),a+=2*f-2}else if(g==i&&w==g&&r==g){for(n=a+5;n+2<h&&e[n+2]==g;)n+=2;var f=Math.min(n+1-a>>>1,6);t.push(16,f-3),a+=2*f-2}else t.push(g,0)}return h>>>1},s.F._hufTree=function(e,t,h){var a=[],g=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<g;r++)e[r]!=0&&a.push({lit:r,f:e[r]});var i=a.length,n=a.slice(0);if(i==0)return 0;if(i==1){var f=a[0].lit;return n=f==0?1:0,t[1+(f<<1)]=1,t[1+(n<<1)]=1,1}a.sort(function(_,H){return _.f-H.f});var d=a[0],F=a[1],M=0,b=1,D=2;for(a[0]={lit:-1,f:d.f+F.f,l:d,r:F,d:0};b!=i-1;)d=M!=b&&(D==i||a[M].f<a[D].f)?a[M++]:a[D++],F=M!=b&&(D==i||a[M].f<a[D].f)?a[M++]:a[D++],a[b++]={lit:-1,f:d.f+F.f,l:d,r:F};var O=s.F.setDepth(a[b-1],0);for(O>h&&(s.F.restrictDepth(n,h,O),O=h),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return O},s.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(s.F.setDepth(e.l,t+1),s.F.setDepth(e.r,t+1))},s.F.restrictDepth=function(e,t,h){var a=0,g=1<<h-t,w=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),a=0;a<e.length&&e[a].d>t;a++){var r=e[a].d;e[a].d=t,w+=g-(1<<h-r)}for(w>>>=h-t;w>0;)(r=e[a].d)<t?(e[a].d++,w-=1<<t-r-1):a++;for(;a>=0;a--)e[a].d==t&&w<0&&(e[a].d--,w++);w!=0&&console.log("debt left")},s.F._goodIndex=function(e,t){var h=0;return t[16|h]<=e&&(h|=16),t[8|h]<=e&&(h|=8),t[4|h]<=e&&(h|=4),t[2|h]<=e&&(h|=2),t[1|h]<=e&&(h|=1),h},s.F._writeLit=function(e,t,h,a){return s.F._putsF(h,a,t[e<<1]),a+t[1+(e<<1)]},s.F.inflate=function(e,t){var h=Uint8Array;if(e[0]==3&&e[1]==0)return t||new h(0);var a=s.F,g=a._bitsF,w=a._bitsE,r=a._decodeTiny,i=a.makeCodes,n=a.codes2map,f=a._get17,d=a.U,F=t==null;F&&(t=new h(e.length>>>2<<3));for(var M,b,D=0,O=0,_=0,H=0,p=0,T=0,c=0,l=0,m=0;D==0;)if(D=g(e,m,1),O=g(e,m+1,2),m+=3,O!=0){if(F&&(t=s.F._check(t,l+(1<<17))),O==1&&(M=d.flmap,b=d.fdmap,T=511,c=31),O==2){_=w(e,m,5)+257,H=w(e,m+5,5)+1,p=w(e,m+10,4)+4,m+=14;for(var y=0;y<38;y+=2)d.itree[y]=0,d.itree[y+1]=0;var A=1;for(y=0;y<p;y++){var U=w(e,m+3*y,3);d.itree[1+(d.ordr[y]<<1)]=U,U>A&&(A=U)}m+=3*p,i(d.itree,A),n(d.itree,A,d.imap),M=d.lmap,b=d.dmap,m=r(d.imap,(1<<A)-1,_+H,e,m,d.ttree);var v=a._copyOut(d.ttree,0,_,d.ltree);T=(1<<v)-1;var I=a._copyOut(d.ttree,_,H,d.dtree);c=(1<<I)-1,i(d.ltree,v),n(d.ltree,v,M),i(d.dtree,I),n(d.dtree,I,b)}for(;;){var u=M[f(e,m)&T];m+=15&u;var o=u>>>4;if(!(o>>>8))t[l++]=o;else{if(o==256)break;var k=l+o-254;if(o>264){var E=d.ldef[o-257];k=l+(E>>>3)+w(e,m,7&E),m+=7&E}var z=b[f(e,m)&c];m+=15&z;var N=z>>>4,B=d.ddef[N],Q=(B>>>4)+g(e,m,15&B);for(m+=15&B,F&&(t=s.F._check(t,l+(1<<17)));l<k;)t[l]=t[l++-Q],t[l]=t[l++-Q],t[l]=t[l++-Q],t[l]=t[l++-Q];l=k}}}else{7&m&&(m+=8-(7&m));var L=4+(m>>>3),x=e[L-4]|e[L-3]<<8;F&&(t=s.F._check(t,l+x)),t.set(new h(e.buffer,e.byteOffset+L,x),l),m=L+x<<3,l+=x}return t.length==l?t:t.slice(0,l)},s.F._check=function(e,t){var h=e.length;if(t<=h)return e;var a=new Uint8Array(Math.max(h<<1,t));return a.set(e,0),a},s.F._decodeTiny=function(e,t,h,a,g,w){for(var r=s.F._bitsE,i=s.F._get17,n=0;n<h;){var f=e[i(a,g)&t];g+=15&f;var d=f>>>4;if(d<=15)w[n]=d,n++;else{var F=0,M=0;d==16?(M=3+r(a,g,2),g+=2,F=w[n-1]):d==17?(M=3+r(a,g,3),g+=3):d==18&&(M=11+r(a,g,7),g+=7);for(var b=n+M;n<b;)w[n]=F,n++}}return g},s.F._copyOut=function(e,t,h,a){for(var g=0,w=0,r=a.length>>>1;w<h;){var i=e[w+t];a[w<<1]=0,a[1+(w<<1)]=i,i>g&&(g=i),w++}for(;w<r;)a[w<<1]=0,a[1+(w<<1)]=0,w++;return g},s.F.makeCodes=function(e,t){for(var h,a,g,w,r=s.F.U,i=e.length,n=r.bl_count,f=0;f<=t;f++)n[f]=0;for(f=1;f<i;f+=2)n[e[f]]++;var d=r.next_code;for(h=0,n[0]=0,a=1;a<=t;a++)h=h+n[a-1]<<1,d[a]=h;for(g=0;g<i;g+=2)(w=e[g+1])!=0&&(e[g]=d[w],d[w]++)},s.F.codes2map=function(e,t,h){for(var a=e.length,g=s.F.U.rev15,w=0;w<a;w+=2)if(e[w+1]!=0)for(var r=w>>1,i=e[w+1],n=r<<4|i,f=t-i,d=e[w]<<f,F=d+(1<<f);d!=F;)h[g[d]>>>15-t]=n,d++},s.F.revCodes=function(e,t){for(var h=s.F.U.rev15,a=15-t,g=0;g<e.length;g+=2){var w=e[g]<<t-e[g+1];e[g]=h[w]>>>a}},s.F._putsE=function(e,t,h){h<<=7&t;var a=t>>>3;e[a]|=h,e[a+1]|=h>>>8},s.F._putsF=function(e,t,h){h<<=7&t;var a=t>>>3;e[a]|=h,e[a+1]|=h>>>8,e[a+2]|=h>>>16},s.F._bitsE=function(e,t,h){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<h)-1},s.F._bitsF=function(e,t,h){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<h)-1},s.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},s.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},s.F.U=(C=Uint16Array,R=Uint32Array,{next_code:new C(16),bl_count:new C(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new C(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new R(32),flmap:new C(512),fltree:[],fdmap:new C(32),fdtree:[],lmap:new C(32768),ltree:[],ttree:[],dmap:new C(32768),dtree:[],imap:new C(512),itree:[],rev15:new C(32768),lhst:new R(286),dhst:new R(30),ihst:new R(19),lits:new R(15e3),strt:new C(65536),prev:new C(32768)}),function(){for(var e=s.F.U,t=0;t<32768;t++){var h=t;h=(4278255360&(h=(4042322160&(h=(3435973836&(h=(2863311530&h)>>>1|(1431655765&h)<<1))>>>2|(858993459&h)<<2))>>>4|(252645135&h)<<4))>>>8|(16711935&h)<<8,e.rev15[t]=(h>>>16|h<<16)>>>17}function a(g,w,r){for(;w--!=0;)g.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),a(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var st=ot({__proto__:null,default:Te},[Te]);const he=function(){var S={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let f="";for(let d=0;d<n;d++)f+=String.fromCharCode(r[i+d]);return f},writeASCII(r,i,n){for(let f=0;f<n.length;f++)r[i+f]=n.charCodeAt(f)},readBytes(r,i,n){const f=[];for(let d=0;d<n;d++)f.push(r[i+d]);return f},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let f,d="";for(let F=0;F<n;F++)d+=`%${S.pad(r[i+F].toString(16))}`;try{f=decodeURIComponent(d)}catch{return S.readASCII(r,i,n)}return f}};function C(r,i,n,f){const d=i*n,F=t(f),M=Math.ceil(i*F/8),b=new Uint8Array(4*d),D=new Uint32Array(b.buffer),{ctype:O}=f,{depth:_}=f,H=S.readUshort;if(O==6){const E=d<<2;if(_==8)for(var p=0;p<E;p+=4)b[p]=r[p],b[p+1]=r[p+1],b[p+2]=r[p+2],b[p+3]=r[p+3];if(_==16)for(p=0;p<E;p++)b[p]=r[p<<1]}else if(O==2){const E=f.tabs.tRNS;if(E==null){if(_==8)for(p=0;p<d;p++){var T=3*p;D[p]=255<<24|r[T+2]<<16|r[T+1]<<8|r[T]}if(_==16)for(p=0;p<d;p++)T=6*p,D[p]=255<<24|r[T+4]<<16|r[T+2]<<8|r[T]}else{var c=E[0];const z=E[1],N=E[2];if(_==8)for(p=0;p<d;p++){var l=p<<2;T=3*p,D[p]=255<<24|r[T+2]<<16|r[T+1]<<8|r[T],r[T]==c&&r[T+1]==z&&r[T+2]==N&&(b[l+3]=0)}if(_==16)for(p=0;p<d;p++)l=p<<2,T=6*p,D[p]=255<<24|r[T+4]<<16|r[T+2]<<8|r[T],H(r,T)==c&&H(r,T+2)==z&&H(r,T+4)==N&&(b[l+3]=0)}}else if(O==3){const E=f.tabs.PLTE,z=f.tabs.tRNS,N=z?z.length:0;if(_==1)for(var m=0;m<n;m++){var y=m*M,A=m*i;for(p=0;p<i;p++){l=A+p<<2;var U=3*(v=r[y+(p>>3)]>>7-((7&p)<<0)&1);b[l]=E[U],b[l+1]=E[U+1],b[l+2]=E[U+2],b[l+3]=v<N?z[v]:255}}if(_==2)for(m=0;m<n;m++)for(y=m*M,A=m*i,p=0;p<i;p++)l=A+p<<2,U=3*(v=r[y+(p>>2)]>>6-((3&p)<<1)&3),b[l]=E[U],b[l+1]=E[U+1],b[l+2]=E[U+2],b[l+3]=v<N?z[v]:255;if(_==4)for(m=0;m<n;m++)for(y=m*M,A=m*i,p=0;p<i;p++)l=A+p<<2,U=3*(v=r[y+(p>>1)]>>4-((1&p)<<2)&15),b[l]=E[U],b[l+1]=E[U+1],b[l+2]=E[U+2],b[l+3]=v<N?z[v]:255;if(_==8)for(p=0;p<d;p++){var v;l=p<<2,U=3*(v=r[p]),b[l]=E[U],b[l+1]=E[U+1],b[l+2]=E[U+2],b[l+3]=v<N?z[v]:255}}else if(O==4){if(_==8)for(p=0;p<d;p++){l=p<<2;var I=r[u=p<<1];b[l]=I,b[l+1]=I,b[l+2]=I,b[l+3]=r[u+1]}if(_==16)for(p=0;p<d;p++){var u;l=p<<2,I=r[u=p<<2],b[l]=I,b[l+1]=I,b[l+2]=I,b[l+3]=r[u+2]}}else if(O==0)for(c=f.tabs.tRNS?f.tabs.tRNS:-1,m=0;m<n;m++){const E=m*M,z=m*i;if(_==1)for(var o=0;o<i;o++){var k=(I=255*(r[E+(o>>>3)]>>>7-(7&o)&1))==255*c?0:255;D[z+o]=k<<24|I<<16|I<<8|I}else if(_==2)for(o=0;o<i;o++)k=(I=85*(r[E+(o>>>2)]>>>6-((3&o)<<1)&3))==85*c?0:255,D[z+o]=k<<24|I<<16|I<<8|I;else if(_==4)for(o=0;o<i;o++)k=(I=17*(r[E+(o>>>1)]>>>4-((1&o)<<2)&15))==17*c?0:255,D[z+o]=k<<24|I<<16|I<<8|I;else if(_==8)for(o=0;o<i;o++)k=(I=r[E+o])==c?0:255,D[z+o]=k<<24|I<<16|I<<8|I;else if(_==16)for(o=0;o<i;o++)I=r[E+(o<<1)],k=H(r,E+(o<<1))==c?0:255,D[z+o]=k<<24|I<<16|I<<8|I}return b}function R(r,i,n,f){const d=t(r),F=Math.ceil(n*d/8),M=new Uint8Array((F+1+r.interlace)*f);return i=r.tabs.CgBI?e(i,M):s(i,M),r.interlace==0?i=h(i,r,0,n,f):r.interlace==1&&(i=function(D,O){const _=O.width,H=O.height,p=t(O),T=p>>3,c=Math.ceil(_*p/8),l=new Uint8Array(H*c);let m=0;const y=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1];let I=0;for(;I<7;){const o=U[I],k=v[I];let E=0,z=0,N=y[I];for(;N<H;)N+=o,z++;let B=A[I];for(;B<_;)B+=k,E++;const Q=Math.ceil(E*p/8);h(D,O,m,E,z);let L=0,x=y[I];for(;x<H;){let W=A[I],$=m+L*Q<<3;for(;W<_;){var u;if(p==1&&(u=(u=D[$>>3])>>7-(7&$)&1,l[x*c+(W>>3)]|=u<<7-((7&W)<<0)),p==2&&(u=(u=D[$>>3])>>6-(7&$)&3,l[x*c+(W>>2)]|=u<<6-((3&W)<<1)),p==4&&(u=(u=D[$>>3])>>4-(7&$)&15,l[x*c+(W>>1)]|=u<<4-((1&W)<<2)),p>=8){const G=x*c+W*T;for(let j=0;j<T;j++)l[G+j]=D[($>>3)+j]}$+=p,W+=k}L++,x+=o}E*z!=0&&(m+=z*(1+Q)),I+=1}return l}(i,r)),i}function s(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const f=Uint8Array;let d,F,M=0,b=0,D=0,O=0,_=0,H=0,p=0,T=0,c=0;if(i[0]==3&&i[1]==0)return n||new f(0);const l=r.H,m=l.b,y=l.e,A=l.R,U=l.n,v=l.A,I=l.Z,u=l.m,o=n==null;for(o&&(n=new f(i.length>>>2<<5));M==0;)if(M=m(i,c,1),b=m(i,c+1,2),c+=3,b!=0){if(o&&(n=r.H.W(n,T+(1<<17))),b==1&&(d=u.J,F=u.h,H=511,p=31),b==2){D=y(i,c,5)+257,O=y(i,c+5,5)+1,_=y(i,c+10,4)+4,c+=14;let E=1;for(var k=0;k<38;k+=2)u.Q[k]=0,u.Q[k+1]=0;for(k=0;k<_;k++){const B=y(i,c+3*k,3);u.Q[1+(u.X[k]<<1)]=B,B>E&&(E=B)}c+=3*_,U(u.Q,E),v(u.Q,E,u.u),d=u.w,F=u.d,c=A(u.u,(1<<E)-1,D+O,i,c,u.v);const z=l.V(u.v,0,D,u.C);H=(1<<z)-1;const N=l.V(u.v,D,O,u.D);p=(1<<N)-1,U(u.C,z),v(u.C,z,d),U(u.D,N),v(u.D,N,F)}for(;;){const E=d[I(i,c)&H];c+=15&E;const z=E>>>4;if(!(z>>>8))n[T++]=z;else{if(z==256)break;{let N=T+z-254;if(z>264){const W=u.q[z-257];N=T+(W>>>3)+y(i,c,7&W),c+=7&W}const B=F[I(i,c)&p];c+=15&B;const Q=B>>>4,L=u.c[Q],x=(L>>>4)+m(i,c,15&L);for(c+=15&L;T<N;)n[T]=n[T++-x],n[T]=n[T++-x],n[T]=n[T++-x],n[T]=n[T++-x];T=N}}}}else{7&c&&(c+=8-(7&c));const E=4+(c>>>3),z=i[E-4]|i[E-3]<<8;o&&(n=r.H.W(n,T+z)),n.set(new f(i.buffer,i.byteOffset+E,z),T),c=E+z<<3,T+=z}return n.length==T?n:n.slice(0,T)},r.H.W=function(i,n){const f=i.length;if(n<=f)return i;const d=new Uint8Array(f<<1);return d.set(i,0),d},r.H.R=function(i,n,f,d,F,M){const b=r.H.e,D=r.H.Z;let O=0;for(;O<f;){const _=i[D(d,F)&n];F+=15&_;const H=_>>>4;if(H<=15)M[O]=H,O++;else{let p=0,T=0;H==16?(T=3+b(d,F,2),F+=2,p=M[O-1]):H==17?(T=3+b(d,F,3),F+=3):H==18&&(T=11+b(d,F,7),F+=7);const c=O+T;for(;O<c;)M[O]=p,O++}}return F},r.H.V=function(i,n,f,d){let F=0,M=0;const b=d.length>>>1;for(;M<f;){const D=i[M+n];d[M<<1]=0,d[1+(M<<1)]=D,D>F&&(F=D),M++}for(;M<b;)d[M<<1]=0,d[1+(M<<1)]=0,M++;return F},r.H.n=function(i,n){const f=r.H.m,d=i.length;let F,M,b,D;const O=f.j;for(var _=0;_<=n;_++)O[_]=0;for(_=1;_<d;_+=2)O[i[_]]++;const H=f.K;for(F=0,O[0]=0,M=1;M<=n;M++)F=F+O[M-1]<<1,H[M]=F;for(b=0;b<d;b+=2)D=i[b+1],D!=0&&(i[b]=H[D],H[D]++)},r.H.A=function(i,n,f){const d=i.length,F=r.H.m.r;for(let M=0;M<d;M+=2)if(i[M+1]!=0){const b=M>>1,D=i[M+1],O=b<<4|D,_=n-D;let H=i[M]<<_;const p=H+(1<<_);for(;H!=p;)f[F[H]>>>15-n]=O,H++}},r.H.l=function(i,n){const f=r.H.m.r,d=15-n;for(let F=0;F<i.length;F+=2){const M=i[F]<<n-i[F+1];i[F]=f[M]>>>d}},r.H.M=function(i,n,f){f<<=7&n;const d=n>>>3;i[d]|=f,i[d+1]|=f>>>8},r.H.I=function(i,n,f){f<<=7&n;const d=n>>>3;i[d]|=f,i[d+1]|=f>>>8,i[d+2]|=f>>>16},r.H.e=function(i,n,f){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<f)-1},r.H.b=function(i,n,f){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<f)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let d=n;d=(2863311530&d)>>>1|(1431655765&d)<<1,d=(3435973836&d)>>>2|(858993459&d)<<2,d=(4042322160&d)>>>4|(252645135&d)<<4,d=(4278255360&d)>>>8|(16711935&d)<<8,i.r[n]=(d>>>16|d<<16)>>>17}function f(d,F,M){for(;F--!=0;)d.push(0,M)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];f(i._,144,8),f(i._,112,9),f(i._,24,7),f(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),f(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),f(i.Q,19,0),f(i.C,286,0),f(i.D,30,0),f(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function h(r,i,n,f,d){let F=t(i);const M=Math.ceil(f*F/8);let b,D;F=Math.ceil(F/8);let O=r[n],_=0;if(O>1&&(r[n]=[0,0,1][O-2]),O==3)for(_=F;_<M;_++)r[_+1]=r[_+1]+(r[_+1-F]>>>1)&255;for(let H=0;H<d;H++)if(b=n+H*M,D=b+H+1,O=r[D-1],_=0,O==0)for(;_<M;_++)r[b+_]=r[D+_];else if(O==1){for(;_<F;_++)r[b+_]=r[D+_];for(;_<M;_++)r[b+_]=r[D+_]+r[b+_-F]}else if(O==2)for(;_<M;_++)r[b+_]=r[D+_]+r[b+_-M];else if(O==3){for(;_<F;_++)r[b+_]=r[D+_]+(r[b+_-M]>>>1);for(;_<M;_++)r[b+_]=r[D+_]+(r[b+_-M]+r[b+_-F]>>>1)}else{for(;_<F;_++)r[b+_]=r[D+_]+a(0,r[b+_-M],0);for(;_<M;_++)r[b+_]=r[D+_]+a(r[b+_-F],r[b+_-M],r[b+_-F-M])}return r}function a(r,i,n){const f=r+i-n,d=f-r,F=f-i,M=f-n;return d*d<=F*F&&d*d<=M*M?r:F*F<=M*M?i:n}function g(r,i,n){n.width=S.readUint(r,i),i+=4,n.height=S.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function w(r,i,n,f,d,F,M,b,D){const O=Math.min(i,d),_=Math.min(n,F);let H=0,p=0;for(let I=0;I<_;I++)for(let u=0;u<O;u++)if(M>=0&&b>=0?(H=I*i+u<<2,p=(b+I)*d+M+u<<2):(H=(-b+I)*i-M+u<<2,p=I*d+u<<2),D==0)f[p]=r[H],f[p+1]=r[H+1],f[p+2]=r[H+2],f[p+3]=r[H+3];else if(D==1){var T=r[H+3]*.00392156862745098,c=r[H]*T,l=r[H+1]*T,m=r[H+2]*T,y=f[p+3]*(1/255),A=f[p]*y,U=f[p+1]*y,v=f[p+2]*y;const o=1-T,k=T+y*o,E=k==0?0:1/k;f[p+3]=255*k,f[p+0]=(c+A*o)*E,f[p+1]=(l+U*o)*E,f[p+2]=(m+v*o)*E}else if(D==2)T=r[H+3],c=r[H],l=r[H+1],m=r[H+2],y=f[p+3],A=f[p],U=f[p+1],v=f[p+2],T==y&&c==A&&l==U&&m==v?(f[p]=0,f[p+1]=0,f[p+2]=0,f[p+3]=0):(f[p]=c,f[p+1]=l,f[p+2]=m,f[p+3]=T);else if(D==3){if(T=r[H+3],c=r[H],l=r[H+1],m=r[H+2],y=f[p+3],A=f[p],U=f[p+1],v=f[p+2],T==y&&c==A&&l==U&&m==v)continue;if(T<220&&y>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let f=8;const d=S,F=d.readUshort,M=d.readUint,b={tabs:{},frames:[]},D=new Uint8Array(n.length);let O,_=0,H=0;const p=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(n[T]!=p[T])throw"The input is not a PNG file!";for(;f<n.length;){const I=d.readUint(n,f);f+=4;const u=d.readASCII(n,f,4);if(f+=4,u=="IHDR")g(n,f,b);else if(u=="iCCP"){for(var c=f;n[c]!=0;)c++;d.readASCII(n,f,c-f),n[c+1];const o=n.slice(c+2,f+I);let k=null;try{k=s(o)}catch{k=e(o)}b.tabs[u]=k}else if(u=="CgBI")b.tabs[u]=n.slice(f,f+4);else if(u=="IDAT"){for(T=0;T<I;T++)D[_+T]=n[f+T];_+=I}else if(u=="acTL")b.tabs[u]={num_frames:M(n,f),num_plays:M(n,f+4)},O=new Uint8Array(n.length);else if(u=="fcTL"){H!=0&&((v=b.frames[b.frames.length-1]).data=R(b,O.slice(0,H),v.rect.width,v.rect.height),H=0);const o={x:M(n,f+12),y:M(n,f+16),width:M(n,f+4),height:M(n,f+8)};let k=F(n,f+22);k=F(n,f+20)/(k==0?100:k);const E={rect:o,delay:Math.round(1e3*k),dispose:n[f+24],blend:n[f+25]};b.frames.push(E)}else if(u=="fdAT"){for(T=0;T<I-4;T++)O[H+T]=n[f+T+4];H+=I-4}else if(u=="pHYs")b.tabs[u]=[d.readUint(n,f),d.readUint(n,f+4),n[f+8]];else if(u=="cHRM")for(b.tabs[u]=[],T=0;T<8;T++)b.tabs[u].push(d.readUint(n,f+4*T));else if(u=="tEXt"||u=="zTXt"){b.tabs[u]==null&&(b.tabs[u]={});var l=d.nextZero(n,f),m=d.readASCII(n,f,l-f),y=f+I-l-1;if(u=="tEXt")U=d.readASCII(n,l+1,y);else{var A=s(n.slice(l+2,l+2+y));U=d.readUTF8(A,0,A.length)}b.tabs[u][m]=U}else if(u=="iTXt"){b.tabs[u]==null&&(b.tabs[u]={}),l=0,c=f,l=d.nextZero(n,c),m=d.readASCII(n,c,l-c);const o=n[c=l+1];var U;n[c+1],c+=2,l=d.nextZero(n,c),d.readASCII(n,c,l-c),c=l+1,l=d.nextZero(n,c),d.readUTF8(n,c,l-c),y=I-((c=l+1)-f),o==0?U=d.readUTF8(n,c,y):(A=s(n.slice(c,c+y)),U=d.readUTF8(A,0,A.length)),b.tabs[u][m]=U}else if(u=="PLTE")b.tabs[u]=d.readBytes(n,f,I);else if(u=="hIST"){const o=b.tabs.PLTE.length/3;for(b.tabs[u]=[],T=0;T<o;T++)b.tabs[u].push(F(n,f+2*T))}else if(u=="tRNS")b.ctype==3?b.tabs[u]=d.readBytes(n,f,I):b.ctype==0?b.tabs[u]=F(n,f):b.ctype==2&&(b.tabs[u]=[F(n,f),F(n,f+2),F(n,f+4)]);else if(u=="gAMA")b.tabs[u]=d.readUint(n,f)/1e5;else if(u=="sRGB")b.tabs[u]=n[f];else if(u=="bKGD")b.ctype==0||b.ctype==4?b.tabs[u]=[F(n,f)]:b.ctype==2||b.ctype==6?b.tabs[u]=[F(n,f),F(n,f+2),F(n,f+4)]:b.ctype==3&&(b.tabs[u]=n[f]);else if(u=="IEND")break;f+=I,d.readUint(n,f),f+=4}var v;return H!=0&&((v=b.frames[b.frames.length-1]).data=R(b,O.slice(0,H),v.rect.width,v.rect.height)),b.data=R(b,D,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(i){const n=i.width,f=i.height;if(i.tabs.acTL==null)return[C(i.data,n,f,i).buffer];const d=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const F=n*f*4,M=new Uint8Array(F),b=new Uint8Array(F),D=new Uint8Array(F);for(let _=0;_<i.frames.length;_++){const H=i.frames[_],p=H.rect.x,T=H.rect.y,c=H.rect.width,l=H.rect.height,m=C(H.data,c,l,i);if(_!=0)for(var O=0;O<F;O++)D[O]=M[O];if(H.blend==0?w(m,c,l,M,n,f,p,T,0):H.blend==1&&w(m,c,l,M,n,f,p,T,1),d.push(M.buffer.slice(0)),H.dispose!=0){if(H.dispose==1)w(b,c,l,M,n,f,p,T,0);else if(H.dispose==2)for(O=0;O<F;O++)M[O]=D[O]}}return d},_paeth:a,_copyTile:w,_bin:S}}();(function(){const{_copyTile:S}=he,{_bin:C}=he,R=he._paeth;var s={table:function(){const c=new Uint32Array(256);for(let l=0;l<256;l++){let m=l;for(let y=0;y<8;y++)1&m?m=3988292384^m>>>1:m>>>=1;c[l]=m}return c}(),update(c,l,m,y){for(let A=0;A<y;A++)c=s.table[255&(c^l[m+A])]^c>>>8;return c},crc:(c,l,m)=>4294967295^s.update(4294967295,c,l,m)};function e(c,l,m,y){l[m]+=c[0]*y>>4,l[m+1]+=c[1]*y>>4,l[m+2]+=c[2]*y>>4,l[m+3]+=c[3]*y>>4}function t(c){return Math.max(0,Math.min(255,c))}function h(c,l){const m=c[0]-l[0],y=c[1]-l[1],A=c[2]-l[2],U=c[3]-l[3];return m*m+y*y+A*A+U*U}function a(c,l,m,y,A,U,v){v==null&&(v=1);const I=y.length,u=[];for(var o=0;o<I;o++){const x=y[o];u.push([x>>>0&255,x>>>8&255,x>>>16&255,x>>>24&255])}for(o=0;o<I;o++){let x=4294967295;for(var k=0,E=0;E<I;E++){var z=h(u[o],u[E]);E!=o&&z<x&&(x=z,k=E)}}const N=new Uint32Array(A.buffer),B=new Int16Array(l*m*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<Q.length;o++)Q[o]=255*((Q[o]+.5)/16-.5);for(let x=0;x<m;x++)for(let W=0;W<l;W++){var L;o=4*(x*l+W),v!=2?L=[t(c[o]+B[o]),t(c[o+1]+B[o+1]),t(c[o+2]+B[o+2]),t(c[o+3]+B[o+3])]:(z=Q[4*(3&x)+(3&W)],L=[t(c[o]+z),t(c[o+1]+z),t(c[o+2]+z),t(c[o+3]+z)]),k=0;let $=16777215;for(E=0;E<I;E++){const P=h(L,u[E]);P<$&&($=P,k=E)}const G=u[k],j=[L[0]-G[0],L[1]-G[1],L[2]-G[2],L[3]-G[3]];v==1&&(W!=l-1&&e(j,B,o+4,7),x!=m-1&&(W!=0&&e(j,B,o+4*l-4,3),e(j,B,o+4*l,5),W!=l-1&&e(j,B,o+4*l+4,1))),U[o>>2]=k,N[o>>2]=y[k]}}function g(c,l,m,y,A){A==null&&(A={});const{crc:U}=s,v=C.writeUint,I=C.writeUshort,u=C.writeASCII;let o=8;const k=c.frames.length>1;let E,z=!1,N=33+(k?20:0);if(A.sRGB!=null&&(N+=13),A.pHYs!=null&&(N+=21),A.iCCP!=null&&(E=pako.deflate(A.iCCP),N+=21+E.length+4),c.ctype==3){for(var B=c.plte.length,Q=0;Q<B;Q++)c.plte[Q]>>>24!=255&&(z=!0);N+=8+3*B+4+(z?8+1*B+4:0)}for(var L=0;L<c.frames.length;L++)k&&(N+=38),N+=(G=c.frames[L]).cimg.length+12,L!=0&&(N+=4);N+=12;const x=new Uint8Array(N),W=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)x[Q]=W[Q];if(v(x,o,13),o+=4,u(x,o,"IHDR"),o+=4,v(x,o,l),o+=4,v(x,o,m),o+=4,x[o]=c.depth,o++,x[o]=c.ctype,o++,x[o]=0,o++,x[o]=0,o++,x[o]=0,o++,v(x,o,U(x,o-17,17)),o+=4,A.sRGB!=null&&(v(x,o,1),o+=4,u(x,o,"sRGB"),o+=4,x[o]=A.sRGB,o++,v(x,o,U(x,o-5,5)),o+=4),A.iCCP!=null){const j=13+E.length;v(x,o,j),o+=4,u(x,o,"iCCP"),o+=4,u(x,o,"ICC profile"),o+=11,o+=2,x.set(E,o),o+=E.length,v(x,o,U(x,o-(j+4),j+4)),o+=4}if(A.pHYs!=null&&(v(x,o,9),o+=4,u(x,o,"pHYs"),o+=4,v(x,o,A.pHYs[0]),o+=4,v(x,o,A.pHYs[1]),o+=4,x[o]=A.pHYs[2],o++,v(x,o,U(x,o-13,13)),o+=4),k&&(v(x,o,8),o+=4,u(x,o,"acTL"),o+=4,v(x,o,c.frames.length),o+=4,v(x,o,A.loop!=null?A.loop:0),o+=4,v(x,o,U(x,o-12,12)),o+=4),c.ctype==3){for(v(x,o,3*(B=c.plte.length)),o+=4,u(x,o,"PLTE"),o+=4,Q=0;Q<B;Q++){const j=3*Q,P=c.plte[Q],V=255&P,ee=P>>>8&255,we=P>>>16&255;x[o+j+0]=V,x[o+j+1]=ee,x[o+j+2]=we}if(o+=3*B,v(x,o,U(x,o-3*B-4,3*B+4)),o+=4,z){for(v(x,o,B),o+=4,u(x,o,"tRNS"),o+=4,Q=0;Q<B;Q++)x[o+Q]=c.plte[Q]>>>24&255;o+=B,v(x,o,U(x,o-B-4,B+4)),o+=4}}let $=0;for(L=0;L<c.frames.length;L++){var G=c.frames[L];k&&(v(x,o,26),o+=4,u(x,o,"fcTL"),o+=4,v(x,o,$++),o+=4,v(x,o,G.rect.width),o+=4,v(x,o,G.rect.height),o+=4,v(x,o,G.rect.x),o+=4,v(x,o,G.rect.y),o+=4,I(x,o,y[L]),o+=2,I(x,o,1e3),o+=2,x[o]=G.dispose,o++,x[o]=G.blend,o++,v(x,o,U(x,o-30,30)),o+=4);const j=G.cimg;v(x,o,(B=j.length)+(L==0?0:4)),o+=4;const P=o;u(x,o,L==0?"IDAT":"fdAT"),o+=4,L!=0&&(v(x,o,$++),o+=4),x.set(j,o),o+=B,v(x,o,U(x,P,o-P)),o+=4}return v(x,o,0),o+=4,u(x,o,"IEND"),o+=4,v(x,o,U(x,o-4,4)),o+=4,x.buffer}function w(c,l,m){for(let y=0;y<c.frames.length;y++){const A=c.frames[y];A.rect.width;const U=A.rect.height,v=new Uint8Array(U*A.bpl+U);A.cimg=f(A.img,U,A.bpp,A.bpl,v,l,m)}}function r(c,l,m,y,A){const U=A[0],v=A[1],I=A[2],u=A[3],o=A[4],k=A[5];let E=6,z=8,N=255;for(var B=0;B<c.length;B++){const re=new Uint8Array(c[B]);for(var Q=re.length,L=0;L<Q;L+=4)N&=re[L+3]}const x=N!=255,W=function(Z,q,te,oe,Y,se){const J=[];for(var K=0;K<Z.length;K++){const ae=new Uint8Array(Z[K]),ue=new Uint32Array(ae.buffer);var le;let ce=0,ve=0,pe=q,Ue=te,De=oe?1:0;if(K!=0){const rt=se||oe||K==1||J[K-2].dispose!=0?1:2;let Le=0,We=1e9;for(let Me=0;Me<rt;Me++){var me=new Uint8Array(Z[K-1-Me]);const it=new Uint32Array(Z[K-1-Me]);let be=q,Ae=te,_e=-1,Se=-1;for(let Fe=0;Fe<te;Fe++)for(let Ee=0;Ee<q;Ee++)ue[ie=Fe*q+Ee]!=it[ie]&&(Ee<be&&(be=Ee),Ee>_e&&(_e=Ee),Fe<Ae&&(Ae=Fe),Fe>Se&&(Se=Fe));_e==-1&&(be=Ae=_e=Se=0),Y&&((1&be)==1&&be--,(1&Ae)==1&&Ae--);const je=(_e-be+1)*(Se-Ae+1);je<We&&(We=je,Le=Me,ce=be,ve=Ae,pe=_e-be+1,Ue=Se-Ae+1)}me=new Uint8Array(Z[K-1-Le]),Le==1&&(J[K-1].dispose=2),le=new Uint8Array(pe*Ue*4),S(me,q,te,le,pe,Ue,-ce,-ve,0),De=S(ae,q,te,le,pe,Ue,-ce,-ve,3)?1:0,De==1?n(ae,q,te,le,{x:ce,y:ve,width:pe,height:Ue}):S(ae,q,te,le,pe,Ue,-ce,-ve,0)}else le=ae.slice(0);J.push({rect:{x:ce,y:ve,width:pe,height:Ue},img:le,blend:De,dispose:0})}if(oe)for(K=0;K<J.length;K++){if((ye=J[K]).blend==1)continue;const ae=ye.rect,ue=J[K-1].rect,ce=Math.min(ae.x,ue.x),ve=Math.min(ae.y,ue.y),pe={x:ce,y:ve,width:Math.max(ae.x+ae.width,ue.x+ue.width)-ce,height:Math.max(ae.y+ae.height,ue.y+ue.height)-ve};J[K-1].dispose=1,K-1!=0&&i(Z,q,te,J,K-1,pe,Y),i(Z,q,te,J,K,pe,Y)}let Re=0;if(Z.length!=1)for(var ie=0;ie<J.length;ie++){var ye;Re+=(ye=J[ie]).rect.width*ye.rect.height}return J}(c,l,m,U,v,I),$={},G=[],j=[];if(y!=0){const re=[];for(L=0;L<W.length;L++)re.push(W[L].img.buffer);const Z=function(Y){let se=0;for(var J=0;J<Y.length;J++)se+=Y[J].byteLength;const K=new Uint8Array(se);let le=0;for(J=0;J<Y.length;J++){const me=new Uint8Array(Y[J]),Re=me.length;for(let ie=0;ie<Re;ie+=4){let ye=me[ie],ae=me[ie+1],ue=me[ie+2];const ce=me[ie+3];ce==0&&(ye=ae=ue=0),K[le+ie]=ye,K[le+ie+1]=ae,K[le+ie+2]=ue,K[le+ie+3]=ce}le+=Re}return K.buffer}(re),q=F(Z,y);for(L=0;L<q.plte.length;L++)G.push(q.plte[L].est.rgba);let te=0;for(L=0;L<W.length;L++){const oe=(V=W[L]).img.length;var P=new Uint8Array(q.inds.buffer,te>>2,oe>>2);j.push(P);const Y=new Uint8Array(q.abuf,te,oe);k&&a(V.img,V.rect.width,V.rect.height,G,Y,P),V.img.set(Y),te+=oe}}else for(B=0;B<W.length;B++){var V=W[B];const re=new Uint32Array(V.img.buffer);var ee=V.rect.width;for(Q=re.length,P=new Uint8Array(Q),j.push(P),L=0;L<Q;L++){const Z=re[L];if(L!=0&&Z==re[L-1])P[L]=P[L-1];else if(L>ee&&Z==re[L-ee])P[L]=P[L-ee];else{let q=$[Z];if(q==null&&($[Z]=q=G.length,G.push(Z),G.length>=300))break;P[L]=q}}}const we=G.length;for(we<=256&&o==0&&(z=we<=2?1:we<=4?2:we<=16?4:8,z=Math.max(z,u)),B=0;B<W.length;B++){(V=W[B]).rect.x,V.rect.y,ee=V.rect.width;const re=V.rect.height;let Z=V.img;new Uint32Array(Z.buffer);let q=4*ee,te=4;if(we<=256&&o==0){q=Math.ceil(z*ee/8);var de=new Uint8Array(q*re);const oe=j[B];for(let Y=0;Y<re;Y++){L=Y*q;const se=Y*ee;if(z==8)for(var X=0;X<ee;X++)de[L+X]=oe[se+X];else if(z==4)for(X=0;X<ee;X++)de[L+(X>>1)]|=oe[se+X]<<4-4*(1&X);else if(z==2)for(X=0;X<ee;X++)de[L+(X>>2)]|=oe[se+X]<<6-2*(3&X);else if(z==1)for(X=0;X<ee;X++)de[L+(X>>3)]|=oe[se+X]<<7-1*(7&X)}Z=de,E=3,te=1}else if(x==0&&W.length==1){de=new Uint8Array(ee*re*3);const oe=ee*re;for(L=0;L<oe;L++){const Y=3*L,se=4*L;de[Y]=Z[se],de[Y+1]=Z[se+1],de[Y+2]=Z[se+2]}Z=de,E=2,te=3,q=3*ee}V.img=Z,V.bpl=q,V.bpp=te}return{ctype:E,depth:z,plte:G,frames:W}}function i(c,l,m,y,A,U,v){const I=Uint8Array,u=Uint32Array,o=new I(c[A-1]),k=new u(c[A-1]),E=A+1<c.length?new I(c[A+1]):null,z=new I(c[A]),N=new u(z.buffer);let B=l,Q=m,L=-1,x=-1;for(let $=0;$<U.height;$++)for(let G=0;G<U.width;G++){const j=U.x+G,P=U.y+$,V=P*l+j,ee=N[V];ee==0||y[A-1].dispose==0&&k[V]==ee&&(E==null||E[4*V+3]!=0)||(j<B&&(B=j),j>L&&(L=j),P<Q&&(Q=P),P>x&&(x=P))}L==-1&&(B=Q=L=x=0),v&&((1&B)==1&&B--,(1&Q)==1&&Q--),U={x:B,y:Q,width:L-B+1,height:x-Q+1};const W=y[A];W.rect=U,W.blend=1,W.img=new Uint8Array(U.width*U.height*4),y[A-1].dispose==0?(S(o,l,m,W.img,U.width,U.height,-U.x,-U.y,0),n(z,l,m,W.img,U)):S(z,l,m,W.img,U.width,U.height,-U.x,-U.y,0)}function n(c,l,m,y,A){S(c,l,m,y,A.width,A.height,-A.x,-A.y,2)}function f(c,l,m,y,A,U,v){const I=[];let u,o=[0,1,2,3,4];U!=-1?o=[U]:(l*y>5e5||m==1)&&(o=[0]),v&&(u={level:0});const k=st;for(var E=0;E<o.length;E++){for(let B=0;B<l;B++)d(A,c,B,y,m,o[E]);I.push(k.deflate(A,u))}let z,N=1e9;for(E=0;E<I.length;E++)I[E].length<N&&(z=E,N=I[E].length);return I[z]}function d(c,l,m,y,A,U){const v=m*y;let I=v+m;if(c[I]=U,I++,U==0)if(y<500)for(var u=0;u<y;u++)c[I+u]=l[v+u];else c.set(new Uint8Array(l.buffer,v,y),I);else if(U==1){for(u=0;u<A;u++)c[I+u]=l[v+u];for(u=A;u<y;u++)c[I+u]=l[v+u]-l[v+u-A]+256&255}else if(m==0){for(u=0;u<A;u++)c[I+u]=l[v+u];if(U==2)for(u=A;u<y;u++)c[I+u]=l[v+u];if(U==3)for(u=A;u<y;u++)c[I+u]=l[v+u]-(l[v+u-A]>>1)+256&255;if(U==4)for(u=A;u<y;u++)c[I+u]=l[v+u]-R(l[v+u-A],0,0)+256&255}else{if(U==2)for(u=0;u<y;u++)c[I+u]=l[v+u]+256-l[v+u-y]&255;if(U==3){for(u=0;u<A;u++)c[I+u]=l[v+u]+256-(l[v+u-y]>>1)&255;for(u=A;u<y;u++)c[I+u]=l[v+u]+256-(l[v+u-y]+l[v+u-A]>>1)&255}if(U==4){for(u=0;u<A;u++)c[I+u]=l[v+u]+256-R(0,l[v+u-y],0)&255;for(u=A;u<y;u++)c[I+u]=l[v+u]+256-R(l[v+u-A],l[v+u-y],l[v+u-A-y])&255}}}function F(c,l){const m=new Uint8Array(c),y=m.slice(0),A=new Uint32Array(y.buffer),U=M(y,l),v=U[0],I=U[1],u=m.length,o=new Uint8Array(u>>2);let k;if(m.length<2e7)for(var E=0;E<u;E+=4)k=b(v,z=m[E]*(1/255),N=m[E+1]*(1/255),B=m[E+2]*(1/255),Q=m[E+3]*(1/255)),o[E>>2]=k.ind,A[E>>2]=k.est.rgba;else for(E=0;E<u;E+=4){var z=m[E]*.00392156862745098,N=m[E+1]*(1/255),B=m[E+2]*(1/255),Q=m[E+3]*(1/255);for(k=v;k.left;)k=D(k.est,z,N,B,Q)<=0?k.left:k.right;o[E>>2]=k.ind,A[E>>2]=k.est.rgba}return{abuf:y.buffer,inds:o,plte:I}}function M(c,l,m){m==null&&(m=1e-4);const y=new Uint32Array(c.buffer),A={i0:0,i1:c.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=H(c,A.i0,A.i1),A.est=p(A.bst);const U=[A];for(;U.length<l;){let I=0,u=0;for(var v=0;v<U.length;v++)U[v].est.L>I&&(I=U[v].est.L,u=v);if(I<m)break;const o=U[u],k=O(c,y,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=k||o.i1<=k){o.est.L=0;continue}const E={i0:o.i0,i1:k,bst:null,est:null,tdst:0,left:null,right:null};E.bst=H(c,E.i0,E.i1),E.est=p(E.bst);const z={i0:k,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:o.bst.N-E.bst.N},v=0;v<16;v++)z.bst.R[v]=o.bst.R[v]-E.bst.R[v];for(v=0;v<4;v++)z.bst.m[v]=o.bst.m[v]-E.bst.m[v];z.est=p(z.bst),o.left=E,o.right=z,U[u]=E,U.push(z)}for(U.sort((I,u)=>u.bst.N-I.bst.N),v=0;v<U.length;v++)U[v].ind=v;return[A,U]}function b(c,l,m,y,A){if(c.left==null)return c.tdst=function(E,z,N,B,Q){const L=z-E[0],x=N-E[1],W=B-E[2],$=Q-E[3];return L*L+x*x+W*W+$*$}(c.est.q,l,m,y,A),c;const U=D(c.est,l,m,y,A);let v=c.left,I=c.right;U>0&&(v=c.right,I=c.left);const u=b(v,l,m,y,A);if(u.tdst<=U*U)return u;const o=b(I,l,m,y,A);return o.tdst<u.tdst?o:u}function D(c,l,m,y,A){const{e:U}=c;return U[0]*l+U[1]*m+U[2]*y+U[3]*A-c.eMq}function O(c,l,m,y,A,U){for(y-=4;m<y;){for(;_(c,m,A)<=U;)m+=4;for(;_(c,y,A)>U;)y-=4;if(m>=y)break;const v=l[m>>2];l[m>>2]=l[y>>2],l[y>>2]=v,m+=4,y-=4}for(;_(c,m,A)>U;)m-=4;return m+4}function _(c,l,m){return c[l]*m[0]+c[l+1]*m[1]+c[l+2]*m[2]+c[l+3]*m[3]}function H(c,l,m){const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],U=m-l>>2;for(let v=l;v<m;v+=4){const I=c[v]*.00392156862745098,u=c[v+1]*(1/255),o=c[v+2]*(1/255),k=c[v+3]*(1/255);A[0]+=I,A[1]+=u,A[2]+=o,A[3]+=k,y[0]+=I*I,y[1]+=I*u,y[2]+=I*o,y[3]+=I*k,y[5]+=u*u,y[6]+=u*o,y[7]+=u*k,y[10]+=o*o,y[11]+=o*k,y[15]+=k*k}return y[4]=y[1],y[8]=y[2],y[9]=y[6],y[12]=y[3],y[13]=y[7],y[14]=y[11],{R:y,m:A,N:U}}function p(c){const{R:l}=c,{m}=c,{N:y}=c,A=m[0],U=m[1],v=m[2],I=m[3],u=y==0?0:1/y,o=[l[0]-A*A*u,l[1]-A*U*u,l[2]-A*v*u,l[3]-A*I*u,l[4]-U*A*u,l[5]-U*U*u,l[6]-U*v*u,l[7]-U*I*u,l[8]-v*A*u,l[9]-v*U*u,l[10]-v*v*u,l[11]-v*I*u,l[12]-I*A*u,l[13]-I*U*u,l[14]-I*v*u,l[15]-I*I*u],k=o,E=T;let z=[Math.random(),Math.random(),Math.random(),Math.random()],N=0,B=0;if(y!=0)for(let L=0;L<16&&(z=E.multVec(k,z),B=Math.sqrt(E.dot(z,z)),z=E.sml(1/B,z),!(L!=0&&Math.abs(B-N)<1e-9));L++)N=B;const Q=[A*u,U*u,v*u,I*u];return{Cov:o,q:Q,e:z,L:N,eMq255:E.dot(E.sml(255,Q),z),eMq:E.dot(z,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var T={multVec:(c,l)=>[c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],c[4]*l[0]+c[5]*l[1]+c[6]*l[2]+c[7]*l[3],c[8]*l[0]+c[9]*l[1]+c[10]*l[2]+c[11]*l[3],c[12]*l[0]+c[13]*l[1]+c[14]*l[2]+c[15]*l[3]],dot:(c,l)=>c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3],sml:(c,l)=>[c*l[0],c*l[1],c*l[2],c*l[3]]};he.encode=function(l,m,y,A,U,v,I){A==null&&(A=0),I==null&&(I=!1);const u=r(l,m,y,A,[!1,!1,!1,0,I,!1]);return w(u,-1),g(u,m,y,U,v)},he.encodeLL=function(l,m,y,A,U,v,I,u){const o={ctype:0+(A==1?0:2)+(U==0?0:4),depth:v,frames:[]},k=(A+U)*v,E=k*m;for(let z=0;z<l.length;z++)o.frames.push({rect:{x:0,y:0,width:m,height:y},img:new Uint8Array(l[z]),blend:0,dispose:1,bpp:Math.ceil(k/8),bpl:Math.ceil(E/8)});return w(o,0,!0),g(o,m,y,I,u)},he.encode.compress=r,he.encode.dither=a,he.quantize=F,he.quantize.getKDtree=M,he.quantize.getNearest=b})();const qe={toArrayBuffer(S,C){const R=S.width,s=S.height,e=R<<2,t=S.getContext("2d").getImageData(0,0,R,s),h=new Uint32Array(t.data.buffer),a=(32*R+31)/32<<2,g=a*s,w=122+g,r=new ArrayBuffer(w),i=new DataView(r),n=1<<20;let f,d,F,M,b=n,D=0,O=0,_=0;function H(c){i.setUint16(O,c,!0),O+=2}function p(c){i.setUint32(O,c,!0),O+=4}function T(c){O+=c}H(19778),p(w),T(4),p(122),p(108),p(R),p(-s>>>0),H(1),H(32),p(3),p(g),p(2835),p(2835),T(8),p(16711680),p(65280),p(255),p(4278190080),p(1466527264),function c(){for(;D<s&&b>0;){for(M=122+D*a,f=0;f<e;)b--,d=h[_++],F=d>>>24,i.setUint32(M+f,d<<8|F),f+=4;D++}_<h.length?(b=n,setTimeout(c,qe._dly)):C(r)}()},toBlob(S,C){this.toArrayBuffer(S,R=>{C(new Blob([R],{type:"image/bmp"}))})},_dly:9};var fe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},lt={[fe.CHROME]:16384,[fe.FIREFOX]:11180,[fe.DESKTOP_SAFARI]:16384,[fe.IE]:8192,[fe.IOS]:4096,[fe.ETC]:8192};const Qe=typeof window<"u",Ke=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Oe=Qe&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ct=(Qe||Ke)&&(Oe&&Oe.getOriginalSymbol(window,"File")||typeof File<"u"&&File),$e=(Qe||Ke)&&(Oe&&Oe.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ne(S,C,R=Date.now()){return new Promise(s=>{const e=S.split(","),t=e[0].match(/:(.*?);/)[1],h=globalThis.atob(e[1]);let a=h.length;const g=new Uint8Array(a);for(;a--;)g[a]=h.charCodeAt(a);const w=new Blob([g],{type:t});w.name=C,w.lastModified=R,s(w)})}function Ze(S){return new Promise((C,R)=>{const s=new $e;s.onload=()=>C(s.result),s.onerror=e=>R(e),s.readAsDataURL(S)})}function Xe(S){return new Promise((C,R)=>{const s=new Image;s.onload=()=>C(s),s.onerror=e=>R(e),s.src=S})}function Ie(){if(Ie.cachedResult!==void 0)return Ie.cachedResult;let S=fe.ETC;const{userAgent:C}=navigator;return/Chrom(e|ium)/i.test(C)?S=fe.CHROME:/iP(ad|od|hone)/i.test(C)&&/WebKit/i.test(C)?S=fe.IOS:/Safari/i.test(C)?S=fe.DESKTOP_SAFARI:/Firefox/i.test(C)?S=fe.FIREFOX:(/MSIE/i.test(C)||document.documentMode)&&(S=fe.IE),Ie.cachedResult=S,Ie.cachedResult}function Ve(S,C){const R=Ie(),s=lt[R];let e=S,t=C,h=e*t;const a=e>t?t/e:e/t;for(;h>s*s;){const g=(s+e)/2,w=(s+t)/2;g<w?(t=w,e=w*a):(t=g*a,e=g),h=e*t}return{width:e,height:t}}function He(S,C){let R,s;try{if(R=new OffscreenCanvas(S,C),s=R.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{R=document.createElement("canvas"),s=R.getContext("2d")}return R.width=S,R.height=C,[R,s]}function Ye(S,C){const{width:R,height:s}=Ve(S.width,S.height),[e,t]=He(R,s);return C&&/jpe?g/.test(C)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(S,0,0,e.width,e.height),e}function xe(){return xe.cachedResult!==void 0||(xe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xe.cachedResult}function ke(S,C={}){return new Promise(function(R,s){let e,t;var h=function(){try{return t=Ye(e,C.fileType||S.type),R([e,t])}catch(g){return s(g)}},a=function(g){try{var w=function(r){try{throw r}catch(i){return s(i)}};try{let r;return Ze(S).then(function(i){try{return r=i,Xe(r).then(function(n){try{return e=n,function(){try{return h()}catch(f){return s(f)}}()}catch(f){return w(f)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return s(r)}};try{if(xe()||[fe.DESKTOP_SAFARI,fe.MOBILE_SAFARI].includes(Ie()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(S).then(function(g){try{return e=g,h()}catch{return a()}},a)}catch{a()}})}function ze(S,C,R,s,e=1){return new Promise(function(t,h){let a;if(C==="image/png"){let w,r,i;return w=S.getContext("2d"),{data:r}=w.getImageData(0,0,S.width,S.height),i=he.encode([r.buffer],S.width,S.height,4096*e),a=new Blob([i],{type:C}),a.name=R,a.lastModified=s,g.call(this)}{let w=function(){return g.call(this)};if(C==="image/bmp")return new Promise(r=>qe.toBlob(S,r)).then((function(r){try{return a=r,a.name=R,a.lastModified=s,w.call(this)}catch(i){return h(i)}}).bind(this),h);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&S instanceof OffscreenCanvas)return S.convertToBlob({type:C,quality:e}).then((function(i){try{return a=i,a.name=R,a.lastModified=s,r.call(this)}catch(n){return h(n)}}).bind(this),h);{let i;return i=S.toDataURL(C,e),Ne(i,R,s).then((function(n){try{return a=n,r.call(this)}catch(f){return h(f)}}).bind(this),h)}}}function g(){return t(a)}})}function ge(S){S.width=0,S.height=0}function Ce(){return new Promise(function(S,C){let R,s,e,t;return Ce.cachedResult!==void 0?S(Ce.cachedResult):Ne("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(h){try{return R=h,ke(R).then(function(a){try{return s=a[1],ze(s,R.type,R.name,R.lastModified).then(function(g){try{return e=g,ge(s),ke(e).then(function(w){try{return t=w[0],Ce.cachedResult=t.width===1&&t.height===2,S(Ce.cachedResult)}catch(r){return C(r)}},C)}catch(w){return C(w)}},C)}catch(g){return C(g)}},C)}catch(a){return C(a)}},C)})}function Je(S){return new Promise((C,R)=>{const s=new $e;s.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return C(-2);const h=t.byteLength;let a=2;for(;a<h;){if(t.getUint16(a+2,!1)<=8)return C(-1);const g=t.getUint16(a,!1);if(a+=2,g==65505){if(t.getUint32(a+=2,!1)!=1165519206)return C(-1);const w=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,w);const r=t.getUint16(a,w);a+=2;for(let i=0;i<r;i++)if(t.getUint16(a+12*i,w)==274)return C(t.getUint16(a+12*i+8,w))}else{if((65280&g)!=65280)break;a+=t.getUint16(a,!1)}}return C(-1)},s.onerror=e=>R(e),s.readAsArrayBuffer(S)})}function et(S,C){const{width:R}=S,{height:s}=S,{maxWidthOrHeight:e}=C;let t,h=S;return isFinite(e)&&(R>e||s>e)&&([h,t]=He(R,s),R>s?(h.width=e,h.height=s/R*e):(h.width=R/s*e,h.height=e),t.drawImage(S,0,0,h.width,h.height),ge(S)),h}function tt(S,C){const{width:R}=S,{height:s}=S,[e,t]=He(R,s);switch(C>4&&C<9?(e.width=s,e.height=R):(e.width=R,e.height=s),C){case 2:t.transform(-1,0,0,1,R,0);break;case 3:t.transform(-1,0,0,-1,R,s);break;case 4:t.transform(1,0,0,-1,0,s);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,s,0);break;case 7:t.transform(0,-1,-1,0,s,R);break;case 8:t.transform(0,-1,1,0,0,R)}return t.drawImage(S,0,0,R,s),ge(S),e}function Ge(S,C,R=0){return new Promise(function(s,e){let t,h,a,g,w,r,i,n,f,d,F,M,b,D,O,_,H,p,T,c;function l(y=5){if(C.signal&&C.signal.aborted)throw C.signal.reason;t+=y,C.onProgress(Math.min(t,100))}function m(y){if(C.signal&&C.signal.aborted)throw C.signal.reason;t=Math.min(Math.max(y,t),100),C.onProgress(t)}return t=R,h=C.maxIteration||10,a=1024*C.maxSizeMB*1024,l(),ke(S,C).then((function(y){try{return[,g]=y,l(),w=et(g,C),l(),new Promise(function(A,U){var v;if(!(v=C.exifOrientation))return Je(S).then((function(u){try{return v=u,I.call(this)}catch(o){return U(o)}}).bind(this),U);function I(){return A(v)}return I.call(this)}).then((function(A){try{return r=A,l(),Ce().then((function(U){try{return i=U?w:tt(w,r),l(),n=C.initialQuality||1,f=C.fileType||S.type,ze(i,f,S.name,S.lastModified,n).then((function(v){try{{let u=function(){if(h--&&(O>a||O>b)){let k,E;return k=c?.95*T.width:T.width,E=c?.95*T.height:T.height,[H,p]=He(k,E),p.drawImage(T,0,0,k,E),n*=f==="image/png"?.85:.95,ze(H,f,S.name,S.lastModified,n).then(function(z){try{return _=z,ge(T),T=H,O=_.size,m(Math.min(99,Math.floor((D-O)/(D-a)*100))),u}catch(N){return e(N)}},e)}return[1]},o=function(){return ge(T),ge(H),ge(w),ge(i),ge(g),m(100),s(_)};if(d=v,l(),F=d.size>a,M=d.size>S.size,!F&&!M)return m(100),s(d);var I;return b=S.size,D=d.size,O=D,T=i,c=!C.alwaysKeepResolution&&F,(I=(function(k){for(;k;){if(k.then)return void k.then(I,e);try{if(k.pop){if(k.length)return k.pop()?o.call(this):k;k=u}else k=k.call(this)}catch(E){return e(E)}}}).bind(this))(u)}}catch(u){return e(u)}}).bind(this),e)}catch(v){return e(v)}}).bind(this),e)}catch(U){return e(U)}}).bind(this),e)}catch(A){return e(A)}}).bind(this),e)})}const ut=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Be;function ht(S,C){return new Promise((R,s)=>{Be||(Be=function(h){const a=[];return a.push(h),URL.createObjectURL(new Blob(a))}(ut));const e=new Worker(Be);e.addEventListener("message",function(h){if(C.signal&&C.signal.aborted)e.terminate();else if(h.data.progress===void 0){if(h.data.error)return s(new Error(h.data.error)),void e.terminate();R(h.data.file),e.terminate()}else C.onProgress(h.data.progress)}),e.addEventListener("error",s),C.signal&&C.signal.addEventListener("abort",()=>{s(C.signal.reason),e.terminate()}),e.postMessage({file:S,imageCompressionLibUrl:C.libURL,options:{...C,onProgress:void 0,signal:void 0}})})}function ne(S,C){return new Promise(function(R,s){let e,t,h,a,g,w;if(e={...C},h=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=f=>{h=f,typeof a=="function"&&a(h)},!(S instanceof Blob||S instanceof ct))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(S.type))return s(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||w)return Ge(S,e).then((function(f){try{return t=f,n.call(this)}catch(d){return s(d)}}).bind(this),s);var r=(function(){try{return n.call(this)}catch(f){return s(f)}}).bind(this),i=function(f){try{return Ge(S,e).then(function(d){try{return t=d,r()}catch(F){return s(F)}},s)}catch(d){return s(d)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ht(S,e).then(function(f){try{return t=f,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=S.name,t.lastModified=S.lastModified}catch{}try{e.preserveExif&&S.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===S.type)&&(t=Pe(S,t))}catch{}return R(t)}})}ne.getDataUrlFromFile=Ze,ne.getFilefromDataUrl=Ne,ne.loadImage=Xe,ne.drawImageInCanvas=Ye,ne.drawFileInCanvas=ke,ne.canvasToFile=ze,ne.getExifOrientation=Je,ne.handleMaxWidthOrHeight=et,ne.followExifOrientation=tt,ne.cleanupCanvasMemory=ge,ne.isAutoOrientationInBrowser=Ce,ne.approximateBelowMaximumCanvasSizeOfBrowser=Ve,ne.copyExifWithoutOrientation=Pe,ne.getBrowserName=Ie,ne.version="2.0.2";const nt={maxSizeMB:.5,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.8};async function dt(S,C){const R=S.size;C==null||C({percent:0,originalSize:R,isCompressing:!0});try{const s=await ne(S,{...nt,onProgress:h=>{C==null||C({percent:h,originalSize:R,isCompressing:!0})}}),e=s.size,t=e/R*100;return C==null||C({percent:100,originalSize:R,currentSize:e,isCompressing:!1}),{file:s,originalSize:R,compressedSize:e,compressionRatio:t}}catch(s){return console.error("Image compression failed:",s),C==null||C({percent:100,originalSize:R,currentSize:R,isCompressing:!1}),{file:S,originalSize:R,compressedSize:R,compressionRatio:100}}}async function pt(S,C){const R=S.map((s,e)=>dt(s,t=>{C==null||C(e,S.length,t)}));return Promise.all(R)}function gt(S){if(S===0)return"0 Bytes";const C=1024,R=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(S)/Math.log(C));return`${parseFloat((S/Math.pow(C,s)).toFixed(2))} ${R[s]}`}function vt(S){return S.type.startsWith("image/")}async function mt(S,C,R){const s=S.size;R==null||R({percent:0,originalSize:s,isCompressing:!0});try{const e=await ne(S,{...nt,...C,onProgress:a=>{R==null||R({percent:a,originalSize:s,isCompressing:!0})}}),t=e.size,h=t/s*100;return R==null||R({percent:100,originalSize:s,currentSize:t,isCompressing:!1}),{file:e,originalSize:s,compressedSize:t,compressionRatio:h}}catch(e){return console.error("Image compression failed:",e),R==null||R({percent:100,originalSize:s,currentSize:s,isCompressing:!1}),{file:S,originalSize:s,compressedSize:s,compressionRatio:100}}}export{pt as a,mt as b,dt as c,gt as f,vt as i};

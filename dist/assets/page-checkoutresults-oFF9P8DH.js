import{r as o,j as e,aQ as j,aS as i,aY as f,av as b,Y as k,ao as y,aq as N}from"./react-vendor-z9ssXL8w.js";import{B as l,x as g,h as w}from"./page-addrecipe-Pb6dTsbS.js";import{w as h}from"./services-BpcRR5rK.js";import{u as m}from"./vendor-Clj4czuh.js";import"./ui-vendor-BA32w1ww.js";import"./capacitor-vendor-Dh3Cr3CD.js";import"./supabase-vendor-DpDh9Ika.js";import"./page-grocerylist-9H8dAkfw.js";import"./page-adminproducts-DimmU9B1.js";import"./page-adminpayouts-D8abdeR0.js";import"./page-blog-DTt-yulm.js";function P({onNavigate:r}){const[d,x]=o.useState(null);if(o.useEffect(()=>{(()=>{const t=localStorage.getItem("checkout_results");if(t)try{const n=JSON.parse(t);x(n)}catch(n){console.error("Failed to parse checkout results:",n),m.error("Failed to load checkout results"),r==null||r("checkout")}else m.error("No checkout results found"),r==null||r("checkout")})()},[r]),!d)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Loading results..."})})});const{result:a,serviceName:c}=d,p=()=>{if(a.cartUrl){const s=h(a.cartUrl);window.open(s,"_blank"),m.success("Checkout window opened - you can return anytime")}},u=s=>{const t=h(s);window.open(t,"_blank")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:e.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-safe",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(l,{variant:"ghost",onClick:()=>r==null?void 0:r("checkout"),className:"mb-4",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Back to Checkout"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(i,{className:"w-6 h-6 text-orange-600"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[c," Checkout Ready"]})]})]}),e.jsx(g,{className:"max-h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"space-y-6 pr-4",children:[a.hasCartItems&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-green-900 mb-2",children:[a.mappedItems.length," Item",a.mappedItems.length!==1?"s":""," Added to Cart"]}),e.jsx("div",{className:"space-y-2",children:a.mappedItems.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(b,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-green-900 font-medium",children:s.name}),s.quantity&&e.jsxs("span",{className:"text-green-700 ml-2",children:["(",s.quantity," ",s.unit||"",")"]})]})]},t))})]})]})}),a.hasUnmappedItems&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-yellow-900 mb-2",children:[a.unmappedItems.length," Item",a.unmappedItems.length!==1?"s":""," Need Manual Search"]}),e.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["These items weren't found in our database. Click to search on ",c,":"]}),e.jsx("div",{className:"space-y-2",children:a.unmappedItems.map((s,t)=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>u(s.searchUrl),className:"flex-1 justify-start text-left",children:[e.jsx(y,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.ingredient}),s.quantity&&e.jsxs(w,{variant:"secondary",className:"ml-auto flex-shrink-0",children:[s.quantity," ",s.unit||""]})]})},t))})]})]})}),!a.hasCartItems&&!a.hasUnmappedItems&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(i,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No items to process"})]})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[a.hasCartItems&&a.cartUrl&&e.jsxs(l,{onClick:p,className:"w-full",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Proceed to ",c," Checkout"]}),e.jsx(l,{variant:"outline",onClick:()=>r==null?void 0:r("grocery-list"),className:"w-full",children:"Return to Grocery List"})]})]})})}export{P as CheckoutResults};

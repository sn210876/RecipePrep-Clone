import{c as M,r as c,j as e,B as o,z as pe,X as Y,u as be,S as ve,a6 as je,l as we,f as F}from"./index-DVwpH2fI.js";import{D as J,g as ye,h as Ne,a as Z,c as ke}from"./dialog-99F_NYXR.js";import{B as P}from"./badge-BkWGMm2S.js";import{S as G}from"./separator-PGCrgck6.js";import{C as K}from"./checkbox-CC1IoS72.js";import{E as ee}from"./external-link-3Ylf3M5k.js";import{V as Ce,M as Se}from"./volume-2-DfdsF56R.js";import{A as Me}from"./arrow-left-BkrnaK2C.js";import{U as se}from"./users-CW3odQ9I.js";import{M as ze}from"./minus-DoxQ_1yo.js";import{C as Te}from"./circle-check-DPhbWwQO.js";import{P as $e,a as qe}from"./play-DOLgYGga.js";import{C as Q,a as W}from"./chevron-right-Dtap8oXv.js";import{C as Ie}from"./clock-CW5VIQeu.js";import{C as Re}from"./circle-play-LzBuqxNU.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=M("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=M("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=M("Expand",[["path",{d:"m21 21-6-6m6 6v-4.8m0 4.8h-4.8",key:"1c15vz"}],["path",{d:"M3 16.2V21m0 0h4.8M3 21l6-6",key:"1fsnz2"}],["path",{d:"M21 7.8V3m0 0h-4.8M21 3l-6 6",key:"hawz9i"}],["path",{d:"M3 7.8V3m0 0h4.8M3 3l6 6",key:"u9ee12"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=M("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=M("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=M("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=M("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function Ae({recipe:t,onClose:f}){var _;console.log("[CookMode] Recipe videoUrl:",t.videoUrl);const[i,j]=c.useState(0),[w,D]=c.useState(new Set),[$,V]=c.useState(new Set),[x,z]=c.useState(!1),[u,y]=c.useState(!1),[p,q]=c.useState(0),[N,T]=c.useState(!0),[b,A]=c.useState(!1),[k,E]=c.useState(t.servings||4),[g,I]=c.useState(!1),C=c.useRef(null),S=c.useRef(null),r=t.steps&&t.steps.length>0?t.steps:t.instructions.map((a,s)=>({stepNumber:s+1,instruction:a,technique:"",duration:void 0}));c.useEffect(()=>{if(x&&!u&&p>0){const a=setInterval(()=>{q(s=>s<=1?(z(!1),y(!1),N&&d(),0):s-1)},1e3);return()=>clearInterval(a)}},[x,u,p,N]);const d=()=>{const a=new(window.AudioContext||window.webkitAudioContext),s=a.createOscillator(),n=a.createGain();s.connect(n),n.connect(a.destination),s.frequency.value=800,s.type="sine",n.gain.setValueAtTime(.3,a.currentTime),n.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),s.start(a.currentTime),s.stop(a.currentTime+.5)},R=a=>{C.current=a.touches[0].clientX},U=a=>{S.current=a.touches[0].clientX},ae=()=>{if(!C.current||!S.current)return;const a=C.current-S.current;Math.abs(a)>50&&(a>0&&i<r.length-1?L():a<0&&i>0&&B()),C.current=null,S.current=null},L=()=>{i<r.length-1&&(j(i+1),X())},B=()=>{i>0&&(j(i-1),X())},X=()=>{z(!1),y(!1),q(0)},ne=()=>{const a=r[i];if(a!=null&&a.duration){const s=a.duration.match(/(\d+)/);if(s){const n=parseInt(s[1]);q(n*60),z(!0),y(!1)}}},re=()=>{x?y(!u):ne()},ie=a=>{const s=Math.floor(a/60),n=a%60;return`${s}:${n.toString().padStart(2,"0")}`},le=a=>{D(s=>{const n=new Set(s);return n.has(a)?n.delete(a):n.add(a),n})},oe=a=>{V(s=>{const n=new Set(s);return n.has(a)?n.delete(a):n.add(a),n})},ce=a=>{const s=a.toLowerCase();return s.includes("salt")?"ðŸ§‚":s.includes("pepper")?"ðŸŒ¶ï¸":s.includes("water")?"ðŸ’§":s.includes("oil")||s.includes("olive")?"ðŸ«’":s.includes("vinegar")?"ðŸ¾":s.includes("soy sauce")||s.includes("sauce")?"ðŸ¥«":s.includes("honey")?"ðŸ¯":s.includes("garlic")||s.includes("clove")?"ðŸ§„":s.includes("ginger")?"ðŸ«š":s.includes("onion")?"ðŸ§…":s.includes("tomato")?"ðŸ…":s.includes("lemon")||s.includes("lime")?"ðŸ‹":s.includes("orange")?"ðŸŠ":s.includes("apple")?"ðŸŽ":s.includes("banana")?"ðŸŒ":s.includes("strawberry")||s.includes("berry")?"ðŸ“":s.includes("carrot")?"ðŸ¥•":s.includes("potato")?"ðŸ¥”":s.includes("broccoli")?"ðŸ¥¦":s.includes("mushroom")?"ðŸ„":s.includes("avocado")?"ðŸ¥‘":s.includes("corn")?"ðŸŒ½":s.includes("eggplant")?"ðŸ†":s.includes("cucumber")?"ðŸ¥’":s.includes("lettuce")||s.includes("salad")?"ðŸ¥—":s.includes("cheese")?"ðŸ§€":s.includes("milk")?"ðŸ¥›":s.includes("cream")?"ðŸ¦":s.includes("butter")?"ðŸ§ˆ":s.includes("egg")?"ðŸ¥š":s.includes("chicken")?"ðŸ—":s.includes("beef")||s.includes("steak")?"ðŸ¥©":s.includes("pork")||s.includes("bacon")?"ðŸ¥“":s.includes("fish")||s.includes("salmon")?"ðŸŸ":s.includes("shrimp")||s.includes("prawn")?"ðŸ¦":s.includes("rice")?"ðŸš":s.includes("pasta")||s.includes("noodle")?"ðŸ":s.includes("bread")?"ðŸž":s.includes("flour")?"ðŸŒ¾":s.includes("sugar")?"ðŸ¬":s.includes("chocolate")?"ðŸ«":s.includes("vanilla")?"ðŸŸ«":s.includes("cinnamon")||s.includes("spice")?"ðŸŒ°":s.includes("basil")||s.includes("herb")||s.includes("parsley")||s.includes("cilantro")?"ðŸŒ¿":s.includes("chili")||s.includes("jalapeno")?"ðŸŒ¶ï¸":s.includes("coconut")?"ðŸ¥¥":s.includes("peanut")||s.includes("nut")?"ðŸ¥œ":s.includes("wine")?"ðŸ·":s.includes("beer")?"ðŸº":s.includes("coffee")?"â˜•":s.includes("tea")?"ðŸµ":"ðŸ¥˜"},me=w.size===t.ingredients.length,de=(i+1)/r.length*100,xe=(a,s)=>{const n=s.toLowerCase();return n.includes("cup")?{quantity:Math.round(a*240),unit:"ml"}:n.includes("tablespoon")||n.includes("tbsp")?{quantity:Math.round(a*15),unit:"ml"}:n.includes("teaspoon")||n.includes("tsp")?{quantity:Math.round(a*5),unit:"ml"}:n.includes("fluid ounce")||n.includes("fl oz")?{quantity:Math.round(a*30),unit:"ml"}:n.includes("pint")?{quantity:Math.round(a*473),unit:"ml"}:n.includes("quart")?{quantity:Math.round(a*946),unit:"ml"}:n.includes("gallon")?{quantity:(a*3.785).toFixed(2),unit:"L"}:n.includes("pound")||n.includes("lb")?{quantity:Math.round(a*454),unit:"g"}:n.includes("ounce")||n.includes("oz")?{quantity:Math.round(a*28),unit:"g"}:n.includes("Â°f")||n.includes("fahrenheit")?{quantity:Math.round((a-32)*5/9),unit:"Â°C"}:{quantity:a,unit:s}},he=(a,s)=>{const n=t.servings||4,H=k/n;let O=parseFloat(a);if(a.includes("/")){const l=a.split(" ");let v=0,ue=l[l.length-1];l.length>1&&(v=parseFloat(l[0]));const[ge,fe]=ue.split("/").map(parseFloat);O=v+ge/fe}if(isNaN(O))return{quantity:a,unit:s};let h=O*H,m=s;if(g){const l=xe(h,s);h=typeof l.quantity=="string"?parseFloat(l.quantity):l.quantity,m=l.unit}if(h%1===0)return{quantity:h.toString(),unit:m};if(h<1&&!g){const l=h;return Math.abs(l-.25)<.05?{quantity:"1/4",unit:m}:Math.abs(l-.33)<.05?{quantity:"1/3",unit:m}:Math.abs(l-.5)<.05?{quantity:"1/2",unit:m}:Math.abs(l-.67)<.05?{quantity:"2/3",unit:m}:Math.abs(l-.75)<.05?{quantity:"3/4",unit:m}:{quantity:h.toFixed(2),unit:m}}else if(h>=1&&!g){const l=Math.floor(h),v=h-l;return v<.05?{quantity:l.toString(),unit:m}:Math.abs(v-.25)<.05?{quantity:`${l} 1/4`,unit:m}:Math.abs(v-.33)<.05?{quantity:`${l} 1/3`,unit:m}:Math.abs(v-.5)<.05?{quantity:`${l} 1/2`,unit:m}:Math.abs(v-.67)<.05?{quantity:`${l} 2/3`,unit:m}:Math.abs(v-.75)<.05?{quantity:`${l} 3/4`,unit:m}:{quantity:h.toFixed(2),unit:m}}else return{quantity:h.toFixed(1),unit:m}};return e.jsx("div",{className:"fixed inset-0 z-50 bg-white overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white px-2 py-2 sm:px-4 sm:py-3 flex items-center justify-between shadow-lg flex-shrink-0",children:[e.jsxs("div",{className:"flex-1 min-w-0 px-2",children:[e.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold truncate text-center",children:t.title}),e.jsxs("p",{className:"text-orange-100 text-[10px] sm:text-xs text-center",children:["Step ",i+1," of ",r.length]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[t.videoUrl&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>window.open(t.videoUrl,"_blank"),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",title:"Watch recipe video",children:e.jsx(ee,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>T(!N),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",children:N?e.jsx(Ce,{className:"w-4 h-4 sm:w-5 sm:h-5"}):e.jsx(Ve,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-1 sm:h-1.5 flex-shrink-0",children:e.jsx("div",{className:"bg-orange-600 h-full transition-all duration-300",style:{width:`${de}%`}})}),e.jsx("div",{className:"absolute top-20 left-4 z-50",children:e.jsxs(o,{onClick:f,className:"bg-white/95 hover:bg-white text-orange-600 border-2 border-orange-500 h-12 px-5 flex items-center gap-2 font-bold rounded-xl shadow-xl active:scale-95 transition-all",title:"Back to recipes",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 pb-24",children:[e.jsxs("div",{className:"relative w-full h-40 sm:h-48 md:h-64 rounded-lg sm:rounded-xl overflow-hidden shadow-lg flex-shrink-0",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 sm:bottom-3 sm:left-3 sm:right-3 md:bottom-4 md:left-4 md:right-4",children:[e.jsx("h3",{className:"text-white text-base sm:text-lg md:text-xl font-bold drop-shadow-lg line-clamp-1",children:t.title}),e.jsxs("p",{className:"text-white/90 text-[10px] sm:text-xs md:text-sm mt-0.5 sm:mt-1 drop-shadow",children:[t.prepTime+t.cookTime," min â€¢ ",t.servings," servings"]})]})]}),e.jsxs("div",{className:`rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 shadow-sm ${b?"bg-orange-50 border-orange-300":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300"}`,children:[e.jsx(o,{onClick:()=>A(!b),className:`w-full font-semibold h-10 sm:h-11 text-sm sm:text-base ${b?"bg-orange-600 hover:bg-orange-700":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700"}`,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Disable Voice Control"]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Enable Voice Control"]})}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 text-center mt-2",children:b?'Say "Next", "Previous", "Repeat", or "Read ingredients"':"Navigate recipes hands-free with voice commands"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-emerald-200 shadow-sm space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-600"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:"Servings"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>E(Math.max(1,k-1)),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:e.jsx(ze,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),e.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900 min-w-[1.5rem] sm:min-w-[2rem] text-center",children:k}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>E(k+1),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:e.jsx(pe,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-emerald-200",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:"Units"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{variant:g?"outline":"default",size:"sm",onClick:()=>I(!1),className:`h-7 px-2 sm:px-3 text-xs sm:text-sm ${g?"":"bg-emerald-600 hover:bg-emerald-700"}`,children:"US"}),e.jsx(o,{variant:g?"default":"outline",size:"sm",onClick:()=>I(!0),className:`h-7 px-2 sm:px-3 text-xs sm:text-sm ${g?"bg-emerald-600 hover:bg-emerald-700":""}`,children:"Metric"})]})]}),k!==t.servings&&e.jsxs("p",{className:"text-[10px] sm:text-xs text-emerald-700 text-center",children:["Scaled from original ",t.servings," servings"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.jsxs("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900 flex items-center gap-2",children:[me?e.jsx(Te,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600"}):e.jsx(Ee,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),"Ingredients"]}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-600",children:[w.size,"/",t.ingredients.length]})]}),e.jsx("div",{className:"space-y-2",children:t.ingredients.map((a,s)=>{const n=he(a.quantity,a.unit);return e.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-lg transition-all ${w.has(s)?"bg-orange-100 border border-orange-300":"bg-white border border-gray-200"}`,children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gray-100 flex items-center justify-center text-lg sm:text-xl flex-shrink-0",children:ce(a.name)}),e.jsx(K,{id:`ingredient-${s}`,checked:w.has(s),onCheckedChange:()=>le(s),className:"flex-shrink-0"}),e.jsxs("label",{htmlFor:`ingredient-${s}`,className:`text-xs sm:text-sm cursor-pointer flex-1 min-w-0 ${w.has(s)?"text-gray-500 line-through":"text-gray-900"}`,children:[e.jsxs("span",{className:"font-semibold",children:[n.quantity," ",n.unit]})," ",a.name]})]},s)})})]}),e.jsxs("div",{className:"touch-pan-y select-none relative",onTouchStart:R,onTouchMove:U,onTouchEnd:ae,children:[e.jsx("div",{className:`bg-white rounded-lg sm:rounded-xl shadow-lg border-2 p-4 sm:p-6 md:p-8 transition-all ${$.has(i)?"border-orange-600 bg-orange-50":"border-gray-200"}`,children:e.jsxs("div",{className:"px-16 sm:px-20 md:px-24 -mx-4 sm:-mx-6 md:-mx-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx(K,{id:`step-${i}`,checked:$.has(i),onCheckedChange:()=>oe(i),className:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),e.jsxs("h3",{className:`font-bold text-lg sm:text-xl md:text-2xl ${$.has(i)?"text-gray-500 line-through":"text-gray-900"}`,children:["Step ",i+1]})]}),((_=r[i])==null?void 0:_.duration)&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:re,className:`gap-1 sm:gap-2 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-3 ${x&&!u?"border-orange-600 bg-orange-50":"border-blue-300"}`,children:[x&&!u?e.jsx($e,{className:"w-3 h-3 sm:w-4 sm:h-4"}):e.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:x&&!u?"Pause":"Start"})]}),x&&e.jsx(o,{variant:"outline",size:"sm",onClick:X,className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(De,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),x&&e.jsxs("div",{className:`mb-3 sm:mb-4 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl text-center ${p<=10?"bg-red-100 border-2 border-red-300 animate-pulse":"bg-orange-100 border-2 border-orange-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[e.jsx(te,{className:`w-4 h-4 sm:w-5 sm:h-5 ${p<=10?"text-red-600":"text-orange-600"}`}),e.jsx("span",{className:`font-mono text-3xl sm:text-4xl md:text-5xl font-bold ${p<=10?"text-red-600":"text-orange-600"}`,children:ie(p)})]}),u&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-2",children:"Timer paused"})]}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 leading-relaxed",children:r[i].instruction}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 text-center mt-4 sm:mt-6",children:"ðŸ‘† Swipe left or right to navigate"})]})}),e.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 pointer-events-none px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[i>0&&e.jsx(o,{variant:"ghost",size:"icon",onClick:B,className:"pointer-events-auto bg-white/60 hover:bg-white/80 backdrop-blur-sm shadow-lg rounded-full w-12 h-12 sm:w-14 sm:h-14 touch-manipulation active:scale-95 transition-all z-50",children:e.jsx(Q,{className:"w-6 h-6 sm:w-7 sm:h-7 text-gray-900"})}),e.jsx("div",{className:"flex-1"}),i<r.length-1&&e.jsx(o,{variant:"ghost",size:"icon",onClick:L,className:"pointer-events-auto bg-orange-500/60 hover:bg-orange-500/80 backdrop-blur-sm shadow-lg rounded-full w-12 h-12 sm:w-14 sm:h-14 touch-manipulation active:scale-95 transition-all z-50",children:e.jsx(W,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})})]})})]})]})}),e.jsx("div",{className:"bg-white border-t-2 border-gray-200 px-3 py-2 sm:px-4 sm:py-3 shadow-lg flex-shrink-0 safe-area-bottom",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3 max-w-4xl mx-auto",children:[e.jsxs(o,{variant:"outline",size:"lg",onClick:B,disabled:i===0,className:"gap-1 sm:gap-2 text-xs sm:text-sm px-4 sm:px-6 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all font-semibold",children:[e.jsx(Q,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden xs:inline",children:"Previous"}),e.jsx("span",{className:"xs:hidden",children:"Prev"})]}),e.jsx("div",{className:"flex-1 text-center px-2",children:e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:b?'Say "Next" or swipe':"ðŸ‘ˆ Swipe to navigate ðŸ‘‰"})}),e.jsxs(o,{size:"lg",onClick:L,disabled:i===r.length-1,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 gap-1 sm:gap-2 text-xs sm:text-sm px-4 sm:px-6 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all font-semibold shadow-md",children:[e.jsx("span",{children:"Next"}),e.jsx(W,{className:"w-4 h-4 sm:w-5 sm:h-5"})]})]})})]})})}function Le({src:t,alt:f,open:i,onOpenChange:j}){return e.jsx(J,{open:i,onOpenChange:j,children:e.jsxs(ye,{children:[e.jsx(Ne,{className:"z-[9999998]"}),e.jsx(Z,{className:"max-w-[95vw] max-h-[95vh] p-0 bg-black border-0 overflow-hidden z-[9999999]",children:e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[e.jsx(o,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-[10] bg-white/95 hover:bg-white shadow-lg rounded-full min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",onClick:()=>j(!1),children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("img",{src:t,alt:f,className:"max-w-full max-h-[95vh] w-auto h-auto object-contain",loading:"lazy"})]})})]})})}function as({recipe:t,open:f,onOpenChange:i}){var g,I,C,S;const{state:j,dispatch:w,saveRecipe:D,removeRecipe:$}=be(),[V,x]=c.useState(!1),[z,u]=c.useState({}),[y,p]=c.useState({}),[q,N]=c.useState(!1),T=j.savedRecipes.some(r=>r.id===t.id),b=t.steps&&t.steps.length>0||t.instructions&&t.instructions.length>0;if(c.useEffect(()=>{f&&(u({}),p({}),x(!1))},[f,t.id]),c.useEffect(()=>(f?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[f]),V&&b)return e.jsx(Ae,{recipe:t,onClose:()=>x(!1)});const A=async()=>{try{T?(await $(t.id),F.success("Recipe removed from your collection")):(await D(t),F.success("Recipe saved to your collection"))}catch{F.error("Failed to update recipe")}},k=()=>{t.ingredients.forEach(r=>{const d={id:`${t.id}-${r.name}-${Date.now()}`,name:r.name,quantity:parseFloat(r.quantity)||1,unit:r.unit,categoryId:"cat-7",checked:!1,sourceRecipeIds:[t.id]};w({type:"ADD_GROCERY_ITEM",payload:d})}),F.success("Ingredients added to grocery list")},E={Easy:"bg-orange-100 text-orange-700 border-orange-200",Medium:"bg-amber-100 text-amber-700 border-amber-200",Hard:"bg-red-100 text-red-700 border-red-200"};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          [data-radix-dialog-overlay] {
            z-index: 99998 !important;
          }
          [data-radix-dialog-content] {
            z-index: 99999 !important;
          }
        `}),e.jsx(J,{open:f,onOpenChange:i,modal:!0,children:e.jsxs(Z,{className:"max-w-4xl w-[85%] h-[85vh] p-0 gap-0 overflow-hidden rounded-xl border",onPointerDownOutside:r=>r.preventDefault(),onInteractOutside:r=>r.preventDefault(),onEscapeKeyDown:r=>r.preventDefault(),children:[e.jsx(ke,{className:"sr-only",children:t.title}),e.jsx("div",{className:"h-full overflow-y-auto overscroll-contain scroll-smooth",children:e.jsxs("div",{className:"relative",children:[e.jsx(o,{variant:"ghost",size:"icon",className:"sticky top-2 right-2 float-right z-[100000] bg-white/95 hover:bg-white shadow-lg rounded-full min-h-[44px] min-w-[44px] touch-manipulation active:scale-95 cursor-pointer",onClick:r=>{r.stopPropagation(),i(!1)},children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative w-full h-48 sm:h-56 bg-gray-100 mb-4",children:[e.jsx("img",{src:(g=t.imageUrl)!=null&&g.includes("instagram.com")||(I=t.imageUrl)!=null&&I.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(t.imageUrl.replace(/&amp;/g,"&"))}`:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent pointer-events-none"}),e.jsx(o,{variant:"ghost",size:"icon",onClick:r=>{r.stopPropagation(),N(!0)},className:"absolute bottom-3 right-3 z-20 bg-black/60 hover:bg-black/80 text-white rounded-full min-h-[40px] min-w-[40px] touch-manipulation active:scale-95 backdrop-blur-sm",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 text-white z-10",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-2 leading-tight pr-12",children:t.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-1.5",children:[e.jsx(P,{className:"bg-white/95 text-gray-900 hover:bg-white text-[10px] sm:text-xs px-2 py-0.5",children:t.cuisineType}),e.jsx(P,{variant:"outline",className:`${E[t.difficulty]} border text-[10px] sm:text-xs px-2 py-0.5`,children:t.difficulty}),t.dietaryTags.slice(0,2).map(r=>e.jsx(P,{variant:"secondary",className:"bg-white/90 text-gray-900 text-[10px] sm:text-xs px-2 py-0.5",children:r},r)),t.dietaryTags.length>2&&e.jsxs(P,{variant:"secondary",className:"bg-white/90 text-gray-900 text-[10px] sm:text-xs px-2 py-0.5",children:["+",t.dietaryTags.length-2]})]})]})]}),e.jsxs("div",{className:"p-4 sm:p-6 pb-8 bg-white relative z-20",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-100",children:[e.jsx("div",{className:"bg-primary p-1.5 sm:p-2 rounded-lg",children:e.jsx(Ie,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Total"}),e.jsxs("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:[t.prepTime+t.cookTime,"m"]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-100",children:[e.jsx("div",{className:"bg-blue-500 p-1.5 sm:p-2 rounded-lg",children:e.jsx(se,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Serves"}),e.jsx("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:t.servings})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg border border-amber-100",children:[e.jsx("div",{className:"bg-amber-500 p-1.5 sm:p-2 rounded-lg",children:e.jsx(te,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Prep"}),e.jsxs("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:[t.prepTime,"m"]})]})]})]}),b&&e.jsxs("div",{className:"mb-2 sm:mb-3",children:[e.jsxs(o,{size:"lg",onClick:()=>x(!0),className:"w-full bg-accent hover:bg-accent/90 text-white text-sm sm:text-base min-h-[48px] sm:min-h-[52px] gap-2 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:[e.jsx(Re,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Start Cooking"]}),e.jsx("p",{className:"text-center text-[10px] sm:text-xs text-gray-600 mt-2 px-2",children:"Step-by-step mode with timers and ingredient checklist"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 sm:mb-4",children:[e.jsxs(o,{size:"lg",onClick:A,className:"gap-2 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm font-semibold bg-orange-500 hover:bg-orange-600 text-white border-2 border-orange-600",children:[e.jsx(Ue,{className:`w-4 h-4 flex-shrink-0 ${T?"fill-current":""}`}),e.jsx("span",{className:"truncate",children:T?"Saved":"Save"})]}),e.jsxs(o,{onClick:k,size:"lg",className:"gap-2 bg-green-500 hover:bg-green-600 text-white border-2 border-green-600 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm font-semibold",children:[e.jsx(ve,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Grocery List"})]})]}),e.jsx(G,{className:"my-3 sm:my-4"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx(je,{className:"w-4 h-4 text-primary"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Ingredients"})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-3 sm:p-4",children:e.jsx("div",{className:"space-y-2",children:t.ingredients.map((r,d)=>e.jsxs("label",{className:"flex items-start gap-2 sm:gap-3 p-2 rounded-lg hover:bg-orange-50 transition-colors min-h-[40px] sm:min-h-[44px] cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z[d]||!1,onChange:R=>{u(U=>({...U,[d]:R.target.checked}))},className:"mt-1 w-4 h-4 sm:w-5 sm:h-5 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2 cursor-pointer flex-shrink-0"}),e.jsxs("div",{className:`flex-1 text-xs sm:text-sm text-gray-700 leading-relaxed transition-all ${z[d]?"line-through opacity-50":""}`,children:[e.jsxs("span",{className:"font-semibold text-primary",children:[r.quantity," ",r.unit]})," ",r.name]})]},d))})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(we,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Instructions"})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-3 sm:p-4",children:e.jsx("ol",{className:"space-y-3 sm:space-y-4",children:t.instructions.map((r,d)=>e.jsx("li",{className:"flex gap-2 sm:gap-3",children:e.jsxs("label",{className:"flex gap-2 sm:gap-3 items-start cursor-pointer w-full min-h-[40px] sm:min-h-[44px] p-2 rounded-lg hover:bg-blue-50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:y[d]||!1,onChange:R=>{p(U=>({...U,[d]:R.target.checked}))},className:"mt-1 w-4 h-4 sm:w-5 sm:h-5 text-primary border-gray-300 rounded focus:ring-primary focus:ring-2 cursor-pointer flex-shrink-0"}),e.jsx("div",{className:"flex-shrink-0 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-primary text-white flex items-center justify-center font-bold text-xs sm:text-sm shadow-md",children:d+1}),e.jsx("p",{className:`text-xs sm:text-sm text-gray-700 pt-0.5 leading-relaxed transition-all ${y[d]?"line-through opacity-50":""}`,children:r})]})},d))})})]}),t.notes&&e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"my-3 sm:my-4"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3",children:"Notes"}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:t.notes})})]})]}),t.sourceUrl&&e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"my-3 sm:my-4"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 bg-gray-50 border border-gray-200 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xs sm:text-sm mb-1",children:"Recipe Source"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View original recipe"})]}),e.jsx(o,{variant:"outline",size:"sm",asChild:!0,className:"gap-2 hover:bg-white min-h-[40px] touch-manipulation active:scale-95 transition-all w-full sm:w-auto text-xs sm:text-sm",children:e.jsxs("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ee,{className:"w-4 h-4"}),"Visit Source"]})})]})]})]})]})})]})}),e.jsx(Le,{src:(C=t.imageUrl)!=null&&C.includes("instagram.com")||(S=t.imageUrl)!=null&&S.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(t.imageUrl.replace(/&amp;/g,"&"))}`:t.imageUrl,alt:t.title,open:q,onOpenChange:N})]})}export{Ue as B,Ae as C,as as R};

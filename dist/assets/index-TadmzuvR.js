var N_=Object.defineProperty;var __=(e,t,r)=>t in e?N_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pd=(e,t,r)=>__(e,typeof t!="symbol"?t+"":t,r);function r0(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function n0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var s0={exports:{}},Oc={},o0={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ci=Symbol.for("react.element"),k_=Symbol.for("react.portal"),C_=Symbol.for("react.fragment"),E_=Symbol.for("react.strict_mode"),R_=Symbol.for("react.profiler"),P_=Symbol.for("react.provider"),T_=Symbol.for("react.context"),A_=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),O_=Symbol.for("react.memo"),M_=Symbol.for("react.lazy"),yp=Symbol.iterator;function D_(e){return e===null||typeof e!="object"?null:(e=yp&&e[yp]||e["@@iterator"],typeof e=="function"?e:null)}var a0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i0=Object.assign,l0={};function Qo(e,t,r){this.props=e,this.context=t,this.refs=l0,this.updater=r||a0}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function c0(){}c0.prototype=Qo.prototype;function ff(e,t,r){this.props=e,this.context=t,this.refs=l0,this.updater=r||a0}var mf=ff.prototype=new c0;mf.constructor=ff;i0(mf,Qo.prototype);mf.isPureReactComponent=!0;var wp=Array.isArray,d0=Object.prototype.hasOwnProperty,pf={current:null},u0={key:!0,ref:!0,__self:!0,__source:!0};function h0(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)d0.call(t,n)&&!u0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ci,type:e,key:a,ref:i,props:s,_owner:pf.current}}function $_(e,t){return{$$typeof:Ci,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ci}function L_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bp=/\/+/g;function Td(e,t){return typeof e=="object"&&e!==null&&e.key!=null?L_(""+e.key):t.toString(36)}function jl(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ci:case k_:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+Td(i,0):n,wp(s)?(r="",e!=null&&(r=e.replace(bp,"$&/")+"/"),jl(s,t,r,"",function(d){return d})):s!=null&&(gf(s)&&(s=$_(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(bp,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",wp(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Td(a,l);i+=jl(a,t,r,c,s)}else if(c=D_(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Td(a,l++),i+=jl(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Fi(e,t,r){if(e==null)return e;var n=[],s=0;return jl(e,n,"","",function(a){return t.call(r,a,s++)}),n}function U_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kt={current:null},Nl={transition:null},F_={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:pf};function f0(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Fi,forEach:function(e,t,r){Fi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fi(e,function(){t++}),t},toArray:function(e){return Fi(e,function(t){return t})||[]},only:function(e){if(!gf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Qo;Fe.Fragment=C_;Fe.Profiler=R_;Fe.PureComponent=ff;Fe.StrictMode=E_;Fe.Suspense=I_;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F_;Fe.act=f0;Fe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=i0({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=pf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)d0.call(t,c)&&!u0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ci,type:e.type,key:s,ref:a,props:n,_owner:i}};Fe.createContext=function(e){return e={$$typeof:T_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:P_,_context:e},e.Consumer=e};Fe.createElement=h0;Fe.createFactory=function(e){var t=h0.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:A_,render:e}};Fe.isValidElement=gf;Fe.lazy=function(e){return{$$typeof:M_,_payload:{_status:-1,_result:e},_init:U_}};Fe.memo=function(e,t){return{$$typeof:O_,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=Nl.transition;Nl.transition={};try{e()}finally{Nl.transition=t}};Fe.unstable_act=f0;Fe.useCallback=function(e,t){return Kt.current.useCallback(e,t)};Fe.useContext=function(e){return Kt.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return Kt.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return Kt.current.useEffect(e,t)};Fe.useId=function(){return Kt.current.useId()};Fe.useImperativeHandle=function(e,t,r){return Kt.current.useImperativeHandle(e,t,r)};Fe.useInsertionEffect=function(e,t){return Kt.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return Kt.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return Kt.current.useMemo(e,t)};Fe.useReducer=function(e,t,r){return Kt.current.useReducer(e,t,r)};Fe.useRef=function(e){return Kt.current.useRef(e)};Fe.useState=function(e){return Kt.current.useState(e)};Fe.useSyncExternalStore=function(e,t,r){return Kt.current.useSyncExternalStore(e,t,r)};Fe.useTransition=function(){return Kt.current.useTransition()};Fe.version="18.3.1";o0.exports=Fe;var u=o0.exports;const se=n0(u),xf=r0({__proto__:null,default:se},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_=u,B_=Symbol.for("react.element"),V_=Symbol.for("react.fragment"),W_=Object.prototype.hasOwnProperty,q_=z_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H_={key:!0,ref:!0,__self:!0,__source:!0};function m0(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)W_.call(t,n)&&!H_.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:B_,type:e,key:a,ref:i,props:s,_owner:q_.current}}Oc.Fragment=V_;Oc.jsx=m0;Oc.jsxs=m0;s0.exports=Oc;var o=s0.exports,p0={exports:{}},xr={},g0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,k){var I=A.length;A.push(k);e:for(;0<I;){var te=I-1>>>1,$=A[te];if(0<s($,k))A[te]=k,A[I]=$,I=te;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var k=A[0],I=A.pop();if(I!==k){A[0]=I;e:for(var te=0,$=A.length,z=$>>>1;te<z;){var X=2*(te+1)-1,ue=A[X],G=X+1,H=A[G];if(0>s(ue,I))G<$&&0>s(H,ue)?(A[te]=H,A[G]=I,te=G):(A[te]=ue,A[X]=I,te=X);else if(G<$&&0>s(H,I))A[te]=H,A[G]=I,te=G;else break e}}return k}function s(A,k){var I=A.sortIndex-k.sortIndex;return I!==0?I:A.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,f=null,p=3,m=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(A){for(var k=r(d);k!==null;){if(k.callback===null)n(d);else if(k.startTime<=A)n(d),k.sortIndex=k.expirationTime,t(c,k);else break;k=r(d)}}function j(A){if(g=!1,v(A),!b)if(r(c)!==null)b=!0,B(N);else{var k=r(d);k!==null&&F(j,k.startTime-A)}}function N(A,k){b=!1,g&&(g=!1,y(P),P=-1),m=!0;var I=p;try{for(v(k),f=r(c);f!==null&&(!(f.expirationTime>k)||A&&!M());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var $=te(f.expirationTime<=k);k=e.unstable_now(),typeof $=="function"?f.callback=$:f===r(c)&&n(c),v(k)}else n(c);f=r(c)}if(f!==null)var z=!0;else{var X=r(d);X!==null&&F(j,X.startTime-k),z=!1}return z}finally{f=null,p=I,m=!1}}var _=!1,S=null,P=-1,C=5,R=-1;function M(){return!(e.unstable_now()-R<C)}function D(){if(S!==null){var A=e.unstable_now();R=A;var k=!0;try{k=S(!0,A)}finally{k?Q():(_=!1,S=null)}}else _=!1}var Q;if(typeof x=="function")Q=function(){x(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ee=q.port2;q.port1.onmessage=D,Q=function(){ee.postMessage(null)}}else Q=function(){w(D,0)};function B(A){S=A,_||(_=!0,Q())}function F(A,k){P=w(function(){A(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,B(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var I=p;p=k;try{return A()}finally{p=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,k){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var I=p;p=A;try{return k()}finally{p=I}},e.unstable_scheduleCallback=function(A,k,I){var te=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?te+I:te):I=te,A){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=I+$,A={id:h++,callback:k,priorityLevel:A,startTime:I,expirationTime:$,sortIndex:-1},I>te?(A.sortIndex=I,t(d,A),r(c)===null&&A===r(d)&&(g?(y(P),P=-1):g=!0,F(j,I-te))):(A.sortIndex=$,t(c,A),b||m||(b=!0,B(N))),A},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(A){var k=p;return function(){var I=p;p=k;try{return A.apply(this,arguments)}finally{p=I}}}})(x0);g0.exports=x0;var G_=g0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=u,gr=G_;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v0=new Set,qa={};function Js(e,t){Fo(e,t),Fo(e+"Capture",t)}function Fo(e,t){for(qa[e]=t,e=0;e<t.length;e++)v0.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=Object.prototype.hasOwnProperty,Y_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jp={},Np={};function J_(e){return Tu.call(Np,e)?!0:Tu.call(jp,e)?!1:Y_.test(e)?Np[e]=!0:(jp[e]=!0,!1)}function X_(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q_(e,t,r,n){if(t===null||typeof t>"u"||X_(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yt(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dt[e]=new Yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dt[t]=new Yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dt[e]=new Yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dt[e]=new Yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dt[e]=new Yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dt[e]=new Yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dt[e]=new Yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dt[e]=new Yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dt[e]=new Yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function yf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vf,yf);Dt[t]=new Yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vf,yf);Dt[t]=new Yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vf,yf);Dt[t]=new Yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dt[e]=new Yt(e,1,!1,e.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dt[e]=new Yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wf(e,t,r,n){var s=Dt.hasOwnProperty(t)?Dt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q_(t,r,s,n)&&(r=null),n||s===null?J_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Mn=K_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zi=Symbol.for("react.element"),po=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),Au=Symbol.for("react.profiler"),y0=Symbol.for("react.provider"),w0=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Ou=Symbol.for("react.suspense_list"),Nf=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),b0=Symbol.for("react.offscreen"),_p=Symbol.iterator;function da(e){return e===null||typeof e!="object"?null:(e=_p&&e[_p]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Object.assign,Ad;function ja(e){if(Ad===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ad=t&&t[1]||""}return`
`+Ad+e}var Id=!1;function Od(e,t){if(!e||Id)return"";Id=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Id=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ja(e):""}function Z_(e){switch(e.tag){case 5:return ja(e.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return e=Od(e.type,!1),e;case 11:return e=Od(e.type.render,!1),e;case 1:return e=Od(e.type,!0),e;default:return""}}function Mu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case go:return"Fragment";case po:return"Portal";case Au:return"Profiler";case bf:return"StrictMode";case Iu:return"Suspense";case Ou:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w0:return(e.displayName||"Context")+".Consumer";case y0:return(e._context.displayName||"Context")+".Provider";case jf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nf:return t=e.displayName||null,t!==null?t:Mu(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return Mu(e(t))}catch{}}return null}function eS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(t);case 8:return t===bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tS(e){var t=j0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bi(e){e._valueTracker||(e._valueTracker=tS(e))}function N0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=j0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Du(e,t){var r=t.checked;return dt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Sp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ls(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _0(e,t){t=t.checked,t!=null&&wf(e,"checked",t,!1)}function $u(e,t){_0(e,t);var r=ls(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Lu(e,t.type,ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Lu(e,t,r){(t!=="number"||Ul(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Na=Array.isArray;function Eo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ls(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Uu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return dt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ie(92));if(Na(r)){if(1<r.length)throw Error(ie(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ls(r)}}function S0(e,t){var r=ls(t.value),n=ls(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ep(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function k0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?k0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vi,C0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vi=Vi||document.createElement("div"),Vi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ha(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(e){rS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ta[t]=Ta[e]})});function E0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ta.hasOwnProperty(e)&&Ta[e]?(""+t).trim():t+"px"}function R0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=E0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var nS=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zu(e,t){if(t){if(nS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function Bu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vu=null;function _f(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wu=null,Ro=null,Po=null;function Rp(e){if(e=Pi(e)){if(typeof Wu!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=Uc(t),Wu(e.stateNode,e.type,t))}}function P0(e){Ro?Po?Po.push(e):Po=[e]:Ro=e}function T0(){if(Ro){var e=Ro,t=Po;if(Po=Ro=null,Rp(e),t)for(e=0;e<t.length;e++)Rp(t[e])}}function A0(e,t){return e(t)}function I0(){}var Md=!1;function O0(e,t,r){if(Md)return e(t,r);Md=!0;try{return A0(e,t,r)}finally{Md=!1,(Ro!==null||Po!==null)&&(I0(),T0())}}function Ga(e,t){var r=e.stateNode;if(r===null)return null;var n=Uc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ie(231,t,typeof r));return r}var qu=!1;if(En)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){qu=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{qu=!1}function sS(e,t,r,n,s,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Aa=!1,Fl=null,zl=!1,Hu=null,oS={onError:function(e){Aa=!0,Fl=e}};function aS(e,t,r,n,s,a,i,l,c){Aa=!1,Fl=null,sS.apply(oS,arguments)}function iS(e,t,r,n,s,a,i,l,c){if(aS.apply(this,arguments),Aa){if(Aa){var d=Fl;Aa=!1,Fl=null}else throw Error(ie(198));zl||(zl=!0,Hu=d)}}function Xs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function M0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pp(e){if(Xs(e)!==e)throw Error(ie(188))}function lS(e){var t=e.alternate;if(!t){if(t=Xs(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Pp(s),e;if(a===n)return Pp(s),t;a=a.sibling}throw Error(ie(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(ie(189))}}if(r.alternate!==n)throw Error(ie(190))}if(r.tag!==3)throw Error(ie(188));return r.stateNode.current===r?e:t}function D0(e){return e=lS(e),e!==null?$0(e):null}function $0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$0(e);if(t!==null)return t;e=e.sibling}return null}var L0=gr.unstable_scheduleCallback,Tp=gr.unstable_cancelCallback,cS=gr.unstable_shouldYield,dS=gr.unstable_requestPaint,pt=gr.unstable_now,uS=gr.unstable_getCurrentPriorityLevel,Sf=gr.unstable_ImmediatePriority,U0=gr.unstable_UserBlockingPriority,Bl=gr.unstable_NormalPriority,hS=gr.unstable_LowPriority,F0=gr.unstable_IdlePriority,Mc=null,dn=null;function fS(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Mc,e,void 0,(e.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:gS,mS=Math.log,pS=Math.LN2;function gS(e){return e>>>=0,e===0?32:31-(mS(e)/pS|0)|0}var Wi=64,qi=4194304;function _a(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=_a(l):(a&=i,a!==0&&(n=_a(a)))}else i=r&~s,i!==0?n=_a(i):a!==0&&(n=_a(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qr(t),s=1<<r,n|=e[r],t&=~s;return n}function xS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-qr(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=xS(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Gu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z0(){var e=Wi;return Wi<<=1,!(Wi&4194240)&&(Wi=64),e}function Dd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ei(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qr(t),e[t]=r}function yS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-qr(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function kf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-qr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ke=0;function B0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var V0,Cf,W0,q0,H0,Ku=!1,Hi=[],Zn=null,es=null,ts=null,Ka=new Map,Ya=new Map,Kn=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ap(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Ka.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(t.pointerId)}}function ha(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Pi(t),t!==null&&Cf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bS(e,t,r,n,s){switch(t){case"focusin":return Zn=ha(Zn,e,t,r,n,s),!0;case"dragenter":return es=ha(es,e,t,r,n,s),!0;case"mouseover":return ts=ha(ts,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Ka.set(a,ha(Ka.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ya.set(a,ha(Ya.get(a)||null,e,t,r,n,s)),!0}return!1}function G0(e){var t=Rs(e.target);if(t!==null){var r=Xs(t);if(r!==null){if(t=r.tag,t===13){if(t=M0(r),t!==null){e.blockedOn=t,H0(e.priority,function(){W0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Vu=n,r.target.dispatchEvent(n),Vu=null}else return t=Pi(r),t!==null&&Cf(t),e.blockedOn=r,!1;t.shift()}return!0}function Ip(e,t,r){_l(e)&&r.delete(t)}function jS(){Ku=!1,Zn!==null&&_l(Zn)&&(Zn=null),es!==null&&_l(es)&&(es=null),ts!==null&&_l(ts)&&(ts=null),Ka.forEach(Ip),Ya.forEach(Ip)}function fa(e,t){e.blockedOn===t&&(e.blockedOn=null,Ku||(Ku=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,jS)))}function Ja(e){function t(s){return fa(s,e)}if(0<Hi.length){fa(Hi[0],e);for(var r=1;r<Hi.length;r++){var n=Hi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Zn!==null&&fa(Zn,e),es!==null&&fa(es,e),ts!==null&&fa(ts,e),Ka.forEach(t),Ya.forEach(t),r=0;r<Kn.length;r++)n=Kn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Kn.length&&(r=Kn[0],r.blockedOn===null);)G0(r),r.blockedOn===null&&Kn.shift()}var To=Mn.ReactCurrentBatchConfig,Wl=!0;function NS(e,t,r,n){var s=Ke,a=To.transition;To.transition=null;try{Ke=1,Ef(e,t,r,n)}finally{Ke=s,To.transition=a}}function _S(e,t,r,n){var s=Ke,a=To.transition;To.transition=null;try{Ke=4,Ef(e,t,r,n)}finally{Ke=s,To.transition=a}}function Ef(e,t,r,n){if(Wl){var s=Yu(e,t,r,n);if(s===null)Hd(e,t,n,ql,r),Ap(e,n);else if(bS(s,e,t,r,n))n.stopPropagation();else if(Ap(e,n),t&4&&-1<wS.indexOf(e)){for(;s!==null;){var a=Pi(s);if(a!==null&&V0(a),a=Yu(e,t,r,n),a===null&&Hd(e,t,n,ql,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Hd(e,t,n,null,r)}}var ql=null;function Yu(e,t,r,n){if(ql=null,e=_f(n),e=Rs(e),e!==null)if(t=Xs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=M0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ql=e,null}function K0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uS()){case Sf:return 1;case U0:return 4;case Bl:case hS:return 16;case F0:return 536870912;default:return 16}default:return 16}}var Xn=null,Rf=null,Sl=null;function Y0(){if(Sl)return Sl;var e,t=Rf,r=t.length,n,s="value"in Xn?Xn.value:Xn.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return Sl=s.slice(e,1<n?1-n:void 0)}function kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gi(){return!0}function Op(){return!1}function vr(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Gi:Op,this.isPropagationStopped=Op,this}return dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),t}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=vr(Zo),Ri=dt({},Zo,{view:0,detail:0}),SS=vr(Ri),$d,Ld,ma,Dc=dt({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?($d=e.screenX-ma.screenX,Ld=e.screenY-ma.screenY):Ld=$d=0,ma=e),$d)},movementY:function(e){return"movementY"in e?e.movementY:Ld}}),Mp=vr(Dc),kS=dt({},Dc,{dataTransfer:0}),CS=vr(kS),ES=dt({},Ri,{relatedTarget:0}),Ud=vr(ES),RS=dt({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=vr(RS),TS=dt({},Zo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AS=vr(TS),IS=dt({},Zo,{data:0}),Dp=vr(IS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $S(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DS[e])?!!t[e]:!1}function Tf(){return $S}var LS=dt({},Ri,{key:function(e){if(e.key){var t=OS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tf,charCode:function(e){return e.type==="keypress"?kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),US=vr(LS),FS=dt({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=vr(FS),zS=dt({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tf}),BS=vr(zS),VS=dt({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),WS=vr(VS),qS=dt({},Dc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HS=vr(qS),GS=[9,13,27,32],Af=En&&"CompositionEvent"in window,Ia=null;En&&"documentMode"in document&&(Ia=document.documentMode);var KS=En&&"TextEvent"in window&&!Ia,J0=En&&(!Af||Ia&&8<Ia&&11>=Ia),Lp=" ",Up=!1;function X0(e,t){switch(e){case"keyup":return GS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xo=!1;function YS(e,t){switch(e){case"compositionend":return Q0(t);case"keypress":return t.which!==32?null:(Up=!0,Lp);case"textInput":return e=t.data,e===Lp&&Up?null:e;default:return null}}function JS(e,t){if(xo)return e==="compositionend"||!Af&&X0(e,t)?(e=Y0(),Sl=Rf=Xn=null,xo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J0&&t.locale!=="ko"?null:t.data;default:return null}}var XS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XS[e.type]:t==="textarea"}function Z0(e,t,r,n){P0(n),t=Hl(t,"onChange"),0<t.length&&(r=new Pf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Oa=null,Xa=null;function QS(e){dv(e,0)}function $c(e){var t=wo(e);if(N0(t))return e}function ZS(e,t){if(e==="change")return t}var ev=!1;if(En){var Fd;if(En){var zd="oninput"in document;if(!zd){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),zd=typeof zp.oninput=="function"}Fd=zd}else Fd=!1;ev=Fd&&(!document.documentMode||9<document.documentMode)}function Bp(){Oa&&(Oa.detachEvent("onpropertychange",tv),Xa=Oa=null)}function tv(e){if(e.propertyName==="value"&&$c(Xa)){var t=[];Z0(t,Xa,e,_f(e)),O0(QS,t)}}function e2(e,t,r){e==="focusin"?(Bp(),Oa=t,Xa=r,Oa.attachEvent("onpropertychange",tv)):e==="focusout"&&Bp()}function t2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $c(Xa)}function r2(e,t){if(e==="click")return $c(t)}function n2(e,t){if(e==="input"||e==="change")return $c(t)}function s2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xr=typeof Object.is=="function"?Object.is:s2;function Qa(e,t){if(Xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Tu.call(t,s)||!Xr(e[s],t[s]))return!1}return!0}function Vp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wp(e,t){var r=Vp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vp(r)}}function rv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nv(){for(var e=window,t=Ul();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ul(e.document)}return t}function If(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function o2(e){var t=nv(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&rv(r.ownerDocument.documentElement,r)){if(n!==null&&If(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Wp(r,a);var i=Wp(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a2=En&&"documentMode"in document&&11>=document.documentMode,vo=null,Ju=null,Ma=null,Xu=!1;function qp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xu||vo==null||vo!==Ul(n)||(n=vo,"selectionStart"in n&&If(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ma&&Qa(Ma,n)||(Ma=n,n=Hl(Ju,"onSelect"),0<n.length&&(t=new Pf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vo)))}function Ki(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yo={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},Bd={},sv={};En&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Lc(e){if(Bd[e])return Bd[e];if(!yo[e])return e;var t=yo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sv)return Bd[e]=t[r];return e}var ov=Lc("animationend"),av=Lc("animationiteration"),iv=Lc("animationstart"),lv=Lc("transitionend"),cv=new Map,Hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(e,t){cv.set(e,t),Js(t,[e])}for(var Vd=0;Vd<Hp.length;Vd++){var Wd=Hp[Vd],i2=Wd.toLowerCase(),l2=Wd[0].toUpperCase()+Wd.slice(1);ms(i2,"on"+l2)}ms(ov,"onAnimationEnd");ms(av,"onAnimationIteration");ms(iv,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(lv,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Gp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iS(n,t,void 0,e),e.currentTarget=null}function dv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Gp(s,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Gp(s,l,d),a=c}}}if(zl)throw e=Hu,zl=!1,Hu=null,e}function Ze(e,t){var r=t[rh];r===void 0&&(r=t[rh]=new Set);var n=e+"__bubble";r.has(n)||(uv(t,e,2,!1),r.add(n))}function qd(e,t,r){var n=0;t&&(n|=4),uv(r,e,n,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[Yi]){e[Yi]=!0,v0.forEach(function(r){r!=="selectionchange"&&(c2.has(r)||qd(r,!1,e),qd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,qd("selectionchange",!1,t))}}function uv(e,t,r,n){switch(K0(t)){case 1:var s=NS;break;case 4:s=_S;break;default:s=Ef}r=s.bind(null,t,r,e),s=void 0,!qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Hd(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Rs(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}O0(function(){var d=a,h=_f(r),f=[];e:{var p=cv.get(e);if(p!==void 0){var m=Pf,b=e;switch(e){case"keypress":if(kl(r)===0)break e;case"keydown":case"keyup":m=US;break;case"focusin":b="focus",m=Ud;break;case"focusout":b="blur",m=Ud;break;case"beforeblur":case"afterblur":m=Ud;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=CS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=BS;break;case ov:case av:case iv:m=PS;break;case lv:m=WS;break;case"scroll":m=SS;break;case"wheel":m=HS;break;case"copy":case"cut":case"paste":m=AS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$p}var g=(t&4)!==0,w=!g&&e==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var x=d,v;x!==null;){v=x;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,y!==null&&(j=Ga(x,y),j!=null&&g.push(ei(x,j,v)))),w)break;x=x.return}0<g.length&&(p=new m(p,b,null,r,h),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==Vu&&(b=r.relatedTarget||r.fromElement)&&(Rs(b)||b[Rn]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=d,b=b?Rs(b):null,b!==null&&(w=Xs(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=d),m!==b)){if(g=Mp,j="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=$p,j="onPointerLeave",y="onPointerEnter",x="pointer"),w=m==null?p:wo(m),v=b==null?p:wo(b),p=new g(j,x+"leave",m,r,h),p.target=w,p.relatedTarget=v,j=null,Rs(h)===d&&(g=new g(y,x+"enter",b,r,h),g.target=v,g.relatedTarget=w,j=g),w=j,m&&b)t:{for(g=m,y=b,x=0,v=g;v;v=ro(v))x++;for(v=0,j=y;j;j=ro(j))v++;for(;0<x-v;)g=ro(g),x--;for(;0<v-x;)y=ro(y),v--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=ro(g),y=ro(y)}g=null}else g=null;m!==null&&Kp(f,p,m,g,!1),b!==null&&w!==null&&Kp(f,w,b,g,!0)}}e:{if(p=d?wo(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=ZS;else if(Fp(p))if(ev)N=n2;else{N=t2;var _=e2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=r2);if(N&&(N=N(e,d))){Z0(f,N,r,h);break e}_&&_(e,p,d),e==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Lu(p,"number",p.value)}switch(_=d?wo(d):window,e){case"focusin":(Fp(_)||_.contentEditable==="true")&&(vo=_,Ju=d,Ma=null);break;case"focusout":Ma=Ju=vo=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,qp(f,r,h);break;case"selectionchange":if(a2)break;case"keydown":case"keyup":qp(f,r,h)}var S;if(Af)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else xo?X0(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(J0&&r.locale!=="ko"&&(xo||P!=="onCompositionStart"?P==="onCompositionEnd"&&xo&&(S=Y0()):(Xn=h,Rf="value"in Xn?Xn.value:Xn.textContent,xo=!0)),_=Hl(d,P),0<_.length&&(P=new Dp(P,e,null,r,h),f.push({event:P,listeners:_}),S?P.data=S:(S=Q0(r),S!==null&&(P.data=S)))),(S=KS?YS(e,r):JS(e,r))&&(d=Hl(d,"onBeforeInput"),0<d.length&&(h=new Dp("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=S))}dv(f,t)})}function ei(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hl(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ga(e,r),a!=null&&n.unshift(ei(e,a,s)),a=Ga(e,t),a!=null&&n.push(ei(e,a,s))),e=e.return}return n}function ro(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kp(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Ga(r,a),c!=null&&i.unshift(ei(r,c,l))):s||(c=Ga(r,a),c!=null&&i.push(ei(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var d2=/\r\n?/g,u2=/\u0000|\uFFFD/g;function Yp(e){return(typeof e=="string"?e:""+e).replace(d2,`
`).replace(u2,"")}function Ji(e,t,r){if(t=Yp(t),Yp(e)!==t&&r)throw Error(ie(425))}function Gl(){}var Qu=null,Zu=null;function eh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,h2=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,f2=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(e){return Jp.resolve(null).then(e).catch(m2)}:th;function m2(e){setTimeout(function(){throw e})}function Gd(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Ja(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ja(t)}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ea=Math.random().toString(36).slice(2),an="__reactFiber$"+ea,ti="__reactProps$"+ea,Rn="__reactContainer$"+ea,rh="__reactEvents$"+ea,p2="__reactListeners$"+ea,g2="__reactHandles$"+ea;function Rs(e){var t=e[an];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rn]||r[an]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xp(e);e!==null;){if(r=e[an])return r;e=Xp(e)}return t}e=r,r=e.parentNode}return null}function Pi(e){return e=e[an]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function Uc(e){return e[ti]||null}var nh=[],bo=-1;function ps(e){return{current:e}}function rt(e){0>bo||(e.current=nh[bo],nh[bo]=null,bo--)}function Xe(e,t){bo++,nh[bo]=e.current,e.current=t}var cs={},Vt=ps(cs),nr=ps(!1),Ls=cs;function zo(e,t){var r=e.type.contextTypes;if(!r)return cs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function sr(e){return e=e.childContextTypes,e!=null}function Kl(){rt(nr),rt(Vt)}function Qp(e,t,r){if(Vt.current!==cs)throw Error(ie(168));Xe(Vt,t),Xe(nr,r)}function hv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ie(108,eS(e)||"Unknown",s));return dt({},r,n)}function Yl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cs,Ls=Vt.current,Xe(Vt,e),Xe(nr,nr.current),!0}function Zp(e,t,r){var n=e.stateNode;if(!n)throw Error(ie(169));r?(e=hv(e,t,Ls),n.__reactInternalMemoizedMergedChildContext=e,rt(nr),rt(Vt),Xe(Vt,e)):rt(nr),Xe(nr,r)}var _n=null,Fc=!1,Kd=!1;function fv(e){_n===null?_n=[e]:_n.push(e)}function x2(e){Fc=!0,fv(e)}function gs(){if(!Kd&&_n!==null){Kd=!0;var e=0,t=Ke;try{var r=_n;for(Ke=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_n=null,Fc=!1}catch(s){throw _n!==null&&(_n=_n.slice(e+1)),L0(Sf,gs),s}finally{Ke=t,Kd=!1}}return null}var jo=[],No=0,Jl=null,Xl=0,_r=[],Sr=0,Us=null,Sn=1,kn="";function Ns(e,t){jo[No++]=Xl,jo[No++]=Jl,Jl=e,Xl=t}function mv(e,t,r){_r[Sr++]=Sn,_r[Sr++]=kn,_r[Sr++]=Us,Us=e;var n=Sn;e=kn;var s=32-qr(n)-1;n&=~(1<<s),r+=1;var a=32-qr(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Sn=1<<32-qr(t)+s|r<<s|n,kn=a+e}else Sn=1<<a|r<<s|n,kn=e}function Of(e){e.return!==null&&(Ns(e,1),mv(e,1,0))}function Mf(e){for(;e===Jl;)Jl=jo[--No],jo[No]=null,Xl=jo[--No],jo[No]=null;for(;e===Us;)Us=_r[--Sr],_r[Sr]=null,kn=_r[--Sr],_r[Sr]=null,Sn=_r[--Sr],_r[Sr]=null}var mr=null,fr=null,st=!1,Wr=null;function pv(e,t){var r=Cr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mr=e,fr=rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mr=e,fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Us!==null?{id:Sn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Cr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,mr=e,fr=null,!0):!1;default:return!1}}function sh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oh(e){if(st){var t=fr;if(t){var r=t;if(!eg(e,t)){if(sh(e))throw Error(ie(418));t=rs(r.nextSibling);var n=mr;t&&eg(e,t)?pv(n,r):(e.flags=e.flags&-4097|2,st=!1,mr=e)}}else{if(sh(e))throw Error(ie(418));e.flags=e.flags&-4097|2,st=!1,mr=e}}}function tg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mr=e}function Xi(e){if(e!==mr)return!1;if(!st)return tg(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eh(e.type,e.memoizedProps)),t&&(t=fr)){if(sh(e))throw gv(),Error(ie(418));for(;t;)pv(e,t),t=rs(t.nextSibling)}if(tg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){fr=rs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}fr=null}}else fr=mr?rs(e.stateNode.nextSibling):null;return!0}function gv(){for(var e=fr;e;)e=rs(e.nextSibling)}function Bo(){fr=mr=null,st=!1}function Df(e){Wr===null?Wr=[e]:Wr.push(e)}var v2=Mn.ReactCurrentBatchConfig;function pa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ie(309));var n=r.stateNode}if(!n)throw Error(ie(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ie(284));if(!r._owner)throw Error(ie(290,e))}return e}function Qi(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rg(e){var t=e._init;return t(e._payload)}function xv(e){function t(y,x){if(e){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=as(y,x),y.index=0,y.sibling=null,y}function a(y,x,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,v,j){return x===null||x.tag!==6?(x=tu(v,y.mode,j),x.return=y,x):(x=s(x,v),x.return=y,x)}function c(y,x,v,j){var N=v.type;return N===go?h(y,x,v.props.children,j,v.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hn&&rg(N)===x.type)?(j=s(x,v.props),j.ref=pa(y,x,v),j.return=y,j):(j=Il(v.type,v.key,v.props,null,y.mode,j),j.ref=pa(y,x,v),j.return=y,j)}function d(y,x,v,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=ru(v,y.mode,j),x.return=y,x):(x=s(x,v.children||[]),x.return=y,x)}function h(y,x,v,j,N){return x===null||x.tag!==7?(x=Os(v,y.mode,j,N),x.return=y,x):(x=s(x,v),x.return=y,x)}function f(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=tu(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zi:return v=Il(x.type,x.key,x.props,null,y.mode,v),v.ref=pa(y,null,x),v.return=y,v;case po:return x=ru(x,y.mode,v),x.return=y,x;case Hn:var j=x._init;return f(y,j(x._payload),v)}if(Na(x)||da(x))return x=Os(x,y.mode,v,null),x.return=y,x;Qi(y,x)}return null}function p(y,x,v,j){var N=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:l(y,x,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zi:return v.key===N?c(y,x,v,j):null;case po:return v.key===N?d(y,x,v,j):null;case Hn:return N=v._init,p(y,x,N(v._payload),j)}if(Na(v)||da(v))return N!==null?null:h(y,x,v,j,null);Qi(y,v)}return null}function m(y,x,v,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(v)||null,l(x,y,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case zi:return y=y.get(j.key===null?v:j.key)||null,c(x,y,j,N);case po:return y=y.get(j.key===null?v:j.key)||null,d(x,y,j,N);case Hn:var _=j._init;return m(y,x,v,_(j._payload),N)}if(Na(j)||da(j))return y=y.get(v)||null,h(x,y,j,N,null);Qi(x,j)}return null}function b(y,x,v,j){for(var N=null,_=null,S=x,P=x=0,C=null;S!==null&&P<v.length;P++){S.index>P?(C=S,S=null):C=S.sibling;var R=p(y,S,v[P],j);if(R===null){S===null&&(S=C);break}e&&S&&R.alternate===null&&t(y,S),x=a(R,x,P),_===null?N=R:_.sibling=R,_=R,S=C}if(P===v.length)return r(y,S),st&&Ns(y,P),N;if(S===null){for(;P<v.length;P++)S=f(y,v[P],j),S!==null&&(x=a(S,x,P),_===null?N=S:_.sibling=S,_=S);return st&&Ns(y,P),N}for(S=n(y,S);P<v.length;P++)C=m(S,y,P,v[P],j),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?P:C.key),x=a(C,x,P),_===null?N=C:_.sibling=C,_=C);return e&&S.forEach(function(M){return t(y,M)}),st&&Ns(y,P),N}function g(y,x,v,j){var N=da(v);if(typeof N!="function")throw Error(ie(150));if(v=N.call(v),v==null)throw Error(ie(151));for(var _=N=null,S=x,P=x=0,C=null,R=v.next();S!==null&&!R.done;P++,R=v.next()){S.index>P?(C=S,S=null):C=S.sibling;var M=p(y,S,R.value,j);if(M===null){S===null&&(S=C);break}e&&S&&M.alternate===null&&t(y,S),x=a(M,x,P),_===null?N=M:_.sibling=M,_=M,S=C}if(R.done)return r(y,S),st&&Ns(y,P),N;if(S===null){for(;!R.done;P++,R=v.next())R=f(y,R.value,j),R!==null&&(x=a(R,x,P),_===null?N=R:_.sibling=R,_=R);return st&&Ns(y,P),N}for(S=n(y,S);!R.done;P++,R=v.next())R=m(S,y,P,R.value,j),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?P:R.key),x=a(R,x,P),_===null?N=R:_.sibling=R,_=R);return e&&S.forEach(function(D){return t(y,D)}),st&&Ns(y,P),N}function w(y,x,v,j){if(typeof v=="object"&&v!==null&&v.type===go&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zi:e:{for(var N=v.key,_=x;_!==null;){if(_.key===N){if(N=v.type,N===go){if(_.tag===7){r(y,_.sibling),x=s(_,v.props.children),x.return=y,y=x;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hn&&rg(N)===_.type){r(y,_.sibling),x=s(_,v.props),x.ref=pa(y,_,v),x.return=y,y=x;break e}r(y,_);break}else t(y,_);_=_.sibling}v.type===go?(x=Os(v.props.children,y.mode,j,v.key),x.return=y,y=x):(j=Il(v.type,v.key,v.props,null,y.mode,j),j.ref=pa(y,x,v),j.return=y,y=j)}return i(y);case po:e:{for(_=v.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){r(y,x.sibling),x=s(x,v.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=ru(v,y.mode,j),x.return=y,y=x}return i(y);case Hn:return _=v._init,w(y,x,_(v._payload),j)}if(Na(v))return b(y,x,v,j);if(da(v))return g(y,x,v,j);Qi(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,v),x.return=y,y=x):(r(y,x),x=tu(v,y.mode,j),x.return=y,y=x),i(y)):r(y,x)}return w}var Vo=xv(!0),vv=xv(!1),Ql=ps(null),Zl=null,_o=null,$f=null;function Lf(){$f=_o=Zl=null}function Uf(e){var t=Ql.current;rt(Ql),e._currentValue=t}function ah(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ao(e,t){Zl=e,$f=_o=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tr=!0),e.firstContext=null)}function Pr(e){var t=e._currentValue;if($f!==e)if(e={context:e,memoizedValue:t,next:null},_o===null){if(Zl===null)throw Error(ie(308));_o=e,Zl.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var Ps=null;function Ff(e){Ps===null?Ps=[e]:Ps.push(e)}function yv(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ff(t)):(r.next=s.next,s.next=r),t.interleaved=r,Pn(e,n)}function Pn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gn=!1;function zf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ns(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Pn(e,r)}return s=n.interleaved,s===null?(t.next=t,Ff(n)):(t.next=s.next,s.next=t),n.interleaved=t,Pn(e,r)}function Cl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kf(e,r)}}function ng(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ec(e,t,r,n){var s=e.updateQueue;Gn=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;i=0,h=d=c=null,l=a;do{var p=l.lane,m=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(p=t,m=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){f=b.call(m,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(m,f,p):b,p==null)break e;f=dt({},f,p);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=m,c=f):h=h.next=m,i|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);zs|=i,e.lanes=i,e.memoizedState=f}}function sg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ie(191,s));s.call(n)}}}var Ti={},un=ps(Ti),ri=ps(Ti),ni=ps(Ti);function Ts(e){if(e===Ti)throw Error(ie(174));return e}function Bf(e,t){switch(Xe(ni,t),Xe(ri,e),Xe(un,Ti),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fu(t,e)}rt(un),Xe(un,t)}function Wo(){rt(un),rt(ri),rt(ni)}function bv(e){Ts(ni.current);var t=Ts(un.current),r=Fu(t,e.type);t!==r&&(Xe(ri,e),Xe(un,r))}function Vf(e){ri.current===e&&(rt(un),rt(ri))}var it=ps(0);function tc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yd=[];function Wf(){for(var e=0;e<Yd.length;e++)Yd[e]._workInProgressVersionPrimary=null;Yd.length=0}var El=Mn.ReactCurrentDispatcher,Jd=Mn.ReactCurrentBatchConfig,Fs=0,ct=null,bt=null,Ct=null,rc=!1,Da=!1,si=0,y2=0;function Lt(){throw Error(ie(321))}function qf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xr(e[r],t[r]))return!1;return!0}function Hf(e,t,r,n,s,a){if(Fs=a,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,El.current=e===null||e.memoizedState===null?N2:_2,e=r(n,s),Da){a=0;do{if(Da=!1,si=0,25<=a)throw Error(ie(301));a+=1,Ct=bt=null,t.updateQueue=null,El.current=S2,e=r(n,s)}while(Da)}if(El.current=nc,t=bt!==null&&bt.next!==null,Fs=0,Ct=bt=ct=null,rc=!1,t)throw Error(ie(300));return e}function Gf(){var e=si!==0;return si=0,e}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?ct.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function Tr(){if(bt===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Ct===null?ct.memoizedState:Ct.next;if(t!==null)Ct=t,bt=e;else{if(e===null)throw Error(ie(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Ct===null?ct.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function oi(e,t){return typeof t=="function"?t(e):t}function Xd(e){var t=Tr(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var n=bt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,d=a;do{var h=d.lane;if((Fs&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,ct.lanes|=h,zs|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,Xr(n,t.memoizedState)||(tr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ct.lanes|=a,zs|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Qd(e){var t=Tr(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);Xr(a,t.memoizedState)||(tr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function jv(){}function Nv(e,t){var r=ct,n=Tr(),s=t(),a=!Xr(n.memoizedState,s);if(a&&(n.memoizedState=s,tr=!0),n=n.queue,Kf(kv.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,ai(9,Sv.bind(null,r,n,s,t),void 0,null),Et===null)throw Error(ie(349));Fs&30||_v(r,t,s)}return s}function _v(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sv(e,t,r,n){t.value=r,t.getSnapshot=n,Cv(t)&&Ev(e)}function kv(e,t,r){return r(function(){Cv(t)&&Ev(e)})}function Cv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xr(e,r)}catch{return!0}}function Ev(e){var t=Pn(e,1);t!==null&&Hr(t,e,1,-1)}function og(e){var t=on();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t.queue=e,e=e.dispatch=j2.bind(null,ct,e),[t.memoizedState,e]}function ai(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Rv(){return Tr().memoizedState}function Rl(e,t,r,n){var s=on();ct.flags|=e,s.memoizedState=ai(1|t,r,void 0,n===void 0?null:n)}function zc(e,t,r,n){var s=Tr();n=n===void 0?null:n;var a=void 0;if(bt!==null){var i=bt.memoizedState;if(a=i.destroy,n!==null&&qf(n,i.deps)){s.memoizedState=ai(t,r,a,n);return}}ct.flags|=e,s.memoizedState=ai(1|t,r,a,n)}function ag(e,t){return Rl(8390656,8,e,t)}function Kf(e,t){return zc(2048,8,e,t)}function Pv(e,t){return zc(4,2,e,t)}function Tv(e,t){return zc(4,4,e,t)}function Av(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Iv(e,t,r){return r=r!=null?r.concat([e]):null,zc(4,4,Av.bind(null,t,e),r)}function Yf(){}function Ov(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Mv(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Dv(e,t,r){return Fs&21?(Xr(r,t)||(r=z0(),ct.lanes|=r,zs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tr=!0),e.memoizedState=r)}function w2(e,t){var r=Ke;Ke=r!==0&&4>r?r:4,e(!0);var n=Jd.transition;Jd.transition={};try{e(!1),t()}finally{Ke=r,Jd.transition=n}}function $v(){return Tr().memoizedState}function b2(e,t,r){var n=os(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lv(e))Uv(t,r);else if(r=yv(e,t,r,n),r!==null){var s=Ht();Hr(r,e,n,s),Fv(r,t,n)}}function j2(e,t,r){var n=os(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lv(e))Uv(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,Xr(l,i)){var c=t.interleaved;c===null?(s.next=s,Ff(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=yv(e,t,s,n),r!==null&&(s=Ht(),Hr(r,e,n,s),Fv(r,t,n))}}function Lv(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function Uv(e,t){Da=rc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Fv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kf(e,r)}}var nc={readContext:Pr,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},N2={readContext:Pr,useCallback:function(e,t){return on().memoizedState=[e,t===void 0?null:t],e},useContext:Pr,useEffect:ag,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Rl(4194308,4,Av.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Rl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rl(4,2,e,t)},useMemo:function(e,t){var r=on();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=on();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=b2.bind(null,ct,e),[n.memoizedState,e]},useRef:function(e){var t=on();return e={current:e},t.memoizedState=e},useState:og,useDebugValue:Yf,useDeferredValue:function(e){return on().memoizedState=e},useTransition:function(){var e=og(!1),t=e[0];return e=w2.bind(null,e[1]),on().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ct,s=on();if(st){if(r===void 0)throw Error(ie(407));r=r()}else{if(r=t(),Et===null)throw Error(ie(349));Fs&30||_v(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,ag(kv.bind(null,n,a,e),[e]),n.flags|=2048,ai(9,Sv.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=on(),t=Et.identifierPrefix;if(st){var r=kn,n=Sn;r=(n&~(1<<32-qr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=si++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=y2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_2={readContext:Pr,useCallback:Ov,useContext:Pr,useEffect:Kf,useImperativeHandle:Iv,useInsertionEffect:Pv,useLayoutEffect:Tv,useMemo:Mv,useReducer:Xd,useRef:Rv,useState:function(){return Xd(oi)},useDebugValue:Yf,useDeferredValue:function(e){var t=Tr();return Dv(t,bt.memoizedState,e)},useTransition:function(){var e=Xd(oi)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:jv,useSyncExternalStore:Nv,useId:$v,unstable_isNewReconciler:!1},S2={readContext:Pr,useCallback:Ov,useContext:Pr,useEffect:Kf,useImperativeHandle:Iv,useInsertionEffect:Pv,useLayoutEffect:Tv,useMemo:Mv,useReducer:Qd,useRef:Rv,useState:function(){return Qd(oi)},useDebugValue:Yf,useDeferredValue:function(e){var t=Tr();return bt===null?t.memoizedState=e:Dv(t,bt.memoizedState,e)},useTransition:function(){var e=Qd(oi)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:jv,useSyncExternalStore:Nv,useId:$v,unstable_isNewReconciler:!1};function Fr(e,t){if(e&&e.defaultProps){t=dt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ih(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Bc={isMounted:function(e){return(e=e._reactInternals)?Xs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ht(),s=os(e),a=Cn(n,s);a.payload=t,r!=null&&(a.callback=r),t=ns(e,a,s),t!==null&&(Hr(t,e,s,n),Cl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ht(),s=os(e),a=Cn(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ns(e,a,s),t!==null&&(Hr(t,e,s,n),Cl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ht(),n=os(e),s=Cn(r,n);s.tag=2,t!=null&&(s.callback=t),t=ns(e,s,n),t!==null&&(Hr(t,e,n,r),Cl(t,e,n))}};function ig(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!Qa(r,n)||!Qa(s,a):!0}function zv(e,t,r){var n=!1,s=cs,a=t.contextType;return typeof a=="object"&&a!==null?a=Pr(a):(s=sr(t)?Ls:Vt.current,n=t.contextTypes,a=(n=n!=null)?zo(e,s):cs),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function lg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Bc.enqueueReplaceState(t,t.state,null)}function lh(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},zf(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Pr(a):(a=sr(t)?Ls:Vt.current,s.context=zo(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ih(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Bc.enqueueReplaceState(s,s.state,null),ec(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function qo(e,t){try{var r="",n=t;do r+=Z_(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Zd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ch(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var k2=typeof WeakMap=="function"?WeakMap:Map;function Bv(e,t,r){r=Cn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){oc||(oc=!0,yh=n),ch(e,t)},r}function Vv(e,t,r){r=Cn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ch(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){ch(e,t),typeof n!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function cg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new k2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=F2.bind(null,e,t,r),t.then(e,e))}function dg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ug(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Cn(-1,1),t.tag=2,ns(r,t,1))),r.lanes|=1),e)}var C2=Mn.ReactCurrentOwner,tr=!1;function Wt(e,t,r,n){t.child=e===null?vv(t,null,r,n):Vo(t,e.child,r,n)}function hg(e,t,r,n,s){r=r.render;var a=t.ref;return Ao(t,s),n=Hf(e,t,r,n,a,s),r=Gf(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(st&&r&&Of(t),t.flags|=1,Wt(e,t,n,s),t.child)}function fg(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!nm(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Wv(e,t,a,n,s)):(e=Il(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Qa,r(i,n)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=as(a,n),e.ref=t.ref,e.return=t,t.child=e}function Wv(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Qa(a,n)&&e.ref===t.ref)if(tr=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(tr=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return dh(e,t,r,n,s)}function qv(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ko,lr),lr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xe(ko,lr),lr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Xe(ko,lr),lr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Xe(ko,lr),lr|=n;return Wt(e,t,s,r),t.child}function Hv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dh(e,t,r,n,s){var a=sr(r)?Ls:Vt.current;return a=zo(t,a),Ao(t,s),r=Hf(e,t,r,n,a,s),n=Gf(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(st&&n&&Of(t),t.flags|=1,Wt(e,t,r,s),t.child)}function mg(e,t,r,n,s){if(sr(r)){var a=!0;Yl(t)}else a=!1;if(Ao(t,s),t.stateNode===null)Pl(e,t),zv(t,r,n),lh(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Pr(d):(d=sr(r)?Ls:Vt.current,d=zo(t,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&lg(t,i,n,d),Gn=!1;var p=t.memoizedState;i.state=p,ec(t,n,i,s),c=t.memoizedState,l!==n||p!==c||nr.current||Gn?(typeof h=="function"&&(ih(t,r,h,n),c=t.memoizedState),(l=Gn||ig(t,r,l,n,p,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,wv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Fr(t.type,l),i.props=d,f=t.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Pr(c):(c=sr(r)?Ls:Vt.current,c=zo(t,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==c)&&lg(t,i,n,c),Gn=!1,p=t.memoizedState,i.state=p,ec(t,n,i,s);var b=t.memoizedState;l!==f||p!==b||nr.current||Gn?(typeof m=="function"&&(ih(t,r,m,n),b=t.memoizedState),(d=Gn||ig(t,r,d,n,p,b,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,b,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),i.props=n,i.state=b,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return uh(e,t,r,n,a,s)}function uh(e,t,r,n,s,a){Hv(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Zp(t,r,!1),Tn(e,t,a);n=t.stateNode,C2.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Vo(t,e.child,null,a),t.child=Vo(t,null,l,a)):Wt(e,t,l,a),t.memoizedState=n.state,s&&Zp(t,r,!0),t.child}function Gv(e){var t=e.stateNode;t.pendingContext?Qp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qp(e,t.context,!1),Bf(e,t.containerInfo)}function pg(e,t,r,n,s){return Bo(),Df(s),t.flags|=256,Wt(e,t,r,n),t.child}var hh={dehydrated:null,treeContext:null,retryLane:0};function fh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kv(e,t,r){var n=t.pendingProps,s=it.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Xe(it,s&1),e===null)return oh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=qc(i,n,0,null),e=Os(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=fh(r),t.memoizedState=hh,e):Jf(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return E2(e,t,i,n,l,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=as(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=as(l,a):(a=Os(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?fh(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=hh,n}return a=e.child,e=a.sibling,n=as(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Jf(e,t){return t=qc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zi(e,t,r,n){return n!==null&&Df(n),Vo(t,e.child,null,r),e=Jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E2(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Zd(Error(ie(422))),Zi(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=qc({mode:"visible",children:n.children},s,0,null),a=Os(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Vo(t,e.child,null,i),t.child.memoizedState=fh(i),t.memoizedState=hh,a);if(!(t.mode&1))return Zi(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ie(419)),n=Zd(a,n,void 0),Zi(e,t,i,n)}if(l=(i&e.childLanes)!==0,tr||l){if(n=Et,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Pn(e,s),Hr(n,e,s,-1))}return rm(),n=Zd(Error(ie(421))),Zi(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=z2.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,fr=rs(s.nextSibling),mr=t,st=!0,Wr=null,e!==null&&(_r[Sr++]=Sn,_r[Sr++]=kn,_r[Sr++]=Us,Sn=e.id,kn=e.overflow,Us=t),t=Jf(t,n.children),t.flags|=4096,t)}function gg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ah(e.return,t,r)}function eu(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Yv(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(Wt(e,t,n.children,r),n=it.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gg(e,r,t);else if(e.tag===19)gg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Xe(it,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&tc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),eu(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&tc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}eu(t,!0,r,null,a);break;case"together":eu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,r=as(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=as(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function R2(e,t,r){switch(t.tag){case 3:Gv(t),Bo();break;case 5:bv(t);break;case 1:sr(t.type)&&Yl(t);break;case 4:Bf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Xe(Ql,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xe(it,it.current&1),t.flags|=128,null):r&t.child.childLanes?Kv(e,t,r):(Xe(it,it.current&1),e=Tn(e,t,r),e!==null?e.sibling:null);Xe(it,it.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Yv(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(it,it.current),n)break;return null;case 22:case 23:return t.lanes=0,qv(e,t,r)}return Tn(e,t,r)}var Jv,mh,Xv,Qv;Jv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mh=function(){};Xv=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ts(un.current);var a=null;switch(r){case"input":s=Du(e,s),n=Du(e,n),a=[];break;case"select":s=dt({},s,{value:void 0}),n=dt({},n,{value:void 0}),a=[];break;case"textarea":s=Uu(e,s),n=Uu(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Gl)}zu(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qa.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ze("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Qv=function(e,t,r,n){r!==n&&(t.flags|=4)};function ga(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function P2(e,t,r){var n=t.pendingProps;switch(Mf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return sr(t.type)&&Kl(),Ut(t),null;case 3:return n=t.stateNode,Wo(),rt(nr),rt(Vt),Wf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wr!==null&&(jh(Wr),Wr=null))),mh(e,t),Ut(t),null;case 5:Vf(t);var s=Ts(ni.current);if(r=t.type,e!==null&&t.stateNode!=null)Xv(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ie(166));return Ut(t),null}if(e=Ts(un.current),Xi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[an]=t,n[ti]=a,e=(t.mode&1)!==0,r){case"dialog":Ze("cancel",n),Ze("close",n);break;case"iframe":case"object":case"embed":Ze("load",n);break;case"video":case"audio":for(s=0;s<Sa.length;s++)Ze(Sa[s],n);break;case"source":Ze("error",n);break;case"img":case"image":case"link":Ze("error",n),Ze("load",n);break;case"details":Ze("toggle",n);break;case"input":Sp(n,a),Ze("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ze("invalid",n);break;case"textarea":Cp(n,a),Ze("invalid",n)}zu(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Ji(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Ji(n.textContent,l,e),s=["children",""+l]):qa.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ze("scroll",n)}switch(r){case"input":Bi(n),kp(n,a,!0);break;case"textarea":Bi(n),Ep(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Gl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=k0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[an]=t,e[ti]=n,Jv(e,t,!1,!1),t.stateNode=e;e:{switch(i=Bu(r,n),r){case"dialog":Ze("cancel",e),Ze("close",e),s=n;break;case"iframe":case"object":case"embed":Ze("load",e),s=n;break;case"video":case"audio":for(s=0;s<Sa.length;s++)Ze(Sa[s],e);s=n;break;case"source":Ze("error",e),s=n;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),s=n;break;case"details":Ze("toggle",e),s=n;break;case"input":Sp(e,n),s=Du(e,n),Ze("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=dt({},n,{value:void 0}),Ze("invalid",e);break;case"textarea":Cp(e,n),s=Uu(e,n),Ze("invalid",e);break;default:s=n}zu(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?R0(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&C0(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ha(e,c):typeof c=="number"&&Ha(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(qa.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ze("scroll",e):c!=null&&wf(e,a,c,i))}switch(r){case"input":Bi(e),kp(e,n,!1);break;case"textarea":Bi(e),Ep(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ls(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Eo(e,!!n.multiple,a,!1):n.defaultValue!=null&&Eo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Gl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)Qv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ie(166));if(r=Ts(ni.current),Ts(un.current),Xi(t)){if(n=t.stateNode,r=t.memoizedProps,n[an]=t,(a=n.nodeValue!==r)&&(e=mr,e!==null))switch(e.tag){case 3:Ji(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ji(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[an]=t,t.stateNode=n}return Ut(t),null;case 13:if(rt(it),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&fr!==null&&t.mode&1&&!(t.flags&128))gv(),Bo(),t.flags|=98560,a=!1;else if(a=Xi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ie(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ie(317));a[an]=t}else Bo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),a=!1}else Wr!==null&&(jh(Wr),Wr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?jt===0&&(jt=3):rm())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return Wo(),mh(e,t),e===null&&Za(t.stateNode.containerInfo),Ut(t),null;case 10:return Uf(t.type._context),Ut(t),null;case 17:return sr(t.type)&&Kl(),Ut(t),null;case 19:if(rt(it),a=t.memoizedState,a===null)return Ut(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)ga(a,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=tc(e),i!==null){for(t.flags|=128,ga(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xe(it,it.current&1|2),t.child}e=e.sibling}a.tail!==null&&pt()>Ho&&(t.flags|=128,n=!0,ga(a,!1),t.lanes=4194304)}else{if(!n)if(e=tc(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ga(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!st)return Ut(t),null}else 2*pt()-a.renderingStartTime>Ho&&r!==1073741824&&(t.flags|=128,n=!0,ga(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=pt(),t.sibling=null,r=it.current,Xe(it,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return tm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?lr&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function T2(e,t){switch(Mf(t),t.tag){case 1:return sr(t.type)&&Kl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wo(),rt(nr),rt(Vt),Wf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vf(t),null;case 13:if(rt(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));Bo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(it),null;case 4:return Wo(),null;case 10:return Uf(t.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var el=!1,zt=!1,A2=typeof WeakSet=="function"?WeakSet:Set,ye=null;function So(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(e,t,n)}else r.current=null}function ph(e,t,r){try{r()}catch(n){ft(e,t,n)}}var xg=!1;function I2(e,t){if(Qu=Wl,e=nv(),If(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,h=0,f=e,p=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=i+s),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++d===s&&(l=i),p===a&&++h===n&&(c=i),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zu={focusedElem:e,selectionRange:r},Wl=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Fr(t.type,g),w);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(j){ft(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return b=xg,xg=!1,b}function $a(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ph(t,r,a)}s=s.next}while(s!==n)}}function Vc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function gh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zv(e){var t=e.alternate;t!==null&&(e.alternate=null,Zv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[ti],delete t[rh],delete t[p2],delete t[g2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ey(e){return e.tag===5||e.tag===3||e.tag===4}function vg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gl));else if(n!==4&&(e=e.child,e!==null))for(xh(e,t,r),e=e.sibling;e!==null;)xh(e,t,r),e=e.sibling}function vh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vh(e,t,r),e=e.sibling;e!==null;)vh(e,t,r),e=e.sibling}var At=null,Br=!1;function Fn(e,t,r){for(r=r.child;r!==null;)ty(e,t,r),r=r.sibling}function ty(e,t,r){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Mc,r)}catch{}switch(r.tag){case 5:zt||So(r,t);case 6:var n=At,s=Br;At=null,Fn(e,t,r),At=n,Br=s,At!==null&&(Br?(e=At,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):At.removeChild(r.stateNode));break;case 18:At!==null&&(Br?(e=At,r=r.stateNode,e.nodeType===8?Gd(e.parentNode,r):e.nodeType===1&&Gd(e,r),Ja(e)):Gd(At,r.stateNode));break;case 4:n=At,s=Br,At=r.stateNode.containerInfo,Br=!0,Fn(e,t,r),At=n,Br=s;break;case 0:case 11:case 14:case 15:if(!zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ph(r,t,i),s=s.next}while(s!==n)}Fn(e,t,r);break;case 1:if(!zt&&(So(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ft(r,t,l)}Fn(e,t,r);break;case 21:Fn(e,t,r);break;case 22:r.mode&1?(zt=(n=zt)||r.memoizedState!==null,Fn(e,t,r),zt=n):Fn(e,t,r);break;default:Fn(e,t,r)}}function yg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new A2),t.forEach(function(n){var s=B2.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Mr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:At=l.stateNode,Br=!1;break e;case 3:At=l.stateNode.containerInfo,Br=!0;break e;case 4:At=l.stateNode.containerInfo,Br=!0;break e}l=l.return}if(At===null)throw Error(ie(160));ty(a,i,s),At=null,Br=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ft(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ry(t,e),t=t.sibling}function ry(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(t,e),sn(e),n&4){try{$a(3,e,e.return),Vc(3,e)}catch(g){ft(e,e.return,g)}try{$a(5,e,e.return)}catch(g){ft(e,e.return,g)}}break;case 1:Mr(t,e),sn(e),n&512&&r!==null&&So(r,r.return);break;case 5:if(Mr(t,e),sn(e),n&512&&r!==null&&So(r,r.return),e.flags&32){var s=e.stateNode;try{Ha(s,"")}catch(g){ft(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&_0(s,a),Bu(l,i);var d=Bu(l,a);for(i=0;i<c.length;i+=2){var h=c[i],f=c[i+1];h==="style"?R0(s,f):h==="dangerouslySetInnerHTML"?C0(s,f):h==="children"?Ha(s,f):wf(s,h,f,d)}switch(l){case"input":$u(s,a);break;case"textarea":S0(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Eo(s,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?Eo(s,!!a.multiple,a.defaultValue,!0):Eo(s,!!a.multiple,a.multiple?[]:"",!1))}s[ti]=a}catch(g){ft(e,e.return,g)}}break;case 6:if(Mr(t,e),sn(e),n&4){if(e.stateNode===null)throw Error(ie(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){ft(e,e.return,g)}}break;case 3:if(Mr(t,e),sn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ja(t.containerInfo)}catch(g){ft(e,e.return,g)}break;case 4:Mr(t,e),sn(e);break;case 13:Mr(t,e),sn(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Zf=pt())),n&4&&yg(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(zt=(d=zt)||h,Mr(t,e),zt=d):Mr(t,e),sn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(ye=e,h=e.child;h!==null;){for(f=ye=h;ye!==null;){switch(p=ye,m=p.child,p.tag){case 0:case 11:case 14:case 15:$a(4,p,p.return);break;case 1:So(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){ft(n,r,g)}}break;case 5:So(p,p.return);break;case 22:if(p.memoizedState!==null){bg(f);continue}}m!==null?(m.return=p,ye=m):bg(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=E0("display",i))}catch(g){ft(e,e.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){ft(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mr(t,e),sn(e),n&4&&yg(e);break;case 21:break;default:Mr(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ey(r)){var n=r;break e}r=r.return}throw Error(ie(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ha(s,""),n.flags&=-33);var a=vg(e);vh(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=vg(e);xh(e,l,i);break;default:throw Error(ie(161))}}catch(c){ft(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O2(e,t,r){ye=e,ny(e)}function ny(e,t,r){for(var n=(e.mode&1)!==0;ye!==null;){var s=ye,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||el;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||zt;l=el;var d=zt;if(el=i,(zt=c)&&!d)for(ye=s;ye!==null;)i=ye,c=i.child,i.tag===22&&i.memoizedState!==null?jg(s):c!==null?(c.return=i,ye=c):jg(s);for(;a!==null;)ye=a,ny(a),a=a.sibling;ye=s,el=l,zt=d}wg(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ye=a):wg(e)}}function wg(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zt||Vc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!zt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Fr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&sg(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sg(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ja(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}zt||t.flags&512&&gh(t)}catch(p){ft(t,t.return,p)}}if(t===e){ye=null;break}if(r=t.sibling,r!==null){r.return=t.return,ye=r;break}ye=t.return}}function bg(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ye=r;break}ye=t.return}}function jg(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vc(4,t)}catch(c){ft(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ft(t,s,c)}}var a=t.return;try{gh(t)}catch(c){ft(t,a,c)}break;case 5:var i=t.return;try{gh(t)}catch(c){ft(t,i,c)}}}catch(c){ft(t,t.return,c)}if(t===e){ye=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ye=l;break}ye=t.return}}var M2=Math.ceil,sc=Mn.ReactCurrentDispatcher,Xf=Mn.ReactCurrentOwner,Er=Mn.ReactCurrentBatchConfig,Ve=0,Et=null,vt=null,Mt=0,lr=0,ko=ps(0),jt=0,ii=null,zs=0,Wc=0,Qf=0,La=null,er=null,Zf=0,Ho=1/0,jn=null,oc=!1,yh=null,ss=null,tl=!1,Qn=null,ac=0,Ua=0,wh=null,Tl=-1,Al=0;function Ht(){return Ve&6?pt():Tl!==-1?Tl:Tl=pt()}function os(e){return e.mode&1?Ve&2&&Mt!==0?Mt&-Mt:v2.transition!==null?(Al===0&&(Al=z0()),Al):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:K0(e.type)),e):1}function Hr(e,t,r,n){if(50<Ua)throw Ua=0,wh=null,Error(ie(185));Ei(e,r,n),(!(Ve&2)||e!==Et)&&(e===Et&&(!(Ve&2)&&(Wc|=r),jt===4&&Yn(e,Mt)),or(e,n),r===1&&Ve===0&&!(t.mode&1)&&(Ho=pt()+500,Fc&&gs()))}function or(e,t){var r=e.callbackNode;vS(e,t);var n=Vl(e,e===Et?Mt:0);if(n===0)r!==null&&Tp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Tp(r),t===1)e.tag===0?x2(Ng.bind(null,e)):fv(Ng.bind(null,e)),f2(function(){!(Ve&6)&&gs()}),r=null;else{switch(B0(n)){case 1:r=Sf;break;case 4:r=U0;break;case 16:r=Bl;break;case 536870912:r=F0;break;default:r=Bl}r=uy(r,sy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sy(e,t){if(Tl=-1,Al=0,Ve&6)throw Error(ie(327));var r=e.callbackNode;if(Io()&&e.callbackNode!==r)return null;var n=Vl(e,e===Et?Mt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ic(e,n);else{t=n;var s=Ve;Ve|=2;var a=ay();(Et!==e||Mt!==t)&&(jn=null,Ho=pt()+500,Is(e,t));do try{L2();break}catch(l){oy(e,l)}while(!0);Lf(),sc.current=a,Ve=s,vt!==null?t=0:(Et=null,Mt=0,t=jt)}if(t!==0){if(t===2&&(s=Gu(e),s!==0&&(n=s,t=bh(e,s))),t===1)throw r=ii,Is(e,0),Yn(e,n),or(e,pt()),r;if(t===6)Yn(e,n);else{if(s=e.current.alternate,!(n&30)&&!D2(s)&&(t=ic(e,n),t===2&&(a=Gu(e),a!==0&&(n=a,t=bh(e,a))),t===1))throw r=ii,Is(e,0),Yn(e,n),or(e,pt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ie(345));case 2:_s(e,er,jn);break;case 3:if(Yn(e,n),(n&130023424)===n&&(t=Zf+500-pt(),10<t)){if(Vl(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ht(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=th(_s.bind(null,e,er,jn),t);break}_s(e,er,jn);break;case 4:if(Yn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-qr(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=pt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*M2(n/1960))-n,10<n){e.timeoutHandle=th(_s.bind(null,e,er,jn),n);break}_s(e,er,jn);break;case 5:_s(e,er,jn);break;default:throw Error(ie(329))}}}return or(e,pt()),e.callbackNode===r?sy.bind(null,e):null}function bh(e,t){var r=La;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),e=ic(e,t),e!==2&&(t=er,er=r,t!==null&&jh(t)),e}function jh(e){er===null?er=e:er.push.apply(er,e)}function D2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Xr(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~Qf,t&=~Wc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qr(t),n=1<<r;e[r]=-1,t&=~n}}function Ng(e){if(Ve&6)throw Error(ie(327));Io();var t=Vl(e,0);if(!(t&1))return or(e,pt()),null;var r=ic(e,t);if(e.tag!==0&&r===2){var n=Gu(e);n!==0&&(t=n,r=bh(e,n))}if(r===1)throw r=ii,Is(e,0),Yn(e,t),or(e,pt()),r;if(r===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_s(e,er,jn),or(e,pt()),null}function em(e,t){var r=Ve;Ve|=1;try{return e(t)}finally{Ve=r,Ve===0&&(Ho=pt()+500,Fc&&gs())}}function Bs(e){Qn!==null&&Qn.tag===0&&!(Ve&6)&&Io();var t=Ve;Ve|=1;var r=Er.transition,n=Ke;try{if(Er.transition=null,Ke=1,e)return e()}finally{Ke=n,Er.transition=r,Ve=t,!(Ve&6)&&gs()}}function tm(){lr=ko.current,rt(ko)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,h2(r)),vt!==null)for(r=vt.return;r!==null;){var n=r;switch(Mf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Kl();break;case 3:Wo(),rt(nr),rt(Vt),Wf();break;case 5:Vf(n);break;case 4:Wo();break;case 13:rt(it);break;case 19:rt(it);break;case 10:Uf(n.type._context);break;case 22:case 23:tm()}r=r.return}if(Et=e,vt=e=as(e.current,null),Mt=lr=t,jt=0,ii=null,Qf=Wc=zs=0,er=La=null,Ps!==null){for(t=0;t<Ps.length;t++)if(r=Ps[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Ps=null}return e}function oy(e,t){do{var r=vt;try{if(Lf(),El.current=nc,rc){for(var n=ct.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}rc=!1}if(Fs=0,Ct=bt=ct=null,Da=!1,si=0,Xf.current=null,r===null||r.return===null){jt=1,ii=t,vt=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=Mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=dg(i);if(m!==null){m.flags&=-257,ug(m,i,l,a,t),m.mode&1&&cg(a,d,t),t=m,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){cg(a,d,t),rm();break e}c=Error(ie(426))}}else if(st&&l.mode&1){var w=dg(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ug(w,i,l,a,t),Df(qo(c,l));break e}}a=c=qo(c,l),jt!==4&&(jt=2),La===null?La=[a]:La.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Bv(a,c,t);ng(a,y);break e;case 1:l=c;var x=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=Vv(a,l,t);ng(a,j);break e}}a=a.return}while(a!==null)}ly(r)}catch(N){t=N,vt===r&&r!==null&&(vt=r=r.return);continue}break}while(!0)}function ay(){var e=sc.current;return sc.current=nc,e===null?nc:e}function rm(){(jt===0||jt===3||jt===2)&&(jt=4),Et===null||!(zs&268435455)&&!(Wc&268435455)||Yn(Et,Mt)}function ic(e,t){var r=Ve;Ve|=2;var n=ay();(Et!==e||Mt!==t)&&(jn=null,Is(e,t));do try{$2();break}catch(s){oy(e,s)}while(!0);if(Lf(),Ve=r,sc.current=n,vt!==null)throw Error(ie(261));return Et=null,Mt=0,jt}function $2(){for(;vt!==null;)iy(vt)}function L2(){for(;vt!==null&&!cS();)iy(vt)}function iy(e){var t=dy(e.alternate,e,lr);e.memoizedProps=e.pendingProps,t===null?ly(e):vt=t,Xf.current=null}function ly(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=T2(r,t),r!==null){r.flags&=32767,vt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jt=6,vt=null;return}}else if(r=P2(r,t,lr),r!==null){vt=r;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=e}while(t!==null);jt===0&&(jt=5)}function _s(e,t,r){var n=Ke,s=Er.transition;try{Er.transition=null,Ke=1,U2(e,t,r,n)}finally{Er.transition=s,Ke=n}return null}function U2(e,t,r,n){do Io();while(Qn!==null);if(Ve&6)throw Error(ie(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(yS(e,a),e===Et&&(vt=Et=null,Mt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tl||(tl=!0,uy(Bl,function(){return Io(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Er.transition,Er.transition=null;var i=Ke;Ke=1;var l=Ve;Ve|=4,Xf.current=null,I2(e,r),ry(r,e),o2(Zu),Wl=!!Qu,Zu=Qu=null,e.current=r,O2(r),dS(),Ve=l,Ke=i,Er.transition=a}else e.current=r;if(tl&&(tl=!1,Qn=e,ac=s),a=e.pendingLanes,a===0&&(ss=null),fS(r.stateNode),or(e,pt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(oc)throw oc=!1,e=yh,yh=null,e;return ac&1&&e.tag!==0&&Io(),a=e.pendingLanes,a&1?e===wh?Ua++:(Ua=0,wh=e):Ua=0,gs(),null}function Io(){if(Qn!==null){var e=B0(ac),t=Er.transition,r=Ke;try{if(Er.transition=null,Ke=16>e?16:e,Qn===null)var n=!1;else{if(e=Qn,Qn=null,ac=0,Ve&6)throw Error(ie(331));var s=Ve;for(Ve|=4,ye=e.current;ye!==null;){var a=ye,i=a.child;if(ye.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ye=d;ye!==null;){var h=ye;switch(h.tag){case 0:case 11:case 15:$a(8,h,a)}var f=h.child;if(f!==null)f.return=h,ye=f;else for(;ye!==null;){h=ye;var p=h.sibling,m=h.return;if(Zv(h),h===d){ye=null;break}if(p!==null){p.return=m,ye=p;break}ye=m}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ye=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ye=i;else e:for(;ye!==null;){if(a=ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$a(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ye=y;break e}ye=a.return}}var x=e.current;for(ye=x;ye!==null;){i=ye;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,ye=v;else e:for(i=x;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vc(9,l)}}catch(N){ft(l,l.return,N)}if(l===i){ye=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ye=j;break e}ye=l.return}}if(Ve=s,gs(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Mc,e)}catch{}n=!0}return n}finally{Ke=r,Er.transition=t}}return!1}function _g(e,t,r){t=qo(r,t),t=Bv(e,t,1),e=ns(e,t,1),t=Ht(),e!==null&&(Ei(e,1,t),or(e,t))}function ft(e,t,r){if(e.tag===3)_g(e,e,r);else for(;t!==null;){if(t.tag===3){_g(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ss===null||!ss.has(n))){e=qo(r,e),e=Vv(t,e,1),t=ns(t,e,1),e=Ht(),t!==null&&(Ei(t,1,e),or(t,e));break}}t=t.return}}function F2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&r,Et===e&&(Mt&r)===r&&(jt===4||jt===3&&(Mt&130023424)===Mt&&500>pt()-Zf?Is(e,0):Qf|=r),or(e,t)}function cy(e,t){t===0&&(e.mode&1?(t=qi,qi<<=1,!(qi&130023424)&&(qi=4194304)):t=1);var r=Ht();e=Pn(e,t),e!==null&&(Ei(e,t,r),or(e,r))}function z2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),cy(e,r)}function B2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ie(314))}n!==null&&n.delete(t),cy(e,r)}var dy;dy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nr.current)tr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return tr=!1,R2(e,t,r);tr=!!(e.flags&131072)}else tr=!1,st&&t.flags&1048576&&mv(t,Xl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Pl(e,t),e=t.pendingProps;var s=zo(t,Vt.current);Ao(t,r),s=Hf(null,t,n,e,s,r);var a=Gf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,sr(n)?(a=!0,Yl(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zf(t),s.updater=Bc,t.stateNode=s,s._reactInternals=t,lh(t,n,e,r),t=uh(null,t,n,!0,a,r)):(t.tag=0,st&&a&&Of(t),Wt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Pl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=W2(n),e=Fr(n,e),s){case 0:t=dh(null,t,n,e,r);break e;case 1:t=mg(null,t,n,e,r);break e;case 11:t=hg(null,t,n,e,r);break e;case 14:t=fg(null,t,n,Fr(n.type,e),r);break e}throw Error(ie(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Fr(n,s),dh(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Fr(n,s),mg(e,t,n,s,r);case 3:e:{if(Gv(t),e===null)throw Error(ie(387));n=t.pendingProps,a=t.memoizedState,s=a.element,wv(e,t),ec(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=qo(Error(ie(423)),t),t=pg(e,t,n,r,s);break e}else if(n!==s){s=qo(Error(ie(424)),t),t=pg(e,t,n,r,s);break e}else for(fr=rs(t.stateNode.containerInfo.firstChild),mr=t,st=!0,Wr=null,r=vv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bo(),n===s){t=Tn(e,t,r);break e}Wt(e,t,n,r)}t=t.child}return t;case 5:return bv(t),e===null&&oh(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,eh(n,s)?i=null:a!==null&&eh(n,a)&&(t.flags|=32),Hv(e,t),Wt(e,t,i,r),t.child;case 6:return e===null&&oh(t),null;case 13:return Kv(e,t,r);case 4:return Bf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Vo(t,null,n,r):Wt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Fr(n,s),hg(e,t,n,s,r);case 7:return Wt(e,t,t.pendingProps,r),t.child;case 8:return Wt(e,t,t.pendingProps.children,r),t.child;case 12:return Wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Xe(Ql,n._currentValue),n._currentValue=i,a!==null)if(Xr(a.value,i)){if(a.children===s.children&&!nr.current){t=Tn(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Cn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ah(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ie(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ah(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Wt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ao(t,r),s=Pr(s),n=n(s),t.flags|=1,Wt(e,t,n,r),t.child;case 14:return n=t.type,s=Fr(n,t.pendingProps),s=Fr(n.type,s),fg(e,t,n,s,r);case 15:return Wv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Fr(n,s),Pl(e,t),t.tag=1,sr(n)?(e=!0,Yl(t)):e=!1,Ao(t,r),zv(t,n,s),lh(t,n,s,r),uh(null,t,n,!0,e,r);case 19:return Yv(e,t,r);case 22:return qv(e,t,r)}throw Error(ie(156,t.tag))};function uy(e,t){return L0(e,t)}function V2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(e,t,r,n){return new V2(e,t,r,n)}function nm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function W2(e){if(typeof e=="function")return nm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jf)return 11;if(e===Nf)return 14}return 2}function as(e,t){var r=e.alternate;return r===null?(r=Cr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Il(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")nm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case go:return Os(r.children,s,a,t);case bf:i=8,s|=8;break;case Au:return e=Cr(12,r,t,s|2),e.elementType=Au,e.lanes=a,e;case Iu:return e=Cr(13,r,t,s),e.elementType=Iu,e.lanes=a,e;case Ou:return e=Cr(19,r,t,s),e.elementType=Ou,e.lanes=a,e;case b0:return qc(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y0:i=10;break e;case w0:i=9;break e;case jf:i=11;break e;case Nf:i=14;break e;case Hn:i=16,n=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Cr(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function Os(e,t,r,n){return e=Cr(7,e,n,t),e.lanes=r,e}function qc(e,t,r,n){return e=Cr(22,e,n,t),e.elementType=b0,e.lanes=r,e.stateNode={isHidden:!1},e}function tu(e,t,r){return e=Cr(6,e,null,t),e.lanes=r,e}function ru(e,t,r){return t=Cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q2(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dd(0),this.expirationTimes=Dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(e,t,r,n,s,a,i,l,c){return e=new q2(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Cr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(a),e}function H2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:po,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function hy(e){if(!e)return cs;e=e._reactInternals;e:{if(Xs(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var r=e.type;if(sr(r))return hv(e,r,t)}return t}function fy(e,t,r,n,s,a,i,l,c){return e=sm(r,n,!0,e,s,a,i,l,c),e.context=hy(null),r=e.current,n=Ht(),s=os(r),a=Cn(n,s),a.callback=t??null,ns(r,a,s),e.current.lanes=s,Ei(e,s,n),or(e,n),e}function Hc(e,t,r,n){var s=t.current,a=Ht(),i=os(s);return r=hy(r),t.context===null?t.context=r:t.pendingContext=r,t=Cn(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ns(s,t,i),e!==null&&(Hr(e,s,i,a),Cl(e,s,i)),i}function lc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function om(e,t){Sg(e,t),(e=e.alternate)&&Sg(e,t)}function G2(){return null}var my=typeof reportError=="function"?reportError:function(e){console.error(e)};function am(e){this._internalRoot=e}Gc.prototype.render=am.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));Hc(e,t,null,null)};Gc.prototype.unmount=am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bs(function(){Hc(null,e,null,null)}),t[Rn]=null}};function Gc(e){this._internalRoot=e}Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=q0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kn.length&&t!==0&&t<Kn[r].priority;r++);Kn.splice(r,0,e),r===0&&G0(e)}};function im(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kg(){}function K2(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=lc(i);a.call(d)}}var i=fy(t,n,e,0,null,!1,!1,"",kg);return e._reactRootContainer=i,e[Rn]=i.current,Za(e.nodeType===8?e.parentNode:e),Bs(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=lc(c);l.call(d)}}var c=sm(e,0,!1,null,null,!1,!1,"",kg);return e._reactRootContainer=c,e[Rn]=c.current,Za(e.nodeType===8?e.parentNode:e),Bs(function(){Hc(t,c,r,n)}),c}function Yc(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=lc(i);l.call(c)}}Hc(t,i,e,s)}else i=K2(r,t,e,s,n);return lc(i)}V0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_a(t.pendingLanes);r!==0&&(kf(t,r|1),or(t,pt()),!(Ve&6)&&(Ho=pt()+500,gs()))}break;case 13:Bs(function(){var n=Pn(e,1);if(n!==null){var s=Ht();Hr(n,e,1,s)}}),om(e,1)}};Cf=function(e){if(e.tag===13){var t=Pn(e,134217728);if(t!==null){var r=Ht();Hr(t,e,134217728,r)}om(e,134217728)}};W0=function(e){if(e.tag===13){var t=os(e),r=Pn(e,t);if(r!==null){var n=Ht();Hr(r,e,t,n)}om(e,t)}};q0=function(){return Ke};H0=function(e,t){var r=Ke;try{return Ke=e,t()}finally{Ke=r}};Wu=function(e,t,r){switch(t){case"input":if($u(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Uc(n);if(!s)throw Error(ie(90));N0(n),$u(n,s)}}}break;case"textarea":S0(e,r);break;case"select":t=r.value,t!=null&&Eo(e,!!r.multiple,t,!1)}};A0=em;I0=Bs;var Y2={usingClientEntryPoint:!1,Events:[Pi,wo,Uc,P0,T0,em]},xa={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J2={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=D0(e),e===null?null:e.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||G2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Mc=rl.inject(J2),dn=rl}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y2;xr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!im(t))throw Error(ie(200));return H2(e,t,null,r)};xr.createRoot=function(e,t){if(!im(e))throw Error(ie(299));var r=!1,n="",s=my;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=sm(e,1,!1,null,null,r,!1,n,s),e[Rn]=t.current,Za(e.nodeType===8?e.parentNode:e),new am(t)};xr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=D0(t),e=e===null?null:e.stateNode,e};xr.flushSync=function(e){return Bs(e)};xr.hydrate=function(e,t,r){if(!Kc(t))throw Error(ie(200));return Yc(null,e,t,!0,r)};xr.hydrateRoot=function(e,t,r){if(!im(e))throw Error(ie(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=my;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=fy(t,null,e,1,r??null,s,!1,a,i),e[Rn]=t.current,Za(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Gc(t)};xr.render=function(e,t,r){if(!Kc(t))throw Error(ie(200));return Yc(null,e,t,!1,r)};xr.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(ie(40));return e._reactRootContainer?(Bs(function(){Yc(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};xr.unstable_batchedUpdates=em;xr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Kc(r))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Yc(e,t,r,!1,n)};xr.version="18.3.1-next-f1338f8080-20240426";function py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(py)}catch(e){console.error(e)}}py(),p0.exports=xr;var ta=p0.exports;const gy=n0(ta);var xy,Cg=ta;xy=Cg.createRoot,Cg.hydrateRoot;function Fa(e){if(e.length===0)return{cuisinePreferences:{},dietaryPreferences:[],difficultyPreferences:{},avgCookTime:0,totalRecipesSaved:0};const t={},r=new Set,n={};let s=0;return e.forEach(a=>{t[a.cuisineType]=(t[a.cuisineType]||0)+1,n[a.difficulty]=(n[a.difficulty]||0)+1,a.dietaryTags.forEach(i=>r.add(i)),s+=a.prepTime+a.cookTime}),{cuisinePreferences:t,dietaryPreferences:Array.from(r),difficultyPreferences:n,avgCookTime:s/e.length,totalRecipesSaved:e.length}}function X2(e,t,r,n){if(n.has(e.id))return-1e3;let s=0;const a=t.cuisinePreferences[e.cuisineType]||0;s+=a*10,r.favoriteCuisines.includes(e.cuisineType)&&(s+=15);let l=0;e.dietaryTags.forEach(m=>{t.dietaryPreferences.includes(m)&&l++,r.dietaryPreferences.includes(m)&&l++}),s+=l*8;const c=t.difficultyPreferences[e.difficulty]||0;s+=c*5;const h={Beginner:"Easy",Intermediate:"Medium",Advanced:"Hard"}[r.cookingSkillLevel];if(e.difficulty===h?s+=10:(r.cookingSkillLevel==="Intermediate"&&e.difficulty==="Easy"||r.cookingSkillLevel==="Advanced"&&e.difficulty==="Medium")&&(s+=5),t.avgCookTime>0){const m=e.prepTime+e.cookTime,b=Math.abs(m-t.avgCookTime),g=Math.max(0,10-b/10);s+=g}e.ingredients.some(m=>r.dislikedIngredients.some(b=>m.name.toLowerCase().includes(b.toLowerCase())))&&(s-=50),e.popularity&&(s+=e.popularity*.5);const p=Math.random()*5;return s+=p,s}function Q2(e,t,r,n=6){const s=Fa(t),a=new Set(t.map(l=>l.id));return t.length===0?e.filter(l=>!a.has(l.id)).sort((l,c)=>(c.popularity||0)-(l.popularity||0)).slice(0,n):e.map(l=>({recipe:l,score:X2(l,s,r,a)})).filter(l=>l.score>=0).sort((l,c)=>c.score-l.score).slice(0,n).map(l=>l.recipe)}function Z2(e){if(e.length===0)return"Popular recipes to get you started";const t=Fa(e),r=Object.entries(t.cuisinePreferences).sort((s,a)=>a[1]-s[1])[0],n=[];return r&&n.push(r[0]),t.dietaryPreferences.length>0&&n.push(t.dietaryPreferences[0]),n.length>0?`Based on your love for ${n.join(" and ")} recipes`:"Personalized recommendations based on your saved recipes"}async function Eg(){}async function Rg(){}const ek={savedRecipes:[],mealPlan:[],groceryList:[],userPreferences:{dietaryPreferences:[],favoriteCuisines:[],cookingSkillLevel:"Beginner",householdSize:2,dislikedIngredients:[],visualLearningStyle:"auto"},userProfile:{cuisinePreferences:{},dietaryPreferences:[],difficultyPreferences:{},avgCookTime:0,totalRecipesSaved:0},discoveryRecipes:[],hasSeenOnboarding:!0},vy=u.createContext(void 0);function tk(e,t){switch(t.type){case"SAVE_RECIPE":{const r=[...e.savedRecipes,{...t.payload,isSaved:!0}],n=Fa(r);return Eg(),Rg(),{...e,savedRecipes:r,userProfile:n}}case"REMOVE_RECIPE":{const r=e.savedRecipes.filter(s=>s.id!==t.payload),n=Fa(r);return Eg(),Rg(),{...e,savedRecipes:r,userProfile:n}}case"ADD_MEAL_PLAN":return{...e,mealPlan:[...e.mealPlan,t.payload]};case"REMOVE_MEAL_PLAN":return{...e,mealPlan:e.mealPlan.filter(r=>r.id!==t.payload)};case"CLEAR_MEAL_PLAN":return{...e,mealPlan:[],groceryList:[]};case"UPDATE_MEAL_PLAN":return{...e,mealPlan:e.mealPlan.map(r=>r.id===t.payload.id?t.payload:r)};case"ADD_GROCERY_ITEM":return{...e,groceryList:[...e.groceryList,t.payload]};case"REMOVE_GROCERY_ITEM":return{...e,groceryList:e.groceryList.filter(r=>r.id!==t.payload)};case"TOGGLE_GROCERY_ITEM":return{...e,groceryList:e.groceryList.map(r=>r.id===t.payload?{...r,checked:!r.checked}:r)};case"UPDATE_GROCERY_LIST":return{...e,groceryList:t.payload};case"UPDATE_PREFERENCES":{const r={...e.userPreferences,...t.payload};return{...e,userPreferences:r}}case"COMPLETE_ONBOARDING":return{...e,hasSeenOnboarding:!0};case"LOAD_STATE":{const r=t.payload,n=Fa(r.savedRecipes||[]);return{...r,userProfile:n}}default:return e}}function rk({children:e}){const[t,r]=u.useReducer(tk,ek);return u.useEffect(()=>{const n=localStorage.getItem("recipeAppState");if(n)try{const s=JSON.parse(n);r({type:"LOAD_STATE",payload:{...s,discoveryRecipes:[]}})}catch(s){console.error("Failed to load state from localStorage",s)}},[]),u.useEffect(()=>{const n={...t,discoveryRecipes:[]};localStorage.setItem("recipeAppState",JSON.stringify(n))},[t]),o.jsx(vy.Provider,{value:{state:t,dispatch:r},children:e})}function Qs(){const e=u.useContext(vy);if(e===void 0)throw new Error("useRecipes must be used within a RecipeProvider");return e}var Nh=function(e,t){return Nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Nh(e,t)};function yy(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Nh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kr=function(){return kr=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},kr.apply(this,arguments)};function xs(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function wy(e,t,r,n){var s=arguments.length,a=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function by(e,t){return function(r,n){t(r,n,e)}}function jy(e,t,r,n,s,a){function i(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),f,p=!1,m=r.length-1;m>=0;m--){var b={};for(var g in n)b[g]=g==="access"?{}:n[g];for(var g in n.access)b.access[g]=n.access[g];b.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(y||null))};var w=(0,r[m])(l==="accessor"?{get:h.get,set:h.set}:h[c],b);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=i(w.get))&&(h.get=f),(f=i(w.set))&&(h.set=f),(f=i(w.init))&&s.unshift(f)}else(f=i(w))&&(l==="field"?s.unshift(f):h[c]=f)}d&&Object.defineProperty(d,n.name,h),p=!0}function Ny(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function _y(e){return typeof e=="symbol"?e:"".concat(e)}function Sy(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function ky(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Se(e,t,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{d(n.next(h))}catch(f){i(f)}}function c(h){try{d(n.throw(h))}catch(f){i(f)}}function d(h){h.done?a(h.value):s(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function Cy(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Jc=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Ey(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jc(t,e,r)}function cc(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lm(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}function Ry(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(lm(arguments[t]));return e}function Py(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,s++)n[s]=a[i];return n}function cm(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Go(e){return this instanceof Go?(this.v=e,this):new Go(e)}function Ty(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(m){return function(b){return Promise.resolve(b).then(m,f)}}function l(m,b){n[m]&&(s[m]=function(g){return new Promise(function(w,y){a.push([m,g,w,y])>1||c(m,g)})},b&&(s[m]=b(s[m])))}function c(m,b){try{d(n[m](b))}catch(g){p(a[0][3],g)}}function d(m){m.value instanceof Go?Promise.resolve(m.value.v).then(h,f):p(a[0][2],m)}function h(m){c("next",m)}function f(m){c("throw",m)}function p(m,b){m(b),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Ay(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,a){t[s]=e[s]?function(i){return(r=!r)?{value:Go(e[s](i)),done:!1}:a?a(i):i}:a}}function Iy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof cc=="function"?cc(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(i){return new Promise(function(l,c){i=e[a](i),s(l,c,i.done,i.value)})}}function s(a,i,l,c){Promise.resolve(c).then(function(d){a({value:d,done:l})},i)}}function Oy(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var nk=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},_h=function(e){return _h=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},_h(e)};function My(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=_h(e),n=0;n<r.length;n++)r[n]!=="default"&&Jc(t,e,r[n]);return nk(t,e),t}function Dy(e){return e&&e.__esModule?e:{default:e}}function $y(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Ly(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Uy(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Fy(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var sk=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function zy(e){function t(a){e.error=e.hasError?new sk(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(s,function(i){return t(i),s()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function By(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,a,i){return n?t?".jsx":".js":s&&(!a||!i)?r:s+a+"."+i.toLowerCase()+"js"}):e}const ok={__extends:yy,__assign:kr,__rest:xs,__decorate:wy,__param:by,__esDecorate:jy,__runInitializers:Ny,__propKey:_y,__setFunctionName:Sy,__metadata:ky,__awaiter:Se,__generator:Cy,__createBinding:Jc,__exportStar:Ey,__values:cc,__read:lm,__spread:Ry,__spreadArrays:Py,__spreadArray:cm,__await:Go,__asyncGenerator:Ty,__asyncDelegator:Ay,__asyncValues:Iy,__makeTemplateObject:Oy,__importStar:My,__importDefault:Dy,__classPrivateFieldGet:$y,__classPrivateFieldSet:Ly,__classPrivateFieldIn:Uy,__addDisposableResource:Fy,__disposeResources:zy,__rewriteRelativeImportExtension:By},ak=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Fy,get __assign(){return kr},__asyncDelegator:Ay,__asyncGenerator:Ty,__asyncValues:Iy,__await:Go,__awaiter:Se,__classPrivateFieldGet:$y,__classPrivateFieldIn:Uy,__classPrivateFieldSet:Ly,__createBinding:Jc,__decorate:wy,__disposeResources:zy,__esDecorate:jy,__exportStar:Ey,__extends:yy,__generator:Cy,__importDefault:Dy,__importStar:My,__makeTemplateObject:Oy,__metadata:ky,__param:by,__propKey:_y,__read:lm,__rest:xs,__rewriteRelativeImportExtension:By,__runInitializers:Ny,__setFunctionName:Sy,__spread:Ry,__spreadArray:cm,__spreadArrays:Py,__values:cc,default:ok},Symbol.toStringTag,{value:"Module"})),ik=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class dm extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Pg extends dm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tg extends dm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ag extends dm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sh||(Sh={}));class lk{constructor(t,{headers:r={},customFetch:n,region:s=Sh.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=ik(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Se(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:i,body:l,signal:c}=n;let d={},{region:h}=n;h||(h=this.region);const f=new URL(`${this.url}/${r}`);h&&h!=="any"&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let p;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(d["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)):p=l;const m=yield this.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:p,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new Pg(y)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new Tg(m);if(!m.ok)throw new Ag(m);let g=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield m.json():g==="application/octet-stream"||g==="application/pdf"?w=yield m.blob():g==="text/event-stream"?w=m:g==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Pg(a)}:{data:null,error:a,response:a instanceof Ag||a instanceof Tg?a.context:void 0}}})}}var qt={};const ra=S_(ak);var nl={},sl={},ol={},al={},il={},ll={},Ig;function Vy(){if(Ig)return ll;Ig=1,Object.defineProperty(ll,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ll.default=e,ll}var Og;function Wy(){if(Og)return il;Og=1,Object.defineProperty(il,"__esModule",{value:!0});const t=ra.__importDefault(Vy());class r{constructor(s){var a,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,f,p;let m=null,b=null,g=null,w=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?b=N:b=JSON.parse(N))}const v=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&j&&j.length>1&&(g=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(m={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,g=null,w=406,y="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const v=await c.text();try{m=JSON.parse(v),Array.isArray(m)&&c.status===404&&(b=[],m=null,w=200,y="OK")}catch{c.status===404&&v===""?(w=204,y="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,w=200,y="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:b,count:g,status:w,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,h,f;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,a)}returns(){return this}overrideTypes(){return this}}return il.default=r,il}var Mg;function qy(){if(Mg)return al;Mg=1,Object.defineProperty(al,"__esModule",{value:!0});const t=ra.__importDefault(Wy());class r extends t.default{select(s){let a=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var h;const f=[s?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return al.default=r,al}var Dg;function um(){if(Dg)return ol;Dg=1,Object.defineProperty(ol,"__esModule",{value:!0});const t=ra.__importDefault(qy()),r=new RegExp("[,()]");class n extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${i}`),this}match(a){return Object.entries(a).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(a,i,l){return this.url.searchParams.append(a,`not.${i}.${l}`),this}or(a,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,l){return this.url.searchParams.append(a,`${i}.${l}`),this}}return ol.default=n,ol}var $g;function Hy(){if($g)return sl;$g=1,Object.defineProperty(sl,"__esModule",{value:!0});const t=ra.__importDefault(um());class r{constructor(s,{headers:a={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(s,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(s,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return sl.default=r,sl}var Lg;function ck(){if(Lg)return nl;Lg=1,Object.defineProperty(nl,"__esModule",{value:!0});const e=ra,t=e.__importDefault(Hy()),r=e.__importDefault(um());class n{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:d}={}){var h;let f;const p=new URL(`${this.url}/rpc/${a}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(i).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{p.searchParams.append(g,w)})):(f="POST",m=i);const b=new Headers(this.headers);return d&&b.set("Prefer",`count=${d}`),new r.default({method:f,url:p,headers:b,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return nl.default=n,nl}Object.defineProperty(qt,"__esModule",{value:!0});var Gy=qt.PostgrestError=nw=qt.PostgrestBuilder=tw=qt.PostgrestTransformBuilder=Zy=qt.PostgrestFilterBuilder=Xy=qt.PostgrestQueryBuilder=Yy=qt.PostgrestClient=void 0;const na=ra,Ky=na.__importDefault(ck());var Yy=qt.PostgrestClient=Ky.default;const Jy=na.__importDefault(Hy());var Xy=qt.PostgrestQueryBuilder=Jy.default;const Qy=na.__importDefault(um());var Zy=qt.PostgrestFilterBuilder=Qy.default;const ew=na.__importDefault(qy());var tw=qt.PostgrestTransformBuilder=ew.default;const rw=na.__importDefault(Wy());var nw=qt.PostgrestBuilder=rw.default;const sw=na.__importDefault(Vy());Gy=qt.PostgrestError=sw.default;var ow=qt.default={PostgrestClient:Ky.default,PostgrestQueryBuilder:Jy.default,PostgrestFilterBuilder:Qy.default,PostgrestTransformBuilder:ew.default,PostgrestBuilder:rw.default,PostgrestError:sw.default};const dk=r0({__proto__:null,get PostgrestBuilder(){return nw},get PostgrestClient(){return Yy},get PostgrestError(){return Gy},get PostgrestFilterBuilder(){return Zy},get PostgrestQueryBuilder(){return Xy},get PostgrestTransformBuilder(){return tw},default:ow},[qt]),{PostgrestClient:uk,PostgrestQueryBuilder:z6,PostgrestFilterBuilder:B6,PostgrestTransformBuilder:V6,PostgrestBuilder:W6,PostgrestError:q6}=ow||dk;class hk{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const fk="2.80.0",mk=`realtime-js/${fk}`,pk="1.0.0",kh=1e4,gk=1e3,xk=100;var za;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(za||(za={}));var wt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(wt||(wt={}));var Vr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vr||(Vr={}));var Ch;(function(e){e.websocket="websocket"})(Ch||(Ch={}));var Cs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cs||(Cs={}));class vk{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const c=n.decode(t.slice(i,i+a));i=i+a;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}let aw=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ye||(Ye={}));const Ug=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=yk(i,e,t,s),a),{}):{}},yk=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=r[e];return a&&!n.includes(a)?iw(a,i):Eh(i)},iw=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Nk(t,r)}switch(e){case Ye.bool:return wk(t);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return bk(t);case Ye.json:case Ye.jsonb:return jk(t);case Ye.timestamp:return _k(t);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Eh(t);default:return Eh(t)}},Eh=e=>e,wk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Nk=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>iw(t,l))}return e},_k=e=>typeof e=="string"?e.replace(" ","T"):e,lw=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class nu{constructor(t,r,n={},s=kh){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fg||(Fg={}));class Ba{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ba.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Ba.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ba.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(d,h)=>{i[d]||(c[d]=h)}),this.map(i,(d,h)=>{const f=a[d];if(f){const p=h.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),b=h.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...p)}n(l,h,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=d,s(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zg||(zg={}));var Va;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Va||(Va={}));var Nn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class hm{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new nu(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new aw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Ba(this),this.broadcastEndpointURL=lw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Va.PRESENCE]&&this.bindings[Va.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Nn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket.setAuth(),m===void 0){t==null||t(Nn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,y=[];for(let x=0;x<w;x++){const v=g[x],{filter:{event:j,schema:N,table:_,filter:S}}=v,P=m&&m[x];if(P&&P.event===j&&P.schema===N&&P.table===_&&P.filter===S)y.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=wt.errored,t==null||t(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Nn.SUBSCRIBED);return}}).receive("error",m=>{this.state=wt.errored,t==null||t(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===wt.joined&&t===Va.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new nu(this,Vr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new nu(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>xk){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Vr;if(n&&[l,c,d,h].indexOf(i)>=0&&n!==this._joinRef())return;let p=this._onMessage(i,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var b,g,w;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(m=>m.callback(p,n)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var b,g,w,y,x,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const j=m.id,N=(b=m.filter)===null||b===void 0?void 0:b.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(x=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:g,table:w,commit_timestamp:y,type:x,errors:v}=b;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(p,n)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&hm.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vr.close,{},t)}_onError(t){this._on(Vr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ug(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ug(t.columns,t.old_record)),r}}const su=()=>{},cl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sk=[1e3,2e3,5e3,1e4],kk=1e4,Ck=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ek{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kh,this.transport=null,this.heartbeatIntervalMs=cl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=su,this.ref=0,this.reconnectTimer=null,this.logger=su,this.conn=null,this.sendBuffer=[],this.serializer=new vk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ch.websocket}`,this.httpEndpoint=lw(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pk}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case za.connecting:return Cs.Connecting;case za.open:return Cs.Open;case za.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new hm(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(gk,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},cl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ck],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:mk};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Vr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new aw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,i,l,c,d,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:kh,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:cl.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:su,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>Sk[f-1]||kk,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(f,p)=>p(JSON.stringify(f)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class fm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function at(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Rk extends fm{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rh extends fm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const mm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Pk=()=>Response,Ph=e=>{if(Array.isArray(e))return e.map(r=>Ph(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Ph(n)}),t},Tk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ou=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Ak=(e,t,r)=>Se(void 0,void 0,void 0,function*(){const n=yield Pk();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new Rk(ou(s),a,i))}).catch(s=>{t(new Rh(ou(s),s))}):t(new Rh(ou(e),e))}),Ik=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(Tk(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Ai(e,t,r,n,s,a){return Se(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Ik(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Ak(c,l,n))})})}function li(e,t,r,n){return Se(this,void 0,void 0,function*(){return Ai(e,"GET",t,r,n)})}function zr(e,t,r,n,s){return Se(this,void 0,void 0,function*(){return Ai(e,"POST",t,n,s,r)})}function Th(e,t,r,n,s){return Se(this,void 0,void 0,function*(){return Ai(e,"PUT",t,n,s,r)})}function Ok(e,t,r,n){return Se(this,void 0,void 0,function*(){return Ai(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function pm(e,t,r,n,s){return Se(this,void 0,void 0,function*(){return Ai(e,"DELETE",t,n,s,r)})}class Mk{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(at(t))return{data:null,error:t};throw t}})}}var cw;class Dk{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[cw]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mk(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(at(t))return{data:null,error:t};throw t}})}}cw=Symbol.toStringTag;const $k={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Lk{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=mm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Se(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Bg),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),h=this._getFinalPath(d),f=yield(t=="PUT"?Th:zr)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(at(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Se(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Bg.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield Th(this.fetch,l.toString(),c,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(at(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Se(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield zr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new fm("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}})}update(t,r,n){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Se(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield zr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Se(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield zr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Se(this,void 0,void 0,function*(){try{const s=yield zr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>li(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new Dk(c,this.shouldThrowOnError)}info(t){return Se(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield li(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ph(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}})}exists(t){return Se(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Ok(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(at(n)&&n instanceof Rh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Se(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}list(t,r,n){return Se(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},$k),r),{prefix:t||""});return{data:yield zr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}listV2(t,r){return Se(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const dw="2.80.0",uw={"X-Client-Info":`storage-js/${dw}`};class Uk{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uw),r),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Se(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield li(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}getBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}createBucket(t){return Se(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield zr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Se(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(at(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class Fk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uw),r),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}listBuckets(t){return Se(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield li(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}}const gm={"X-Client-Info":`storage-js/${dw}`,"Content-Type":"application/json"};class hw extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class au extends hw{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zk extends hw{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Vg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Vg||(Vg={}));const xm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Bk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vk=(e,t,r)=>Se(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new au(Wg(i),s,l))}).catch(()=>{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new au(l,s,i))});else{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new au(l,s,i))}}else t(new zk(Wg(e),e))}),Wk=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Bk(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function qk(e,t,r,n,s,a){return Se(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Wk(t,n,s,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>Vk(c,l,n))})})}function ur(e,t,r,n,s){return Se(this,void 0,void 0,function*(){return qk(e,"POST",t,n,s,r)})}class Hk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Se(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Se(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}listIndexes(t){return Se(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Se(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}}class Gk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Se(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}getVectors(t){return Se(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listVectors(t){return Se(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ur(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}queryVectors(t){return Se(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Se(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}}class Kk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}getBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listBuckets(){return Se(this,arguments,void 0,function*(t={}){try{return{data:yield ur(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Se(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}}class Yk extends Kk{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Jk(this.url,this.headers,t,this.fetch)}}class Jk extends Hk{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Se(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Se(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Se(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Se(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Xk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Xk extends Gk{constructor(t,r,n,s,a){super(t,r,a),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Se(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Se(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Se(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Se(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Se(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Qk extends Uk{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new Lk(this.url,this.headers,t,this.fetch)}get vectors(){return new Yk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fk(this.url+"/iceberg",this.headers,this.fetch)}}const Zk="2.80.0";let ka="";typeof Deno<"u"?ka="deno":typeof document<"u"?ka="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ka="react-native":ka="node";const eC={"X-Client-Info":`supabase-js-${ka}/${Zk}`},tC={headers:eC},rC={schema:"public"},nC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sC={},oC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aC=()=>Headers,iC=(e,t,r)=>{const n=oC(r),s=aC();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:d}))}};function lC(e){return e.endsWith("/")?e:e+"/"}function cC(e,t){var r,n;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:d,realtime:h,global:f}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function dC(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fw="2.80.0",fo=30*1e3,Ah=3,iu=Ah*fo,uC="http://localhost:9999",hC="supabase.auth.token",fC={"X-Client-Info":`gotrue-js/${fw}`},Ih="X-Supabase-Api-Version",mw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pC=10*60*1e3;class ci extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class gC extends ci{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function xC(e){return Ce(e)&&e.name==="AuthApiError"}class Es extends ci{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class vs extends ci{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class $r extends vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vC(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class no extends vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dl extends vs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ul extends vs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yC(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class qg extends vs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Oh extends vs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function lu(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class Hg extends vs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Mh extends vs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gg=` 	
\r=`.split(""),wC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gg.length;t+=1)e[Gg[t].charCodeAt(0)]=-2;for(let t=0;t<dc.length;t+=1)e[dc[t].charCodeAt(0)]=t;return e})();function Kg(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(dc[n]),t.queuedBits-=6}}function pw(e,t,r){const n=wC[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yg(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{NC(i,n,r)};for(let i=0;i<e.length;i+=1)pw(e.charCodeAt(i),s,a);return t.join("")}function bC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function jC(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}bC(n,t)}}function NC(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Oo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)pw(e.charCodeAt(s),r,n);return new Uint8Array(t)}function _C(e){const t=[];return jC(e,r=>t.push(r)),new Uint8Array(t)}function As(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Kg(s,r,n)),Kg(null,r,n),t.join("")}function SC(e){return Math.round(Date.now()/1e3)+e}function kC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ft=()=>typeof window<"u"&&typeof document<"u",bs={tested:!1,writable:!1},gw=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bs.tested)return bs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bs.tested=!0,bs.writable=!0}catch{bs.tested=!0,bs.writable=!1}return bs.writable};function CC(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const xw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),EC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},js=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},zn=async(e,t)=>{await e.removeItem(t)};class Xc{constructor(){this.promise=new Xc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xc.promiseConstructor=Promise;function cu(e){const t=e.split(".");if(t.length!==3)throw new Mh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!mC.test(t[n]))throw new Mh("JWT not in base64url format");return{header:JSON.parse(Yg(t[0])),payload:JSON.parse(Yg(t[1])),signature:Oo(t[2]),raw:{header:t[0],payload:t[1]}}}async function RC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function PC(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function TC(e){return("0"+e.toString(16)).substr(-2)}function AC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,TC).join("")}async function IC(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function OC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await IC(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(e,t,r=!1){const n=AC();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await mo(e,`${t}-code-verifier`,s);const a=await OC(n);return[a,n===a?"plain":"s256"]}const MC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DC(e){const t=e.headers.get(Ih);if(!t||!t.match(MC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $C(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oo(e){if(!UC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function du(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function FC(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Jg(e){return JSON.parse(JSON.stringify(e))}const Ss=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zC=[502,503,504];async function Xg(e){var t;if(!EC(e))throw new Oh(Ss(e),0);if(zC.includes(e.status))throw new Oh(Ss(e),e.status);let r;try{r=await e.json()}catch(a){throw new Es(Ss(a),a)}let n;const s=DC(e);if(s&&s.getTime()>=mw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hg(Ss(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Hg(Ss(r),e.status,r.weak_password.reasons);throw new gC(Ss(r),e.status||500,n)}const BC=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ie(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Ih]||(a[Ih]=mw["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await VC(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function VC(e,t,r,n,s,a){const i=BC(t,n,s,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Oh(Ss(c),0)}if(l.ok||await Xg(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Xg(c)}}function Lr(e){var t;let r=null;HC(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=SC(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qg(e){const t=Lr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function WC(e){return{data:e,error:null}}function qC(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=xs(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Zg(e){return e}function HC(e){return e.access_token&&e.refresh_token&&e.expires_in}const uu=["global","local","others"];class GC{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xw(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=uu[0]){if(uu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uu.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Jn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=xs(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jn})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Zg});if(h.error)throw h.error;const f=await h.json(),p=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ce(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){oo(t);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jn})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){oo(t);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Jn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){oo(t);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Jn})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){oo(t.userId);try{const{data:r,error:n}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(t){oo(t.userId),oo(t.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Zg});if(h.error)throw h.error;const f=await h.json(),p=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ce(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}function ex(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ao={debug:!!(globalThis&&gw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class KC extends vw{}async function YC(e,t,r){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new KC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ao.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function JC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yw(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function XC(e){return parseInt(e,16)}function QC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function ZC(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:h,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=yw(e.address),b=h?`${h}://${n}`:n,g=e.statement?`${e.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${m}

${g}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let x=`
Resources:`;for(const v of d){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}y+=x}return`${w}
${y}`}class gt extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class uc extends gt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function eE({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new gt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(ww(i)){if(a.rp.id!==i)return new gt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function tE({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new gt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(ww(n)){if(r.rpId!==n)return new gt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class rE{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const nE=new rE;function sE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=xs(e,["challenge","user","excludeCredentials"]),a=Oo(t).buffer,i=Object.assign(Object.assign({},r),{id:Oo(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Oo(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function oE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=xs(e,["challenge","allowCredentials"]),s=Oo(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Oo(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function aE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:As(new Uint8Array(e.response.attestationObject)),clientDataJSON:As(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function iE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:As(new Uint8Array(s.authenticatorData)),clientDataJSON:As(new Uint8Array(s.clientDataJSON)),signature:As(new Uint8Array(s.signature)),userHandle:s.userHandle?As(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ww(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tx(){var e,t;return!!(Ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function lE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new uc("Browser returned unexpected credential type",t)}:{data:null,error:new uc("Empty credential response",t)}}catch(t){return{data:null,error:eE({error:t,options:e})}}}async function cE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new uc("Browser returned unexpected credential type",t)}:{data:null,error:new uc("Empty credential response",t)}}catch(t){return{data:null,error:tE({error:t,options:e})}}}const dE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},uE={userVerification:"preferred",hints:["security-key"]};function hc(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))n[a]=i;else if(r(i))n[a]=i;else if(t(i)){const l=n[a];t(l)?n[a]=hc(l,i):n[a]=hc(i)}else n[a]=i}return n}function hE(e,t){return hc(dE,e,t||{})}function fE(e,t){return hc(uE,e,t||{})}class mE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:l};const c=s??nE.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:d}=i.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(i.webauthn.type){case"create":{const d=hE(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await lE({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=fE(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await cE(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(i){return Ce(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new ci("rpId is required for WebAuthn authentication")};try{if(!tx())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return Ce(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new ci("rpId is required for WebAuthn registration")};try{if(!tx())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return Ce(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in register",i)}}}}JC();const pE={url:uC,storageKey:hC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rx(e,t,r){return await r()}const io={};class di{get jwks(){var t,r;return(r=(t=io[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){io[this.storageKey]=Object.assign(Object.assign({},io[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=io[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){io[this.storageKey]=Object.assign(Object.assign({},io[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},pE),t);if(this.storageKey=a.storageKey,this.instanceID=(r=di.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,di.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ft()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GC({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=xw(a.fetch),this.lock=a.lock||rx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Ft()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=YC:this.lock=rx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:gw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ex(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ex(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${fw}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ft()&&(r=CC(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ft()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),yC(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?this._returnResult({error:r}):this._returnResult({error:new Es("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Lr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:h,password:f,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await so(this.storage,this.storageKey)),a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:Lr})}else if("phone"in t){const{phone:h,password:f,options:p}=t;a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Lr})}else throw new dl("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else throw new dl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new no;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,i,l,c,d,h,f,p;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:g,wallet:w,statement:y,options:x}=t;let v;if(Ft())if(typeof w=="object")v=w;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")v=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),N=await v.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=yw(N[0]);let S=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const C=await v.request({method:"eth_chainId"});S=XC(C)}const P={domain:j.host,address:_,statement:y,uri:j.href,version:"1",chainId:S,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=ZC(P),b=await v.request({method:"personal_sign",params:[QC(m),_]})}try{const{data:g,error:w}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Lr});if(w)throw w;if(!g||!g.session||!g.user){const y=new no;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(Ce(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,a,i,l,c,d,h,f,p,m;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:y,statement:x,options:v}=t;let j;if(Ft())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const N=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),x?{statement:x}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)b=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:w,error:y}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:As(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Lr});if(y)throw y;if(!w||!w.session||!w.user){const x=new no;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(Ce(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await js(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:i}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Lr});if(await zn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new no;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:i}=t,l=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Lr}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new no;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await so(this.storage,this.storageKey));const{error:f}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new dl("You must provide either an email or phone number.")}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Lr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,i=null;this.flowType==="pkce"&&([a,i]=await so(this.storage,this.storageKey));const l=await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:WC});return this._returnResult(l)}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $r;const{error:s}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:i}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:i,error:l}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new dl("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<iu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await js(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=du()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=FC(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jn}):await this._useSession(async r=>{var n,s,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $r}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Jn})})}catch(r){if(Ce(r))return vC(r)&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new $r;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await so(this.storage,this.storageKey));const{data:d,error:h}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Jn});if(h)throw h;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(Ce(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $r;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:i}=cu(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $r;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ft())throw new ul("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ul(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ul("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qg("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!i||!d)throw new ul("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let p=h+f;c&&(p=parseInt(c));const m=p-h;m*1e3<=fo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const b=p-f;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,h);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({error:a});const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(xC(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=kC(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await so(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var i,l,c,d,h;const{data:f,error:p}=a;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ft()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:i,provider:l,token:c,access_token:d,nonce:h}=t,f=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Lr}),{data:p,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new no}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)throw i;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await PC(async s=>(s>0&&await RC(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Lr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&lu(a)&&Date.now()+i-n<fo})}catch(n){if(this._debug(r,"error",n),Ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ft()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await js(this.storage,this.storageKey);if(s&&this.userStorage){let i=await js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await mo(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:du()}else if(s&&!s.user&&!s.user){const i=await js(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await zn(this.storage,this.storageKey+"-user"),await mo(this.storage,this.storageKey,s)):s.user=du()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<iu;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${iu}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),lu(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Xc;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new $r;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Ce(a)){const i={data:null,error:a};return lu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await mo(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=Jg(s);await mo(this.storage,this.storageKey,a)}else{const s=Jg(r);await mo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await zn(this.storage,this.storageKey),await zn(this.storage,this.storageKey+"-code-verifier"),await zn(this.storage,this.storageKey+"-user"),this.userStorage&&await zn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/fo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fo}ms, refresh threshold is ${Ah} ticks`),s<=Ah&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await so(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await Ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?aE(t.webauthn.credential_response):iE(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:sE(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:oE(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=cu(n.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new $r})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new $r});const i=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ft()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new $r});const i=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ft()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+pC>s)return n;const{data:a,error:i}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});n=m.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=cu(n);r!=null&&r.allowExpired||$C(a.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:s,signature:i},error:null}}const h=LC(s.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,i,_C(`${l}.${c}`)))throw new Mh("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}}di.nextInstanceID={};const gE=di;class xE extends gE{constructor(t){super(t)}}class vE{constructor(t,r,n){var s,a,i;this.supabaseUrl=t,this.supabaseKey=r;const l=dC(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:rC,realtime:sC,auth:Object.assign(Object.assign({},nC),{storageKey:c}),global:tC},h=cC(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=iC(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new uk(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Qk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new lk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:i,flowType:l,lock:c,debug:d,throwOnError:h},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xE({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:c,debug:d,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Ek(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vm=(e,t,r)=>new vE(e,t,r);function yE(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wE="https://vohvdarghgqskzqjclux.supabase.co",bE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",U=vm(wE,bE),fc=async()=>{const{data:{user:e}}=await U.auth.getUser();if(!e)return!1;const{data:t}=await U.from("admin_users").select("user_id").eq("user_id",e.id).single();return!!t},hu=Object.freeze(Object.defineProperty({__proto__:null,isAdmin:fc,supabase:U},Symbol.toStringTag,{value:"Module"})),bw=u.createContext(void 0);function jE({children:e}){const[t,r]=u.useState(null),[n,s]=u.useState(null),[a,i]=u.useState(!0),[l,c]=u.useState(!1),[d,h]=u.useState(!1),f=t?!!t.email_confirmed_at:!1;u.useEffect(()=>{console.log(" Auth State:",{hasUser:!!t,userEmail:t==null?void 0:t.email,isEmailVerified:f,hasSession:!!n,loading:a,showVerifying:l,currentUrl:window.location.href,hash:window.location.hash})},[t,n,a,f,l]),u.useEffect(()=>{(async()=>{var x;console.log(" Initializing auth...");const g=window.location.hash;if(console.log(" URL hash:",g),g&&g.includes("access_token")){console.log(" Found access_token in URL");const v=new URLSearchParams(g.substring(1)),j=v.get("access_token"),N=v.get("type"),_=v.get("refresh_token");if(console.log(" Token params:",{hasAccessToken:!!j,type:N,hasRefreshToken:!!_}),j&&N==="signup")try{console.log(" Processing signup verification...");const{data:S,error:P}=await U.auth.getUser(j);P&&console.error(" getUser error:",P),!P&&S.user&&(console.log(" User verified:",S.user.email),c(!0),r(S.user),window.history.replaceState({},document.title,window.location.pathname))}catch(S){console.error(" Token verification error:",S)}else if(j){console.log(" Processing OAuth/password reset token...");try{const{data:S,error:P}=await U.auth.setSession({access_token:j,refresh_token:_||""});P?console.error(" setSession error:",P):console.log(" Session set successfully")}catch(S){console.error(" Session error:",S)}}}console.log(" Getting current session...");const{data:{session:w},error:y}=await U.auth.getSession();if(y&&console.error(" Session error:",y),console.log(" Session retrieved:",{hasSession:!!w,userEmail:(x=w==null?void 0:w.user)==null?void 0:x.email}),s(w),r((w==null?void 0:w.user)??null),w!=null&&w.user){console.log(" Checking admin status...");const v=await fc();console.log(" Admin status:",v),h(v)}i(!1),console.log(" Auth initialization complete")})();const{data:{subscription:b}}=U.auth.onAuthStateChange((g,w)=>{var y;console.log(" Auth state change event:",g,{hasSession:!!w,userEmail:(y=w==null?void 0:w.user)==null?void 0:y.email}),(async()=>{var v;(g==="SIGNED_IN"||g==="USER_UPDATED"||g==="TOKEN_REFRESHED")&&((v=w==null?void 0:w.user)!=null&&v.email_confirmed_at)&&(!(t!=null&&t.email_confirmed_at)||g==="SIGNED_IN")&&(console.log(" Email verified, showing verification screen"),c(!0)),s(w),r((w==null?void 0:w.user)??null),w!=null&&w.user?fc().then(j=>{console.log(" Admin check result:",j),h(j)}):h(!1)})()});return()=>{console.log(" Cleaning up auth subscription"),b.unsubscribe()}},[t==null?void 0:t.email_confirmed_at]);const p=async()=>{console.log(" Signing out..."),await U.auth.signOut(),r(null),s(null),console.log(" Sign out complete")};return o.jsx(bw.Provider,{value:{user:t,session:n,loading:a,isEmailVerified:f,showVerifying:l,isAdmin:d,signOut:p},children:e})}function Qc(){const e=u.useContext(bw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jw=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _E={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,..._E,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:jw("lucide",s),...l},[...i.map(([d,h])=>u.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const r=u.forwardRef(({className:n,...s},a)=>u.createElement(SE,{ref:a,iconNode:t,className:jw(`lucide-${NE(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=me("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=me("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=me("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=me("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=me("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=me("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=me("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=me("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=me("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=me("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=me("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=me("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=me("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=me("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=me("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=me("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=me("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=me("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=me("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=me("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=me("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=me("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=me("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=me("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=me("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=me("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=me("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=me("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=me("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=me("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=me("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=me("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function ix(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Dn(...e){return t=>{let r=!1;const n=e.map(s=>{const a=ix(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():ix(e[s],null)}}}}function Oe(...e){return u.useCallback(Dn(...e),e)}var eR=Symbol.for("react.lazy"),vc=xf[" use ".trim().toString()];function tR(e){return typeof e=="object"&&e!==null&&"then"in e}function Iw(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===eR&&"_payload"in e&&tR(e._payload)}function Sm(e){const t=nR(e),r=u.forwardRef((n,s)=>{let{children:a,...i}=n;Iw(a)&&typeof vc=="function"&&(a=vc(a._payload));const l=u.Children.toArray(a),c=l.find(oR);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var rR=Sm("Slot");function nR(e){const t=u.forwardRef((r,n)=>{let{children:s,...a}=r;if(Iw(s)&&typeof vc=="function"&&(s=vc(s._payload)),u.isValidElement(s)){const i=iR(s),l=aR(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sR=Symbol("radix.slottable");function oR(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sR}function aR(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function iR(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ow(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Ow(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Mw(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Ow(e))&&(n&&(n+=" "),n+=t);return n}const lx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,cx=Mw,ed=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return cx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(d=>{const h=r==null?void 0:r[d],f=a==null?void 0:a[d];if(h===null)return null;const p=lx(h)||lx(f);return s[d][p]}),l=r&&Object.entries(r).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...d,f,p]:d},[]);return cx(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},km="-",lR=e=>{const t=dR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(km);return l[0]===""&&l.length!==1&&l.shift(),Dw(l,t)||cR(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},Dw=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Dw(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(km);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},dx=/^\[(.+)\]$/,cR=e=>{if(dx.test(e)){const t=dx.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},dR=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return hR(Object.entries(e.classGroups),r).forEach(([a,i])=>{Bh(i,n,a,t)}),n},Bh=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:ux(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(uR(s)){Bh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{Bh(i,ux(t,a),r,n)})})},ux=(e,t)=>{let r=e;return t.split(km).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},uR=e=>e.isThemeGetter,hR=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[r,s]}):e,fR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},$w="!",mR=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let d=0,h=0,f;for(let w=0;w<l.length;w++){let y=l[w];if(d===0){if(y===s&&(n||l.slice(w,w+a)===t)){c.push(l.slice(h,w)),h=w+a;continue}if(y==="/"){f=w;continue}}y==="["?d++:y==="]"&&d--}const p=c.length===0?l:l.substring(h),m=p.startsWith($w),b=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},pR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},gR=e=>({cache:fR(e.cacheSize),parseClassName:mR(e),...lR(e)}),xR=/\s+/,vR=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(xR);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=r(d);let b=!!m,g=n(b?p.substring(0,m):p);if(!g){if(!b){l=d+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=d+(l.length>0?" "+l:l);continue}b=!1}const w=pR(h).join(":"),y=f?w+$w:w,x=y+g;if(a.includes(x))continue;a.push(x);const v=s(g,b);for(let j=0;j<v.length;++j){const N=v[j];a.push(y+N)}l=d+(l.length>0?" "+l:l)}return l};function yR(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Lw(t))&&(n&&(n+=" "),n+=r);return n}const Lw=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Lw(e[n]))&&(r&&(r+=" "),r+=t);return r};function wR(e,...t){let r,n,s,a=i;function i(c){const d=t.reduce((h,f)=>f(h),e());return r=gR(d),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=vR(c,r);return s(c,h),h}return function(){return a(yR.apply(null,arguments))}}const Qe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Uw=/^\[(?:([a-z-]+):)?(.+)\]$/i,bR=/^\d+\/\d+$/,jR=new Set(["px","full","screen"]),NR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_R=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,kR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bn=e=>Do(e)||jR.has(e)||bR.test(e),Bn=e=>sa(e,"length",MR),Do=e=>!!e&&!Number.isNaN(Number(e)),pu=e=>sa(e,"number",Do),va=e=>!!e&&Number.isInteger(Number(e)),ER=e=>e.endsWith("%")&&Do(e.slice(0,-1)),$e=e=>Uw.test(e),Vn=e=>NR.test(e),RR=new Set(["length","size","percentage"]),PR=e=>sa(e,RR,Fw),TR=e=>sa(e,"position",Fw),AR=new Set(["image","url"]),IR=e=>sa(e,AR,$R),OR=e=>sa(e,"",DR),ya=()=>!0,sa=(e,t,r)=>{const n=Uw.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},MR=e=>_R.test(e)&&!SR.test(e),Fw=()=>!1,DR=e=>kR.test(e),$R=e=>CR.test(e),LR=()=>{const e=Qe("colors"),t=Qe("spacing"),r=Qe("blur"),n=Qe("brightness"),s=Qe("borderColor"),a=Qe("borderRadius"),i=Qe("borderSpacing"),l=Qe("borderWidth"),c=Qe("contrast"),d=Qe("grayscale"),h=Qe("hueRotate"),f=Qe("invert"),p=Qe("gap"),m=Qe("gradientColorStops"),b=Qe("gradientColorStopPositions"),g=Qe("inset"),w=Qe("margin"),y=Qe("opacity"),x=Qe("padding"),v=Qe("saturate"),j=Qe("scale"),N=Qe("sepia"),_=Qe("skew"),S=Qe("space"),P=Qe("translate"),C=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",$e,t],D=()=>[$e,t],Q=()=>["",bn,Bn],q=()=>["auto",Do,$e],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],k=()=>["","0",$e],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Do,$e];return{cacheSize:500,separator:":",theme:{colors:[ya],spacing:[bn,Bn],blur:["none","",Vn,$e],brightness:te(),borderColor:[e],borderRadius:["none","","full",Vn,$e],borderSpacing:D(),borderWidth:Q(),contrast:te(),grayscale:k(),hueRotate:te(),invert:k(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[ER,Bn],inset:M(),margin:M(),opacity:te(),padding:D(),saturate:te(),scale:te(),sepia:k(),skew:te(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",$e]}],container:["container"],columns:[{columns:[Vn]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),$e]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",va,$e]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$e]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",va,$e]}],"grid-cols":[{"grid-cols":[ya]}],"col-start-end":[{col:["auto",{span:["full",va,$e]},$e]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[ya]}],"row-start-end":[{row:["auto",{span:[va,$e]},$e]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$e,t]}],"min-w":[{"min-w":[$e,t,"min","max","fit"]}],"max-w":[{"max-w":[$e,t,"none","full","min","max","fit","prose",{screen:[Vn]},Vn]}],h:[{h:[$e,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$e,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$e,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$e,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vn,Bn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pu]}],"font-family":[{font:[ya]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$e]}],"line-clamp":[{"line-clamp":["none",Do,pu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bn,$e]}],"list-image":[{"list-image":["none",$e]}],"list-style-type":[{list:["none","disc","decimal",$e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bn,Bn]}],"underline-offset":[{"underline-offset":["auto",bn,$e]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),TR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",PR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[bn,$e]}],"outline-w":[{outline:[bn,Bn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[bn,Bn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vn,OR]}],"shadow-color":[{shadow:[ya]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vn,$e]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$e]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",$e]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",$e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[va,$e]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$e]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$e]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$e]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bn,Bn,pu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UR=wR(LR);function Ee(...e){return UR(Mw(e))}function Nr(e){if(!e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value}function FR(e){const t=typeof e=="string"?parseFloat(e):e;if(isNaN(t)||t===0)return"0";if(Number.isInteger(t))return t.toString();const r={"0.125":"1/8","0.25":"1/4","0.333":"1/3","0.3333":"1/3","0.375":"3/8","0.5":"1/2","0.625":"5/8","0.666":"2/3","0.6666":"2/3","0.75":"3/4","0.875":"7/8"},n=Math.abs(t),s=Math.floor(n),a=n-s;if(a===0)return t.toString();const i=a.toFixed(4),l=r[i];if(l)return s===0?t<0?`-${l}`:l:t<0?`-${s} ${l}`:`${s} ${l}`;let c=1,d=a;const h=1e-4;for(;Math.abs(d-Math.round(d))>h&&c<100;)c++,d=a*c;d=Math.round(d);const f=(m,b)=>b===0?m:f(b,m%b),p=f(d,c);return d/=p,c/=p,s===0?t<0?`-${d}/${c}`:`${d}/${c}`:t<0?`-${s} ${d}/${c}`:`${s} ${d}/${c}`}function hx(e){if(!e)return e;const t=e.match(/(\d+\.?\d*)/);if(t){const r=t[1];if(r.includes(".")){const n=FR(r);return e.replace(r,n)}}return e}const Cm=ed("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),re=u.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const i=n?rR:"button";return o.jsx(i,{className:Ee(Cm({variant:t,size:r,className:e})),ref:a,...s})});re.displayName="Button";function zR({currentPage:e,onNavigate:t,children:r}){var v;const[n,s]=u.useState(e),[a,i]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState(0),[f,p]=u.useState(null),m=[{id:"discover-recipes",label:"Discover Recipes",icon:Vs},{id:"discover",label:"Social Feed",icon:Ca},{id:"my-recipes",label:"My Recipes",icon:nx},{id:"add-recipe",label:"Add Recipe",icon:hn},{id:"meal-planner",label:"Meal Planner",icon:Yo},{id:"grocery-list",label:"Grocery List",icon:Ws},{id:"cart",label:"Cart",icon:hi},{id:"settings",label:"Settings",icon:ox}],b=["discover","upload","profile","messages","add-recipe"],g=j=>{s(j),t(j),i(!1),j==="messages"&&h(0)};u.useEffect(()=>{y(),w()},[]),u.useEffect(()=>{if(!f)return;const j=U.channel("direct-message-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},async N=>{const _=N.new;if(_.sender_id!==f&&!_.read){const{data:S}=await U.from("conversations").select("id").eq("id",_.conversation_id).or(`user1_id.eq.${f},user2_id.eq.${f}`).maybeSingle();S&&h(P=>P+1)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"direct_messages"},N=>{const _=N.new,S=N.old;_.read&&!S.read&&_.sender_id!==f&&h(P=>Math.max(0,P-1))}).subscribe();return()=>{U.removeChannel(j)}},[f]);const w=async()=>{try{const{data:{user:j}}=await U.auth.getUser();if(!j)return;p(j.id),await x(j.id)}catch(j){console.error("Error initializing messaging:",j)}},y=async()=>{try{const{data:j}=await U.auth.getUser();if(!j.user)return;const{data:N}=await U.from("profiles").select("avatar_url").eq("id",j.user.id).maybeSingle();N!=null&&N.avatar_url&&c(N.avatar_url)}catch(j){console.error("Error loading avatar:",j)}},x=async j=>{try{const{data:N}=await U.from("conversations").select("id, user1_id, user2_id, last_message_at").or(`user1_id.eq.${j},user2_id.eq.${j}`).order("last_message_at",{ascending:!1});if(!N||N.length===0){h(0);return}let _=0;for(const S of N){const{count:P}=await U.from("direct_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",S.id).eq("read",!1).neq("sender_id",j);_+=P||0}h(_)}catch(N){console.error("Error loading unread count:",N)}};return o.jsxs("div",{className:"min-h-screen bg-white",children:[a&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>i(!1)}),o.jsx("aside",{className:`fixed left-0 top-0 z-40 h-screen w-60 sm:w-60 lg:w-56 transform bg-white shadow-2xl transition-transform duration-300 ease-in-out lg:translate-x-0 ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:o.jsxs("div",{className:"flex h-full flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-gray-200 p-3 sm:p-4 lg:p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsxs("div",{className:"relative flex-shrink-0",children:[o.jsx("div",{className:"absolute inset-0 rounded-xl ring-3 ring-orange-500 shadow-xl -z-10"}),o.jsx("div",{className:"relative flex h-9 w-9 sm:h-10 sm:w-10 lg:h-12 lg:w-12 items-center justify-center rounded-lg bg-white overflow-hidden shadow-lg",children:o.jsx("img",{src:"/Woodenspoon.png",alt:"Meal Scrape",className:"w-full h-full object-cover scale-110"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-bold text-gray-900 truncate",children:"Meal Scrape"}),o.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-xs text-gray-500 truncate leading-tight",children:"Discover, Plan, Enjoy "})]})]}),o.jsx(re,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"lg:hidden h-8 w-8 flex-shrink-0",children:o.jsx(Rt,{className:"h-5 w-5"})})]}),o.jsx("nav",{className:"flex-1 space-y-0.5 sm:space-y-1 p-2 sm:p-3 lg:p-4 overflow-y-auto",children:m.map(j=>{const N=j.icon,_=n===j.id;return o.jsxs("button",{onClick:()=>g(j.id),className:`flex w-full items-center gap-2 sm:gap-3 rounded-lg px-2.5 py-2 sm:px-3 sm:py-2.5 lg:px-4 lg:py-3 text-left transition-all touch-manipulation ${_?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg scale-[1.02]":"text-gray-700 hover:bg-gray-100 active:bg-gray-200"}`,children:[o.jsx(N,{className:`h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0 ${_?"opacity-100":"opacity-70"}`}),o.jsx("span",{className:"font-medium text-xs sm:text-sm lg:text-base truncate",children:j.label}),j.id==="messages"&&d>0&&o.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] sm:text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-bold flex-shrink-0",children:d>9?"9+":d})]},j.id)})}),o.jsx("div",{className:"border-t border-gray-200 p-2 sm:p-3 lg:p-4 flex-shrink-0",children:o.jsxs("div",{className:"rounded-lg bg-gradient-to-br from-amber-50 to-orange-50 p-2.5 sm:p-3 lg:p-4 border border-orange-200",children:[o.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-semibold text-gray-900 leading-tight",children:"Discover, Save, Plan"}),o.jsx("p",{className:"mt-0.5 sm:mt-1 text-[9px] sm:text-[10px] lg:text-xs text-gray-600 leading-tight",children:"All in One Place"})]})})]})}),o.jsxs("div",{className:"lg:ml-56",children:[o.jsx("header",{className:"sticky top-0 z-30 border-b border-gray-200 bg-white/95 backdrop-blur-sm shadow-sm",children:o.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4 md:px-6",children:[o.jsx(re,{variant:"ghost",size:"icon",onClick:()=>i(!a),className:"lg:hidden h-9 w-9 sm:h-10 sm:w-10",children:o.jsx(wm,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),!b.includes(n)&&o.jsxs("div",{className:"flex-1 flex items-center justify-center lg:justify-start gap-2",children:[n==="discover-recipes"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(Vs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="my-recipes"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(nx,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="meal-planner"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(Yo,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="grocery-list"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(Ws,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="cart"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(hi,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="settings"&&o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:o.jsx(ox,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),o.jsx("span",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-900 truncate",children:((v=m.find(j=>j.id===n))==null?void 0:v.label)||"Meal Scrape"})]}),b.includes(n)&&o.jsxs("div",{className:"flex-1 flex items-center justify-center lg:justify-start gap-2",children:[o.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:n==="add-recipe"?o.jsx(hn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):n==="upload"?o.jsx(Ms,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):o.jsx(Ca,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),o.jsx("span",{className:"text-base sm:text-lg font-semibold text-gray-900",children:n==="add-recipe"?"Add Recipe":n==="upload"?"New Post":"Social Feed"})]}),o.jsx("div",{className:"w-9 sm:w-10 lg:hidden"})]})}),o.jsx("div",{className:"hidden lg:block fixed top-3 right-3 z-40",children:o.jsx("div",{className:"flex items-center gap-1.5 bg-white/90 backdrop-blur-lg rounded-full shadow-lg border border-gray-200/50 px-2 py-1.5",children:m.filter(j=>!["discover","settings","messages"].includes(j.id)).map(j=>{const N=j.icon,_=n===j.id;return o.jsx("button",{onClick:()=>g(j.id),className:`h-8 w-8 rounded-full transition-all flex items-center justify-center ${_?"bg-orange-500 text-white shadow-md scale-110":"text-gray-600 hover:bg-gray-100 hover:scale-105"}`,title:j.label,children:o.jsx(N,{className:"h-4 w-4"})},j.id)})})}),o.jsx("main",{className:b.includes(n)?"pt-16":"pt-16 lg:pt-0",children:r}),n!=="add-recipe"&&o.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-white border-t border-gray-200 shadow-lg safe-area-bottom",children:o.jsx("div",{className:"max-w-lg mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-around",children:[o.jsxs("button",{onClick:()=>g("messages"),className:`relative flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="messages"?"text-cyan-500 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[o.jsxs("div",{className:"relative",children:[o.jsx(bm,{className:"w-6 h-6",strokeWidth:n==="messages"?2.5:2}),d>0&&o.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center font-bold animate-pulse",children:d>9?"9+":d})]}),o.jsx("span",{className:"text-[10px] font-medium",children:"Messages"})]}),o.jsxs("button",{onClick:()=>g("discover"),className:`relative flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="discover"?"text-orange-500 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[o.jsx(Ca,{className:"w-6 h-6",strokeWidth:n==="discover"?2.5:2}),o.jsx("span",{className:"text-[10px] font-medium",children:"Feed"})]}),o.jsx("button",{onClick:()=>g("upload"),className:"relative -mt-6 flex items-center justify-center bg-gradient-to-br from-orange-500 to-red-600 rounded-full shadow-xl hover:shadow-2xl transition-all active:scale-95 touch-manipulation",style:{width:"56px",height:"56px"},children:o.jsx(Ms,{className:"w-7 h-7 text-white",strokeWidth:2.5})}),o.jsxs("button",{onClick:()=>g("profile"),className:`flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="profile"?"text-orange-600 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[o.jsx("div",{className:"relative",children:l?o.jsx("img",{src:l,alt:"Profile",className:`w-7 h-7 rounded-full object-cover ${n==="profile"?"ring-2 ring-orange-600 ring-offset-2":"ring-1 ring-gray-300"}`}):o.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center ${n==="profile"?"bg-orange-100 ring-2 ring-orange-600":"bg-gray-100"}`,children:o.jsx(Tw,{className:"w-4 h-4",strokeWidth:n==="profile"?2.5:2})})}),o.jsx("span",{className:"text-[10px] font-medium",children:"Profile"})]})]})})}),!b.includes(n)&&o.jsx("div",{className:"hidden lg:block fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:o.jsx("button",{onClick:()=>g("discover"),className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white w-14 h-14 rounded-full shadow-2xl hover:shadow-3xl transition-all hover:scale-110 flex items-center justify-center",title:"Social Feed",children:o.jsx(Ca,{className:"w-7 h-7"})})})]}),o.jsx("button",{onClick:()=>c(j=>j?null:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"),className:"fixed top-20 right-4 bg-slate-800 text-white text-xs px-3 py-2 rounded-full shadow-lg hover:bg-slate-700 z-50 hidden lg:block",children:"Toggle Avatar"})]})}const BR=ed("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function et({className:e,variant:t,...r}){return o.jsx("div",{className:Ee(BR({variant:t}),e),...r})}const Je=u.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Je.displayName="Card";const St=u.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("flex flex-col space-y-1.5 p-6",e),...t}));St.displayName="CardHeader";const kt=u.forwardRef(({className:e,...t},r)=>o.jsx("h3",{ref:r,className:Ee("font-semibold leading-none tracking-tight",e),...t}));kt.displayName="CardTitle";const It=u.forwardRef(({className:e,...t},r)=>o.jsx("p",{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));It.displayName="CardDescription";const tt=u.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("p-6 pt-0",e),...t}));tt.displayName="CardContent";const zw=u.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("flex items-center p-6 pt-0",e),...t}));zw.displayName="CardFooter";function ge(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function VR(e,t){const r=u.createContext(t),n=a=>{const{children:i,...l}=a,c=u.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function s(a){const i=u.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function ar(e,t=[]){let r=[];function n(a,i){const l=u.createContext(i),c=r.length;r=[...r,i];const d=f=>{var y;const{scope:p,children:m,...b}=f,g=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,w=u.useMemo(()=>b,Object.values(b));return o.jsx(g.Provider,{value:w,children:m})};d.displayName=a+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,b=u.useContext(m);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,h]}const s=()=>{const a=r.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,WR(s,...t)]}function WR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var Tt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},qR=xf[" useId ".trim().toString()]||(()=>{}),HR=0;function Gr(e){const[t,r]=u.useState(qR());return Tt(()=>{r(n=>n??String(HR++))},[e]),t?`radix-${t}`:""}var GR=xf[" useInsertionEffect ".trim().toString()]||Tt;function Qr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,i]=KR({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const h=u.useRef(e!==void 0);u.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=u.useCallback(h=>{var f;if(l){const p=YR(h)?h(e):h;p!==e&&((f=i.current)==null||f.call(i,p))}else a(h)},[l,e,a,i]);return[c,d]}function KR({defaultProp:e,onChange:t}){const[r,n]=u.useState(e),s=u.useRef(r),a=u.useRef(t);return GR(()=>{a.current=t},[t]),u.useEffect(()=>{var i;s.current!==r&&((i=a.current)==null||i.call(a,r),s.current=r)},[r,s]),[r,n,a]}function YR(e){return typeof e=="function"}function JR(e){const t=XR(e),r=u.forwardRef((n,s)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(ZR);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function XR(e){const t=u.forwardRef((r,n)=>{const{children:s,...a}=r;if(u.isValidElement(s)){const i=tP(s),l=eP(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QR=Symbol("radix.slottable");function ZR(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QR}function eP(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function tP(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var rP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pe=rP.reduce((e,t)=>{const r=JR(`Primitive.${t}`),n=u.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Bw(e,t){e&&ta.flushSync(()=>e.dispatchEvent(t))}function Ot(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function nP(e,t=globalThis==null?void 0:globalThis.document){const r=Ot(e);u.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var sP="DismissableLayer",Vh="dismissableLayer.update",oP="dismissableLayer.pointerDownOutside",aP="dismissableLayer.focusOutside",fx,Vw=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),td=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(Vw),[h,f]=u.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),b=Oe(t,S=>f(S)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(w),x=h?g.indexOf(h):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,j=x>=y,N=cP(S=>{const P=S.target,C=[...d.branches].some(R=>R.contains(P));!j||C||(s==null||s(S),i==null||i(S),S.defaultPrevented||l==null||l())},p),_=dP(S=>{const P=S.target;[...d.branches].some(R=>R.contains(P))||(a==null||a(S),i==null||i(S),S.defaultPrevented||l==null||l())},p);return nP(S=>{x===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),u.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(fx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),mx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=fx)}},[h,p,r,d]),u.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),mx())},[h,d]),u.useEffect(()=>{const S=()=>m({});return document.addEventListener(Vh,S),()=>document.removeEventListener(Vh,S)},[]),o.jsx(Pe.div,{...c,ref:b,style:{pointerEvents:v?j?"auto":"none":void 0,...e.style},onFocusCapture:ge(e.onFocusCapture,_.onFocusCapture),onBlurCapture:ge(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ge(e.onPointerDownCapture,N.onPointerDownCapture)})});td.displayName=sP;var iP="DismissableLayerBranch",lP=u.forwardRef((e,t)=>{const r=u.useContext(Vw),n=u.useRef(null),s=Oe(t,n);return u.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),o.jsx(Pe.div,{...e,ref:s})});lP.displayName=iP;function cP(e,t=globalThis==null?void 0:globalThis.document){const r=Ot(e),n=u.useRef(!1),s=u.useRef(()=>{});return u.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){Ww(oP,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function dP(e,t=globalThis==null?void 0:globalThis.document){const r=Ot(e),n=u.useRef(!1);return u.useEffect(()=>{const s=a=>{a.target&&!n.current&&Ww(aP,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function mx(){const e=new CustomEvent(Vh);document.dispatchEvent(e)}function Ww(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Bw(s,a):s.dispatchEvent(a)}var gu="focusScope.autoFocusOnMount",xu="focusScope.autoFocusOnUnmount",px={bubbles:!1,cancelable:!0},uP="FocusScope",rd=u.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=u.useState(null),d=Ot(s),h=Ot(a),f=u.useRef(null),p=Oe(t,g=>c(g)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let g=function(v){if(m.paused||!l)return;const j=v.target;l.contains(j)?f.current=j:qn(f.current,{select:!0})},w=function(v){if(m.paused||!l)return;const j=v.relatedTarget;j!==null&&(l.contains(j)||qn(f.current,{select:!0}))},y=function(v){if(document.activeElement===document.body)for(const N of v)N.removedNodes.length>0&&qn(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(y);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[n,l,m.paused]),u.useEffect(()=>{if(l){xx.add(m);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(gu,px);l.addEventListener(gu,d),l.dispatchEvent(y),y.defaultPrevented||(hP(xP(qw(l)),{select:!0}),document.activeElement===g&&qn(l))}return()=>{l.removeEventListener(gu,d),setTimeout(()=>{const y=new CustomEvent(xu,px);l.addEventListener(xu,h),l.dispatchEvent(y),y.defaultPrevented||qn(g??document.body,{select:!0}),l.removeEventListener(xu,h),xx.remove(m)},0)}}},[l,d,h,m]);const b=u.useCallback(g=>{if(!r&&!n||m.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(w&&y){const x=g.currentTarget,[v,j]=fP(x);v&&j?!g.shiftKey&&y===j?(g.preventDefault(),r&&qn(v,{select:!0})):g.shiftKey&&y===v&&(g.preventDefault(),r&&qn(j,{select:!0})):y===x&&g.preventDefault()}},[r,n,m.paused]);return o.jsx(Pe.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});rd.displayName=uP;function hP(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(qn(n,{select:t}),document.activeElement!==r)return}function fP(e){const t=qw(e),r=gx(t,e),n=gx(t.reverse(),e);return[r,n]}function qw(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gx(e,t){for(const r of e)if(!mP(r,{upTo:t}))return r}function mP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pP(e){return e instanceof HTMLInputElement&&"select"in e}function qn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&pP(e)&&t&&e.select()}}var xx=gP();function gP(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=vx(e,t),e.unshift(t)},remove(t){var r;e=vx(e,t),(r=e[0])==null||r.resume()}}}function vx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function xP(e){return e.filter(t=>t.tagName!=="A")}var vP="Portal",nd=u.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=u.useState(!1);Tt(()=>a(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?gy.createPortal(o.jsx(Pe.div,{...n,ref:t}),i):null});nd.displayName=vP;function yP(e,t){return u.useReducer((r,n)=>t[r][n]??r,e)}var ir=e=>{const{present:t,children:r}=e,n=wP(t),s=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),a=Oe(n.ref,bP(s));return typeof r=="function"||n.isPresent?u.cloneElement(s,{ref:a}):null};ir.displayName="Presence";function wP(e){const[t,r]=u.useState(),n=u.useRef(null),s=u.useRef(e),a=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=yP(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=hl(n.current);a.current=l==="mounted"?d:"none"},[l]),Tt(()=>{const d=n.current,h=s.current;if(h!==e){const p=a.current,m=hl(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Tt(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,f=m=>{const g=hl(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=m=>{m.target===t&&(a.current=hl(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function hl(e){return(e==null?void 0:e.animationName)||"none"}function bP(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var vu=0;function Em(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??yx()),document.body.insertAdjacentElement("beforeend",e[1]??yx()),vu++,()=>{vu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),vu--}},[])}function yx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ml="right-scroll-bar-position",Dl="width-before-scroll-bar",jP="with-scroll-bars-hidden",NP="--removed-body-scroll-bar-size";function yu(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function _P(e,t){var r=u.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var SP=typeof window<"u"?u.useLayoutEffect:u.useEffect,wx=new WeakMap;function kP(e,t){var r=_P(null,function(n){return e.forEach(function(s){return yu(s,n)})});return SP(function(){var n=wx.get(r);if(n){var s=new Set(n),a=new Set(e),i=r.current;s.forEach(function(l){a.has(l)||yu(l,null)}),a.forEach(function(l){s.has(l)||yu(l,i)})}wx.set(r,e)},[e]),r}function CP(e){return e}function EP(e,t){t===void 0&&(t=CP);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var h=i;i=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(h){i.push(h),d()},filter:function(h){return i=i.filter(h),r}}}};return s}function RP(e){e===void 0&&(e={});var t=EP(null);return t.options=kr({async:!0,ssr:!1},e),t}var Hw=function(e){var t=e.sideCar,r=xs(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return u.createElement(n,kr({},r))};Hw.isSideCarExport=!0;function PP(e,t){return e.useMedium(t),Hw}var Gw=RP(),wu=function(){},sd=u.forwardRef(function(e,t){var r=u.useRef(null),n=u.useState({onScrollCapture:wu,onWheelCapture:wu,onTouchMoveCapture:wu}),s=n[0],a=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,f=e.shards,p=e.sideCar,m=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,v=e.gapMode,j=xs(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=p,_=kP([r,t]),S=kr(kr({},j),s);return u.createElement(u.Fragment,null,h&&u.createElement(N,{sideCar:Gw,removeScrollBar:d,shards:f,noRelative:m,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:r,gapMode:v}),i?u.cloneElement(u.Children.only(l),kr(kr({},S),{ref:_})):u.createElement(x,kr({},S,{className:c,ref:_}),l))});sd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sd.classNames={fullWidth:Dl,zeroRight:Ml};var TP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=TP();return t&&e.setAttribute("nonce",t),e}function IP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function OP(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var MP=function(){var e=0,t=null;return{add:function(r){e==0&&(t=AP())&&(IP(t,r),OP(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},DP=function(){var e=MP();return function(t,r){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Kw=function(){var e=DP(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},$P={left:0,top:0,right:0,gap:0},bu=function(e){return parseInt(e||"",10)||0},LP=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[bu(r),bu(n),bu(s)]},UP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $P;var t=LP(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},FP=Kw(),$o="data-scroll-locked",zP=function(e,t,r,n){var s=e.left,a=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(jP,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ml,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Dl,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ml," .").concat(Ml,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Dl," .").concat(Dl,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat($o,`] {
    `).concat(NP,": ").concat(l,`px;
  }
`)},bx=function(){var e=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(e)?e:0},BP=function(){u.useEffect(function(){return document.body.setAttribute($o,(bx()+1).toString()),function(){var e=bx()-1;e<=0?document.body.removeAttribute($o):document.body.setAttribute($o,e.toString())}},[])},VP=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;BP();var a=u.useMemo(function(){return UP(s)},[s]);return u.createElement(FP,{styles:zP(a,!t,s,r?"":"!important")})},Wh=!1;if(typeof window<"u")try{var fl=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{Wh=!1}var lo=Wh?{passive:!1}:!1,WP=function(e){return e.tagName==="TEXTAREA"},Yw=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!WP(e)&&r[t]==="visible")},qP=function(e){return Yw(e,"overflowY")},HP=function(e){return Yw(e,"overflowX")},jx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Jw(e,n);if(s){var a=Xw(e,n),i=a[1],l=a[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},GP=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},KP=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Jw=function(e,t){return e==="v"?qP(t):HP(t)},Xw=function(e,t){return e==="v"?GP(t):KP(t)},YP=function(e,t){return e==="h"&&t==="rtl"?-1:1},JP=function(e,t,r,n,s){var a=YP(e,window.getComputedStyle(t).direction),i=a*n,l=r.target,c=t.contains(l),d=!1,h=i>0,f=0,p=0;do{if(!l)break;var m=Xw(e,l),b=m[0],g=m[1],w=m[2],y=g-w-a*b;(b||y)&&Jw(e,l)&&(f+=y,p+=b);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},ml=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Nx=function(e){return[e.deltaX,e.deltaY]},_x=function(e){return e&&"current"in e?e.current:e},XP=function(e,t){return e[0]===t[0]&&e[1]===t[1]},QP=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ZP=0,co=[];function e5(e){var t=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),s=u.useState(ZP++)[0],a=u.useState(Kw)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=cm([e.lockRef.current],(e.shards||[]).map(_x),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=ml(g),x=r.current,v="deltaX"in g?g.deltaX:x[0]-y[0],j="deltaY"in g?g.deltaY:x[1]-y[1],N,_=g.target,S=Math.abs(v)>Math.abs(j)?"h":"v";if("touches"in g&&S==="h"&&_.type==="range")return!1;var P=jx(S,_);if(!P)return!0;if(P?N=S:(N=S==="v"?"h":"v",P=jx(S,_)),!P)return!1;if(!n.current&&"changedTouches"in g&&(v||j)&&(n.current=N),!N)return!0;var C=n.current||N;return JP(C,w,g,C==="h"?v:j)},[]),c=u.useCallback(function(g){var w=g;if(!(!co.length||co[co.length-1]!==a)){var y="deltaY"in w?Nx(w):ml(w),x=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&XP(N.delta,y)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var v=(i.current.shards||[]).map(_x).filter(Boolean).filter(function(N){return N.contains(w.target)}),j=v.length>0?l(w,v[0]):!i.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=u.useCallback(function(g,w,y,x){var v={name:g,delta:w,target:y,should:x,shadowParent:t5(y)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(j){return j!==v})},1)},[]),h=u.useCallback(function(g){r.current=ml(g),n.current=void 0},[]),f=u.useCallback(function(g){d(g.type,Nx(g),g.target,l(g,e.lockRef.current))},[]),p=u.useCallback(function(g){d(g.type,ml(g),g.target,l(g,e.lockRef.current))},[]);u.useEffect(function(){return co.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,lo),document.addEventListener("touchmove",c,lo),document.addEventListener("touchstart",h,lo),function(){co=co.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,lo),document.removeEventListener("touchmove",c,lo),document.removeEventListener("touchstart",h,lo)}},[]);var m=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(a,{styles:QP(s)}):null,m?u.createElement(VP,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function t5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const r5=PP(Gw,e5);var od=u.forwardRef(function(e,t){return u.createElement(sd,kr({},e,{ref:t,sideCar:r5}))});od.classNames=sd.classNames;var n5=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},uo=new WeakMap,pl=new WeakMap,gl={},ju=0,Qw=function(e){return e&&(e.host||Qw(e.parentNode))},s5=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Qw(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},o5=function(e,t,r,n){var s=s5(t,Array.isArray(e)?e:[e]);gl[r]||(gl[r]=new WeakMap);var a=gl[r],i=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var m=p.getAttribute(n),b=m!==null&&m!=="false",g=(uo.get(p)||0)+1,w=(a.get(p)||0)+1;uo.set(p,g),a.set(p,w),i.push(p),g===1&&b&&pl.set(p,!0),w===1&&p.setAttribute(r,"true"),b||p.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return h(t),l.clear(),ju++,function(){i.forEach(function(f){var p=uo.get(f)-1,m=a.get(f)-1;uo.set(f,p),a.set(f,m),p||(pl.has(f)||f.removeAttribute(n),pl.delete(f)),m||f.removeAttribute(r)}),ju--,ju||(uo=new WeakMap,uo=new WeakMap,pl=new WeakMap,gl={})}},Rm=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=n5(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),o5(n,s,r,"aria-hidden")):function(){return null}};function a5(e){const t=i5(e),r=u.forwardRef((n,s)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(c5);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function i5(e){const t=u.forwardRef((r,n)=>{const{children:s,...a}=r;if(u.isValidElement(s)){const i=u5(s),l=d5(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var l5=Symbol("radix.slottable");function c5(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===l5}function d5(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function u5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ad="Dialog",[Zw,eb]=ar(ad),[h5,tn]=Zw(ad),tb=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,h]=Qr({prop:n,defaultProp:s??!1,onChange:a,caller:ad});return o.jsx(h5,{scope:t,triggerRef:l,contentRef:c,contentId:Gr(),titleId:Gr(),descriptionId:Gr(),open:d,onOpenChange:h,onOpenToggle:u.useCallback(()=>h(f=>!f),[h]),modal:i,children:r})};tb.displayName=ad;var rb="DialogTrigger",nb=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=tn(rb,r),a=Oe(t,s.triggerRef);return o.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Am(s.open),...n,ref:a,onClick:ge(e.onClick,s.onOpenToggle)})});nb.displayName=rb;var Pm="DialogPortal",[f5,sb]=Zw(Pm,{forceMount:void 0}),ob=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=tn(Pm,t);return o.jsx(f5,{scope:t,forceMount:r,children:u.Children.map(n,i=>o.jsx(ir,{present:r||a.open,children:o.jsx(nd,{asChild:!0,container:s,children:i})}))})};ob.displayName=Pm;var yc="DialogOverlay",ab=u.forwardRef((e,t)=>{const r=sb(yc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=tn(yc,e.__scopeDialog);return a.modal?o.jsx(ir,{present:n||a.open,children:o.jsx(p5,{...s,ref:t})}):null});ab.displayName=yc;var m5=a5("DialogOverlay.RemoveScroll"),p5=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=tn(yc,r);return o.jsx(od,{as:m5,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Pe.div,{"data-state":Am(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),qs="DialogContent",ib=u.forwardRef((e,t)=>{const r=sb(qs,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=tn(qs,e.__scopeDialog);return o.jsx(ir,{present:n||a.open,children:a.modal?o.jsx(g5,{...s,ref:t}):o.jsx(x5,{...s,ref:t})})});ib.displayName=qs;var g5=u.forwardRef((e,t)=>{const r=tn(qs,e.__scopeDialog),n=u.useRef(null),s=Oe(t,r.contentRef,n);return u.useEffect(()=>{const a=n.current;if(a)return Rm(a)},[]),o.jsx(lb,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ge(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:ge(e.onFocusOutside,a=>a.preventDefault())})}),x5=u.forwardRef((e,t)=>{const r=tn(qs,e.__scopeDialog),n=u.useRef(!1),s=u.useRef(!1);return o.jsx(lb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),lb=u.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=tn(qs,r),c=u.useRef(null),d=Oe(t,c);return Em(),o.jsxs(o.Fragment,{children:[o.jsx(rd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(td,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Am(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(y5,{titleId:l.titleId}),o.jsx(b5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Tm="DialogTitle",cb=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=tn(Tm,r);return o.jsx(Pe.h2,{id:s.titleId,...n,ref:t})});cb.displayName=Tm;var db="DialogDescription",ub=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=tn(db,r);return o.jsx(Pe.p,{id:s.descriptionId,...n,ref:t})});ub.displayName=db;var hb="DialogClose",fb=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=tn(hb,r);return o.jsx(Pe.button,{type:"button",...n,ref:t,onClick:ge(e.onClick,()=>s.onOpenChange(!1))})});fb.displayName=hb;function Am(e){return e?"open":"closed"}var mb="DialogTitleWarning",[v5,pb]=VR(mb,{contentName:qs,titleName:Tm,docsSlug:"dialog"}),y5=({titleId:e})=>{const t=pb(mb),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},w5="DialogDescriptionWarning",b5=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pb(w5).contentName}}.`;return u.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},gb=tb,j5=nb,xb=ob,Im=ab,Om=ib,Mm=cb,Dm=ub,$m=fb;function Zs(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var N5=["color"],_5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,N5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),S5=["color"],Lm=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,S5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),k5=["color"],vb=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,k5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),C5=["color"],E5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,C5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),R5=["color"],P5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,R5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),T5=["color"],A5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,T5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),I5=["color"],O5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,s=Zs(e,I5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),u.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});const Pt=gb,M5=xb,yb=u.forwardRef(({className:e,...t},r)=>o.jsx(Im,{ref:r,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));yb.displayName=Im.displayName;const Nt=u.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(M5,{children:[o.jsx(yb,{}),o.jsxs(Om,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,o.jsxs($m,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(A5,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nt.displayName=Om.displayName;const Gt=({className:e,...t})=>o.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Gt.displayName="DialogHeader";const ds=({className:e,...t})=>o.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ds.displayName="DialogFooter";const Bt=u.forwardRef(({className:e,...t},r)=>o.jsx(Mm,{ref:r,className:Ee("text-lg font-semibold leading-none tracking-tight",e),...t}));Bt.displayName=Mm.displayName;const Kr=u.forwardRef(({className:e,...t},r)=>o.jsx(Dm,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));Kr.displayName=Dm.displayName;function id(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ld(e){const[t,r]=u.useState(void 0);return Tt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var cd="Checkbox",[D5]=ar(cd),[$5,Um]=D5(cd);function L5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:f}=e,[p,m]=Qr({prop:r,defaultProp:s??!1,onChange:c,caller:cd}),[b,g]=u.useState(null),[w,y]=u.useState(null),x=u.useRef(!1),v=b?!!i||!!b.closest("form"):!0,j={checked:p,disabled:a,setChecked:m,control:b,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:is(s)?!1:s,isFormControl:v,bubbleInput:w,setBubbleInput:y};return o.jsx($5,{scope:t,...j,children:U5(f)?f(j):n})}var wb="CheckboxTrigger",bb=u.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:a,value:i,disabled:l,checked:c,required:d,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:b}=Um(wb,e),g=Oe(s,h),w=u.useRef(c);return u.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const x=()=>f(w.current);return y.addEventListener("reset",x),()=>y.removeEventListener("reset",x)}},[a,f]),o.jsx(Pe.button,{type:"button",role:"checkbox","aria-checked":is(c)?"mixed":c,"aria-required":d,"data-state":kb(c),"data-disabled":l?"":void 0,disabled:l,value:i,...n,ref:g,onKeyDown:ge(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:ge(r,y=>{f(x=>is(x)?!0:!x),b&&m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})});bb.displayName=wb;var Fm=u.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:d,form:h,...f}=e;return o.jsx(L5,{__scopeCheckbox:r,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:d,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(bb,{...f,ref:t,__scopeCheckbox:r}),p&&o.jsx(Sb,{__scopeCheckbox:r})]})})});Fm.displayName=cd;var jb="CheckboxIndicator",Nb=u.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,a=Um(jb,r);return o.jsx(ir,{present:n||is(a.checked)||a.checked===!0,children:o.jsx(Pe.span,{"data-state":kb(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Nb.displayName=jb;var _b="CheckboxBubbleInput",Sb=u.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:d,value:h,form:f,bubbleInput:p,setBubbleInput:m}=Um(_b,e),b=Oe(r,m),g=id(a),w=ld(n);u.useEffect(()=>{const x=p;if(!x)return;const v=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(v,"checked").set,_=!s.current;if(g!==a&&N){const S=new Event("click",{bubbles:_});x.indeterminate=is(a),N.call(x,is(a)?!1:a),x.dispatchEvent(S)}},[p,g,a,s]);const y=u.useRef(is(a)?!1:a);return o.jsx(Pe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:l,disabled:c,name:d,value:h,form:f,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Sb.displayName=_b;function U5(e){return typeof e=="function"}function is(e){return e==="indeterminate"}function kb(e){return is(e)?"indeterminate":e?"checked":"unchecked"}const fi=u.forwardRef(({className:e,...t},r)=>o.jsx(Fm,{ref:r,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(Nb,{className:Ee("flex items-center justify-center text-current"),children:o.jsx(Lm,{className:"h-4 w-4"})})}));fi.displayName=Fm.displayName;var F5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],z5=F5.reduce((e,t)=>{const r=Sm(`Primitive.${t}`),n=u.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),B5="Separator",Sx="horizontal",V5=["horizontal","vertical"],Cb=u.forwardRef((e,t)=>{const{decorative:r,orientation:n=Sx,...s}=e,a=W5(n)?n:Sx,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(z5.div,{"data-orientation":a,...l,...s,ref:t})});Cb.displayName=B5;function W5(e){return V5.includes(e)}var Eb=Cb;const $l=u.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>o.jsx(Eb,{ref:s,decorative:r,orientation:t,className:Ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));$l.displayName=Eb.displayName;var q5=u.createContext(void 0);function oa(e){const t=u.useContext(q5);return e||t||"ltr"}function mi(e,[t,r]){return Math.min(r,Math.max(t,e))}function H5(e,t){return u.useReducer((r,n)=>t[r][n]??r,e)}var zm="ScrollArea",[Rb]=ar(zm),[G5,Ar]=Rb(zm),Pb=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=u.useState(null),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(null),[g,w]=u.useState(null),[y,x]=u.useState(0),[v,j]=u.useState(0),[N,_]=u.useState(!1),[S,P]=u.useState(!1),C=Oe(t,M=>c(M)),R=oa(s);return o.jsx(G5,{scope:r,type:n,dir:R,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:j,children:o.jsx(Pe.div,{dir:R,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});Pb.displayName=zm;var Tb="ScrollAreaViewport",Ab=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=e,i=Ar(Tb,r),l=u.useRef(null),c=Oe(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Pe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Ab.displayName=Tb;var xn="ScrollAreaScrollbar",Bm=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ar(xn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return u.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(K5,{...n,ref:t,forceMount:r}):s.type==="scroll"?o.jsx(Y5,{...n,ref:t,forceMount:r}):s.type==="auto"?o.jsx(Ib,{...n,ref:t,forceMount:r}):s.type==="always"?o.jsx(Vm,{...n,ref:t}):null});Bm.displayName=xn;var K5=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ar(xn,e.__scopeScrollArea),[a,i]=u.useState(!1);return u.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},h=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(ir,{present:r||a,children:o.jsx(Ib,{"data-state":a?"visible":"hidden",...n,ref:t})})}),Y5=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ar(xn,e.__scopeScrollArea),a=e.orientation==="horizontal",i=ud(()=>c("SCROLL_END"),100),[l,c]=H5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),u.useEffect(()=>{const d=s.viewport,h=a?"scrollLeft":"scrollTop";if(d){let f=d[h];const p=()=>{const m=d[h];f!==m&&(c("SCROLL"),i()),f=m};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,a,c,i]),o.jsx(ir,{present:r||l!=="hidden",children:o.jsx(Vm,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ge(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ge(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Ib=u.forwardRef((e,t)=>{const r=Ar(xn,e.__scopeScrollArea),{forceMount:n,...s}=e,[a,i]=u.useState(!1),l=e.orientation==="horizontal",c=ud(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?d:h)}},10);return Jo(r.viewport,c),Jo(r.content,c),o.jsx(ir,{present:n||a,children:o.jsx(Vm,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Vm=u.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Ar(xn,e.__scopeScrollArea),a=u.useRef(null),i=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Lb(l.viewport,l.content),h={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function f(p,m){return t4(p,i.current,l,m)}return r==="horizontal"?o.jsx(J5,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,m=kx(p,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):r==="vertical"?o.jsx(X5,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,m=kx(p,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),J5=u.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=Ar(xn,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=Oe(t,c,a.onScrollbarXChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Mb,{"data-orientation":"horizontal",...s,ref:d,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dd(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(p),Fb(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:bc(i.paddingLeft),paddingEnd:bc(i.paddingRight)}})}})}),X5=u.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=Ar(xn,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=Oe(t,c,a.onScrollbarYChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Mb,{"data-orientation":"vertical",...s,ref:d,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dd(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(p),Fb(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:bc(i.paddingTop),paddingEnd:bc(i.paddingBottom)}})}})}),[Q5,Ob]=Rb(xn),Mb=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...p}=e,m=Ar(xn,r),[b,g]=u.useState(null),w=Oe(t,C=>g(C)),y=u.useRef(null),x=u.useRef(""),v=m.viewport,j=n.content-n.viewport,N=Ot(h),_=Ot(c),S=ud(f,10);function P(C){if(y.current){const R=C.clientX-y.current.left,M=C.clientY-y.current.top;d({x:R,y:M})}}return u.useEffect(()=>{const C=R=>{const M=R.target;(b==null?void 0:b.contains(M))&&N(R,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,b,j,N]),u.useEffect(_,[n,_]),Jo(b,S),Jo(m.content,S),o.jsx(Q5,{scope:r,scrollbar:b,hasThumb:s,onThumbChange:Ot(a),onThumbPointerUp:Ot(i),onThumbPositionChange:_,onThumbPointerDown:Ot(l),children:o.jsx(Pe.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:ge(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=b.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(C))}),onPointerMove:ge(e.onPointerMove,P),onPointerUp:ge(e.onPointerUp,C=>{const R=C.target;R.hasPointerCapture(C.pointerId)&&R.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),wc="ScrollAreaThumb",Db=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ob(wc,e.__scopeScrollArea);return o.jsx(ir,{present:r||s.hasThumb,children:o.jsx(Z5,{ref:t,...n})})}),Z5=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,a=Ar(wc,r),i=Ob(wc,r),{onThumbPositionChange:l}=i,c=Oe(t,f=>i.onThumbChange(f)),d=u.useRef(void 0),h=ud(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(h(),!d.current){const m=r4(f,l);d.current=m,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,h,l]),o.jsx(Pe.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ge(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),b=f.clientX-m.left,g=f.clientY-m.top;i.onThumbPointerDown({x:b,y:g})}),onPointerUp:ge(e.onPointerUp,i.onThumbPointerUp)})});Db.displayName=wc;var Wm="ScrollAreaCorner",$b=u.forwardRef((e,t)=>{const r=Ar(Wm,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?o.jsx(e4,{...e,ref:t}):null});$b.displayName=Wm;var e4=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Ar(Wm,r),[a,i]=u.useState(0),[l,c]=u.useState(0),d=!!(a&&l);return Jo(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Jo(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),i(h)}),d?o.jsx(Pe.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function bc(e){return e?parseInt(e,10):0}function Lb(e,t){const r=e/t;return isNaN(r)?0:r}function dd(e){const t=Lb(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function t4(e,t,r,n="ltr"){const s=dd(r),a=s/2,i=t||a,l=s-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return Ub([c,d],f)(e)}function kx(e,t,r="ltr"){const n=dd(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-n,c=r==="ltr"?[0,i]:[i*-1,0],d=mi(e,c);return Ub([0,i],[0,l])(d)}function Ub(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Fb(e,t){return e>0&&e<t}var r4=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,l=r.top!==a.top;(i||l)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function ud(e,t){const r=Ot(e),n=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),u.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Jo(e,t){const r=Ot(t);Tt(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var zb=Pb,n4=Ab,s4=$b;const $s=u.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(zb,{ref:n,className:Ee("relative overflow-hidden",e),...r,children:[o.jsx(n4,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(Bb,{}),o.jsx(s4,{})]}));$s.displayName=zb.displayName;const Bb=u.forwardRef(({className:e,orientation:t="vertical",...r},n)=>o.jsx(Bm,{ref:n,orientation:t,className:Ee("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:o.jsx(Db,{className:"relative flex-1 rounded-full bg-border"})}));Bb.displayName=Bm.displayName;var o4=e=>{switch(e){case"success":return l4;case"info":return d4;case"warning":return c4;case"error":return u4;default:return null}},a4=Array(12).fill(0),i4=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},a4.map((r,n)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),l4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),c4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),d4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),u4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),h4=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),f4=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},qh=1,m4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:qh++,a=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,a,i=n.then(async c=>{if(a=["resolve",c],se.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(g4(c)&&!c.ok){s=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){s=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||qh++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Zt=new m4,p4=(e,t)=>{let r=(t==null?void 0:t.id)||qh++;return Zt.addToast({title:e,...t,id:r}),r},g4=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",x4=p4,v4=()=>Zt.toasts,y4=()=>Zt.getActiveToasts(),L=Object.assign(x4,{success:Zt.success,info:Zt.info,warning:Zt.warning,error:Zt.error,custom:Zt.custom,message:Zt.message,promise:Zt.promise,dismiss:Zt.dismiss,loading:Zt.loading},{getHistory:v4,getToasts:y4});function w4(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}w4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xl(e){return e.label!==void 0}var b4=3,j4="32px",N4="16px",Cx=4e3,_4=356,S4=14,k4=20,C4=200;function Dr(...e){return e.filter(Boolean).join(" ")}function E4(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var R4=e=>{var t,r,n,s,a,i,l,c,d,h,f;let{invert:p,toast:m,unstyled:b,interacting:g,setHeights:w,visibleToasts:y,heights:x,index:v,toasts:j,expanded:N,removeToast:_,defaultRichColors:S,closeButton:P,style:C,cancelButtonStyle:R,actionButtonStyle:M,className:D="",descriptionClassName:Q="",duration:q,position:ee,gap:B,loadingIcon:F,expandByDefault:A,classNames:k,icons:I,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:$}=e,[z,X]=se.useState(null),[ue,G]=se.useState(null),[H,fe]=se.useState(!1),[ce,O]=se.useState(!1),[J,T]=se.useState(!1),[K,oe]=se.useState(!1),[be,Te]=se.useState(!1),[W,ae]=se.useState(0),[Y,je]=se.useState(0),Z=se.useRef(m.duration||q||Cx),pe=se.useRef(null),Ne=se.useRef(null),Le=v===0,Me=v+1<=y,V=m.type,he=m.dismissible!==!1,_e=m.className||"",Ae=m.descriptionClassName||"",ut=se.useMemo(()=>x.findIndex(ne=>ne.toastId===m.id)||0,[x,m.id]),Xt=se.useMemo(()=>{var ne;return(ne=m.closeButton)!=null?ne:P},[m.closeButton,P]),Ue=se.useMemo(()=>m.duration||q||Cx,[m.duration,q]),Qt=se.useRef(0),yr=se.useRef(0),wr=se.useRef(0),ot=se.useRef(null),[yn,nn]=ee.split("-"),wn=se.useMemo(()=>x.reduce((ne,de,ke)=>ke>=ut?ne:ne+de.height,0),[x,ut]),E=f4(),le=m.invert||p,xe=V==="loading";yr.current=se.useMemo(()=>ut*B+wn,[ut,wn]),se.useEffect(()=>{Z.current=Ue},[Ue]),se.useEffect(()=>{fe(!0)},[]),se.useEffect(()=>{let ne=Ne.current;if(ne){let de=ne.getBoundingClientRect().height;return je(de),w(ke=>[{toastId:m.id,height:de,position:m.position},...ke]),()=>w(ke=>ke.filter(ze=>ze.toastId!==m.id))}},[w,m.id]),se.useLayoutEffect(()=>{if(!H)return;let ne=Ne.current,de=ne.style.height;ne.style.height="auto";let ke=ne.getBoundingClientRect().height;ne.style.height=de,je(ke),w(ze=>ze.find(ht=>ht.toastId===m.id)?ze.map(ht=>ht.toastId===m.id?{...ht,height:ke}:ht):[{toastId:m.id,height:ke,position:m.position},...ze])},[H,m.title,m.description,w,m.id]);let Re=se.useCallback(()=>{O(!0),ae(yr.current),w(ne=>ne.filter(de=>de.toastId!==m.id)),setTimeout(()=>{_(m)},C4)},[m,_,w,yr]);se.useEffect(()=>{if(m.promise&&V==="loading"||m.duration===1/0||m.type==="loading")return;let ne;return N||g||$&&E?(()=>{if(wr.current<Qt.current){let de=new Date().getTime()-Qt.current;Z.current=Z.current-de}wr.current=new Date().getTime()})():Z.current!==1/0&&(Qt.current=new Date().getTime(),ne=setTimeout(()=>{var de;(de=m.onAutoClose)==null||de.call(m,m),Re()},Z.current)),()=>clearTimeout(ne)},[N,g,m,V,$,E,Re]),se.useEffect(()=>{m.delete&&Re()},[Re,m.delete]);function we(){var ne,de,ke;return I!=null&&I.loading?se.createElement("div",{className:Dr(k==null?void 0:k.loader,(ne=m==null?void 0:m.classNames)==null?void 0:ne.loader,"sonner-loader"),"data-visible":V==="loading"},I.loading):F?se.createElement("div",{className:Dr(k==null?void 0:k.loader,(de=m==null?void 0:m.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":V==="loading"},F):se.createElement(i4,{className:Dr(k==null?void 0:k.loader,(ke=m==null?void 0:m.classNames)==null?void 0:ke.loader),visible:V==="loading"})}return se.createElement("li",{tabIndex:0,ref:Ne,className:Dr(D,_e,k==null?void 0:k.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,k==null?void 0:k.default,k==null?void 0:k[V],(r=m==null?void 0:m.classNames)==null?void 0:r[V]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:S,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":be,"data-removed":ce,"data-visible":Me,"data-y-position":yn,"data-x-position":nn,"data-index":v,"data-front":Le,"data-swiping":J,"data-dismissible":he,"data-type":V,"data-invert":le,"data-swipe-out":K,"data-swipe-direction":ue,"data-expanded":!!(N||A&&H),style:{"--index":v,"--toasts-before":v,"--z-index":j.length-v,"--offset":`${ce?W:yr.current}px`,"--initial-height":A?"auto":`${Y}px`,...C,...m.style},onDragEnd:()=>{T(!1),X(null),ot.current=null},onPointerDown:ne=>{xe||!he||(pe.current=new Date,ae(yr.current),ne.target.setPointerCapture(ne.pointerId),ne.target.tagName!=="BUTTON"&&(T(!0),ot.current={x:ne.clientX,y:ne.clientY}))},onPointerUp:()=>{var ne,de,ke,ze;if(K||!he)return;ot.current=null;let ht=Number(((ne=Ne.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Be=Number(((de=Ne.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mt=new Date().getTime()-((ke=pe.current)==null?void 0:ke.getTime()),We=z==="x"?ht:Be,_t=Math.abs(We)/mt;if(Math.abs(We)>=k4||_t>.11){ae(yr.current),(ze=m.onDismiss)==null||ze.call(m,m),G(z==="x"?ht>0?"right":"left":Be>0?"down":"up"),Re(),oe(!0),Te(!1);return}T(!1),X(null)},onPointerMove:ne=>{var de,ke,ze,ht;if(!ot.current||!he||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;let Be=ne.clientY-ot.current.y,mt=ne.clientX-ot.current.x,We=(ke=e.swipeDirections)!=null?ke:E4(ee);!z&&(Math.abs(mt)>1||Math.abs(Be)>1)&&X(Math.abs(mt)>Math.abs(Be)?"x":"y");let _t={x:0,y:0};z==="y"?(We.includes("top")||We.includes("bottom"))&&(We.includes("top")&&Be<0||We.includes("bottom")&&Be>0)&&(_t.y=Be):z==="x"&&(We.includes("left")||We.includes("right"))&&(We.includes("left")&&mt<0||We.includes("right")&&mt>0)&&(_t.x=mt),(Math.abs(_t.x)>0||Math.abs(_t.y)>0)&&Te(!0),(ze=Ne.current)==null||ze.style.setProperty("--swipe-amount-x",`${_t.x}px`),(ht=Ne.current)==null||ht.style.setProperty("--swipe-amount-y",`${_t.y}px`)}},Xt&&!m.jsx?se.createElement("button",{"aria-label":te,"data-disabled":xe,"data-close-button":!0,onClick:xe||!he?()=>{}:()=>{var ne;Re(),(ne=m.onDismiss)==null||ne.call(m,m)},className:Dr(k==null?void 0:k.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=I==null?void 0:I.close)!=null?a:h4):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:se.createElement(se.Fragment,null,V||m.icon||m.promise?se.createElement("div",{"data-icon":"",className:Dr(k==null?void 0:k.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||we():null,m.type!=="loading"?m.icon||(I==null?void 0:I[V])||o4(V):null):null,se.createElement("div",{"data-content":"",className:Dr(k==null?void 0:k.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},se.createElement("div",{"data-title":"",className:Dr(k==null?void 0:k.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?se.createElement("div",{"data-description":"",className:Dr(Q,Ae,k==null?void 0:k.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&xl(m.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:ne=>{var de,ke;xl(m.cancel)&&he&&((ke=(de=m.cancel).onClick)==null||ke.call(de,ne),Re())},className:Dr(k==null?void 0:k.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&xl(m.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:ne=>{var de,ke;xl(m.action)&&((ke=(de=m.action).onClick)==null||ke.call(de,ne),!ne.defaultPrevented&&Re())},className:Dr(k==null?void 0:k.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function Ex(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function P4(e,t){let r={};return[e,t].forEach((n,s)=>{let a=s===1,i=a?"--mobile-offset":"--offset",l=a?N4:j4;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${i}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var T4=u.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:b=b4,toastOptions:g,dir:w=Ex(),gap:y=S4,loadingIcon:x,icons:v,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=e,[_,S]=se.useState([]),P=se.useMemo(()=>Array.from(new Set([n].concat(_.filter($=>$.position).map($=>$.position)))),[_,n]),[C,R]=se.useState([]),[M,D]=se.useState(!1),[Q,q]=se.useState(!1),[ee,B]=se.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=se.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=se.useRef(null),I=se.useRef(!1),te=se.useCallback($=>{S(z=>{var X;return(X=z.find(ue=>ue.id===$.id))!=null&&X.delete||Zt.dismiss($.id),z.filter(({id:ue})=>ue!==$.id)})},[]);return se.useEffect(()=>Zt.subscribe($=>{if($.dismiss){S(z=>z.map(X=>X.id===$.id?{...X,delete:!0}:X));return}setTimeout(()=>{gy.flushSync(()=>{S(z=>{let X=z.findIndex(ue=>ue.id===$.id);return X!==-1?[...z.slice(0,X),{...z[X],...$},...z.slice(X+1)]:[$,...z]})})})}),[]),se.useEffect(()=>{if(h!=="system"){B(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:z})=>{B(z?"dark":"light")})}catch{$.addListener(({matches:X})=>{try{B(X?"dark":"light")}catch(ue){console.error(ue)}})}},[h]),se.useEffect(()=>{_.length<=1&&D(!1)},[_]),se.useEffect(()=>{let $=z=>{var X,ue;s.every(G=>z[G]||z.code===G)&&(D(!0),(X=F.current)==null||X.focus()),z.code==="Escape"&&(document.activeElement===F.current||(ue=F.current)!=null&&ue.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[s]),se.useEffect(()=>{if(F.current)return()=>{k.current&&(k.current.focus({preventScroll:!0}),k.current=null,I.current=!1)}},[F.current]),se.createElement("section",{ref:t,"aria-label":`${j} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map(($,z)=>{var X;let[ue,G]=$.split("-");return _.length?se.createElement("ol",{key:$,dir:w==="auto"?Ex():w,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":ue,"data-lifted":M&&_.length>1&&!a,"data-x-position":G,style:{"--front-toast-height":`${((X=C[0])==null?void 0:X.height)||0}px`,"--width":`${_4}px`,"--gap":`${y}px`,...m,...P4(c,d)},onBlur:H=>{I.current&&!H.currentTarget.contains(H.relatedTarget)&&(I.current=!1,k.current&&(k.current.focus({preventScroll:!0}),k.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||I.current||(I.current=!0,k.current=H.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{Q||D(!1)},onDragEnd:()=>D(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},_.filter(H=>!H.position&&z===0||H.position===$).map((H,fe)=>{var ce,O;return se.createElement(R4,{key:H.id,icons:v,index:fe,toast:H,defaultRichColors:f,duration:(ce=g==null?void 0:g.duration)!=null?ce:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(O=g==null?void 0:g.closeButton)!=null?O:i,interacting:Q,position:$,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:te,toasts:_.filter(J=>J.position==H.position),heights:C.filter(J=>J.position==H.position),setHeights:R,expandByDefault:a,gap:y,loadingIcon:x,expanded:M,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});function qm({recipe:e,onClose:t}){var $;const[r,n]=u.useState(0),[s,a]=u.useState(new Set),[i,l]=u.useState(new Set),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(0),[b,g]=u.useState(!0),[w,y]=u.useState(!1),[x,v]=u.useState(e.servings||4),j=u.useRef(null),N=u.useRef(null),_=e.steps||[];u.useEffect(()=>{if(c&&!h&&p>0){const z=setInterval(()=>{m(X=>X<=1?(d(!1),f(!1),b&&S(),0):X-1)},1e3);return()=>clearInterval(z)}},[c,h,p,b]);const S=()=>{const z=new(window.AudioContext||window.webkitAudioContext),X=z.createOscillator(),ue=z.createGain();X.connect(ue),ue.connect(z.destination),X.frequency.value=800,X.type="sine",ue.gain.setValueAtTime(.3,z.currentTime),ue.gain.exponentialRampToValueAtTime(.01,z.currentTime+.5),X.start(z.currentTime),X.stop(z.currentTime+.5)},P=z=>{j.current=z.touches[0].clientX},C=z=>{N.current=z.touches[0].clientX},R=()=>{if(!j.current||!N.current)return;const z=j.current-N.current;Math.abs(z)>50&&(z>0&&r<_.length-1?M():z<0&&r>0&&D()),j.current=null,N.current=null},M=()=>{r<_.length-1&&(n(r+1),Q())},D=()=>{r>0&&(n(r-1),Q())},Q=()=>{d(!1),f(!1),m(0)},q=()=>{const z=_[r];if(z!=null&&z.duration){const X=z.duration.match(/(\d+)/);if(X){const ue=parseInt(X[1]);m(ue*60),d(!0),f(!1)}}},ee=()=>{c?f(!h):q()},B=z=>{const X=Math.floor(z/60),ue=z%60;return`${X}:${ue.toString().padStart(2,"0")}`},F=z=>{a(X=>{const ue=new Set(X);return ue.has(z)?ue.delete(z):ue.add(z),ue})},A=z=>{l(X=>{const ue=new Set(X);return ue.has(z)?ue.delete(z):ue.add(z),ue})},k=z=>{const X=z.toLowerCase(),ue={flour:"",sugar:"",butter:"",egg:"",chocolate:"",vanilla:"",baking:""};for(const[G,H]of Object.entries(ue))if(X.includes(G))return H;return""},I=s.size===e.ingredients.length,te=(r+1)/_.length*100;return o.jsx("div",{className:"fixed inset-0 z-50 bg-white overflow-hidden",children:o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white px-3 py-2 sm:px-4 sm:py-3 flex items-center justify-between shadow-lg flex-shrink-0",children:[o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold truncate",children:e.title}),o.jsxs("p",{className:"text-orange-100 text-[10px] sm:text-xs",children:["Step ",r+1," of ",_.length]})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[o.jsx(re,{variant:"ghost",size:"icon",onClick:()=>g(!b),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",children:b?o.jsx(Aw,{className:"w-4 h-4 sm:w-5 sm:h-5"}):o.jsx(QE,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),o.jsx(re,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",children:o.jsx(Rt,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),o.jsx("div",{className:"w-full bg-gray-200 h-1 sm:h-1.5 flex-shrink-0",children:o.jsx("div",{className:"bg-orange-600 h-full transition-all duration-300",style:{width:`${te}%`}})}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:o.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 pb-24",children:[o.jsxs("div",{className:"relative w-full h-40 sm:h-48 md:h-64 rounded-lg sm:rounded-xl overflow-hidden shadow-lg flex-shrink-0",children:[o.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),o.jsxs("div",{className:"absolute bottom-2 left-2 right-2 sm:bottom-3 sm:left-3 sm:right-3 md:bottom-4 md:left-4 md:right-4",children:[o.jsx("h3",{className:"text-white text-base sm:text-lg md:text-xl font-bold drop-shadow-lg line-clamp-1",children:e.title}),o.jsxs("p",{className:"text-white/90 text-[10px] sm:text-xs md:text-sm mt-0.5 sm:mt-1 drop-shadow",children:[e.prepTime+e.cookTime," min  ",e.servings," servings"]})]})]}),o.jsxs("div",{className:`rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 shadow-sm ${w?"bg-orange-50 border-orange-300":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300"}`,children:[o.jsx(re,{onClick:()=>y(!w),className:`w-full font-semibold h-10 sm:h-11 text-sm sm:text-base ${w?"bg-orange-600 hover:bg-orange-700":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700"}`,children:w?o.jsxs(o.Fragment,{children:[o.jsx(BE,{className:"w-4 h-4 mr-2"}),"Disable Voice Control"]}):o.jsxs(o.Fragment,{children:[o.jsx(Cw,{className:"w-4 h-4 mr-2"}),"Enable Voice Control"]})}),o.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 text-center mt-2",children:w?'Say "Next", "Previous", "Repeat", or "Read ingredients"':"Navigate recipes hands-free with voice commands"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-emerald-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ds,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-600"}),o.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:"Servings"})]}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(re,{variant:"outline",size:"sm",onClick:()=>v(Math.max(1,x-1)),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:o.jsx(Ew,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),o.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900 min-w-[1.5rem] sm:min-w-[2rem] text-center",children:x}),o.jsx(re,{variant:"outline",size:"sm",onClick:()=>v(x+1),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:o.jsx(hn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),x!==e.servings&&o.jsxs("p",{className:"text-[10px] sm:text-xs text-emerald-700 mt-2 text-center",children:["Scaled from original ",e.servings," servings"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[o.jsxs("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900 flex items-center gap-2",children:[I?o.jsx(Ol,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600"}):o.jsx(TE,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),"Ingredients"]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-600",children:[s.size,"/",e.ingredients.length]})]}),o.jsx("div",{className:"space-y-2",children:e.ingredients.map((z,X)=>o.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-lg transition-all ${s.has(X)?"bg-orange-100 border border-orange-300":"bg-white border border-gray-200"}`,children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gray-100 flex items-center justify-center text-lg sm:text-xl flex-shrink-0",children:k(z.name)}),o.jsx(fi,{id:`ingredient-${X}`,checked:s.has(X),onCheckedChange:()=>F(X),className:"flex-shrink-0"}),o.jsxs("label",{htmlFor:`ingredient-${X}`,className:`text-xs sm:text-sm cursor-pointer flex-1 min-w-0 ${s.has(X)?"text-gray-500 line-through":"text-gray-900"}`,children:[o.jsxs("span",{className:"font-semibold",children:[z.quantity," ",z.unit]})," ",z.name]})]},X))})]}),o.jsx("div",{className:"touch-pan-y select-none",onTouchStart:P,onTouchMove:C,onTouchEnd:R,children:o.jsxs("div",{className:`bg-white rounded-lg sm:rounded-xl shadow-lg border-2 p-4 sm:p-6 md:p-8 transition-all ${i.has(r)?"border-orange-600 bg-orange-50":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[o.jsx(fi,{id:`step-${r}`,checked:i.has(r),onCheckedChange:()=>A(r),className:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),o.jsxs("h3",{className:`font-bold text-lg sm:text-xl md:text-2xl ${i.has(r)?"text-gray-500 line-through":"text-gray-900"}`,children:["Step ",r+1]})]}),(($=_[r])==null?void 0:$.duration)&&o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[o.jsxs(re,{variant:"outline",size:"sm",onClick:ee,className:`gap-1 sm:gap-2 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-3 ${c&&!h?"border-orange-600 bg-orange-50":"border-blue-300"}`,children:[c&&!h?o.jsx(jm,{className:"w-3 h-3 sm:w-4 sm:h-4"}):o.jsx(Nm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),o.jsx("span",{className:"hidden sm:inline",children:c&&!h?"Pause":"Start"})]}),c&&o.jsx(re,{variant:"outline",size:"sm",onClick:Q,className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:o.jsx(qE,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),c&&o.jsxs("div",{className:`mb-3 sm:mb-4 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl text-center ${p<=10?"bg-red-100 border-2 border-red-300 animate-pulse":"bg-orange-100 border-2 border-orange-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[o.jsx(Pw,{className:`w-4 h-4 sm:w-5 sm:h-5 ${p<=10?"text-red-600":"text-orange-600"}`}),o.jsx("span",{className:`font-mono text-3xl sm:text-4xl md:text-5xl font-bold ${p<=10?"text-red-600":"text-orange-600"}`,children:B(p)})]}),h&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-2",children:"Timer paused"})]}),o.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 leading-relaxed",children:_[r].instruction}),o.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 text-center mt-4 sm:mt-6",children:" Swipe left or right to navigate"})]})})]})}),o.jsx("div",{className:"bg-white border-t-2 border-gray-200 px-3 py-2 sm:px-4 sm:py-3 shadow-lg flex-shrink-0 safe-area-bottom",children:o.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3 max-w-4xl mx-auto",children:[o.jsxs(re,{variant:"outline",size:"lg",onClick:D,disabled:r===0,className:"gap-1 sm:gap-2 text-xs sm:text-sm px-3 sm:px-4 h-10 sm:h-11",children:[o.jsx($h,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{className:"hidden xs:inline",children:"Previous"}),o.jsx("span",{className:"xs:hidden",children:"Prev"})]}),o.jsx("div",{className:"flex-1 text-center",children:o.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600",children:w?'Say "Next" or swipe':"Swipe to navigate"})}),o.jsxs(re,{size:"lg",onClick:M,disabled:r===_.length-1,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 gap-1 sm:gap-2 text-xs sm:text-sm px-3 sm:px-4 h-10 sm:h-11",children:[o.jsx("span",{children:"Next"}),o.jsx(Lh,{className:"w-4 h-4 sm:w-5 sm:h-5"})]})]})})]})})}function Hm({recipe:e,open:t,onOpenChange:r}){var y,x;const{state:n,dispatch:s}=Qs(),[a,i]=u.useState(new Set),[l,c]=u.useState(!1),d=n.savedRecipes.some(v=>v.id===e.id),h=e.steps&&e.steps.length>0;if(l&&h)return o.jsx(qm,{recipe:e,onClose:()=>c(!1)});const f=v=>{i(j=>{const N=new Set(j);return N.has(v)?N.delete(v):N.add(v),N})},p=()=>{d?(s({type:"REMOVE_RECIPE",payload:e.id}),L.success("Recipe removed from your collection")):(s({type:"SAVE_RECIPE",payload:e}),L.success("Recipe saved to your collection"))},m=()=>{e.ingredients.forEach(v=>{const j={id:`${e.id}-${v.name}-${Date.now()}`,name:v.name,quantity:parseFloat(v.quantity)||1,unit:v.unit,categoryId:"cat-7",checked:!1,sourceRecipeIds:[e.id]};s({type:"ADD_GROCERY_ITEM",payload:j})}),L.success("Ingredients added to grocery list")},b=()=>{const v={id:`${e.id}-${Date.now()}`,recipeId:e.id,date:new Date().toISOString().split("T")[0],mealType:e.mealType[0]||"Dinner",servings:e.servings};s({type:"ADD_MEAL_PLAN",payload:v}),L.success("Recipe added to meal plan")},g=()=>{d&&(s({type:"REMOVE_RECIPE",payload:e.id}),L.success("Recipe deleted"),r(!1))},w={Easy:"bg-orange-100 text-orange-700 border-orange-200",Medium:"bg-amber-100 text-amber-700 border-amber-200",Hard:"bg-red-100 text-red-700 border-red-200"};return o.jsx(Pt,{open:t,onOpenChange:r,children:o.jsxs(Nt,{className:"max-w-full w-full h-full max-h-full p-0 gap-0 overflow-hidden m-0 rounded-none",children:[o.jsx(Bt,{className:"sr-only",children:e.title}),o.jsx($s,{className:"h-full",children:o.jsxs("div",{className:"relative",children:[o.jsx(re,{variant:"ghost",size:"icon",className:"fixed top-3 right-3 z-50 bg-white/95 hover:bg-white shadow-lg rounded-full min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",onClick:()=>r(!1),children:o.jsx(Rt,{className:"w-5 h-5"})}),o.jsxs("div",{className:"relative w-full h-64 bg-gray-100",children:[o.jsx("img",{src:(y=e.imageUrl)!=null&&y.includes("instagram.com")||(x=e.imageUrl)!=null&&x.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e.imageUrl.replace(/&amp;/g,"&"))}`:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2 leading-tight pr-12",children:e.title}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx(et,{className:"bg-white/95 text-gray-900 hover:bg-white text-xs",children:e.cuisineType}),o.jsx(et,{variant:"outline",className:`${w[e.difficulty]} border text-xs`,children:e.difficulty}),e.dietaryTags.slice(0,2).map(v=>o.jsx(et,{variant:"secondary",className:"bg-white/90 text-gray-900 text-xs",children:v},v)),e.dietaryTags.length>2&&o.jsxs(et,{variant:"secondary",className:"bg-white/90 text-gray-900 text-xs",children:["+",e.dietaryTags.length-2]})]})]})]}),o.jsxs("div",{className:"p-4 pb-24",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-100",children:[o.jsx("div",{className:"bg-primary p-2 rounded-lg",children:o.jsx(ln,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Total"}),o.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[e.prepTime+e.cookTime,"m"]})]})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-100",children:[o.jsx("div",{className:"bg-blue-500 p-2 rounded-lg",children:o.jsx(Ds,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Serves"}),o.jsx("p",{className:"text-sm font-bold text-gray-900",children:e.servings})]})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg border border-amber-100",children:[o.jsx("div",{className:"bg-amber-500 p-2 rounded-lg",children:o.jsx(Pw,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Prep"}),o.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[e.prepTime,"m"]})]})]})]}),h&&o.jsxs("div",{className:"mb-4",children:[o.jsxs(re,{size:"lg",onClick:()=>c(!0),className:"w-full bg-accent hover:bg-accent/90 text-white text-base min-h-[52px] gap-2 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:[o.jsx(PE,{className:"w-5 h-5"}),"Start Cooking"]}),o.jsx("p",{className:"text-center text-xs text-gray-600 mt-2 px-2",children:"Step-by-step mode with timers and ingredient checklist"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[o.jsxs(re,{size:"lg",variant:d?"outline":"default",onClick:p,className:`gap-2 min-h-[48px] touch-manipulation active:scale-95 transition-all text-sm ${d?"border-2 border-secondary text-secondary hover:bg-orange-50":"bg-secondary hover:bg-secondary/90 text-white"}`,children:[o.jsx(Dh,{className:`w-4 h-4 flex-shrink-0 ${d?"fill-current":""}`}),o.jsx("span",{className:"truncate",children:d?"Saved":"Save"})]}),o.jsxs(re,{size:"lg",variant:"outline",onClick:b,className:"gap-2 border-2 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700 min-h-[48px] touch-manipulation active:scale-95 transition-all text-sm",children:[o.jsx(Yo,{className:"w-4 h-4 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Meal Plan"})]})]}),o.jsxs("div",{className:"flex gap-2 mb-6",children:[o.jsxs(re,{variant:"outline",onClick:m,className:"flex-1 gap-2 hover:bg-orange-50 hover:border-primary hover:text-primary min-h-[44px] touch-manipulation active:scale-95 transition-all text-sm",children:[o.jsx(Ws,{className:"w-4 h-4 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Grocery List"})]}),d&&o.jsx(re,{variant:"outline",size:"icon",onClick:g,className:"hover:bg-rose-50 hover:border-rose-500 hover:text-rose-700 min-h-[44px] min-w-[44px] touch-manipulation active:scale-95 transition-all",children:o.jsx(rr,{className:"w-4 h-4"})})]}),o.jsx($l,{className:"my-6"}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:o.jsx(Ca,{className:"w-4 h-4 text-primary"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ingredients"})]}),o.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-4",children:o.jsx("div",{className:"space-y-2",children:e.ingredients.map((v,j)=>o.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-orange-50 transition-colors min-h-[44px]",children:[o.jsx(fi,{id:`ingredient-${j}`,checked:a.has(j),onCheckedChange:()=>f(j),className:"mt-1.5 min-w-[20px] min-h-[20px] touch-manipulation"}),o.jsxs("label",{htmlFor:`ingredient-${j}`,className:`flex-1 text-sm text-gray-700 cursor-pointer leading-relaxed ${a.has(j)?"line-through text-gray-400":""}`,children:[o.jsxs("span",{className:"font-semibold text-primary",children:[v.quantity," ",v.unit]})," ",v.name]})]},j))})})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:o.jsx(Vs,{className:"w-4 h-4 text-blue-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Instructions"})]}),o.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-4",children:o.jsx("ol",{className:"space-y-4",children:e.instructions.map((v,j)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm shadow-md",children:j+1}),o.jsx("p",{className:"text-sm text-gray-700 pt-0.5 leading-relaxed",children:v})]},j))})})]}),e.notes&&o.jsxs(o.Fragment,{children:[o.jsx($l,{className:"my-6"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"Notes"}),o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:o.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes})})]})]}),e.sourceUrl&&o.jsxs(o.Fragment,{children:[o.jsx($l,{className:"my-6"}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:"Recipe Source"}),o.jsx("p",{className:"text-xs text-gray-600",children:"View original recipe"})]}),o.jsx(re,{variant:"outline",size:"sm",asChild:!0,className:"gap-2 hover:bg-white min-h-[40px] touch-manipulation active:scale-95 transition-all w-full sm:w-auto",children:o.jsxs("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(Zc,{className:"w-4 h-4"}),"Visit Source"]})})]})]})]})]})})]})})}const A4="https://vohvdarghgqskzqjclux.supabase.co",I4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",xt=vm(A4,I4);async function O4(e){if(!xt)return[];const{data:t,error:r}=await xt.from("reviews").select("*").eq("recipe_id",e).order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((t||[]).map(async s=>{const{data:a}=await xt.from("review_images").select("id, image_url").eq("review_id",s.id);return{...s,images:a||[]}}))}async function M4(e,t){if(!xt)return null;const{data:r,error:n}=await xt.from("reviews").select("*").eq("recipe_id",e).eq("user_id",t).maybeSingle();if(n)throw n;if(!r)return null;const{data:s}=await xt.from("review_images").select("id, image_url").eq("review_id",r.id);return{...r,images:s||[]}}async function Vb(e){if(!xt)throw new Error("Supabase not configured");const r=`reviews/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}-${e.name}`}`,{error:n}=await xt.storage.from("recipe-images").upload(r,e);if(n)throw n;const{data:s}=xt.storage.from("recipe-images").getPublicUrl(r);return s.publicUrl}async function D4(e,t,r,n){if(!xt)throw new Error("Supabase not configured");const{data:{user:s}}=await xt.auth.getUser();if(!s)throw new Error("User not authenticated");const{data:a,error:i}=await xt.from("reviews").insert({recipe_id:e,user_id:s.id,rating:t,comment:r}).select().single();if(i)throw i;if(n.length>0){const l=await Promise.all(n.map(Vb)),{error:c}=await xt.from("review_images").insert(l.map(d=>({review_id:a.id,image_url:d})));if(c)throw c}try{const{data:l}=await xt.from("posts").select("id").eq("recipe_id",e);if(l&&l.length>0){const c=l[0].id,d="".repeat(t),h=r?` ${r}`:"";await xt.from("comments").insert({post_id:c,user_id:s.id,text:`${d}${h}`,rating:t})}}catch(l){console.error("Failed to add review as comment to social post:",l)}return a}async function $4(e,t,r,n){if(!xt)throw new Error("Supabase not configured");const{error:s}=await xt.from("reviews").update({rating:t,comment:r,updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s;if(n.length>0){const a=await Promise.all(n.map(Vb)),{error:i}=await xt.from("review_images").insert(a.map(l=>({review_id:e,image_url:l})));if(i)throw i}return{id:e,rating:t,comment:r}}async function L4(e){if(!xt)return 0;const{data:t,error:r}=await xt.from("reviews").select("rating").eq("recipe_id",e);if(r)throw r;if(!t||t.length===0)return 0;const n=t.reduce((s,a)=>s+a.rating,0)/t.length;return Math.round(n*10)/10}const An=u.forwardRef(({className:e,...t},r)=>o.jsx("textarea",{className:Ee("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));An.displayName="Textarea";function U4({rating:e,size:t="md",interactive:r=!1,onRate:n}){const[s,a]=u.useState(0),i={sm:{text:"text-base",button:"w-8 h-8",gap:"gap-1"},md:{text:"text-xl",button:"w-10 h-10",gap:"gap-1.5"},lg:{text:"text-2xl",button:"w-12 h-12",gap:"gap-2"}}[t],l=c=>{r&&n&&n(c)};return o.jsx("div",{className:`flex ${i.gap}`,children:[1,2,3,4,5].map(c=>{const d=c<=(s||e);return o.jsx("button",{onClick:()=>l(c),onMouseEnter:()=>r&&a(c),onMouseLeave:()=>r&&a(0),disabled:!r,className:`
              flex items-center justify-center rounded-lg transition-all duration-200
              ${i.button}
              ${r?"cursor-pointer hover:scale-110 active:scale-95 touch-manipulation":"cursor-default"}
              ${r?"hover:bg-orange-50":""}
              ${i.text}
            `,"aria-label":`Rate ${c} out of 5`,children:o.jsx("span",{className:`transition-all duration-200 ${d?"opacity-100 scale-100":"opacity-20 grayscale scale-90"}`,children:""})},c)})})}function F4({recipe:e,open:t,onOpenChange:r,onReviewSubmitted:n}){const[s,a]=u.useState(0),[i,l]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(null);u.useEffect(()=>{t&&p()},[t,e.id]);const p=async()=>{try{const b=localStorage.getItem("userId");if(!b)return;const g=await M4(e.id,b);g?(a(g.rating),l(g.comment||""),f(g.id)):(a(0),l(""),f(null))}catch(b){console.error("Failed to load existing review:",b)}},m=async()=>{if(s===0){L.error("Please select a rating");return}d(!0);try{h?(await $4(h,s,i,[]),L.success("Review updated successfully!")):(await D4(e.id,s,i,[]),L.success("Review submitted successfully!")),n==null||n(),r(!1),a(0),l("")}catch(b){console.error("Failed to submit review:",b),L.error("Failed to submit review. Please try again.")}finally{d(!1)}};return o.jsx(Pt,{open:t,onOpenChange:r,children:o.jsx(Nt,{className:"max-w-full w-full max-h-full h-full p-0 gap-0 m-0 rounded-none sm:max-w-2xl sm:max-h-[90vh] sm:rounded-lg sm:m-4",children:o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs(Gt,{className:"px-4 py-4 border-b border-gray-200 flex-shrink-0",children:[o.jsx(Bt,{className:"text-xl",children:h?"Edit Your Review":"Write a Review"}),o.jsxs(Kr,{className:"text-sm",children:["Share your experience with ",e.title]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-3 block",children:"Your Rating"}),o.jsx("div",{className:"flex justify-center py-2",children:o.jsx(U4,{rating:s,size:"lg",interactive:!0,onRate:a})}),s>0&&o.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:s===5?" Amazing!":s===4?" Great!":s===3?" Good":s===2?" Okay":" Not great"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Comments (Optional)"}),o.jsx(An,{value:i,onChange:b=>l(b.target.value),placeholder:"Share your experience with this recipe... What did you love? Any tips for others?",className:"min-h-32 text-base resize-none",disabled:c,maxLength:500}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[i.length,"/500 characters"]})]})]})}),o.jsx("div",{className:"px-4 py-4 border-t border-gray-200 flex-shrink-0 bg-white",children:o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:justify-end",children:[o.jsx(re,{variant:"outline",onClick:()=>r(!1),disabled:c,className:"w-full sm:w-auto min-h-[48px] touch-manipulation active:scale-95 transition-all",children:"Cancel"}),o.jsx(re,{onClick:m,disabled:c||s===0,className:"w-full sm:w-auto min-h-[48px] bg-accent hover:bg-accent/90 touch-manipulation active:scale-95 transition-all",children:c?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):h?"Update Review":"Submit Review"})]})})]})})})}function Hh({recipe:e,onSave:t,onCook:r,onDelete:n,showReviewButton:s=!1,isAdmin:a=!1,preloadedSocialPost:i}){var M,D,Q;const{state:l}=Qs(),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(0),[b,g]=u.useState(0),[w,y]=u.useState(null),[x,v]=u.useState(!0),j=e.prepTime+e.cookTime,N=l.savedRecipes.some(q=>q.id===e.id),[_,S]=u.useState(!1),P={Easy:"bg-orange-100 text-orange-700 border-orange-200",Medium:"bg-amber-100 text-amber-700 border-amber-200",Hard:"bg-red-100 text-red-700 border-red-200"},C=async()=>{try{const q=await O4(e.id);g(q.length);const ee=await L4(e.id);m(ee)}catch(q){console.error("Failed to load review data:",q)}};u.useEffect(()=>{C(),i!==void 0&&y(i),v(!1)},[e.id,i]),u.useEffect(()=>{console.log("[RecipeCard] Recipe:",e.id,"Review count:",b,"Social post:",w?"EXISTS":"NULL")},[b,w]);const R=q=>{if(q.stopPropagation(),!w){console.error("[RecipeCard] No social post available");return}console.log("[RecipeCard]  Opening post:",w.id),window.dispatchEvent(new CustomEvent("open-shared-post",{detail:w.id})),window.__pendingSharedPostId=w.id,setTimeout(()=>{delete window.__pendingSharedPostId},2e3),window.location.pathname!=="/discover"&&(console.log("[RecipeCard] Navigating to /discover"),window.history.pushState({},"","/discover"),window.dispatchEvent(new CustomEvent("navigate",{detail:"discover"})))};return o.jsxs(o.Fragment,{children:[o.jsxs(Je,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 border-0 bg-white cursor-pointer active:scale-[0.98] flex flex-col h-full",onClick:()=>d(!0),children:[o.jsxs("div",{className:"relative overflow-hidden aspect-square",children:[o.jsx("img",{src:(M=e.imageUrl)!=null&&M.includes("instagram.com")||(D=e.imageUrl)!=null&&D.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e.imageUrl.replace(/&amp;/g,"&"))}`:e.imageUrl,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[N&&o.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-full p-2 shadow-lg",children:o.jsx(Dh,{className:"w-4 h-4 text-rose-500 fill-rose-500"})}),a&&n&&o.jsx("button",{onClick:q=>{q.stopPropagation(),confirm("Are you sure you want to delete this recipe?")&&n(e.id)},className:"bg-red-600/95 backdrop-blur-sm rounded-full p-2.5 shadow-lg hover:bg-red-700 active:scale-95 transition-all touch-manipulation",children:o.jsx(rr,{className:"w-4 h-4 text-white"})})]})]}),o.jsxs(tt,{className:"p-4 space-y-3 flex-1",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(et,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium text-xs",children:e.cuisineType}),o.jsx("h3",{className:"font-bold text-gray-900 leading-tight text-sm sm:text-base lg:text-lg xl:text-xl hyphens-auto break-words",children:Nr(e.title)})]}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ln,{className:"w-4 h-4 flex-shrink-0"}),o.jsxs("span",{className:"font-medium whitespace-nowrap",children:[j," min"]})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Vs,{className:"w-4 h-4 flex-shrink-0"}),o.jsx(et,{variant:"outline",className:`text-xs ${P[e.difficulty]}`,children:e.difficulty})]})]}),e.dietaryTags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.dietaryTags.slice(0,3).map(q=>o.jsx(et,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:q},q)),e.dietaryTags.length>3&&o.jsxs(et,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:["+",e.dietaryTags.length-3]})]})]}),o.jsxs(zw,{className:"p-3 sm:p-4 pt-0 flex flex-col gap-2",children:[o.jsxs(re,{variant:N?"default":"outline",size:"sm",className:`w-full min-h-[44px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm ${N?"bg-secondary hover:bg-secondary/90 text-white":"border-gray-300 hover:bg-primary hover:text-white"}`,onClick:q=>{q.stopPropagation(),t==null||t(e.id)},children:[o.jsx(Dh,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0 ${N?"fill-white":""}`}),o.jsx("span",{className:"truncate text-xs sm:text-sm leading-tight",children:N?"Saved":"Save Recipe"})]}),o.jsxs(re,{size:"sm",className:"w-full min-h-[44px] bg-accent hover:bg-accent/90 text-white shadow-md hover:shadow-lg active:scale-95 transition-all touch-manipulation text-xs sm:text-sm",onClick:q=>{q.stopPropagation(),r==null||r(e.id)},children:[o.jsx(IE,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0"}),o.jsx("span",{className:"leading-tight",children:"Cook"})]}),s&&o.jsx(o.Fragment,{children:!x&&w?o.jsx(re,{variant:"outline",size:"sm",disabled:_,className:`w-full min-h-[44px] border-orange-300 text-orange-600 hover:bg-orange-50 hover:border-orange-500 active:scale-95 transition-all touch-manipulation text-xs sm:text-sm ${_?"opacity-60 cursor-wait":""}`,onClick:async q=>{q.stopPropagation(),S(!0),await new Promise(ee=>setTimeout(ee,200)),R(q),setTimeout(()=>S(!1),500)},children:_?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-orange-600 border-t-transparent rounded-full animate-spin mr-2 flex-shrink-0"}),o.jsx("span",{className:"leading-tight",children:"Loading..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-sm sm:text-base mr-1.5 sm:mr-2 flex-shrink-0",children:""}),o.jsxs("span",{className:"flex items-center gap-1.5 sm:gap-2 truncate min-w-0 leading-tight",children:[o.jsx("span",{children:"See Reviews"}),((Q=w._count)==null?void 0:Q.comments)>0&&o.jsx("span",{className:"text-xs bg-orange-100 px-1.5 sm:px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:w._count.comments})]})]})}):o.jsx("div",{className:"w-full min-h-[44px] border border-gray-200 rounded-lg bg-gray-50 animate-pulse"})})]})]}),o.jsx(Hm,{recipe:e,open:c,onOpenChange:d}),o.jsx(F4,{recipe:e,open:h,onOpenChange:f,onReviewSubmitted:()=>{C()}})]})}const lt=u.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:Ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));lt.displayName="Input";const z4="https://vohvdarghgqskzqjclux.supabase.co",B4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",Ii=vm(z4,B4);function Gm(e){return{id:e.id,title:e.title,ingredients:e.ingredients,instructions:e.instructions,prepTime:e.prep_time,cookTime:e.cook_time,servings:e.servings,tags:e.tags||[],cuisineType:e.cuisine_type,difficulty:e.difficulty,dietaryTags:e.dietary_tags||[],mealType:e.meal_type||[],imageUrl:e.image_url,videoUrl:e.video_url,sourceUrl:e.source_url,notes:e.notes,isSaved:!1}}function V4(e){return{title:e.title,ingredients:e.ingredients,instructions:e.instructions,prep_time:e.prepTime,cook_time:e.cookTime,servings:e.servings,tags:e.tags||[],cuisine_type:e.cuisineType,difficulty:e.difficulty,dietary_tags:e.dietaryTags||[],meal_type:e.mealType||[],image_url:e.imageUrl,video_url:e.videoUrl,source_url:e.sourceUrl,notes:e.notes,is_public:!0}}async function W4(e){const t=V4(e);console.log("[createRecipe] Attempting to insert:",t);const{data:r,error:n}=await Ii.from("public_recipes").insert(t).select().single();if(n)throw console.error("Error creating recipe:",n),console.error("Error details:",{message:n.message,details:n.details,hint:n.hint,code:n.code}),console.error("Supabase request failed",n),new Error(n.message||"Failed to create recipe");return Gm(r)}async function Wb(){const{data:e,error:t}=await Ii.from("public_recipes").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching recipes:",t),new Error("Failed to fetch recipes");return(e||[]).map(Gm)}async function q4(e){const{data:t,error:r}=await Ii.from("public_recipes").select("*").eq("id",e).maybeSingle();return r?(console.error("Error fetching recipe:",r),null):t?Gm(t):null}async function qb(e){if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))throw new Error("Cannot delete mock recipes - only database recipes can be deleted");const{error:r}=await Ii.from("public_recipes").delete().eq("id",e);if(r)throw console.error("Error deleting recipe:",r),new Error("Failed to delete recipe")}const Km=Object.freeze(Object.defineProperty({__proto__:null,createRecipe:W4,deleteRecipe:qb,getAllPublicRecipes:Wb,getRecipeById:q4,supabase:Ii},Symbol.toStringTag,{value:"Module"})),H4="modulepreload",G4=function(e){return"/"+e},Rx={},Co=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=G4(c),c in Rx)return;Rx[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":H4,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Nu=e=>{if(!e){console.log("[imageUtils]  No image URL provided");return}if(console.log("[imageUtils]  Input URL:",e),e.includes("vohvdarghgqskzqjclux.supabase.co/storage"))return console.log("[imageUtils]  Supabase storage URL - returning directly"),e;if(e.includes("instagram.com")||e.includes("cdninstagram.com")){console.warn("[imageUtils]  Instagram URL detected - this should have been reuploaded");const t=e.replace(/&amp;/g,"&"),r=`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(t)}`;return console.log("[imageUtils]  Attempting to proxy:",r),r}return console.log("[imageUtils]  Other URL - returning directly"),e},_u=()=>o.jsxs("div",{className:"flex gap-2 sm:gap-3 animate-pulse",children:[o.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gray-300 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"bg-gray-200 rounded-2xl px-3 py-2 space-y-2",children:[o.jsx("div",{className:"h-3 bg-gray-300 rounded w-24"}),o.jsx("div",{className:"h-3 bg-gray-300 rounded w-full"}),o.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]}),o.jsx("div",{className:"h-2 bg-gray-200 rounded w-16 ml-3"})]})]}),K4=()=>o.jsxs("div",{className:"space-y-3 animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>o.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded"},e))}),o.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"}),o.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>o.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded"},e))})]})]});function hd({postId:e,isOpen:t,onClose:r,onCommentPosted:n}){const[s,a]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(null),[b,g]=u.useState(0),[w,y]=u.useState(0),[x,v]=u.useState(0),[j,N]=u.useState(0),[_,S]=u.useState(null),[P,C]=u.useState(null),[R,M]=u.useState(!1),D=u.useRef(null),[Q,q]=u.useState(!1);u.useEffect(()=>{t&&e&&(console.log("[CommentModal]  Modal opened with postId:",e),ee())},[t,e]);const ee=async()=>{var $,z;d(!0);try{console.log("[CommentModal]  Starting to load data for post:",e);const{data:X}=await U.auth.getUser(),ue=(($=X.user)==null?void 0:$.id)||null;m(ue);const{data:G,error:H}=await U.from("posts").select("*").eq("id",e).maybeSingle();if(console.log("[CommentModal]  Raw post data:",G),console.log("[CommentModal]  Post columns:",G?Object.keys(G):"none"),H)throw H;if(!G){console.log("[CommentModal]  Post not found!"),L.error("Post not found"),r();return}console.log("[CommentModal]  Post fields:",{id:G.id,title:G.title,image_url:G.image_url,recipe_id:G.recipe_id,recipe_url:G.recipe_url,hasImageUrl:!!G.image_url});let fe=null;if(G.recipe_id){console.log("[CommentModal]  Fetching recipe with ID:",G.recipe_id);const{data:T,error:K}=await U.from("public_recipes").select("image_url, video_url, title").eq("id",G.recipe_id).maybeSingle();console.log("[CommentModal]  Recipe data:",T),fe=T,T&&console.log("[CommentModal]  Recipe fields:",{id:G.recipe_id,title:T.title,image_url:T.image_url,hasImageUrl:!!T.image_url})}!G.image_url&&(fe!=null&&fe.image_url)?(console.log("[CommentModal]  Using recipe image as fallback:",fe.image_url),G.image_url=fe.image_url):G.image_url||console.log("[CommentModal]  NO IMAGE AVAILABLE"),S(G);const[ce,O,J]=await Promise.all([U.from("post_ratings").select("rating").eq("post_id",e),U.from("comments").select("id, text, created_at, user_id, profiles!comments_user_id_fkey(username, avatar_url)").eq("post_id",e).order("created_at",{ascending:!0}),ue?U.from("post_ratings").select("rating").eq("post_id",e).eq("user_id",ue).maybeSingle():Promise.resolve({data:null,error:null})]);if(ce.data&&ce.data.length>0){const T=ce.data.reduce((K,oe)=>K+oe.rating,0)/ce.data.length;v(T),N(ce.data.length)}O.data&&a(O.data),g(((z=J.data)==null?void 0:z.rating)||0),G.spotify_preview_url&&setTimeout(()=>{},500)}catch(X){console.error("[CommentModal]  Error loading modal data:",X),L.error("Failed to load post details")}finally{d(!1)}},B=async()=>{try{const{data:$,error:z}=await U.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(z)throw z;if(!$||$.length===0){a([]);return}const X=[...new Set($.map(ce=>ce.user_id))],{data:ue,error:G}=await U.from("profiles").select("id, username, avatar_url").in("id",X);if(G)throw G;const H=new Map((ue||[]).map(ce=>[ce.id,ce])),fe=$.map(ce=>({...ce,profiles:H.get(ce.user_id)||{username:"Unknown User",avatar_url:null}}));a(fe)}catch($){console.error("Error reloading comments:",$)}},F=async()=>{try{const{data:$,error:z}=await U.from("post_ratings").select("rating").eq("post_id",e);if(z)throw z;if($&&$.length>0){const X=$.reduce((ue,G)=>ue+G.rating,0)/$.length;v(X),N($.length)}else v(0),N(0)}catch($){console.error("Error reloading ratings:",$)}},A=async $=>{if(!p){L.error("Please log in to rate");return}try{const{error:z}=await U.from("post_ratings").upsert({post_id:e,user_id:p,rating:$},{onConflict:"post_id,user_id"});if(z)throw z;g($),await F(),n&&n(),L.success("Rating submitted!")}catch(z){console.error("Error submitting rating:",z),L.error("Failed to submit rating")}},k=async $=>{if($.preventDefault(),!(!i.trim()||!p)){f(!0);try{const{data:z}=await U.from("posts").select("user_id").eq("id",e).maybeSingle(),{error:X}=await U.from("comments").insert({post_id:e,user_id:p,text:i.trim()});if(X)throw X;z&&z.user_id!==p&&await U.from("notifications").insert({user_id:z.user_id,actor_id:p,type:"comment",post_id:e}),l(""),await B(),L.success("Comment posted!"),n&&n()}catch(z){console.error("Error posting comment:",z),L.error("Failed to post comment")}finally{f(!1)}}},I=async $=>{if(confirm("Delete this comment?"))try{const{error:z}=await U.from("comments").delete().eq("id",$).eq("user_id",p);if(z)throw z;await B(),L.success("Comment deleted"),n&&n()}catch(z){console.error("Error deleting comment:",z),L.error("Failed to delete comment")}},te=()=>{D.current&&(Q?D.current.pause():D.current.play().catch($=>console.log("Play failed:",$)),q(!Q))};return!_&&c?o.jsx(Pt,{open:t&&!R,onOpenChange:r,children:o.jsx(Nt,{className:"max-w-lg w-[95vw] h-[90vh] sm:max-h-[85vh] p-0 gap-0 overflow-hidden z-[9999] flex flex-col",children:o.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[o.jsx("div",{className:"w-full h-[35vh] sm:h-[40vh] bg-gray-300 animate-pulse flex-shrink-0 relative",children:o.jsx("button",{onClick:r,className:"absolute top-2 right-2 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-10",children:o.jsx(Rt,{className:"w-5 h-5"})})}),o.jsxs("div",{className:"flex-1 flex flex-col bg-white min-h-0",children:[o.jsxs("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0 space-y-2 animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]}),o.jsx("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0",children:o.jsx(K4,{})}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 sm:px-4 sm:py-3 space-y-3 min-h-[100px]",children:[o.jsx(_u,{}),o.jsx(_u,{}),o.jsx(_u,{})]}),o.jsx("div",{className:"border-t px-3 py-3 sm:px-4 sm:py-4 bg-white flex-shrink-0",children:o.jsxs("div",{className:"flex gap-2 animate-pulse",children:[o.jsx("div",{className:"flex-1 h-9 sm:h-10 bg-gray-200 rounded-lg"}),o.jsx("div",{className:"h-9 w-9 sm:h-10 sm:w-10 bg-gray-300 rounded-lg"})]})})]})]})})}):o.jsxs(o.Fragment,{children:[o.jsx(Pt,{open:t,onOpenChange:r,children:o.jsx(Nt,{className:"max-w-lg w-[95vw] h-[90vh] sm:max-h-[85vh] p-0 gap-0 overflow-hidden z-[9999] flex flex-col",children:o.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"w-full h-[25vh] sm:h-[30vh] bg-black flex items-center justify-center relative overflow-hidden flex-shrink-0",children:[_!=null&&_.image_url?o.jsx("img",{src:Nu(_.image_url),alt:_.title||"Post",className:"w-full h-full object-contain",onLoad:()=>{console.log("[CommentModal]  Image loaded successfully"),console.log("[CommentModal]  Original URL:",_.image_url),console.log("[CommentModal]  Proxied URL:",Nu(_.image_url))},onError:$=>{console.log("[CommentModal]  Image failed to load"),console.log("[CommentModal]  Original URL:",_.image_url),console.log("[CommentModal]  Proxied URL:",Nu(_.image_url))}}):o.jsxs("div",{className:"text-white text-center",children:[o.jsx("p",{children:"No image available"}),o.jsxs("p",{className:"text-xs mt-2",children:["Post ID: ",e]}),(_==null?void 0:_.recipe_id)&&o.jsxs("p",{className:"text-xs mt-1",children:["Recipe ID: ",_.recipe_id]})]}),o.jsx("button",{onClick:r,className:"absolute top-2 right-2 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-10",children:o.jsx(Rt,{className:"w-5 h-5"})}),(_==null?void 0:_.spotify_preview_url)&&o.jsxs("div",{className:"absolute bottom-2 left-2 right-2 z-10",children:[o.jsxs("button",{onClick:te,className:"bg-black/70 hover:bg-black/90 backdrop-blur-sm text-white px-2 py-1.5 sm:px-3 sm:py-2 rounded-full shadow-lg transition-all flex items-center gap-2 w-full",children:[Q?o.jsx(jm,{className:"w-4 h-4 sm:w-5 sm:h-5"}):o.jsx(Nm,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsxs("div",{className:"text-left text-[10px] sm:text-xs flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:_.spotify_track_name}),o.jsx("div",{className:"text-white/80 truncate",children:_.spotify_artist_name})]})]}),o.jsx("audio",{ref:D,src:_.spotify_preview_url,onPlay:()=>q(!0),onPause:()=>q(!1),onEnded:()=>q(!1)}),"                "]})]}),o.jsxs("div",{className:"flex-1 flex flex-col bg-white min-h-0",children:[o.jsxs("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:(_==null?void 0:_.title)||"Post"}),(_==null?void 0:_.caption)&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5 line-clamp-2",children:_.caption})]}),o.jsx("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0",children:o.jsxs("div",{className:"flex gap-3 items-start",children:[o.jsxs("div",{className:"flex-1 space-y-1.5 sm:space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map($=>o.jsx("span",{className:`text-sm sm:text-base ${$<=x?"opacity-100":"opacity-20 grayscale"}`,children:""},$))}),o.jsxs("span",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:[x>0?x.toFixed(1):"No ratings",j>0&&` (${j})`]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-medium",children:"Your rating:"}),o.jsx("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[1,2,3,4,5].map($=>o.jsx("button",{type:"button",onClick:()=>A($),onMouseEnter:()=>y($),onMouseLeave:()=>y(0),className:"transition-transform active:scale-110 touch-manipulation p-1",children:o.jsx("span",{className:`text-base sm:text-lg ${$<=(w||b)?"opacity-100":"opacity-20 grayscale"}`,children:""})},$))})]})]}),((_==null?void 0:_.recipe_id)||(_==null?void 0:_.recipe_url))&&o.jsxs(re,{onClick:async()=>{if(_.recipe_id){const{getRecipeById:$}=await Co(async()=>{const{getRecipeById:X}=await Promise.resolve().then(()=>Km);return{getRecipeById:X}},void 0),z=await $(_.recipe_id);z?(C(z),M(!0)):L.error("Recipe not found")}else _.recipe_url&&window.open(_.recipe_url,"_blank")},variant:"outline",size:"sm",className:"border-orange-600 text-orange-600 hover:bg-orange-50 flex-shrink-0 h-auto py-2 px-3 whitespace-nowrap",children:[o.jsx(Zc,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5"}),o.jsx("span",{className:"text-xs sm:text-sm",children:"View Recipe"})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 sm:px-4 sm:py-3 space-y-2 sm:space-y-3 min-h-[100px] max-h-[30vh] sm:max-h-none",children:c?o.jsx("div",{className:"text-center py-8",children:o.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.length===0?o.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-xs sm:text-sm",children:"No comments yet. Be the first to comment!"}):s.map($=>{var z,X,ue,G,H;return o.jsxs("div",{className:"flex gap-2 sm:gap-3 group",children:[(z=$.profiles)!=null&&z.avatar_url?o.jsx("img",{src:$.profiles.avatar_url,alt:$.profiles.username,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover flex-shrink-0"}):o.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white font-medium text-xs flex-shrink-0",children:(G=(ue=(X=$.profiles)==null?void 0:X.username)==null?void 0:ue[0])==null?void 0:G.toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"bg-gray-100 rounded-2xl px-3 py-2 relative",children:[o.jsx("button",{onClick:()=>{var fe;return window.location.href=`/${((fe=$.profiles)==null?void 0:fe.username)||"user"}`},className:"font-semibold text-xs sm:text-sm hover:underline",children:(H=$.profiles)==null?void 0:H.username}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-700 break-words mt-0.5",children:$.text}),p===$.user_id&&o.jsx("button",{onClick:()=>I($.id),className:"absolute top-1 right-1 p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity touch-manipulation",title:"Delete comment",children:o.jsx(Rt,{className:"w-3 h-3"})})]}),o.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 mt-1 px-3",children:new Date($.created_at).toLocaleDateString()})]})]},$.id)})}),o.jsx("form",{onSubmit:k,className:"border-t px-3 py-3 sm:px-4 sm:py-4 bg-white flex-shrink-0 sticky bottom-0",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(lt,{value:i,onChange:$=>l($.target.value),placeholder:"Add a comment...",disabled:h,className:"flex-1 text-xs sm:text-sm h-9 sm:h-10"}),o.jsx(re,{type:"submit",disabled:!i.trim()||h,size:"icon",className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 flex-shrink-0 h-9 w-9 sm:h-10 sm:w-10",children:o.jsx(Mo,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})})]})]})})}),t&&R&&o.jsxs("button",{onClick:()=>M(!1),className:"fixed bottom-4 right-4 z-[9999] bg-orange-600 hover:bg-orange-700 text-white px-4 py-3 rounded-full shadow-lg flex items-center gap-2 transition-all active:scale-95 touch-manipulation",children:[o.jsx("span",{className:"text-sm sm:text-base",children:""}),o.jsx("span",{className:"text-sm font-medium",children:"Back to Comments"})]}),P&&o.jsx(Hm,{recipe:P,open:!!P,onOpenChange:$=>{$||(C(null),M(!1))}})]})}const Y4=()=>o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden animate-pulse",children:[o.jsx("div",{className:"bg-gray-300 aspect-square w-full"}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("div",{className:"h-5 bg-gray-300 rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),o.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[o.jsx("div",{className:"h-8 w-20 bg-gray-300 rounded-full"}),o.jsx("div",{className:"h-8 w-20 bg-gray-300 rounded-full"})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),o.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),o.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"})]})]})]});function J4({onNavigate:e}){const{state:t,dispatch:r}=Qs(),{isAdmin:n}=Qc(),[s,a]=u.useState(""),[i,l]=u.useState(null),[c,d]=u.useState(null),[h,f]=u.useState([]),[p,m]=u.useState(null),[b,g]=u.useState(window.innerWidth<768),[w,y]=u.useState(new Map),[x,v]=u.useState(!1);u.useEffect(()=>{const T=()=>g(window.innerWidth<768);return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),u.useEffect(()=>{const T=K=>{m(K.detail)};return window.addEventListener("open-shared-post",T),()=>{window.removeEventListener("open-shared-post",T)}},[]);const j=async T=>{var K,oe,be;try{console.log("[Discover] Batch loading social posts...");const Te=T.map(Me=>Me.id),{data:W}=await U.from("posts").select("*").in("recipe_id",Te),{data:ae}=await U.from("public_recipes").select("id, video_url, image_url").in("id",Te).not("video_url","is",null),Y=(ae==null?void 0:ae.map(Me=>Me.video_url).filter(Boolean))||[],{data:je}=Y.length>0?await U.from("posts").select("*").in("recipe_url",Y):{data:[]},Z=new Map,pe=new Map(T.map(Me=>[Me.id,Me.imageUrl]));W==null||W.forEach(Me=>{Me.recipe_id&&(!Me.image_url&&pe.has(Me.recipe_id)&&(Me.image_url=pe.get(Me.recipe_id)),Z.set(Me.recipe_id,Me))});const Ne=new Map((ae==null?void 0:ae.map(Me=>[Me.video_url,Me.id]))||[]);je==null||je.forEach(Me=>{const V=Ne.get(Me.recipe_url);V&&!Z.has(V)&&(!Me.image_url&&pe.has(V)&&(Me.image_url=pe.get(V)),Z.set(V,Me))});const Le=Array.from(Z.values()).map(Me=>Me.id);if(Le.length>0){const[Me,V,he]=await Promise.all([U.from("profiles").select("id, username, avatar_url").in("id",Array.from(Z.values()).map(Ue=>Ue.user_id)),U.from("likes").select("post_id, user_id").in("post_id",Le),U.from("comments").select("post_id").in("post_id",Le)]),_e=new Map(((K=Me.data)==null?void 0:K.map(Ue=>[Ue.id,Ue]))||[]),Ae=new Map;(oe=V.data)==null||oe.forEach(Ue=>{Ae.set(Ue.post_id,(Ae.get(Ue.post_id)||0)+1)});const ut=new Map;(be=he.data)==null||be.forEach(Ue=>{ut.set(Ue.post_id,(ut.get(Ue.post_id)||0)+1)});const Xt=new Map;Z.forEach((Ue,Qt)=>{Xt.set(Qt,{...Ue,profiles:_e.get(Ue.user_id),_count:{likes:Ae.get(Ue.id)||0,comments:ut.get(Ue.id)||0}})}),y(Xt),console.log("[Discover]  Loaded",Xt.size,"social posts with images")}}catch(Te){console.error("[Discover] Failed to batch load social posts:",Te)}};u.useEffect(()=>{const T=async()=>{try{console.log("[Discover] Loading recipes from database...");const oe=await Wb();console.log("[Discover] Loaded",oe.length,"recipes from database"),f(oe),await j(oe)}catch(oe){console.error("Failed to load recipes:",oe),f([])}};T();const K=()=>{document.visibilityState==="visible"&&T()};return document.addEventListener("visibilitychange",K),()=>{document.removeEventListener("visibilitychange",K)}},[]);const N=async T=>{try{await qb(T),f(h.filter(K=>K.id!==T)),L.success("Recipe deleted successfully")}catch(K){console.error("Failed to delete recipe:",K),L.error("Failed to delete recipe")}},_=u.useMemo(()=>{const T=new Set(h.map(K=>K.cuisineType));return Array.from(T).sort()},[h]),S=u.useMemo(()=>h.filter(T=>{const K=s===""||T.title.toLowerCase().includes(s.toLowerCase())||T.tags.some(be=>be.toLowerCase().includes(s.toLowerCase()))||T.ingredients.some(be=>be.name.toLowerCase().includes(s.toLowerCase())),oe=!i||T.cuisineType===i;return K&&oe}),[s,i,h]),[P,C]=u.useState(!1),[R,M]=u.useState(!1),[D,Q]=u.useState(!1),[q,ee]=u.useState(!1),[B,F]=u.useState(!1),[A,k]=u.useState(!1),I=u.useMemo(()=>{const T=[...h].sort((K,oe)=>(oe.popularity||0)-(K.popularity||0));return P?T:T.slice(0,b?6:12)},[h,P,b]),te=u.useMemo(()=>{const T=h.filter(K=>K.prepTime+K.cookTime<=30&&K.difficulty==="Easy");return R?T:T.slice(0,b?6:12)},[h,R,b]),$=u.useMemo(()=>{const T=h.filter(K=>K.dietaryTags.includes("Vegetarian")||K.dietaryTags.includes("Vegan"));return D?T:T.slice(0,b?6:12)},[h,D,b]),z=u.useMemo(()=>{const T=["Thai","Japanese","Korean","Indian","Middle Eastern","Mexican","Vietnamese","Vegan/Vegetarian"],K=h.filter(oe=>T.includes(oe.cuisineType));return q?K:K.slice(0,b?6:12)},[h,q,b]),X=u.useMemo(()=>{const T=h.filter(K=>K.cuisineType==="Pet Meals");return B?T:T.slice(0,b?6:12)},[h,B,b]),ue=u.useMemo(()=>{const T=h.filter(K=>K.cuisineType==="Culinary/Baked Goods");return A?T:T.slice(0,b?6:12)},[h,A,b]),[G,H]=u.useState([]);u.useEffect(()=>{(()=>{const K=Q2(h,t.savedRecipes,t.userPreferences,6);H(K)})()},[h,t.savedRecipes,t.userPreferences,b]);const fe=u.useMemo(()=>Z2(t.savedRecipes),[t.savedRecipes]),ce=T=>{const K=h.find(oe=>oe.id===T);if(K){const oe=t.savedRecipes.some(be=>be.id===T);r(oe?{type:"REMOVE_RECIPE",payload:T}:{type:"SAVE_RECIPE",payload:K})}},O=T=>{const K=h.find(oe=>oe.id===T);K&&(console.log("Cook clicked for:",K.title),d(K))},J=({title:T,subtitle:K,icon:oe,recipes:be,showAll:Te,onToggle:W,allCount:ae,buttonColor:Y})=>o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:`bg-gradient-to-r ${Y} p-2 rounded-lg`,children:o.jsx(oe,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:T}),o.jsx("p",{className:"text-sm md:text-base text-gray-600",children:K})]})]}),o.jsx("div",{className:`grid gap-4 md:gap-6 auto-rows-fr ${b?"grid-cols-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:be.map(je=>o.jsx(Hh,{recipe:je,onSave:ce,onCook:O,onDelete:N,isAdmin:n,showReviewButton:!0,preloadedSocialPost:w.get(je.id)||null},je.id))}),ae>(b?6:12)&&o.jsx("div",{className:"text-center mt-8",children:o.jsx(re,{onClick:()=>W(!Te),variant:"outline",size:"lg",className:"text-sm md:text-base",children:Te?"Show Less":"Show More"})})]});return h.length===0&&!s&&!i?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"h-12 bg-gray-300 rounded-xl w-96 mx-auto mb-4 animate-pulse"}),o.jsx("div",{className:"h-6 bg-gray-300 rounded-lg w-80 mx-auto animate-pulse"})]}),o.jsx("div",{className:"mb-12",children:o.jsx("div",{className:"h-14 bg-gray-200 rounded-2xl w-full max-w-2xl mx-auto animate-pulse"})}),o.jsx("div",{className:"space-y-16",children:[...Array(6)].map((T,K)=>o.jsxs("section",{children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("div",{className:"w-14 h-14 bg-gray-300 rounded-xl animate-pulse"}),o.jsxs("div",{children:[o.jsx("div",{className:"h-9 bg-gray-300 rounded-lg w-72 animate-pulse"}),o.jsx("div",{className:"h-6 bg-gray-300 rounded-lg w-56 mt-3 animate-pulse"})]})]}),o.jsx("div",{className:`grid gap-6 ${b?"grid-cols-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"} auto-rows-fr`,children:[...Array(b?4:8)].map((oe,be)=>o.jsx(Y4,{},be))})]},K))})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[o.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-3 md:mb-4",children:"Discover Amazing Recipes"}),o.jsxs("p",{className:"text-sm md:text-base text-gray-600 max-w-2xl mx-auto mb-2",children:["Recipes scraped from ",o.jsx("span",{className:"font-semibold text-blue-600",children:"social media"})," and the ",o.jsx("span",{className:"font-semibold text-blue-600",children:"web"})]}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500 max-w-2xl mx-auto",children:"Meal Calendar  Shopping List  Social Community"})]}),o.jsxs("div",{className:"mb-8 md:mb-12 space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Rw,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx(lt,{type:"text",placeholder:"Search recipes, ingredients...",value:s,onChange:T=>a(T.target.value),className:"pl-12 h-12 md:h-14 text-base border-gray-300 focus:border-orange-500 focus:ring-orange-500 shadow-sm"})]}),b?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:()=>v(!x),className:"w-full flex items-center justify-between px-4 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[o.jsx("span",{className:"font-medium text-gray-900",children:i?`Cuisine: ${i}`:"Filter by Cuisine"}),x?o.jsx(Rt,{className:"w-5 h-5"}):o.jsx(wm,{className:"w-5 h-5"})]}),x&&o.jsxs("div",{className:"space-y-2 bg-white border border-gray-200 rounded-lg p-3",children:[o.jsx(re,{variant:i===null?"default":"outline",onClick:()=>{l(null),v(!1)},size:"sm",className:`w-full justify-start ${i===null?"bg-orange-500 hover:bg-orange-600":""}`,children:"All Cuisines"}),_.map(T=>o.jsx(re,{variant:i===T?"default":"outline",onClick:()=>{l(T),v(!1)},size:"sm",className:`w-full justify-start text-sm ${i===T?"bg-orange-500 hover:bg-orange-600":""}`,children:T},T))]})]}):o.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[o.jsx(re,{variant:i===null?"default":"outline",onClick:()=>l(null),size:"sm",className:i===null?"bg-orange-500 hover:bg-orange-600":"",children:"All Cuisines"}),_.map(T=>o.jsx(re,{variant:i===T?"default":"outline",onClick:()=>l(T),size:"sm",className:i===T?"bg-orange-500 hover:bg-orange-600":"",children:T},T))]})]}),s===""&&i===null?o.jsxs("div",{className:"space-y-12 md:space-y-16",children:[o.jsx(J,{title:"Trending Now",subtitle:"Most popular recipes this week",icon:GE,recipes:I,showAll:P,onToggle:C,allCount:h.length,buttonColor:"from-orange-500 to-rose-500"}),o.jsx(J,{title:"Quick & Easy",subtitle:"Delicious meals ready in 30 minutes or less",icon:ZE,recipes:te,showAll:R,onToggle:M,allCount:h.filter(T=>T.prepTime+T.cookTime<=30&&T.difficulty==="Easy").length,buttonColor:"from-emerald-500 to-teal-500"}),o.jsx(J,{title:"Healthy Options",subtitle:"Vegetarian and vegan recipes for a lighter meal",icon:LE,recipes:$,showAll:D,onToggle:Q,allCount:h.filter(T=>T.dietaryTags.includes("Vegetarian")||T.dietaryTags.includes("Vegan")).length,buttonColor:"from-green-500 to-emerald-500"}),o.jsx(J,{title:"International Flavors",subtitle:"Explore cuisines from around the world",icon:kw,recipes:z,showAll:q,onToggle:ee,allCount:h.filter(T=>["Thai","Japanese","Korean","Indian","Middle Eastern","Mexican","Vietnamese"].includes(T.cuisineType)).length,buttonColor:"from-amber-500 to-orange-500"}),X.length>0&&o.jsx(J,{title:"Pet Meals & Treats",subtitle:"Homemade recipes for your furry friends",icon:ym,recipes:X,showAll:B,onToggle:F,allCount:h.filter(T=>T.cuisineType==="Pet Meals").length,buttonColor:"from-pink-500 to-rose-500"}),ue.length>0&&o.jsx(J,{title:"Culinary & Baked Goods",subtitle:"From artisan breads to elegant pastries",icon:RE,recipes:ue,showAll:A,onToggle:k,allCount:h.filter(T=>T.cuisineType==="Culinary/Baked Goods").length,buttonColor:"from-amber-500 to-orange-500"}),o.jsx(J,{title:"Recommended for You",subtitle:fe,icon:HE,recipes:G,showAll:!1,onToggle:()=>{},allCount:G.length,buttonColor:"from-blue-500 to-cyan-500"})]}):o.jsxs("section",{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search Results"}),o.jsxs("p",{className:"text-gray-600",children:["Found ",S.length," recipe",S.length!==1?"s":""]})]}),S.length>0?o.jsx("div",{className:`grid gap-4 md:gap-6 auto-rows-fr ${b?"grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"}`,children:S.map(T=>o.jsx(Hh,{recipe:T,onSave:ce,onCook:O,onDelete:N,isAdmin:n,showReviewButton:!0,preloadedSocialPost:w.get(T.id)||null},T.id))}):o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-lg text-gray-500",children:"No recipes found. Try adjusting your search."})})]})]}),c&&o.jsx(qm,{recipe:c,onClose:()=>d(null)}),p&&o.jsx(hd,{postId:p,isOpen:!!p,onClose:()=>m(null),onCommentPosted:()=>{}})]})}function X4(e){if(!e)return[];const t=/#(\w+)/g,r=e.match(t);return r?r.map(n=>n.slice(1).toLowerCase()).filter((n,s,a)=>a.indexOf(n)===s):[]}function Q4(e,t){return e&&e.split(/(\s+)/g).map((n,s)=>{if(n.startsWith("#")){const a=n.slice(1);return se.createElement("span",{key:s,onClick:i=>{i.stopPropagation(),t(a)},className:"text-blue-600 hover:text-blue-700 cursor-pointer font-semibold"},n)}return n.startsWith("http://")||n.startsWith("https://")?se.createElement("a",{key:s,href:n,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"text-blue-600 hover:underline"},n):se.createElement("span",{key:s},n)})}function Z4({userId:e,currentUserId:t,posts:r,isFollowing:n,onBack:s,onToggleFollow:a,onMessage:i,onRefresh:l}){var F,A;const c=r.filter(k=>k.user_id===e),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(new Set),[g,w]=u.useState(0),[y,x]=u.useState(0),[v,j]=u.useState(!1),[N,_]=u.useState(!1),[S,P]=u.useState([]),[C,R]=u.useState([]),[M,D]=u.useState(null);u.useEffect(()=>{const k=async()=>{const{data:$}=await U.from("profiles").select("username, avatar_url, bio, banner_url").eq("id",e).maybeSingle();$&&h($)},I=async()=>{const{count:$}=await U.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",e),{count:z}=await U.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",e);w($||0),x(z||0)},te=async()=>{if(!t)return;const{data:$}=await U.from("likes").select("post_id").eq("user_id",t).in("post_id",c.map(z=>z.id));$&&b(new Set($.map(z=>z.post_id)))};k(),I(),te()},[e,t,c.length]);const Q=async()=>{const{data:k}=await U.from("follows").select("follower_id, profiles:follower_id(id, username, avatar_url)").eq("following_id",e);P(k||[]),j(!0)},q=async()=>{const{data:k}=await U.from("follows").select("following_id, profiles:following_id(id, username, avatar_url)").eq("follower_id",e);R(k||[]),_(!0)},ee=async k=>{if(!t)return;const{error:I}=await U.from("comments").delete().eq("id",k).eq("user_id",t);I?L.error("Failed to delete comment"):(L.success("Comment deleted"),l&&l())},B=async k=>{if(!t)return;const I=m.has(k);try{if(I)await U.from("likes").delete().match({post_id:k,user_id:t}),b(te=>{const $=new Set(te);return $.delete(k),$});else{await U.from("likes").insert({post_id:k,user_id:t});const te=c.find($=>$.id===k);te&&te.user_id!==t&&await U.from("notifications").insert({user_id:te.user_id,actor_id:t,type:"like",post_id:k}),b($=>new Set($).add(k))}}catch(te){console.error("Error toggling like:",te),L.error("Failed to update like")}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3 shadow-sm",children:o.jsxs(re,{onClick:s,variant:"ghost",className:"min-h-[44px] gap-2 touch-manipulation active:scale-95 transition-all",children:[o.jsx(Ko,{className:"w-5 h-5"}),"Back to Feed"]})}),o.jsxs("div",{className:"bg-white border-b border-gray-200",children:[o.jsx("div",{className:"relative h-32",children:d!=null&&d.banner_url?o.jsx("img",{src:d.banner_url,alt:"Banner",className:"w-full h-full object-cover",loading:"lazy"}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-100 to-amber-100"})}),o.jsxs("div",{className:"relative px-4 pb-3",children:[o.jsxs("div",{className:"flex items-start gap-3 -mt-10",children:[o.jsx("div",{className:"relative flex-shrink-0",children:d!=null&&d.avatar_url?o.jsx("img",{src:d.avatar_url,alt:d.username,className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):o.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white text-2xl font-bold border-4 border-white shadow-lg",children:(A=(F=d==null?void 0:d.username)==null?void 0:F[0])==null?void 0:A.toUpperCase()})}),o.jsx("div",{className:"flex-1 pt-10 min-w-0",children:d!=null&&d.bio?o.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 break-words",children:d.bio}):o.jsx("p",{className:"text-sm text-gray-400 italic",children:"No bio"})})]}),o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:(d==null?void 0:d.username)||"Loading..."}),e==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&o.jsx(Wa,{className:"w-5 h-5 text-yellow-500 fill-yellow-500 flex-shrink-0"})]}),e!==t&&o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsxs(re,{onClick:()=>{i&&d&&i(e,d.username)},variant:"outline",size:"sm",className:"flex-1 min-h-[44px] touch-manipulation active:scale-95 transition-all",children:[o.jsx(Mo,{className:"w-4 h-4 mr-2 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Message"})]}),o.jsx(re,{onClick:()=>a(e),variant:n?"outline":"default",size:"sm",className:`flex-1 min-h-[44px] touch-manipulation active:scale-95 transition-all ${n?"":"bg-orange-500 hover:bg-orange-600"}`,children:n?o.jsxs(o.Fragment,{children:[o.jsx(YE,{className:"w-4 h-4 mr-2 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Supporting"})]}):o.jsxs(o.Fragment,{children:[o.jsx(JE,{className:"w-4 h-4 mr-2 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Support"})]})})]})]}),o.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-center gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-base font-bold",children:c.length}),o.jsx("div",{className:"text-xs text-gray-500",children:"posts"})]}),o.jsxs("button",{onClick:Q,className:"text-center hover:bg-gray-50 px-3 py-1 rounded-lg transition-colors min-h-[44px] touch-manipulation active:scale-95",children:[o.jsx("div",{className:"text-base font-bold",children:g}),o.jsx("div",{className:"text-xs text-gray-500",children:"supporters"})]}),o.jsxs("button",{onClick:q,className:"text-center hover:bg-gray-50 px-3 py-1 rounded-lg transition-colors min-h-[44px] touch-manipulation active:scale-95",children:[o.jsx("div",{className:"text-base font-bold",children:y}),o.jsx("div",{className:"text-xs text-gray-500",children:"supporting"})]})]})})]}),o.jsx("div",{className:"p-4",children:c.length===0?o.jsx("div",{className:"text-center py-12 text-gray-500",children:"No posts yet"}):o.jsx("div",{className:"space-y-4",children:c.map(k=>{var te,$,z;const I=m.has(k.id);return o.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[o.jsxs("div",{className:"relative",children:[k.image_url?o.jsx("img",{src:k.image_url,alt:k.title||"Post",className:"w-full aspect-square object-cover",loading:"lazy"}):k.video_url?o.jsx("video",{src:k.video_url,controls:!0,className:"w-full aspect-square object-cover"}):null,k.title&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-3 py-2",children:o.jsx("h3",{className:"text-white text-sm font-semibold line-clamp-2",children:k.title})})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex gap-4 mb-2",children:[o.jsx("button",{onClick:()=>B(k.id),className:"transition-transform hover:scale-110 active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center -ml-2 touch-manipulation",children:o.jsx(ym,{className:`w-6 h-6 ${I?"fill-red-500 text-red-500":"text-gray-600"}`})}),o.jsx("button",{onClick:()=>p(k.id),className:"transition-transform hover:scale-110 active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center -ml-2 touch-manipulation",children:o.jsx(bm,{className:"w-6 h-6 text-gray-600"})})]}),o.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[((te=k._count)==null?void 0:te.likes)||0," ",(($=k._count)==null?void 0:$.likes)===1?"like":"likes"]}),k.caption&&o.jsx("p",{className:"text-sm leading-relaxed break-words",children:k.caption}),k.latest_comment&&o.jsxs("div",{className:"mt-3 relative",onTouchStart:()=>{var X;return((X=k.latest_comment)==null?void 0:X.user_id)===t&&D(k.latest_comment.id)},onTouchEnd:()=>setTimeout(()=>D(null),3e3),children:[o.jsxs("div",{className:"flex items-start gap-2 pr-10",children:[o.jsx("span",{className:"font-semibold text-sm flex-shrink-0",children:(z=k.latest_comment.profiles)==null?void 0:z.username}),o.jsx("span",{className:"text-sm text-gray-700 break-words",children:k.latest_comment.text})]}),k.latest_comment.user_id===t&&M===k.latest_comment.id&&o.jsx("button",{onClick:X=>{X.stopPropagation(),ee(k.latest_comment.id)},className:"absolute top-0 right-0 w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 active:scale-90 z-10 touch-manipulation",title:"Delete comment",children:o.jsx(rr,{className:"w-4 h-4"})})]}),k._count&&k._count.comments>0&&o.jsxs("button",{onClick:()=>p(k.id),className:"text-sm text-gray-500 mt-2 hover:text-gray-700 block min-h-[36px] touch-manipulation",children:["View all ",k._count.comments," ",k._count.comments===1?"comment":"comments"]})]})]},k.id)})})}),f&&(()=>{const k=c.find(te=>te.id===f),I=k&&t&&t===k.user_id;return k?o.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[o.jsx(hd,{postId:f,isOpen:!0,onClose:()=>p(null)}),o.jsx("button",{onClick:()=>p(null),className:"absolute top-3 left-3 bg-black/50 backdrop-blur-md text-white p-2.5 rounded-full shadow hover:bg-black/70 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Close",children:o.jsx(Ko,{className:"w-5 h-5"})}),I&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{const te=prompt("Edit your caption:");te&&U.from("posts").update({caption:te}).eq("id",f).eq("user_id",t).then(({error:$})=>{$?L.error("Failed to update post"):(L.success("Post updated"),l&&l())})},className:"absolute top-3 right-14 bg-blue-600 text-white p-2.5 rounded-full shadow hover:bg-blue-700 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Edit post",children:""}),o.jsx("button",{onClick:async()=>{if(!confirm("Delete this post?"))return;const{error:te}=await U.from("posts").delete().eq("id",f).eq("user_id",t);te?L.error("Failed to delete post"):(L.success("Post deleted"),p(null),l&&l())},className:"absolute top-3 right-3 bg-red-600 text-white p-2.5 rounded-full shadow hover:bg-red-700 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Delete post",children:o.jsx(rr,{className:"w-5 h-5"})})]})]})}):null})(),o.jsx(Pt,{open:v,onOpenChange:j,children:o.jsxs(Nt,{className:"max-w-sm",children:[o.jsx(Gt,{children:o.jsx(Bt,{children:"Supporters"})}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[S.map(k=>{var I,te,$,z;return o.jsxs("div",{className:"flex items-center gap-3 min-h-[44px]",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold flex-shrink-0",children:(($=(te=(I=k.profiles)==null?void 0:I.username)==null?void 0:te[0])==null?void 0:$.toUpperCase())||o.jsx(hi,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-medium truncate",children:((z=k.profiles)==null?void 0:z.username)||"User"})]},k.follower_id)}),S.length===0&&o.jsx("p",{className:"text-center text-gray-500 py-8",children:"No supporters yet"})]})]})}),o.jsx(Pt,{open:N,onOpenChange:_,children:o.jsxs(Nt,{className:"max-w-sm",children:[o.jsx(Gt,{children:o.jsx(Bt,{children:"Supporting"})}),o.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[C.map(k=>{var I,te,$,z;return o.jsxs("div",{className:"flex items-center gap-3 min-h-[44px]",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold flex-shrink-0",children:(($=(te=(I=k.profiles)==null?void 0:I.username)==null?void 0:te[0])==null?void 0:$.toUpperCase())||o.jsx(hi,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-medium truncate",children:((z=k.profiles)==null?void 0:z.username)||"User"})]},k.following_id)}),C.length===0&&o.jsx("p",{className:"text-center text-gray-500 py-8",children:"Not supporting anyone yet"})]})]})})]})}function Px(e){const t=eT(e),r=u.forwardRef((n,s)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(rT);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function eT(e){const t=u.forwardRef((r,n)=>{const{children:s,...a}=r;if(u.isValidElement(s)){const i=sT(s),l=nT(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tT=Symbol("radix.slottable");function rT(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tT}function nT(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function sT(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Oi(e){const t=e+"CollectionProvider",[r,n]=ar(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:y}=g,x=se.useRef(null),v=se.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:v,collectionRef:x,children:y})};i.displayName=t;const l=e+"CollectionSlot",c=Px(l),d=se.forwardRef((g,w)=>{const{scope:y,children:x}=g,v=a(l,y),j=Oe(w,v.collectionRef);return o.jsx(c,{ref:j,children:x})});d.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",p=Px(h),m=se.forwardRef((g,w)=>{const{scope:y,children:x,...v}=g,j=se.useRef(null),N=Oe(w,j),_=a(h,y);return se.useEffect(()=>(_.itemMap.set(j,{ref:j,...v}),()=>void _.itemMap.delete(j))),o.jsx(p,{[f]:"",ref:N,children:x})});m.displayName=h;function b(g){const w=a(e+"CollectionConsumer",g);return se.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((_,S)=>v.indexOf(_.ref.current)-v.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},b,n]}const oT=["top","right","bottom","left"],us=Math.min,cr=Math.max,jc=Math.round,vl=Math.floor,fn=e=>({x:e,y:e}),aT={left:"right",right:"left",bottom:"top",top:"bottom"},iT={start:"end",end:"start"};function Gh(e,t,r){return cr(e,us(t,r))}function In(e,t){return typeof e=="function"?e(t):e}function On(e){return e.split("-")[0]}function aa(e){return e.split("-")[1]}function Ym(e){return e==="x"?"y":"x"}function Jm(e){return e==="y"?"height":"width"}const lT=new Set(["top","bottom"]);function cn(e){return lT.has(On(e))?"y":"x"}function Xm(e){return Ym(cn(e))}function cT(e,t,r){r===void 0&&(r=!1);const n=aa(e),s=Xm(e),a=Jm(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Nc(i)),[i,Nc(i)]}function dT(e){const t=Nc(e);return[Kh(e),t,Kh(t)]}function Kh(e){return e.replace(/start|end/g,t=>iT[t])}const Tx=["left","right"],Ax=["right","left"],uT=["top","bottom"],hT=["bottom","top"];function fT(e,t,r){switch(e){case"top":case"bottom":return r?t?Ax:Tx:t?Tx:Ax;case"left":case"right":return t?uT:hT;default:return[]}}function mT(e,t,r,n){const s=aa(e);let a=fT(On(e),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(Kh)))),a}function Nc(e){return e.replace(/left|right|bottom|top/g,t=>aT[t])}function pT(e){return{top:0,right:0,bottom:0,left:0,...e}}function Hb(e){return typeof e!="number"?pT(e):{top:e,right:e,bottom:e,left:e}}function _c(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Ix(e,t,r){let{reference:n,floating:s}=e;const a=cn(t),i=Xm(t),l=Jm(i),c=On(t),d=a==="y",h=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,p=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-s.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-s.width,y:f};break;default:m={x:n.x,y:n.y}}switch(aa(t)){case"start":m[i]-=p*(r&&d?-1:1);break;case"end":m[i]+=p*(r&&d?-1:1);break}return m}const gT=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:f}=Ix(d,n,c),p=n,m={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:y}=l[g],{x,y:v,data:j,reset:N}=await y({x:h,y:f,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});h=x??h,f=v??f,m={...m,[w]:{...m[w],...j}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(p=N.placement),N.rects&&(d=N.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:h,y:f}=Ix(d,p,c)),g=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:m}};async function pi(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=In(t,e),b=Hb(m),w=l[p?f==="floating"?"reference":"floating":f],y=_c(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(w)))==null||r?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),x=f==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},N=_c(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:v,strategy:c}):x);return{top:(y.top-N.top+b.top)/j.y,bottom:(N.bottom-y.bottom+b.bottom)/j.y,left:(y.left-N.left+b.left)/j.x,right:(N.right-y.right+b.right)/j.x}}const xT=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=In(e,t)||{};if(d==null)return{};const f=Hb(h),p={x:r,y:n},m=Xm(s),b=Jm(m),g=await i.getDimensions(d),w=m==="y",y=w?"top":"left",x=w?"bottom":"right",v=w?"clientHeight":"clientWidth",j=a.reference[b]+a.reference[m]-p[m]-a.floating[b],N=p[m]-a.reference[m],_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let S=_?_[v]:0;(!S||!await(i.isElement==null?void 0:i.isElement(_)))&&(S=l.floating[v]||a.floating[b]);const P=j/2-N/2,C=S/2-g[b]/2-1,R=us(f[y],C),M=us(f[x],C),D=R,Q=S-g[b]-M,q=S/2-g[b]/2+P,ee=Gh(D,q,Q),B=!c.arrow&&aa(s)!=null&&q!==ee&&a.reference[b]/2-(q<D?R:M)-g[b]/2<0,F=B?q<D?q-D:q-Q:0;return{[m]:p[m]+F,data:{[m]:ee,centerOffset:q-ee-F,...B&&{alignmentOffset:F}},reset:B}}}),vT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=In(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const y=On(s),x=cn(l),v=On(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=p||(v||!g?[Nc(l)]:dT(l)),_=b!=="none";!p&&_&&N.push(...mT(l,g,b,j));const S=[l,...N],P=await pi(t,w),C=[];let R=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&C.push(P[y]),f){const q=cT(s,i,j);C.push(P[q[0]],P[q[1]])}if(R=[...R,{placement:s,overflows:C}],!C.every(q=>q<=0)){var M,D;const q=(((M=a.flip)==null?void 0:M.index)||0)+1,ee=S[q];if(ee&&(!(f==="alignment"?x!==cn(ee):!1)||R.every(A=>cn(A.placement)===x?A.overflows[0]>0:!0)))return{data:{index:q,overflows:R},reset:{placement:ee}};let B=(D=R.filter(F=>F.overflows[0]<=0).sort((F,A)=>F.overflows[1]-A.overflows[1])[0])==null?void 0:D.placement;if(!B)switch(m){case"bestFit":{var Q;const F=(Q=R.filter(A=>{if(_){const k=cn(A.placement);return k===x||k==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(k=>k>0).reduce((k,I)=>k+I,0)]).sort((A,k)=>A[1]-k[1])[0])==null?void 0:Q[0];F&&(B=F);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function Ox(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Mx(e){return oT.some(t=>e[t]>=0)}const yT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=In(e,t);switch(n){case"referenceHidden":{const a=await pi(t,{...s,elementContext:"reference"}),i=Ox(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Mx(i)}}}case"escaped":{const a=await pi(t,{...s,altBoundary:!0}),i=Ox(a,r.floating);return{data:{escapedOffsets:i,escaped:Mx(i)}}}default:return{}}}}},Gb=new Set(["left","top"]);async function wT(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=On(r),l=aa(r),c=cn(r)==="y",d=Gb.has(i)?-1:1,h=a&&c?-1:1,f=In(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*h,y:p*d}:{x:p*d,y:m*h}}const bT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await wT(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},jT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:y,y:x}=w;return{x:y,y:x}}},...c}=In(e,t),d={x:r,y:n},h=await pi(t,c),f=cn(On(s)),p=Ym(f);let m=d[p],b=d[f];if(a){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",x=m+h[w],v=m-h[y];m=Gh(x,m,v)}if(i){const w=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=b+h[w],v=b-h[y];b=Gh(x,b,v)}const g=l.fn({...t,[p]:m,[f]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[p]:a,[f]:i}}}}}},NT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=In(e,t),h={x:r,y:n},f=cn(s),p=Ym(f);let m=h[p],b=h[f];const g=In(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const v=p==="y"?"height":"width",j=a.reference[p]-a.floating[v]+w.mainAxis,N=a.reference[p]+a.reference[v]-w.mainAxis;m<j?m=j:m>N&&(m=N)}if(d){var y,x;const v=p==="y"?"width":"height",j=Gb.has(On(s)),N=a.reference[f]-a.floating[v]+(j&&((y=i.offset)==null?void 0:y[f])||0)+(j?0:w.crossAxis),_=a.reference[f]+a.reference[v]+(j?0:((x=i.offset)==null?void 0:x[f])||0)-(j?w.crossAxis:0);b<N?b=N:b>_&&(b=_)}return{[p]:m,[f]:b}}}},_T=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...d}=In(e,t),h=await pi(t,d),f=On(s),p=aa(s),m=cn(s)==="y",{width:b,height:g}=a.floating;let w,y;f==="top"||f==="bottom"?(w=f,y=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,w=p==="end"?"top":"bottom");const x=g-h.top-h.bottom,v=b-h.left-h.right,j=us(g-h[w],x),N=us(b-h[y],v),_=!t.middlewareData.shift;let S=j,P=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=x),_&&!p){const R=cr(h.left,0),M=cr(h.right,0),D=cr(h.top,0),Q=cr(h.bottom,0);m?P=b-2*(R!==0||M!==0?R+M:cr(h.left,h.right)):S=g-2*(D!==0||Q!==0?D+Q:cr(h.top,h.bottom))}await c({...t,availableWidth:P,availableHeight:S});const C=await i.getDimensions(l.floating);return b!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function fd(){return typeof window<"u"}function ia(e){return Kb(e)?(e.nodeName||"").toLowerCase():"#document"}function pr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vn(e){var t;return(t=(Kb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Kb(e){return fd()?e instanceof Node||e instanceof pr(e).Node:!1}function Zr(e){return fd()?e instanceof Element||e instanceof pr(e).Element:!1}function gn(e){return fd()?e instanceof HTMLElement||e instanceof pr(e).HTMLElement:!1}function Dx(e){return!fd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pr(e).ShadowRoot}const ST=new Set(["inline","contents"]);function Mi(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=en(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!ST.has(s)}const kT=new Set(["table","td","th"]);function CT(e){return kT.has(ia(e))}const ET=[":popover-open",":modal"];function md(e){return ET.some(t=>{try{return e.matches(t)}catch{return!1}})}const RT=["transform","translate","scale","rotate","perspective"],PT=["transform","translate","scale","rotate","perspective","filter"],TT=["paint","layout","strict","content"];function Qm(e){const t=Zm(),r=Zr(e)?en(e):e;return RT.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||PT.some(n=>(r.willChange||"").includes(n))||TT.some(n=>(r.contain||"").includes(n))}function AT(e){let t=hs(e);for(;gn(t)&&!Xo(t);){if(Qm(t))return t;if(md(t))return null;t=hs(t)}return null}function Zm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const IT=new Set(["html","body","#document"]);function Xo(e){return IT.has(ia(e))}function en(e){return pr(e).getComputedStyle(e)}function pd(e){return Zr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hs(e){if(ia(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dx(e)&&e.host||vn(e);return Dx(t)?t.host:t}function Yb(e){const t=hs(e);return Xo(t)?e.ownerDocument?e.ownerDocument.body:e.body:gn(t)&&Mi(t)?t:Yb(t)}function gi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Yb(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),i=pr(s);if(a){const l=Yh(i);return t.concat(i,i.visualViewport||[],Mi(s)?s:[],l&&r?gi(l):[])}return t.concat(s,gi(s,[],r))}function Yh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Jb(e){const t=en(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=gn(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,l=jc(r)!==a||jc(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function ep(e){return Zr(e)?e:e.contextElement}function Lo(e){const t=ep(e);if(!gn(t))return fn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=Jb(t);let i=(a?jc(r.width):r.width)/n,l=(a?jc(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const OT=fn(0);function Xb(e){const t=pr(e);return!Zm()||!t.visualViewport?OT:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function MT(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==pr(e)?!1:t}function Hs(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=ep(e);let i=fn(1);t&&(n?Zr(n)&&(i=Lo(n)):i=Lo(e));const l=MT(a,r,n)?Xb(a):fn(0);let c=(s.left+l.x)/i.x,d=(s.top+l.y)/i.y,h=s.width/i.x,f=s.height/i.y;if(a){const p=pr(a),m=n&&Zr(n)?pr(n):n;let b=p,g=Yh(b);for(;g&&n&&m!==b;){const w=Lo(g),y=g.getBoundingClientRect(),x=en(g),v=y.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,j=y.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=v,d+=j,b=pr(g),g=Yh(b)}}return _c({width:h,height:f,x:c,y:d})}function gd(e,t){const r=pd(e).scrollLeft;return t?t.left+r:Hs(vn(e)).left+r}function Qb(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-gd(e,r),s=r.top+t.scrollTop;return{x:n,y:s}}function DT(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",i=vn(n),l=t?md(t.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=fn(1);const h=fn(0),f=gn(n);if((f||!f&&!a)&&((ia(n)!=="body"||Mi(i))&&(c=pd(n)),gn(n))){const m=Hs(n);d=Lo(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const p=i&&!f&&!a?Qb(i,c):fn(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:r.y*d.y-c.scrollTop*d.y+h.y+p.y}}function $T(e){return Array.from(e.getClientRects())}function LT(e){const t=vn(e),r=pd(e),n=e.ownerDocument.body,s=cr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=cr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+gd(e);const l=-r.scrollTop;return en(n).direction==="rtl"&&(i+=cr(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}const $x=25;function UT(e,t){const r=pr(e),n=vn(e),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const h=Zm();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=gd(n);if(d<=0){const h=n.ownerDocument,f=h.body,p=getComputedStyle(f),m=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,b=Math.abs(n.clientWidth-f.clientWidth-m);b<=$x&&(a-=b)}else d<=$x&&(a+=d);return{width:a,height:i,x:l,y:c}}const FT=new Set(["absolute","fixed"]);function zT(e,t){const r=Hs(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=gn(e)?Lo(e):fn(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,d=n*a.y;return{width:i,height:l,x:c,y:d}}function Lx(e,t,r){let n;if(t==="viewport")n=UT(e,r);else if(t==="document")n=LT(vn(e));else if(Zr(t))n=zT(t,r);else{const s=Xb(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return _c(n)}function Zb(e,t){const r=hs(e);return r===t||!Zr(r)||Xo(r)?!1:en(r).position==="fixed"||Zb(r,t)}function BT(e,t){const r=t.get(e);if(r)return r;let n=gi(e,[],!1).filter(l=>Zr(l)&&ia(l)!=="body"),s=null;const a=en(e).position==="fixed";let i=a?hs(e):e;for(;Zr(i)&&!Xo(i);){const l=en(i),c=Qm(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&FT.has(s.position)||Mi(i)&&!c&&Zb(e,i))?n=n.filter(h=>h!==i):s=l,i=hs(i)}return t.set(e,n),n}function VT(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?md(t)?[]:BT(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,h)=>{const f=Lx(t,h,s);return d.top=cr(f.top,d.top),d.right=us(f.right,d.right),d.bottom=us(f.bottom,d.bottom),d.left=cr(f.left,d.left),d},Lx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WT(e){const{width:t,height:r}=Jb(e);return{width:t,height:r}}function qT(e,t,r){const n=gn(t),s=vn(t),a=r==="fixed",i=Hs(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=fn(0);function d(){c.x=gd(s)}if(n||!n&&!a)if((ia(t)!=="body"||Mi(s))&&(l=pd(t)),n){const m=Hs(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&d();a&&!n&&s&&d();const h=s&&!n&&!a?Qb(s,l):fn(0),f=i.left+l.scrollLeft-c.x-h.x,p=i.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:i.width,height:i.height}}function Su(e){return en(e).position==="static"}function Ux(e,t){if(!gn(e)||en(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return vn(e)===r&&(r=r.ownerDocument.body),r}function e1(e,t){const r=pr(e);if(md(e))return r;if(!gn(e)){let s=hs(e);for(;s&&!Xo(s);){if(Zr(s)&&!Su(s))return s;s=hs(s)}return r}let n=Ux(e,t);for(;n&&CT(n)&&Su(n);)n=Ux(n,t);return n&&Xo(n)&&Su(n)&&!Qm(n)?r:n||AT(e)||r}const HT=async function(e){const t=this.getOffsetParent||e1,r=this.getDimensions,n=await r(e.floating);return{reference:qT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function GT(e){return en(e).direction==="rtl"}const KT={convertOffsetParentRelativeRectToViewportRelativeRect:DT,getDocumentElement:vn,getClippingRect:VT,getOffsetParent:e1,getElementRects:HT,getClientRects:$T,getDimensions:WT,getScale:Lo,isElement:Zr,isRTL:GT};function t1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function YT(e,t){let r=null,n;const s=vn(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=d;if(l||t(),!p||!m)return;const b=vl(f),g=vl(s.clientWidth-(h+p)),w=vl(s.clientHeight-(f+m)),y=vl(h),v={rootMargin:-b+"px "+-g+"px "+-w+"px "+-y+"px",threshold:cr(0,us(1,c))||1};let j=!0;function N(_){const S=_[0].intersectionRatio;if(S!==c){if(!j)return i();S?i(!1,S):n=setTimeout(()=>{i(!1,1e-7)},1e3)}S===1&&!t1(d,e.getBoundingClientRect())&&i(),j=!1}try{r=new IntersectionObserver(N,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(N,v)}r.observe(e)}return i(!0),a}function JT(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=ep(e),h=s||a?[...d?gi(d):[],...gi(t)]:[];h.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const f=d&&l?YT(d,r):null;let p=-1,m=null;i&&(m=new ResizeObserver(y=>{let[x]=y;x&&x.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let b,g=c?Hs(e):null;c&&w();function w(){const y=Hs(e);g&&!t1(g,y)&&r(),g=y,b=requestAnimationFrame(w)}return r(),()=>{var y;h.forEach(x=>{s&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),f==null||f(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const XT=bT,QT=jT,ZT=vT,e3=_T,t3=yT,Fx=xT,r3=NT,n3=(e,t,r)=>{const n=new Map,s={platform:KT,...r},a={...s.platform,_c:n};return gT(e,t,{...s,platform:a})};var s3=typeof document<"u",o3=function(){},Ll=s3?u.useLayoutEffect:o3;function Sc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Sc(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Sc(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function r1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function zx(e,t){const r=r1(e);return Math.round(t*r)/r}function ku(e){const t=u.useRef(e);return Ll(()=>{t.current=e}),t}function a3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,f]=u.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(n);Sc(p,n)||m(n);const[b,g]=u.useState(null),[w,y]=u.useState(null),x=u.useCallback(A=>{A!==_.current&&(_.current=A,g(A))},[]),v=u.useCallback(A=>{A!==S.current&&(S.current=A,y(A))},[]),j=a||b,N=i||w,_=u.useRef(null),S=u.useRef(null),P=u.useRef(h),C=c!=null,R=ku(c),M=ku(s),D=ku(d),Q=u.useCallback(()=>{if(!_.current||!S.current)return;const A={placement:t,strategy:r,middleware:p};M.current&&(A.platform=M.current),n3(_.current,S.current,A).then(k=>{const I={...k,isPositioned:D.current!==!1};q.current&&!Sc(P.current,I)&&(P.current=I,ta.flushSync(()=>{f(I)}))})},[p,t,r,M,D]);Ll(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[d]);const q=u.useRef(!1);Ll(()=>(q.current=!0,()=>{q.current=!1}),[]),Ll(()=>{if(j&&(_.current=j),N&&(S.current=N),j&&N){if(R.current)return R.current(j,N,Q);Q()}},[j,N,Q,R,C]);const ee=u.useMemo(()=>({reference:_,floating:S,setReference:x,setFloating:v}),[x,v]),B=u.useMemo(()=>({reference:j,floating:N}),[j,N]),F=u.useMemo(()=>{const A={position:r,left:0,top:0};if(!B.floating)return A;const k=zx(B.floating,h.x),I=zx(B.floating,h.y);return l?{...A,transform:"translate("+k+"px, "+I+"px)",...r1(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:k,top:I}},[r,l,B.floating,h.x,h.y]);return u.useMemo(()=>({...h,update:Q,refs:ee,elements:B,floatingStyles:F}),[h,Q,ee,B,F])}const i3=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Fx({element:n.current,padding:s}).fn(r):{}:n?Fx({element:n,padding:s}).fn(r):{}}}},l3=(e,t)=>({...XT(e),options:[e,t]}),c3=(e,t)=>({...QT(e),options:[e,t]}),d3=(e,t)=>({...r3(e),options:[e,t]}),u3=(e,t)=>({...ZT(e),options:[e,t]}),h3=(e,t)=>({...e3(e),options:[e,t]}),f3=(e,t)=>({...t3(e),options:[e,t]}),m3=(e,t)=>({...i3(e),options:[e,t]});var p3="Arrow",n1=u.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return o.jsx(Pe.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});n1.displayName=p3;var g3=n1,tp="Popper",[s1,xd]=ar(tp),[x3,o1]=s1(tp),a1=e=>{const{__scopePopper:t,children:r}=e,[n,s]=u.useState(null);return o.jsx(x3,{scope:t,anchor:n,onAnchorChange:s,children:r})};a1.displayName=tp;var i1="PopperAnchor",l1=u.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=o1(i1,r),i=u.useRef(null),l=Oe(t,i),c=u.useRef(null);return u.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||i.current,d!==c.current&&a.onAnchorChange(c.current)}),n?null:o.jsx(Pe.div,{...s,ref:l})});l1.displayName=i1;var rp="PopperContent",[v3,y3]=s1(rp),c1=u.forwardRef((e,t)=>{var H,fe,ce,O,J,T;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=e,w=o1(rp,r),[y,x]=u.useState(null),v=Oe(t,K=>x(K)),[j,N]=u.useState(null),_=ld(j),S=(_==null?void 0:_.width)??0,P=(_==null?void 0:_.height)??0,C=n+(a!=="center"?"-"+a:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],D=M.length>0,Q={padding:R,boundary:M.filter(b3),altBoundary:D},{refs:q,floatingStyles:ee,placement:B,isPositioned:F,middlewareData:A}=a3({strategy:"fixed",placement:C,whileElementsMounted:(...K)=>JT(...K,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[l3({mainAxis:s+P,alignmentAxis:i}),c&&c3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?d3():void 0,...Q}),c&&u3({...Q}),h3({...Q,apply:({elements:K,rects:oe,availableWidth:be,availableHeight:Te})=>{const{width:W,height:ae}=oe.reference,Y=K.floating.style;Y.setProperty("--radix-popper-available-width",`${be}px`),Y.setProperty("--radix-popper-available-height",`${Te}px`),Y.setProperty("--radix-popper-anchor-width",`${W}px`),Y.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),j&&m3({element:j,padding:l}),j3({arrowWidth:S,arrowHeight:P}),p&&f3({strategy:"referenceHidden",...Q})]}),[k,I]=h1(B),te=Ot(b);Tt(()=>{F&&(te==null||te())},[F,te]);const $=(H=A.arrow)==null?void 0:H.x,z=(fe=A.arrow)==null?void 0:fe.y,X=((ce=A.arrow)==null?void 0:ce.centerOffset)!==0,[ue,G]=u.useState();return Tt(()=>{y&&G(window.getComputedStyle(y).zIndex)},[y]),o.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:F?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(O=A.transformOrigin)==null?void 0:O.x,(J=A.transformOrigin)==null?void 0:J.y].join(" "),...((T=A.hide)==null?void 0:T.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(v3,{scope:r,placedSide:k,onArrowChange:N,arrowX:$,arrowY:z,shouldHideArrow:X,children:o.jsx(Pe.div,{"data-side":k,"data-align":I,...g,ref:v,style:{...g.style,animation:F?void 0:"none"}})})})});c1.displayName=rp;var d1="PopperArrow",w3={top:"bottom",right:"left",bottom:"top",left:"right"},u1=u.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=y3(d1,n),i=w3[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(g3,{...s,ref:r,style:{...s.style,display:"block"}})})});u1.displayName=d1;function b3(e){return e!==null}var j3=e=>({name:"transformOrigin",options:e,fn(t){var w,y,x;const{placement:r,rects:n,middlewareData:s}=t,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,h]=h1(r),f={start:"0%",center:"50%",end:"100%"}[h],p=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let b="",g="";return d==="bottom"?(b=i?f:`${p}px`,g=`${-c}px`):d==="top"?(b=i?f:`${p}px`,g=`${n.floating.height+c}px`):d==="right"?(b=`${-c}px`,g=i?f:`${m}px`):d==="left"&&(b=`${n.floating.width+c}px`,g=i?f:`${m}px`),{data:{x:b,y:g}}}});function h1(e){const[t,r="center"]=e.split("-");return[t,r]}var f1=a1,m1=l1,p1=c1,g1=u1,Cu="rovingFocusGroup.onEntryFocus",N3={bubbles:!1,cancelable:!0},Di="RovingFocusGroup",[Jh,x1,_3]=Oi(Di),[S3,v1]=ar(Di,[_3]),[k3,C3]=S3(Di),y1=u.forwardRef((e,t)=>o.jsx(Jh.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Jh.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(E3,{...e,ref:t})})}));y1.displayName=Di;var E3=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=e,p=u.useRef(null),m=Oe(t,p),b=oa(a),[g,w]=Qr({prop:i,defaultProp:l??null,onChange:c,caller:Di}),[y,x]=u.useState(!1),v=Ot(d),j=x1(r),N=u.useRef(!1),[_,S]=u.useState(0);return u.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(Cu,v),()=>P.removeEventListener(Cu,v)},[v]),o.jsx(k3,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:g,onItemFocus:u.useCallback(P=>w(P),[w]),onItemShiftTab:u.useCallback(()=>x(!0),[]),onFocusableItemAdd:u.useCallback(()=>S(P=>P+1),[]),onFocusableItemRemove:u.useCallback(()=>S(P=>P-1),[]),children:o.jsx(Pe.div,{tabIndex:y||_===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:ge(e.onMouseDown,()=>{N.current=!0}),onFocus:ge(e.onFocus,P=>{const C=!N.current;if(P.target===P.currentTarget&&C&&!y){const R=new CustomEvent(Cu,N3);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const M=j().filter(B=>B.focusable),D=M.find(B=>B.active),Q=M.find(B=>B.id===g),ee=[D,Q,...M].filter(Boolean).map(B=>B.ref.current);j1(ee,h)}}N.current=!1}),onBlur:ge(e.onBlur,()=>x(!1))})})}),w1="RovingFocusGroupItem",b1=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=Gr(),d=a||c,h=C3(w1,r),f=h.currentTabStopId===d,p=x1(r),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=h;return u.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),o.jsx(Jh.ItemSlot,{scope:r,id:d,focusable:n,active:s,children:o.jsx(Pe.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:ge(e.onMouseDown,w=>{n?h.onItemFocus(d):w.preventDefault()}),onFocus:ge(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:ge(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=T3(w,h.orientation,h.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let v=p().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const j=v.indexOf(w.currentTarget);v=h.loop?A3(v,j+1):v.slice(j+1)}setTimeout(()=>j1(v))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:g!=null}):i})})});b1.displayName=w1;var R3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function P3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function T3(e,t,r){const n=P3(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return R3[n]}function j1(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function A3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var I3=y1,O3=b1;function M3(e){const t=D3(e),r=u.forwardRef((n,s)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(L3);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function D3(e){const t=u.forwardRef((r,n)=>{const{children:s,...a}=r;if(u.isValidElement(s)){const i=F3(s),l=U3(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $3=Symbol("radix.slottable");function L3(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$3}function U3(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function F3(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Xh=["Enter"," "],z3=["ArrowDown","PageUp","Home"],N1=["ArrowUp","PageDown","End"],B3=[...z3,...N1],V3={ltr:[...Xh,"ArrowRight"],rtl:[...Xh,"ArrowLeft"]},W3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$i="Menu",[xi,q3,H3]=Oi($i),[eo,_1]=ar($i,[H3,xd,v1]),vd=xd(),S1=v1(),[G3,to]=eo($i),[K3,Li]=eo($i),k1=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:a,modal:i=!0}=e,l=vd(t),[c,d]=u.useState(null),h=u.useRef(!1),f=Ot(a),p=oa(s);return u.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),o.jsx(f1,{...l,children:o.jsx(G3,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:o.jsx(K3,{scope:t,onClose:u.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:i,children:n})})})};k1.displayName=$i;var Y3="MenuAnchor",np=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=vd(r);return o.jsx(m1,{...s,...n,ref:t})});np.displayName=Y3;var sp="MenuPortal",[J3,C1]=eo(sp,{forceMount:void 0}),E1=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,a=to(sp,t);return o.jsx(J3,{scope:t,forceMount:r,children:o.jsx(ir,{present:r||a.open,children:o.jsx(nd,{asChild:!0,container:s,children:n})})})};E1.displayName=sp;var Rr="MenuContent",[X3,op]=eo(Rr),R1=u.forwardRef((e,t)=>{const r=C1(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=to(Rr,e.__scopeMenu),i=Li(Rr,e.__scopeMenu);return o.jsx(xi.Provider,{scope:e.__scopeMenu,children:o.jsx(ir,{present:n||a.open,children:o.jsx(xi.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(Q3,{...s,ref:t}):o.jsx(Z3,{...s,ref:t})})})})}),Q3=u.forwardRef((e,t)=>{const r=to(Rr,e.__scopeMenu),n=u.useRef(null),s=Oe(t,n);return u.useEffect(()=>{const a=n.current;if(a)return Rm(a)},[]),o.jsx(ap,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ge(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Z3=u.forwardRef((e,t)=>{const r=to(Rr,e.__scopeMenu);return o.jsx(ap,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),eA=M3("MenuContent.ScrollLock"),ap=u.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:b,...g}=e,w=to(Rr,r),y=Li(Rr,r),x=vd(r),v=S1(r),j=q3(r),[N,_]=u.useState(null),S=u.useRef(null),P=Oe(t,S,w.onContentChange),C=u.useRef(0),R=u.useRef(""),M=u.useRef(0),D=u.useRef(null),Q=u.useRef("right"),q=u.useRef(0),ee=b?od:u.Fragment,B=b?{as:eA,allowPinchZoom:!0}:void 0,F=k=>{var H,fe;const I=R.current+k,te=j().filter(ce=>!ce.disabled),$=document.activeElement,z=(H=te.find(ce=>ce.ref.current===$))==null?void 0:H.textValue,X=te.map(ce=>ce.textValue),ue=hA(X,I,z),G=(fe=te.find(ce=>ce.textValue===ue))==null?void 0:fe.ref.current;(function ce(O){R.current=O,window.clearTimeout(C.current),O!==""&&(C.current=window.setTimeout(()=>ce(""),1e3))})(I),G&&setTimeout(()=>G.focus())};u.useEffect(()=>()=>window.clearTimeout(C.current),[]),Em();const A=u.useCallback(k=>{var te,$;return Q.current===((te=D.current)==null?void 0:te.side)&&mA(k,($=D.current)==null?void 0:$.area)},[]);return o.jsx(X3,{scope:r,searchRef:R,onItemEnter:u.useCallback(k=>{A(k)&&k.preventDefault()},[A]),onItemLeave:u.useCallback(k=>{var I;A(k)||((I=S.current)==null||I.focus(),_(null))},[A]),onTriggerLeave:u.useCallback(k=>{A(k)&&k.preventDefault()},[A]),pointerGraceTimerRef:M,onPointerGraceIntentChange:u.useCallback(k=>{D.current=k},[]),children:o.jsx(ee,{...B,children:o.jsx(rd,{asChild:!0,trapped:s,onMountAutoFocus:ge(a,k=>{var I;k.preventDefault(),(I=S.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(td,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:o.jsx(I3,{asChild:!0,...v,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:ge(c,k=>{y.isUsingKeyboardRef.current||k.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(p1,{role:"menu","aria-orientation":"vertical","data-state":q1(w.open),"data-radix-menu-content":"",dir:y.dir,...x,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ge(g.onKeyDown,k=>{const te=k.target.closest("[data-radix-menu-content]")===k.currentTarget,$=k.ctrlKey||k.altKey||k.metaKey,z=k.key.length===1;te&&(k.key==="Tab"&&k.preventDefault(),!$&&z&&F(k.key));const X=S.current;if(k.target!==X||!B3.includes(k.key))return;k.preventDefault();const G=j().filter(H=>!H.disabled).map(H=>H.ref.current);N1.includes(k.key)&&G.reverse(),dA(G)}),onBlur:ge(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(C.current),R.current="")}),onPointerMove:ge(e.onPointerMove,vi(k=>{const I=k.target,te=q.current!==k.clientX;if(k.currentTarget.contains(I)&&te){const $=k.clientX>q.current?"right":"left";Q.current=$,q.current=k.clientX}}))})})})})})})});R1.displayName=Rr;var tA="MenuGroup",ip=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(Pe.div,{role:"group",...n,ref:t})});ip.displayName=tA;var rA="MenuLabel",P1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(Pe.div,{...n,ref:t})});P1.displayName=rA;var kc="MenuItem",Bx="menu.itemSelect",yd=u.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,a=u.useRef(null),i=Li(kc,e.__scopeMenu),l=op(kc,e.__scopeMenu),c=Oe(t,a),d=u.useRef(!1),h=()=>{const f=a.current;if(!r&&f){const p=new CustomEvent(Bx,{bubbles:!0,cancelable:!0});f.addEventListener(Bx,m=>n==null?void 0:n(m),{once:!0}),Bw(f,p),p.defaultPrevented?d.current=!1:i.onClose()}};return o.jsx(T1,{...s,ref:c,disabled:r,onClick:ge(e.onClick,h),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),d.current=!0},onPointerUp:ge(e.onPointerUp,f=>{var p;d.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:ge(e.onKeyDown,f=>{const p=l.searchRef.current!=="";r||p&&f.key===" "||Xh.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});yd.displayName=kc;var T1=u.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=e,i=op(kc,r),l=S1(r),c=u.useRef(null),d=Oe(t,c),[h,f]=u.useState(!1),[p,m]=u.useState("");return u.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[a.children]),o.jsx(xi.ItemSlot,{scope:r,disabled:n,textValue:s??p,children:o.jsx(O3,{asChild:!0,...l,focusable:!n,children:o.jsx(Pe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:ge(e.onPointerMove,vi(b=>{n?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ge(e.onPointerLeave,vi(b=>i.onItemLeave(b))),onFocus:ge(e.onFocus,()=>f(!0)),onBlur:ge(e.onBlur,()=>f(!1))})})})}),nA="MenuCheckboxItem",A1=u.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return o.jsx($1,{scope:e.__scopeMenu,checked:r,children:o.jsx(yd,{role:"menuitemcheckbox","aria-checked":Cc(r)?"mixed":r,...s,ref:t,"data-state":cp(r),onSelect:ge(s.onSelect,()=>n==null?void 0:n(Cc(r)?!0:!r),{checkForDefaultPrevented:!1})})})});A1.displayName=nA;var I1="MenuRadioGroup",[sA,oA]=eo(I1,{value:void 0,onValueChange:()=>{}}),O1=u.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,a=Ot(n);return o.jsx(sA,{scope:e.__scopeMenu,value:r,onValueChange:a,children:o.jsx(ip,{...s,ref:t})})});O1.displayName=I1;var M1="MenuRadioItem",D1=u.forwardRef((e,t)=>{const{value:r,...n}=e,s=oA(M1,e.__scopeMenu),a=r===s.value;return o.jsx($1,{scope:e.__scopeMenu,checked:a,children:o.jsx(yd,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":cp(a),onSelect:ge(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});D1.displayName=M1;var lp="MenuItemIndicator",[$1,aA]=eo(lp,{checked:!1}),L1=u.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,a=aA(lp,r);return o.jsx(ir,{present:n||Cc(a.checked)||a.checked===!0,children:o.jsx(Pe.span,{...s,ref:t,"data-state":cp(a.checked)})})});L1.displayName=lp;var iA="MenuSeparator",U1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(Pe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});U1.displayName=iA;var lA="MenuArrow",F1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=vd(r);return o.jsx(g1,{...s,...n,ref:t})});F1.displayName=lA;var cA="MenuSub",[G6,z1]=eo(cA),Ea="MenuSubTrigger",B1=u.forwardRef((e,t)=>{const r=to(Ea,e.__scopeMenu),n=Li(Ea,e.__scopeMenu),s=z1(Ea,e.__scopeMenu),a=op(Ea,e.__scopeMenu),i=u.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},h=u.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return u.useEffect(()=>h,[h]),u.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(np,{asChild:!0,...d,children:o.jsx(T1,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":q1(r.open),...e,ref:Dn(t,s.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ge(e.onPointerMove,vi(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:ge(e.onPointerLeave,vi(f=>{var m,b;h();const p=(m=r.content)==null?void 0:m.getBoundingClientRect();if(p){const g=(b=r.content)==null?void 0:b.dataset.side,w=g==="right",y=w?-5:5,x=p[w?"left":"right"],v=p[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x,y:p.top},{x:v,y:p.top},{x:v,y:p.bottom},{x,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ge(e.onKeyDown,f=>{var m;const p=a.searchRef.current!=="";e.disabled||p&&f.key===" "||V3[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});B1.displayName=Ea;var V1="MenuSubContent",W1=u.forwardRef((e,t)=>{const r=C1(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=to(Rr,e.__scopeMenu),i=Li(Rr,e.__scopeMenu),l=z1(V1,e.__scopeMenu),c=u.useRef(null),d=Oe(t,c);return o.jsx(xi.Provider,{scope:e.__scopeMenu,children:o.jsx(ir,{present:n||a.open,children:o.jsx(xi.Slot,{scope:e.__scopeMenu,children:o.jsx(ap,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ge(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ge(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:ge(e.onKeyDown,h=>{var m;const f=h.currentTarget.contains(h.target),p=W3[i.dir].includes(h.key);f&&p&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),h.preventDefault())})})})})})});W1.displayName=V1;function q1(e){return e?"open":"closed"}function Cc(e){return e==="indeterminate"}function cp(e){return Cc(e)?"indeterminate":e?"checked":"unchecked"}function dA(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function uA(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function hA(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=uA(e,Math.max(a,0));s.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function fA(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],d=l.x,h=l.y,f=c.x,p=c.y;h>n!=p>n&&r<(f-d)*(n-h)/(p-h)+d&&(s=!s)}return s}function mA(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return fA(r,t)}function vi(e){return t=>t.pointerType==="mouse"?e(t):void 0}var pA=k1,gA=np,xA=E1,vA=R1,yA=ip,wA=P1,bA=yd,jA=A1,NA=O1,_A=D1,SA=L1,kA=U1,CA=F1,EA=B1,RA=W1,wd="DropdownMenu",[PA]=ar(wd,[_1]),Jt=_1(),[TA,H1]=PA(wd),G1=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Jt(t),d=u.useRef(null),[h,f]=Qr({prop:s,defaultProp:a??!1,onChange:i,caller:wd});return o.jsx(TA,{scope:t,triggerId:Gr(),triggerRef:d,contentId:Gr(),open:h,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(p=>!p),[f]),modal:l,children:o.jsx(pA,{...c,open:h,onOpenChange:f,dir:n,modal:l,children:r})})};G1.displayName=wd;var K1="DropdownMenuTrigger",Y1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,a=H1(K1,r),i=Jt(r);return o.jsx(gA,{asChild:!0,...i,children:o.jsx(Pe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Dn(t,a.triggerRef),onPointerDown:ge(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ge(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Y1.displayName=K1;var AA="DropdownMenuPortal",J1=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Jt(t);return o.jsx(xA,{...n,...r})};J1.displayName=AA;var X1="DropdownMenuContent",Q1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=H1(X1,r),a=Jt(r),i=u.useRef(!1);return o.jsx(vA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:t,onCloseAutoFocus:ge(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ge(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Q1.displayName=X1;var IA="DropdownMenuGroup",OA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(yA,{...s,...n,ref:t})});OA.displayName=IA;var MA="DropdownMenuLabel",Z1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(wA,{...s,...n,ref:t})});Z1.displayName=MA;var DA="DropdownMenuItem",ej=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(bA,{...s,...n,ref:t})});ej.displayName=DA;var $A="DropdownMenuCheckboxItem",tj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(jA,{...s,...n,ref:t})});tj.displayName=$A;var LA="DropdownMenuRadioGroup",UA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(NA,{...s,...n,ref:t})});UA.displayName=LA;var FA="DropdownMenuRadioItem",rj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(_A,{...s,...n,ref:t})});rj.displayName=FA;var zA="DropdownMenuItemIndicator",nj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(SA,{...s,...n,ref:t})});nj.displayName=zA;var BA="DropdownMenuSeparator",sj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(kA,{...s,...n,ref:t})});sj.displayName=BA;var VA="DropdownMenuArrow",WA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(CA,{...s,...n,ref:t})});WA.displayName=VA;var qA="DropdownMenuSubTrigger",oj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(EA,{...s,...n,ref:t})});oj.displayName=qA;var HA="DropdownMenuSubContent",aj=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Jt(r);return o.jsx(RA,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aj.displayName=HA;var GA=G1,KA=Y1,YA=J1,ij=Q1,lj=Z1,cj=ej,dj=tj,uj=rj,hj=nj,fj=sj,mj=oj,pj=aj;const gj=GA,xj=KA,JA=u.forwardRef(({className:e,inset:t,children:r,...n},s)=>o.jsxs(mj,{ref:s,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,o.jsx(E5,{className:"ml-auto h-4 w-4"})]}));JA.displayName=mj.displayName;const XA=u.forwardRef(({className:e,...t},r)=>o.jsx(pj,{ref:r,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));XA.displayName=pj.displayName;const dp=u.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(YA,{children:o.jsx(ij,{ref:n,sideOffset:t,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));dp.displayName=ij.displayName;const yi=u.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(cj,{ref:n,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));yi.displayName=cj.displayName;const QA=u.forwardRef(({className:e,children:t,checked:r,...n},s)=>o.jsxs(dj,{ref:s,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hj,{children:o.jsx(Lm,{className:"h-4 w-4"})})}),t]}));QA.displayName=dj.displayName;const ZA=u.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(uj,{ref:n,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hj,{children:o.jsx(O5,{className:"h-4 w-4 fill-current"})})}),t]}));ZA.displayName=uj.displayName;const eI=u.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(lj,{ref:n,className:Ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));eI.displayName=lj.displayName;const tI=u.forwardRef(({className:e,...t},r)=>o.jsx(fj,{ref:r,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));tI.displayName=fj.displayName;var rI=Symbol("radix.slottable");function nI(e){const t=({children:r})=>o.jsx(o.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=rI,t}var vj="AlertDialog",[sI]=ar(vj,[eb]),$n=eb(),yj=e=>{const{__scopeAlertDialog:t,...r}=e,n=$n(t);return o.jsx(gb,{...n,...r,modal:!0})};yj.displayName=vj;var oI="AlertDialogTrigger",aI=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=$n(r);return o.jsx(j5,{...s,...n,ref:t})});aI.displayName=oI;var iI="AlertDialogPortal",wj=e=>{const{__scopeAlertDialog:t,...r}=e,n=$n(t);return o.jsx(xb,{...n,...r})};wj.displayName=iI;var lI="AlertDialogOverlay",bj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=$n(r);return o.jsx(Im,{...s,...n,ref:t})});bj.displayName=lI;var Uo="AlertDialogContent",[cI,dI]=sI(Uo),uI=nI("AlertDialogContent"),jj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,a=$n(r),i=u.useRef(null),l=Oe(t,i),c=u.useRef(null);return o.jsx(v5,{contentName:Uo,titleName:Nj,docsSlug:"alert-dialog",children:o.jsx(cI,{scope:r,cancelRef:c,children:o.jsxs(Om,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:ge(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(uI,{children:n}),o.jsx(fI,{contentRef:i})]})})})});jj.displayName=Uo;var Nj="AlertDialogTitle",_j=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=$n(r);return o.jsx(Mm,{...s,...n,ref:t})});_j.displayName=Nj;var Sj="AlertDialogDescription",kj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=$n(r);return o.jsx(Dm,{...s,...n,ref:t})});kj.displayName=Sj;var hI="AlertDialogAction",Cj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=$n(r);return o.jsx($m,{...s,...n,ref:t})});Cj.displayName=hI;var Ej="AlertDialogCancel",Rj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=dI(Ej,r),a=$n(r),i=Oe(t,s);return o.jsx($m,{...a,...n,ref:i})});Rj.displayName=Ej;var fI=({contentRef:e})=>{const t=`\`${Uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Uo}\` by passing a \`${Sj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},mI=yj,pI=wj,Pj=bj,Tj=jj,Aj=Cj,Ij=Rj,Oj=_j,Mj=kj;const Ec=mI,gI=pI,Dj=u.forwardRef(({className:e,...t},r)=>o.jsx(Pj,{className:Ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Dj.displayName=Pj.displayName;const wi=u.forwardRef(({className:e,...t},r)=>o.jsxs(gI,{children:[o.jsx(Dj,{}),o.jsx(Tj,{ref:r,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));wi.displayName=Tj.displayName;const bi=({className:e,...t})=>o.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});bi.displayName="AlertDialogHeader";const ji=({className:e,...t})=>o.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ji.displayName="AlertDialogFooter";const Ni=u.forwardRef(({className:e,...t},r)=>o.jsx(Oj,{ref:r,className:Ee("text-lg font-semibold",e),...t}));Ni.displayName=Oj.displayName;const _i=u.forwardRef(({className:e,...t},r)=>o.jsx(Mj,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));_i.displayName=Mj.displayName;const Si=u.forwardRef(({className:e,...t},r)=>o.jsx(Aj,{ref:r,className:Ee(Cm(),e),...t}));Si.displayName=Aj.displayName;const ki=u.forwardRef(({className:e,...t},r)=>o.jsx(Ij,{ref:r,className:Ee(Cm({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ki.displayName=Ij.displayName;const yl=e=>e?e.includes("/functions/v1/image-proxy")||e.includes("supabase.co/storage/v1/object/public/")?e:e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`:(console.log("[Discover] VITE_SUPABASE_URL:","https://vohvdarghgqskzqjclux.supabase.co"),e):null;function xI({onNavigateToMessages:e,onNavigate:t,sharedPostId:r,onPostViewed:n}={}){const{isAdmin:s}=Qc(),[a,i]=u.useState([]),[l,c]=u.useState(!0),[d,h]=u.useState(0),[f,p]=u.useState(!0),[m,b]=u.useState(null),[g,w]=u.useState(null),[y,x]=u.useState({}),[v,j]=u.useState(null),[N,_]=u.useState(null),[S,P]=u.useState(!1),[C,R]=u.useState(new Set),[M,D]=u.useState(null),[Q,q]=u.useState(""),[ee,B]=u.useState([]),[F,A]=u.useState(!1),[k,I]=u.useState(null),te=u.useRef(null),[$,z]=u.useState(null),[X,ue]=u.useState(0),[G,H]=u.useState(!1),[fe,ce]=u.useState([]),[O,J]=u.useState(null),[T,K]=u.useState("followers"),[oe,be]=u.useState([]),[Te,W]=u.useState(new Set),[ae,Y]=u.useState(new Map),[je,Z]=u.useState(!1),[pe,Ne]=u.useState({}),Le=10;u.useEffect(()=>{U.auth.getUser().then(async({data:E})=>{var xe;const le=((xe=E.user)==null?void 0:xe.id)||null;if(b(le),le){const{data:Re}=await U.from("follows").select("following_id").eq("follower_id",le);Re&&R(new Set(Re.map(we=>we.following_id)))}})},[]),u.useEffect(()=>{const E=()=>{const Re=window.location.pathname.match(/^\/post\/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/i);if(Re){const we=Re[1];console.log("[Discover] Opening shared post from URL:",we),w(we),window.history.replaceState({},"","/discover")}};E(),window.addEventListener("popstate",E);const le=xe=>{xe.detail&&w(xe.detail)};return window.addEventListener("open-shared-post",le),()=>{window.removeEventListener("popstate",E),window.removeEventListener("open-shared-post",le)}},[]),u.useEffect(()=>{if(!m)return;const E=async()=>{try{const{data:xe,error:Re}=await U.from("notifications").select("*").eq("user_id",m).neq("type","message").order("created_at",{ascending:!1}).limit(20);if(Re){console.error("[Notifications] Error loading notifications:",Re);return}if(xe){const we=[...new Set(xe.map(ne=>ne.actor_id).filter(Boolean))];if(we.length>0){const{data:ne}=await U.from("profiles").select("id, username, avatar_url").in("id",we),de=new Map((ne||[]).map(ze=>[ze.id,ze])),ke=xe.map(ze=>({...ze,actor:ze.actor_id?de.get(ze.actor_id):null}));ce(ke)}else ce(xe);ue(xe.filter(ne=>!ne.read).length)}}catch(xe){console.error("[Notifications] Exception:",xe)}};E();const le=U.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${m}`},()=>{E()}).subscribe();return()=>{U.removeChannel(le)}},[m]),u.useEffect(()=>{r&&m&&(async()=>{const{data:le}=await U.from("posts").select("*, profiles(username, avatar_url), likes(user_id), comments(id)").eq("id",r).maybeSingle();le&&(w(r),n&&n())})()},[r,m,n]);const Me=u.useCallback(async(E,le=!1)=>{try{let xe=[];if($){const{data:ve}=await U.from("hashtags").select("id").eq("tag",$.toLowerCase()).maybeSingle();if(ve){const{data:$t}=await U.from("post_hashtags").select("post_id").eq("hashtag_id",ve.id);if(xe=($t||[]).map(br=>br.post_id),xe.length===0){i([]),p(!1),c(!1);return}}else{i([]),p(!1),c(!1);return}}let Re=U.from("posts").select("*").order("created_at",{ascending:!1}).range(E*Le,(E+1)*Le-1);xe.length>0&&(Re=Re.in("id",xe));const{data:we,error:ne}=await Re;if(ne)throw console.error("Error fetching posts:",ne),ne;if(!we||we.length===0){le&&i([]),p(!1),c(!1);return}const de=we.map(ve=>ve.id),ke=[...new Set(we.map(ve=>ve.user_id))],[ze,ht,Be,mt]=await Promise.all([U.from("profiles").select("id, username, avatar_url").in("id",ke),U.from("likes").select("user_id, post_id").in("post_id",de),U.from("comments").select("id, text, created_at, user_id, post_id, rating").in("post_id",de).order("created_at",{ascending:!1}),U.from("post_ratings").select("rating, post_id").in("post_id",de)]),We=[...new Set((Be.data||[]).map(ve=>ve.user_id))],{data:_t}=await U.from("profiles").select("id, username").in("id",We),Ln=new Map((ze.data||[]).map(ve=>[ve.id,ve])),Ui=new Map((_t||[]).map(ve=>[ve.id,ve])),De=new Map;(ht.data||[]).forEach(ve=>{De.has(ve.post_id)||De.set(ve.post_id,[]),De.get(ve.post_id).push(ve)});const yt=new Map;(Be.data||[]).forEach(ve=>{yt.has(ve.post_id)||yt.set(ve.post_id,[]);const $t={...ve,profiles:Ui.get(ve.user_id)||{username:"User"}};yt.get(ve.post_id).push($t)});const nt=new Map;(mt.data||[]).forEach(ve=>{nt.has(ve.post_id)||nt.set(ve.post_id,[]),nt.get(ve.post_id).push(ve.rating)});const Or={};nt.forEach((ve,$t)=>{const br=ve.length,Un=br>0?ve.reduce((b_,j_)=>b_+j_,0)/br:0;Or[$t]={average:Un,count:br}});const He=we.map(ve=>{const $t=Ln.get(ve.user_id)||{username:"User",avatar_url:null},br=De.get(ve.id)||[],Un=yt.get(ve.id)||[];return{...ve,profiles:$t,likes:br,comments:Un.slice(0,2),_count:{likes:br.length,comments:Un.length}}});x(ve=>({...ve,...Or})),le?(i(He),h(0)):i(ve=>[...ve,...He]),p(we.length===Le)}catch(xe){console.error("Error fetching posts:",xe),L.error("Failed to load posts")}finally{c(!1)}},[$]);u.useEffect(()=>{let E=!0,le=null;return(async()=>{E&&await Me(0,!0)})(),le=U.channel("posts-and-comments-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async Re=>{if(!E)return;const we=Re.new,{data:ne}=await U.from("profiles").select("username, avatar_url").eq("id",we.user_id).maybeSingle(),de={...we,profiles:ne||{username:"User",avatar_url:null},likes:[],comments:[],_count:{likes:0,comments:0}};i(ke=>ke.some(ze=>ze.id===de.id)?ke:[de,...ke])}).subscribe(),()=>{E=!1,le&&U.removeChannel(le)}},[Me]);const V=()=>{const E=d+1;h(E),Me(E)},he=async E=>{if(m)try{if(C.has(E)){const{error:xe}=await U.from("follows").delete().eq("follower_id",m).eq("following_id",E);if(xe)throw xe;R(Re=>{const we=new Set(Re);return we.delete(E),we}),L.success("Unsupported")}else{const{error:xe}=await U.from("follows").insert({follower_id:m,following_id:E});if(xe)throw xe;await U.from("notifications").insert({user_id:E,actor_id:m,type:"follow"}),R(Re=>new Set([...Re,E])),L.success("Supporting!")}}catch(le){console.error("Error toggling follow:",le),L.error("Failed to update follow status")}},_e=async()=>{if(v)try{const{error:E}=await U.from("posts").delete().eq("id",v);if(E)throw E;i(le=>le.filter(xe=>xe.id!==v)),L.success("Post deleted"),j(null)}catch(E){console.error("Error deleting post:",E),L.error("Failed to delete post")}},Ae=async E=>{var Re;if(!m)return;const le=a.find(we=>we.id===E),xe=(Re=le==null?void 0:le.likes)==null?void 0:Re.some(we=>we.user_id===m);i(we=>we.map(ne=>ne.id===E?{...ne,likes:xe?ne.likes.filter(de=>de.user_id!==m):[...ne.likes,{user_id:m}],_count:{...ne._count,likes:xe?ne._count.likes-1:ne._count.likes+1}}:ne));try{xe?await U.from("likes").delete().match({post_id:E,user_id:m}):(await U.from("likes").insert({post_id:E,user_id:m}),le&&le.user_id!==m&&await U.from("notifications").insert({user_id:le.user_id,actor_id:m,type:"like",post_id:E}))}catch(we){console.error("Error toggling like:",we),L.error("Failed to update like"),i(ne=>ne.map(de=>de.id===E?{...de,likes:xe?[...de.likes,{user_id:m}]:de.likes.filter(ke=>ke.user_id!==m),_count:{...de._count,likes:xe?de._count.likes+1:de._count.likes-1}}:de))}},ut=()=>o.jsxs("div",{className:"bg-white border-b border-gray-200 animate-pulse",children:[o.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"}),o.jsx("div",{className:"h-3 bg-gray-300 rounded w-24"})]})]}),o.jsx("div",{className:"bg-gray-300 h-96 w-full"}),o.jsxs("div",{className:"px-4 py-3 space-y-3",children:[o.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),o.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full"}),o.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full"}),o.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full ml-auto"})]})]})]});if(l&&a.length===0)return o.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:o.jsx("div",{className:"max-w-sm mx-auto w-full pt-24",children:[...Array(3)].map((E,le)=>o.jsx(ut,{},le))})});const Xt=async E=>{try{const{data:le,error:xe}=await U.from("profiles").select("id, username, avatar_url").ilike("username",`${E}%`).limit(10);if(xe){console.error("[Search] Error:",xe),L.error("Search failed"),B([]),A(!1);return}B(le||[]),A(!0)}catch(le){console.error("[Search] Exception:",le),B([]),A(!1)}},Ue=E=>{if(q(E),te.current&&clearTimeout(te.current),!E.trim()){B([]),A(!1);return}te.current=setTimeout(()=>{Xt(E)},300)},Qt=async E=>{await U.from("notifications").update({read:!0}).eq("id",E),ce(le=>le.map(xe=>xe.id===E?{...xe,read:!0}:xe)),ue(le=>Math.max(0,le-1))},yr=E=>{E.key==="Enter"&&Q.trim()&&(E.preventDefault(),te.current&&clearTimeout(te.current),ee.length>0?(I(ee[0].id),A(!1),q("")):Xt(Q))},wr=async E=>{if(J(E),K("followers"),W(new Set),Z(!1),m){const{data:le}=await U.from("follows").select("following_id, profiles:following_id(id, username, avatar_url)").eq("follower_id",m);be(le||[])}},ot=async E=>{var ne,de;const le=a.find(ke=>ke.id===E);if(!le)return;const xe=((ne=le.profiles)==null?void 0:ne.username)||"someone",Re=`${window.location.origin}/${xe}?post=${E}`,we={title:le.title||"Check out this recipe on MealScrape!",text:le.caption?`${le.caption}

Shared via MealScrape`:"I found this fire recipe on MealScrape!",url:Re};if(navigator.share&&((de=navigator.canShare)!=null&&de.call(navigator,we)))try{await navigator.share(we),L.success("Shared successfully!")}catch(ke){ke.name!=="AbortError"&&(console.error("Native share failed:",ke),yn(Re))}else yn(Re)},yn=E=>{navigator.clipboard.writeText(E).then(()=>{L.success("Link copied to clipboard!")}).catch(()=>{L.error("Failed to copy link")})},nn=E=>{var we;const le=a.find(ne=>ne.id===E);if(!le)return;const Re=`https://mealscrape.com/${((we=le.profiles)==null?void 0:we.username)||"user"}?post=${E}`;navigator.clipboard.writeText(Re).then(()=>{Z(!0),L.success("Link copied!"),setTimeout(()=>Z(!1),2e3)}).catch(ne=>{console.error("Failed to copy:",ne),L.error("Failed to copy link")})},wn=async()=>{var we;if(!O||Te.size===0)return;const E=a.find(ne=>ne.id===O);if(!E)return;const xe=`https://mealscrape.com/${((we=E.profiles)==null?void 0:we.username)||"user"}?post=${O}`,Re=`Check out this recipe: ${E.title||"Shared post"}
${xe}`;try{for(const ne of Te){let de=null;const{data:ke}=await U.from("conversations").select("id").or(`and(user1_id.eq.${m},user2_id.eq.${ne}),and(user1_id.eq.${ne},user2_id.eq.${m})`).maybeSingle();if(ke)de=ke.id;else{const{data:ze,error:ht}=await U.from("conversations").insert({user1_id:m,user2_id:ne}).select().single();if(ht)throw ht;de=ze.id}await U.from("direct_messages").insert({conversation_id:de,sender_id:m,content:Re}),await U.from("conversations").update({updated_at:new Date().toISOString(),last_message_at:new Date().toISOString()}).eq("id",de)}if(L.success(`Shared with ${Te.size} ${Te.size===1?"person":"people"}!`),J(null),W(new Set),Te.size===1&&e){const ne=Array.from(Te)[0],de=oe.find(ke=>ke.following_id===ne);de!=null&&de.profiles&&e(ne,de.profiles.username)}}catch(ne){console.error("Error sharing post:",ne),L.error("Failed to share post")}};return o.jsx("div",{className:"min-h-screen bg-gray-50 pb-32 overflow-x-hidden",children:o.jsxs("div",{className:"max-w-sm mx-auto w-full",onClick:()=>{H(!1),A(!1)},children:[o.jsxs("div",{className:"fixed top-14 left-0 right-0 z-20 bg-white border-b border-gray-200 p-4 max-w-sm mx-auto lg:ml-64 lg:max-w-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Rw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:Q,onChange:E=>Ue(E.target.value),onKeyDown:yr,placeholder:"Search users...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"}),F&&o.jsx("div",{className:"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-lg max-h-60 overflow-y-auto shadow-lg z-50",children:ee.length>0?ee.map(E=>o.jsxs("button",{onClick:()=>{I(E.id),A(!1),q("")},className:"w-full flex items-center gap-2 p-2 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[o.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-orange-400 to-red-400 overflow-hidden flex items-center justify-center",children:E.avatar_url?o.jsx("img",{src:E.avatar_url,alt:E.username,className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-white font-semibold text-sm",children:E.username.charAt(0).toUpperCase()})}),o.jsx("span",{className:"font-medium text-gray-900",children:E.username})]},E.id)):o.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No users found"})})]}),o.jsxs("button",{onClick:async E=>{E.stopPropagation(),H(!G),!G&&m&&(await U.from("notifications").update({read:!0}).eq("user_id",m).eq("read",!1),ue(0))},className:"relative p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0",children:[o.jsx(kE,{className:"w-6 h-6 text-gray-700"}),X>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold",children:X>9?"9+":X})]})]}),G&&o.jsx("div",{className:"absolute left-4 right-4 top-full mt-2 bg-white border border-gray-200 rounded-lg max-h-96 overflow-y-auto shadow-lg z-50",children:fe.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No notifications yet"}):fe.map(E=>{var le;return o.jsx("div",{onClick:()=>{var xe;E.read||Qt(E.id),H(!1),E.post_id&&(E.type==="like"||E.type==="comment")?w(E.post_id):E.type==="follow"&&((xe=E.actor)!=null&&xe.username)&&(window.location.href=`/${E.actor.username}`)},className:`p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${E.read?"":"bg-blue-50"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:((le=E.actor)==null?void 0:le.username)||"Someone"}),E.type==="follow"&&" started following you",E.type==="like"&&" loved your post",E.type==="comment"&&" commented on your post",E.type==="message"&&" sent you a message"]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(E.created_at).toLocaleDateString()," at"," ",new Date(E.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),!E.read&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]})},E.id)})})]}),o.jsxs("div",{className:"pt-24",style:{paddingTop:"calc(5rem + env(safe-area-inset-top))"},children:[$&&o.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 p-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ME,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Posts tagged with #",$]})]}),o.jsx(re,{variant:"ghost",size:"sm",onClick:()=>z(null),className:"text-blue-600 hover:text-blue-700",children:"Clear"})]}),k?o.jsx(Z4,{userId:k,currentUserId:m,posts:a,isFollowing:C.has(k),onBack:()=>I(null),onToggleFollow:he,onMessage:(E,le)=>{e&&e(E,le)},onRefresh:()=>Me(0,!0)}):a.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",children:"No posts yet. Be the first to share!"})}):o.jsxs(o.Fragment,{children:[a.map(E=>{var we,ne,de,ke,ze,ht,Be,mt,We,_t,Ln,Ui;console.log("[Discover] Post ID:",E.id),console.log("[Discover] Raw image_url:",E.image_url),console.log("[Discover] Raw video_url:",E.video_url);const le=(we=E.likes)==null?void 0:we.some(De=>De.user_id===m),xe=((ne=E.comments)==null?void 0:ne.slice(0,2))||[],Re=E.user_id===m;return o.jsxs("div",{className:"bg-white border-b border-gray-200 mb-2 flex flex-col min-h-0",children:[o.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[(de=E.profiles)!=null&&de.avatar_url?o.jsx("img",{src:E.profiles.avatar_url,alt:E.profiles.username,className:"w-8 h-8 rounded-full object-cover",loading:"lazy"}):o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white font-medium text-sm",children:((ht=(ze=(ke=E.profiles)==null?void 0:ke.username)==null?void 0:ze[0])==null?void 0:ht.toUpperCase())||o.jsx(hi,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>{var De;window.location.href=`/${(De=E.profiles)==null?void 0:De.username}`},className:"font-semibold text-sm hover:underline cursor-pointer",children:(Be=E.profiles)==null?void 0:Be.username}),E.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&o.jsx(Wa,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]})]}),(Re||s)&&o.jsxs(gj,{children:[o.jsx(xj,{asChild:!0,children:o.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Sw,{className:"w-5 h-5 text-gray-600"})})}),o.jsxs(dp,{align:"end",children:[o.jsxs(yi,{onClick:()=>_({id:E.id,caption:E.caption||"",recipeUrl:E.recipe_url||"",photoUrl:E.image_url||"",deletedImages:[],newImages:[],newPreviews:[]}),className:"cursor-pointer",children:[o.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Edit post"]}),o.jsxs(yi,{onClick:()=>j(E.id),className:"cursor-pointer text-red-600",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"}),"Delete post"]})]})]})]}),"// Image / Video Carousel - FIXED VERSION",o.jsxs("div",{className:"relative",children:[E.image_url||E.video_url?(()=>{let De=[],yt=[];if(console.log("[Discover] Starting to parse images for post:",E.id),E.image_url){try{const He=JSON.parse(E.image_url);if(Array.isArray(He))De=He.map(ve=>yl(ve)).filter(Boolean);else{const ve=yl(He);ve&&(De=[ve])}}catch{if(E.image_url.includes(","))De=E.image_url.split(",").map(He=>yl(He.trim())).filter(Boolean);else{const He=yl(E.image_url);He&&(De=[He])}}yt=new Array(De.length).fill("image")}if(E.video_url&&(De.push(E.video_url),yt.push("video")),De.length===0)return console.log("[Discover]  NO MEDIA FOUND for post:",E.id),o.jsx("div",{className:"w-full aspect-square bg-gray-200 flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"No media available"})});const nt=pe[E.id]||0,Or=He=>{Ne(ve=>({...ve,[E.id]:typeof He=="function"?He(ve[E.id]||0):He}))};return De.length===1?yt[0]==="video"?o.jsx("video",{src:De[0],controls:!0,className:"w-full aspect-square object-cover bg-black",preload:"metadata"}):o.jsx("img",{src:De[0],alt:E.title||"Post",className:"w-full aspect-square object-cover",loading:"lazy",onError:He=>{var $t;console.error("[Discover] Image failed to load:",De[0]);const ve=He.target;ve.style.display="none",($t=ve.parentElement)==null||$t.classList.add("bg-gray-200")}}):o.jsxs("div",{className:"relative w-full aspect-square bg-black",children:[yt[nt]==="video"?o.jsx("video",{src:De[nt],controls:!0,className:"w-full h-full object-cover",preload:"metadata"},De[nt]):o.jsx("img",{src:De[nt],alt:`${E.title||"Post"} ${nt+1}`,className:"w-full h-full object-cover",loading:"lazy",onError:He=>{var $t;console.error("[Discover] Carousel image failed:",De[nt]);const ve=He.target;ve.style.display="none",($t=ve.parentElement)==null||$t.classList.add("bg-gray-200")}},De[nt]),nt>0&&o.jsx("button",{onClick:He=>{He.stopPropagation(),Or(ve=>ve-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors z-10",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),nt<De.length-1&&o.jsx("button",{onClick:He=>{He.stopPropagation(),Or(ve=>ve+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors z-10",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),o.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-1.5 z-10",children:De.map((He,ve)=>o.jsx("button",{onClick:$t=>{$t.stopPropagation(),Or(ve)},className:`w-2 h-2 rounded-full transition-all ${ve===nt?"bg-white w-6":"bg-white/50"}`},ve))}),o.jsx("div",{onTouchStart:He=>{const ve=He.touches[0];He.currentTarget.touchStartX=ve.clientX},onTouchEnd:He=>{const ve=He.changedTouches[0],br=He.currentTarget.touchStartX-ve.clientX;Math.abs(br)>50&&(br>0&&nt<De.length-1?Or(Un=>Un+1):br<0&&nt>0&&Or(Un=>Un-1))},className:"absolute inset-0"})]})})():o.jsx("div",{className:"w-full aspect-square bg-gray-200 flex items-center justify-center",children:o.jsx("p",{className:"text-gray-500",children:"No media"})}),E.spotify_preview_url&&o.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[o.jsxs("button",{onClick:De=>{De.stopPropagation();const yt=document.getElementById(`audio-${E.id}`),nt=De.currentTarget.querySelector(".play-icon");document.querySelectorAll("audio").forEach(Or=>{Or.id!==`audio-${E.id}`&&Or.pause()}),yt.paused?(yt.play(),nt&&(nt.textContent="")):(yt.pause(),nt&&(nt.textContent=""))},className:"bg-black/70 hover:bg-black/90 backdrop-blur-sm text-white px-3 py-2 rounded-full shadow-lg transition-all flex items-center gap-2",children:[o.jsx("span",{className:"text-xl play-icon",children:""}),o.jsxs("div",{className:"text-left text-xs max-w-32",children:[o.jsx("div",{className:"font-semibold truncate",children:E.spotify_track_name}),o.jsx("div",{className:"text-white/80 truncate",children:E.spotify_artist_name})]})]}),o.jsx("audio",{id:`audio-${E.id}`,src:E.spotify_preview_url})]}),E.title&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-4 py-3",children:o.jsxs("div",{className:"flex items-end justify-between gap-2",children:[o.jsx("h3",{className:"text-white text-sm font-semibold flex-1",children:E.title}),y[E.id]&&y[E.id].count>0&&o.jsxs("div",{className:"flex items-center gap-1 bg-black/50 px-2 py-1 rounded-full",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-white text-xs font-semibold",children:y[E.id].average.toFixed(1)}),o.jsxs("span",{className:"text-white/70 text-xs",children:["(",y[E.id].count,")"]})]})]})})]}),o.jsxs("div",{className:"px-4 py-3 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>Ae(E.id),className:"transition-transform hover:scale-110 relative",children:[o.jsx(ym,{className:`w-7 h-7 ${le?"fill-red-500 text-red-500":"text-gray-700"}`}),((mt=E._count)==null?void 0:mt.likes)&&E._count.likes>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:E._count.likes})]}),o.jsxs("button",{onClick:()=>w(E.id),className:"transition-transform hover:scale-110 relative",children:[o.jsx(bm,{className:"w-7 h-7 text-gray-700"}),((We=E._count)==null?void 0:We.comments)&&E._count.comments>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:E._count.comments})]}),o.jsx("button",{onClick:()=>wr(E.id),className:"ml-auto transition-transform hover:scale-110",children:o.jsx(Mo,{className:"w-7 h-7 text-gray-700 hover:text-orange-600 transition-colors"})})]}),E.caption&&o.jsxs("div",{className:"text-sm break-words overflow-wrap-anywhere",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"font-semibold",children:(_t=E.profiles)==null?void 0:_t.username}),E.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&o.jsx(Wa,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"})]})," ",o.jsx("span",{className:"text-gray-700 break-all",children:Q4(E.caption,De=>{z(De),I(null)})})]}),(((Ln=E._count)==null?void 0:Ln.comments)||0)>0&&o.jsxs("button",{onClick:()=>w(E.id),className:"text-sm text-gray-500 hover:text-gray-700",children:["View all ",(Ui=E._count)==null?void 0:Ui.comments," comments"]}),xe.map(De=>{var yt;return o.jsxs("div",{className:"text-sm",children:[o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"font-semibold",children:(yt=De.profiles)==null?void 0:yt.username}),De.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&o.jsx(Wa,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"})]})," ",o.jsx("span",{className:"text-gray-700",children:De.text})]},De.id)}),(E.recipe_id||E.recipe_url)&&o.jsxs(re,{onClick:async()=>{if(E.recipe_id){const{getRecipeById:De}=await Co(async()=>{const{getRecipeById:nt}=await Promise.resolve().then(()=>Km);return{getRecipeById:nt}},void 0),yt=await De(E.recipe_id);yt?D(yt):L.error("Recipe not found")}else E.recipe_url&&window.open(E.recipe_url,"_blank")},variant:"outline",size:"sm",className:"w-full mt-2 border-orange-600 text-orange-600 hover:bg-orange-50",children:[o.jsx(Zc,{className:"w-4 h-4 mr-2"}),"View Recipe"]}),o.jsx("div",{className:"text-xs text-gray-400 uppercase pt-1",children:new Date(E.created_at).toLocaleDateString()})]})]},E.id)}),f&&o.jsx("div",{className:"py-8 text-center",children:o.jsx(re,{onClick:V,variant:"outline",children:"Load More"})})]})]}),g&&o.jsx(hd,{postId:g,isOpen:!!g,onClose:()=>w(null),onCommentPosted:()=>Me(0,!0)}),o.jsx(Ec,{open:!!v,onOpenChange:E=>!E&&j(null),children:o.jsxs(wi,{children:[o.jsxs(bi,{children:[o.jsx(Ni,{children:"Delete post?"}),o.jsx(_i,{children:"This action cannot be undone. This will permanently delete your post."})]}),o.jsxs(ji,{children:[o.jsx(ki,{children:"Cancel"}),o.jsx(Si,{onClick:_e,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),o.jsx(Ec,{open:!!N,onOpenChange:E=>!E&&_(null),children:o.jsxs(wi,{className:"max-h-[90vh] overflow-y-auto",children:[o.jsxs(bi,{children:[o.jsx(Ni,{children:"Edit post"}),o.jsx(_i,{children:"Update your caption, recipe link, and images (up to 4 total)."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Caption"}),o.jsx(An,{value:(N==null?void 0:N.caption)||"",onChange:E=>_(le=>le?{...le,caption:E.target.value}:null),placeholder:"Write a caption...",className:"resize-none",rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Recipe URL"}),o.jsx("input",{type:"url",value:(N==null?void 0:N.recipeUrl)||"",onChange:E=>_(le=>le?{...le,recipeUrl:E.target.value}:null),placeholder:"https://...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Current Images"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:(()=>{const E=a.find(we=>we.id===(N==null?void 0:N.id));if(!(E!=null&&E.image_url))return null;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(we=>we.trim()):[E.image_url]}const xe=(N==null?void 0:N.deletedImages)||[];return le.filter(we=>!xe.includes(we)).map((we,ne)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:we,alt:`Image ${ne+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",loading:"lazy"}),o.jsx("button",{onClick:()=>{_(de=>{if(!de)return null;const ke=de.deletedImages||[];return{...de,deletedImages:[...ke,we]}})},className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Rt,{className:"w-4 h-4"})})]},ne))})()})]}),(()=>{const E=(N==null?void 0:N.newImages)||[],le=(N==null?void 0:N.newPreviews)||[];return E.length>0?o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block text-green-600",children:"New Images to Add"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:le.map((xe,Re)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:xe,alt:`New image ${Re+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-green-500",loading:"lazy"}),o.jsx("button",{onClick:()=>{_(we=>{if(!we)return null;const ne=we.newImages||[],de=we.newPreviews||[];return URL.revokeObjectURL(de[Re]),{...we,newImages:ne.filter((ke,ze)=>ze!==Re),newPreviews:de.filter((ke,ze)=>ze!==Re)}})},className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Rt,{className:"w-4 h-4"})})]},Re))})]}):null})(),(()=>{const E=a.find(de=>de.id===(N==null?void 0:N.id));if(!(E!=null&&E.image_url))return null;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(de=>de.trim()):[E.image_url]}const xe=(N==null?void 0:N.deletedImages)||[],Re=le.length-xe.length,we=(N==null?void 0:N.newImages)||[],ne=Re+we.length;return ne>=4?o.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 4 images reached"}):o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Add More Photos"}),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:de=>{const ke=Array.from(de.target.files||[]),ze=4-ne,ht=ke.slice(0,ze),Be=[],mt=[];for(const We of ht){if(We.size>10*1024*1024){L.error(`${We.name} is too large (max 10MB)`);continue}if(!We.type.startsWith("image/")){L.error(`${We.name} is not an image`);continue}Be.push(We),mt.push(URL.createObjectURL(We))}Be.length>0&&(_(We=>{if(!We)return null;const _t=We.newImages||[],Ln=We.newPreviews||[];return{...We,newImages:[..._t,...Be],newPreviews:[...Ln,...mt]}}),L.success(`Added ${Be.length} image${Be.length>1?"s":""}`)),de.target.value=""},disabled:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ne,"/4 images selected"]})]})})()]}),o.jsxs(ji,{children:[o.jsx(ki,{children:"Cancel"}),o.jsx(Si,{onClick:async()=>{if(N)try{const E=a.find(Be=>Be.id===N.id);if(!(E!=null&&E.image_url))return;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(Be=>Be.trim()):[E.image_url]}const xe=(N==null?void 0:N.deletedImages)||[],Re=le.filter(Be=>!xe.includes(Be)),we=(N==null?void 0:N.newImages)||[],ne=[];if(we.length>0){P(!0);for(const Be of we){const mt=Be.name.split(".").pop(),We=`${m}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${mt}`,{error:_t}=await U.storage.from("posts").upload(We,Be);if(_t)throw _t;const{data:Ln}=U.storage.from("posts").getPublicUrl(We);ne.push(Ln.publicUrl)}P(!1)}const de=[...Re,...ne],ke=de.length>1?JSON.stringify(de):de[0]||null,{error:ze}=await U.from("posts").update({caption:N.caption.trim()||null,recipe_url:N.recipeUrl.trim()||null,image_url:ke}).eq("id",N.id);if(ze)throw ze;i(Be=>Be.map(mt=>mt.id===N.id?{...mt,caption:N.caption.trim()||null,image_url:ke,recipe_url:N.recipeUrl.trim()||null}:mt)),((N==null?void 0:N.newPreviews)||[]).forEach(Be=>URL.revokeObjectURL(Be)),L.success("Post updated"),_(null)}catch(E){console.error("Error updating post:",E),L.error("Failed to update post")}},className:"bg-orange-600 hover:bg-orange-700",disabled:S,children:S?"Uploading...":"Save changes"})]})]})}),M&&o.jsx(Hm,{recipe:M,open:!!M,onOpenChange:E=>!E&&D(null)}),o.jsx(Pt,{open:!!O,onOpenChange:E=>!E&&J(null),children:o.jsxs(Nt,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[o.jsx(Gt,{children:o.jsx(Bt,{children:"Share"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[o.jsx("button",{onClick:()=>K("followers"),className:`flex-1 py-2 px-4 font-medium transition-colors ${T==="followers"?"text-orange-600 border-b-2 border-orange-600":"text-gray-500 hover:text-gray-700"}`,children:"Send to Followers"}),o.jsx("button",{onClick:()=>K("link"),className:`flex-1 py-2 px-4 font-medium transition-colors ${T==="link"?"text-orange-600 border-b-2 border-orange-600":"text-gray-500 hover:text-gray-700"}`,children:"Share Link"})]}),T==="followers"&&o.jsx("div",{className:"space-y-4",children:oe.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"You don't have any followers yet"}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:oe.map(E=>{var Re,we;const le=E.profiles,xe=Te.has(E.following_id);return o.jsxs("button",{onClick:()=>{const ne=new Set(Te);xe?ne.delete(E.following_id):ne.add(E.following_id),W(ne)},className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${xe?"bg-orange-50 border-2 border-orange-500":"hover:bg-gray-50 border-2 border-transparent"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:le!=null&&le.avatar_url?o.jsx("img",{src:le.avatar_url,alt:le.username,className:"w-full h-full object-cover",loading:"lazy"}):(we=(Re=le==null?void 0:le.username)==null?void 0:Re[0])==null?void 0:we.toUpperCase()}),o.jsx("div",{className:"flex-1 text-left",children:o.jsx("div",{className:"font-semibold",children:le==null?void 0:le.username})}),xe&&o.jsx(mc,{className:"w-5 h-5 text-orange-600"})]},E.following_id)})}),o.jsxs(re,{onClick:wn,disabled:Te.size===0,className:"w-full bg-orange-500 hover:bg-orange-600",children:[o.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Send to ",Te.size," ",Te.size===1?"person":"people"]})]})}),T==="link"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs(re,{onClick:()=>O&&ot(O),className:"w-full bg-blue-500 hover:bg-blue-600",children:[o.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Share via Apps"]}),o.jsx(re,{onClick:()=>O&&nn(O),variant:"outline",className:"w-full",children:je?o.jsxs(o.Fragment,{children:[o.jsx(mc,{className:"w-4 h-4 mr-2"}),"Link Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Copy Link"]})})]})]})]})})]})})}function vI(){const{state:e}=Qs(),[t,r]=u.useState(null);return e.savedRecipes.length===0?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pt-safe pb-safe",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:py-8 pb-28 sm:pb-24",children:[o.jsxs("div",{className:"mb-8 sm:mb-6",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-1 sm:mb-2",children:"My Recipes"}),o.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-600",children:"Your saved recipes collection"})]}),o.jsxs("div",{className:"flex flex-col items-center justify-center py-16 sm:py-12 md:py-20 px-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 p-8 sm:p-6 md:p-8 rounded-full mb-6 shadow-lg",children:o.jsx(CE,{className:"w-20 h-20 sm:w-16 sm:h-16 md:w-20 md:h-20 text-emerald-600"})}),o.jsx("h2",{className:"text-xl sm:text-xl md:text-2xl font-bold text-gray-900 mb-3 text-center px-4 leading-tight",children:"No Saved Recipes Yet"}),o.jsx("p",{className:"text-gray-600 text-center max-w-md mb-6 px-4 text-base sm:text-sm md:text-base leading-relaxed",children:"Start building your recipe collection by exploring and saving your favorite recipes from the Discover page."}),o.jsx("div",{className:"mt-2",children:o.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-emerald-600 font-medium bg-emerald-50 px-4 py-2 rounded-full",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),o.jsx("span",{children:"Explore recipes to get started"})]})})]})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pt-safe pb-safe",children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-6 pb-28 sm:pb-24",children:[o.jsxs("div",{className:"mb-6 sm:mb-6 flex items-start sm:items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-1 leading-tight",children:"My Recipes"}),o.jsxs("p",{className:"text-sm sm:text-base md:text-xl text-gray-600 flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-semibold text-emerald-600",children:e.savedRecipes.length}),o.jsxs("span",{children:["saved recipe",e.savedRecipes.length!==1?"s":""]})]})]}),o.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 p-3 sm:p-3 md:p-4 rounded-2xl sm:rounded-full shadow-md shrink-0",children:o.jsx(Vs,{className:"w-6 h-6 sm:w-6 sm:h-6 md:w-8 md:h-8 text-emerald-600"})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:e.savedRecipes.map(n=>o.jsx("div",{className:"flex w-full",children:o.jsx(Hh,{recipe:n,showReviewButton:!0,onCook:s=>{const a=e.savedRecipes.find(i=>i.id===s);a&&r(a)}})},n.id))}),e.savedRecipes.length>6&&o.jsx("div",{className:"mt-8 text-center",children:o.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-gray-400",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"})]})})]}),t&&o.jsx("div",{className:"fixed inset-0 z-50",children:o.jsx(qm,{recipe:t,onClose:()=>r(null)})})]})}var yI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wI=yI.reduce((e,t)=>{const r=Sm(`Primitive.${t}`),n=u.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),bI="Label",$j=u.forwardRef((e,t)=>o.jsx(wI.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));$j.displayName=bI;var Lj=$j;const jI=ed("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=u.forwardRef(({className:e,...t},r)=>o.jsx(Lj,{ref:r,className:Ee(jI(),e),...t}));qe.displayName=Lj.displayName;function NI(e){const t=_I(e),r=u.forwardRef((n,s)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(kI);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return o.jsx(t,{...i,ref:s,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function _I(e){const t=u.forwardRef((r,n)=>{const{children:s,...a}=r;if(u.isValidElement(s)){const i=EI(s),l=CI(a,s.props);return s.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(s,l)}return u.Children.count(s)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SI=Symbol("radix.slottable");function kI(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SI}function CI(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function EI(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Uj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RI="VisuallyHidden",PI=u.forwardRef((e,t)=>o.jsx(Pe.span,{...e,ref:t,style:{...Uj,...e.style}}));PI.displayName=RI;var TI=[" ","Enter","ArrowUp","ArrowDown"],AI=[" ","Enter"],Gs="Select",[bd,jd,II]=Oi(Gs),[la]=ar(Gs,[II,xd]),Nd=xd(),[OI,ys]=la(Gs),[MI,DI]=la(Gs),Fj=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:b}=e,g=Nd(t),[w,y]=u.useState(null),[x,v]=u.useState(null),[j,N]=u.useState(!1),_=oa(d),[S,P]=Qr({prop:n,defaultProp:s??!1,onChange:a,caller:Gs}),[C,R]=Qr({prop:i,defaultProp:l,onChange:c,caller:Gs}),M=u.useRef(null),D=w?b||!!w.closest("form"):!0,[Q,q]=u.useState(new Set),ee=Array.from(Q).map(B=>B.props.value).join(";");return o.jsx(f1,{...g,children:o.jsxs(OI,{required:m,scope:t,trigger:w,onTriggerChange:y,valueNode:x,onValueNodeChange:v,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Gr(),value:C,onValueChange:R,open:S,onOpenChange:P,dir:_,triggerPointerDownPosRef:M,disabled:p,children:[o.jsx(bd.Provider,{scope:t,children:o.jsx(MI,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(B=>{q(F=>new Set(F).add(B))},[]),onNativeOptionRemove:u.useCallback(B=>{q(F=>{const A=new Set(F);return A.delete(B),A})},[]),children:r})}),D?o.jsxs(dN,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:B=>R(B.target.value),disabled:p,form:b,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from(Q)]},ee):null]})})};Fj.displayName=Gs;var zj="SelectTrigger",Bj=u.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=Nd(r),i=ys(zj,r),l=i.disabled||n,c=Oe(t,i.onTriggerChange),d=jd(r),h=u.useRef("touch"),[f,p,m]=hN(g=>{const w=d().filter(v=>!v.disabled),y=w.find(v=>v.value===i.value),x=fN(w,g,y);x!==void 0&&i.onValueChange(x.value)}),b=g=>{l||(i.onOpenChange(!0),m()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(m1,{asChild:!0,...a,children:o.jsx(Pe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":uN(i.value)?"":void 0,...s,ref:c,onClick:ge(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&b(g)}),onPointerDown:ge(s.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:ge(s.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&TI.includes(g.key)&&(b(),g.preventDefault())})})})});Bj.displayName=zj;var Vj="SelectValue",Wj=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:i="",...l}=e,c=ys(Vj,r),{onValueNodeHasChildrenChange:d}=c,h=a!==void 0,f=Oe(t,c.onValueNodeChange);return Tt(()=>{d(h)},[d,h]),o.jsx(Pe.span,{...l,ref:f,style:{pointerEvents:"none"},children:uN(c.value)?o.jsx(o.Fragment,{children:i}):a})});Wj.displayName=Vj;var $I="SelectIcon",qj=u.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return o.jsx(Pe.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});qj.displayName=$I;var LI="SelectPortal",Hj=e=>o.jsx(nd,{asChild:!0,...e});Hj.displayName=LI;var Ks="SelectContent",Gj=u.forwardRef((e,t)=>{const r=ys(Ks,e.__scopeSelect),[n,s]=u.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?ta.createPortal(o.jsx(Kj,{scope:e.__scopeSelect,children:o.jsx(bd.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(Yj,{...e,ref:t})});Gj.displayName=Ks;var Ur=10,[Kj,ws]=la(Ks),UI="SelectContentImpl",FI=NI("SelectContent.RemoveScroll"),Yj=u.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:w,...y}=e,x=ys(Ks,r),[v,j]=u.useState(null),[N,_]=u.useState(null),S=Oe(t,H=>j(H)),[P,C]=u.useState(null),[R,M]=u.useState(null),D=jd(r),[Q,q]=u.useState(!1),ee=u.useRef(!1);u.useEffect(()=>{if(v)return Rm(v)},[v]),Em();const B=u.useCallback(H=>{const[fe,...ce]=D().map(T=>T.ref.current),[O]=ce.slice(-1),J=document.activeElement;for(const T of H)if(T===J||(T==null||T.scrollIntoView({block:"nearest"}),T===fe&&N&&(N.scrollTop=0),T===O&&N&&(N.scrollTop=N.scrollHeight),T==null||T.focus(),document.activeElement!==J))return},[D,N]),F=u.useCallback(()=>B([P,v]),[B,P,v]);u.useEffect(()=>{Q&&F()},[Q,F]);const{onOpenChange:A,triggerPointerDownPosRef:k}=x;u.useEffect(()=>{if(v){let H={x:0,y:0};const fe=O=>{var J,T;H={x:Math.abs(Math.round(O.pageX)-(((J=k.current)==null?void 0:J.x)??0)),y:Math.abs(Math.round(O.pageY)-(((T=k.current)==null?void 0:T.y)??0))}},ce=O=>{H.x<=10&&H.y<=10?O.preventDefault():v.contains(O.target)||A(!1),document.removeEventListener("pointermove",fe),k.current=null};return k.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",ce,{capture:!0})}}},[v,A,k]),u.useEffect(()=>{const H=()=>A(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[A]);const[I,te]=hN(H=>{const fe=D().filter(J=>!J.disabled),ce=fe.find(J=>J.ref.current===document.activeElement),O=fN(fe,H,ce);O&&setTimeout(()=>O.ref.current.focus())}),$=u.useCallback((H,fe,ce)=>{const O=!ee.current&&!ce;(x.value!==void 0&&x.value===fe||O)&&(C(H),O&&(ee.current=!0))},[x.value]),z=u.useCallback(()=>v==null?void 0:v.focus(),[v]),X=u.useCallback((H,fe,ce)=>{const O=!ee.current&&!ce;(x.value!==void 0&&x.value===fe||O)&&M(H)},[x.value]),ue=n==="popper"?Qh:Jj,G=ue===Qh?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(Kj,{scope:r,content:v,viewport:N,onViewportChange:_,itemRefCallback:$,selectedItem:P,onItemLeave:z,itemTextRefCallback:X,focusSelectedItem:F,selectedItemText:R,position:n,isPositioned:Q,searchRef:I,children:o.jsx(od,{as:FI,allowPinchZoom:!0,children:o.jsx(rd,{asChild:!0,trapped:x.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:ge(s,H=>{var fe;(fe=x.trigger)==null||fe.focus({preventScroll:!0}),H.preventDefault()}),children:o.jsx(td,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(ue,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:H=>H.preventDefault(),...y,...G,onPlaced:()=>q(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ge(y.onKeyDown,H=>{const fe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!fe&&H.key.length===1&&te(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let O=D().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(H.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const J=H.target,T=O.indexOf(J);O=O.slice(T+1)}setTimeout(()=>B(O)),H.preventDefault()}})})})})})})});Yj.displayName=UI;var zI="SelectItemAlignedPosition",Jj=u.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=ys(Ks,r),i=ws(Ks,r),[l,c]=u.useState(null),[d,h]=u.useState(null),f=Oe(t,S=>h(S)),p=jd(r),m=u.useRef(!1),b=u.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:y,focusSelectedItem:x}=i,v=u.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&w&&y){const S=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(a.dir!=="rtl"){const J=R.left-P.left,T=C.left-J,K=S.left-T,oe=S.width+K,be=Math.max(oe,P.width),Te=window.innerWidth-Ur,W=mi(T,[Ur,Math.max(Ur,Te-be)]);l.style.minWidth=oe+"px",l.style.left=W+"px"}else{const J=P.right-R.right,T=window.innerWidth-C.right-J,K=window.innerWidth-S.right-T,oe=S.width+K,be=Math.max(oe,P.width),Te=window.innerWidth-Ur,W=mi(T,[Ur,Math.max(Ur,Te-be)]);l.style.minWidth=oe+"px",l.style.right=W+"px"}const M=p(),D=window.innerHeight-Ur*2,Q=g.scrollHeight,q=window.getComputedStyle(d),ee=parseInt(q.borderTopWidth,10),B=parseInt(q.paddingTop,10),F=parseInt(q.borderBottomWidth,10),A=parseInt(q.paddingBottom,10),k=ee+B+Q+A+F,I=Math.min(w.offsetHeight*5,k),te=window.getComputedStyle(g),$=parseInt(te.paddingTop,10),z=parseInt(te.paddingBottom,10),X=S.top+S.height/2-Ur,ue=D-X,G=w.offsetHeight/2,H=w.offsetTop+G,fe=ee+B+H,ce=k-fe;if(fe<=X){const J=M.length>0&&w===M[M.length-1].ref.current;l.style.bottom="0px";const T=d.clientHeight-g.offsetTop-g.offsetHeight,K=Math.max(ue,G+(J?z:0)+T+F),oe=fe+K;l.style.height=oe+"px"}else{const J=M.length>0&&w===M[0].ref.current;l.style.top="0px";const K=Math.max(X,ee+g.offsetTop+(J?$:0)+G)+ce;l.style.height=K+"px",g.scrollTop=fe-X+g.offsetTop}l.style.margin=`${Ur}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,l,d,g,w,y,a.dir,n]);Tt(()=>v(),[v]);const[j,N]=u.useState();Tt(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=u.useCallback(S=>{S&&b.current===!0&&(v(),x==null||x(),b.current=!1)},[v,x]);return o.jsx(VI,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(Pe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Jj.displayName=zI;var BI="SelectPopperPosition",Qh=u.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Ur,...a}=e,i=Nd(r);return o.jsx(p1,{...i,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qh.displayName=BI;var[VI,up]=la(Ks,{}),Zh="SelectViewport",Xj=u.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=ws(Zh,r),i=up(Zh,r),l=Oe(t,a.onViewportChange),c=u.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(bd.Slot,{scope:r,children:o.jsx(Pe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ge(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&f){const m=Math.abs(c.current-h.scrollTop);if(m>0){const b=window.innerHeight-Ur*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),y=Math.max(g,w);if(y<b){const x=y+m,v=Math.min(b,x),j=x-v;f.style.height=v+"px",f.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Xj.displayName=Zh;var Qj="SelectGroup",[WI,qI]=la(Qj),HI=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Gr();return o.jsx(WI,{scope:r,id:s,children:o.jsx(Pe.div,{role:"group","aria-labelledby":s,...n,ref:t})})});HI.displayName=Qj;var Zj="SelectLabel",eN=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=qI(Zj,r);return o.jsx(Pe.div,{id:s.id,...n,ref:t})});eN.displayName=Zj;var Rc="SelectItem",[GI,tN]=la(Rc),rN=u.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...i}=e,l=ys(Rc,r),c=ws(Rc,r),d=l.value===n,[h,f]=u.useState(a??""),[p,m]=u.useState(!1),b=Oe(t,x=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,x,n,s)}),g=Gr(),w=u.useRef("touch"),y=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(GI,{scope:r,value:n,disabled:s,textId:g,isSelected:d,onItemTextChange:u.useCallback(x=>{f(v=>v||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(bd.ItemSlot,{scope:r,value:n,disabled:s,textValue:h,children:o.jsx(Pe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:b,onFocus:ge(i.onFocus,()=>m(!0)),onBlur:ge(i.onBlur,()=>m(!1)),onClick:ge(i.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:ge(i.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:ge(i.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:ge(i.onPointerMove,x=>{var v;w.current=x.pointerType,s?(v=c.onItemLeave)==null||v.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(i.onPointerLeave,x=>{var v;x.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:ge(i.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(AI.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});rN.displayName=Rc;var Ra="SelectItemText",nN=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,i=ys(Ra,r),l=ws(Ra,r),c=tN(Ra,r),d=DI(Ra,r),[h,f]=u.useState(null),p=Oe(t,y=>f(y),c.onItemTextChange,y=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,y,c.value,c.disabled)}),m=h==null?void 0:h.textContent,b=u.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return Tt(()=>(g(b),()=>w(b)),[g,w,b]),o.jsxs(o.Fragment,{children:[o.jsx(Pe.span,{id:c.textId,...a,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ta.createPortal(a.children,i.valueNode):null]})});nN.displayName=Ra;var sN="SelectItemIndicator",oN=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return tN(sN,r).isSelected?o.jsx(Pe.span,{"aria-hidden":!0,...n,ref:t}):null});oN.displayName=sN;var ef="SelectScrollUpButton",aN=u.forwardRef((e,t)=>{const r=ws(ef,e.__scopeSelect),n=up(ef,e.__scopeSelect),[s,a]=u.useState(!1),i=Oe(t,n.onScrollButtonChange);return Tt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(lN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});aN.displayName=ef;var tf="SelectScrollDownButton",iN=u.forwardRef((e,t)=>{const r=ws(tf,e.__scopeSelect),n=up(tf,e.__scopeSelect),[s,a]=u.useState(!1),i=Oe(t,n.onScrollButtonChange);return Tt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;a(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(lN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});iN.displayName=tf;var lN=u.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=ws("SelectScrollButton",r),i=u.useRef(null),l=jd(r),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Tt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Pe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ge(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ge(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ge(s.onPointerLeave,()=>{c()})})}),KI="SelectSeparator",cN=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return o.jsx(Pe.div,{"aria-hidden":!0,...n,ref:t})});cN.displayName=KI;var rf="SelectArrow",YI=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Nd(r),a=ys(rf,r),i=ws(rf,r);return a.open&&i.position==="popper"?o.jsx(g1,{...s,...n,ref:t}):null});YI.displayName=rf;var JI="SelectBubbleInput",dN=u.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=u.useRef(null),a=Oe(n,s),i=id(t);return u.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),o.jsx(Pe.select,{...r,style:{...Uj,...r.style},ref:a,defaultValue:t})});dN.displayName=JI;function uN(e){return e===""||e===void 0}function hN(e){const t=Ot(e),r=u.useRef(""),n=u.useRef(0),s=u.useCallback(i=>{const l=r.current+i;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=u.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function fN(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=XI(e,Math.max(a,0));s.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function XI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var QI=Fj,mN=Bj,ZI=Wj,eO=qj,tO=Hj,pN=Gj,rO=Xj,gN=eN,xN=rN,nO=nN,sO=oN,vN=aN,yN=iN,wN=cN;const mn=QI,pn=ZI,Yr=u.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(mN,{ref:n,className:Ee("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,o.jsx(eO,{asChild:!0,children:o.jsx(_5,{className:"h-4 w-4 opacity-50"})})]}));Yr.displayName=mN.displayName;const bN=u.forwardRef(({className:e,...t},r)=>o.jsx(vN,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(P5,{})}));bN.displayName=vN.displayName;const jN=u.forwardRef(({className:e,...t},r)=>o.jsx(yN,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(vb,{})}));jN.displayName=yN.displayName;const Jr=u.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>o.jsx(tO,{children:o.jsxs(pN,{ref:s,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[o.jsx(bN,{}),o.jsx(rO,{className:Ee("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(jN,{})]})}));Jr.displayName=pN.displayName;const oO=u.forwardRef(({className:e,...t},r)=>o.jsx(gN,{ref:r,className:Ee("px-2 py-1.5 text-sm font-semibold",e),...t}));oO.displayName=gN.displayName;const hr=u.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(xN,{ref:n,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(sO,{children:o.jsx(Lm,{className:"h-4 w-4"})})}),o.jsx(nO,{children:t})]}));hr.displayName=xN.displayName;const aO=u.forwardRef(({className:e,...t},r)=>o.jsx(wN,{ref:r,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));aO.displayName=wN.displayName;const NN="https://vohvdarghgqskzqjclux.supabase.co",Vx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",iO=`${NN}/functions/v1/recipe-proxy`,lO="https://recipe-backend-nodejs-1.onrender.com/extract";async function Wx(e){var l,c,d,h,f,p,m,b,g,w;if(!e.trim()||!_N(e))throw new Error("Please enter a valid URL");if(/tiktok\.com|instagram\.com|youtube\.com|youtu\.be/i.test(e))try{console.log("[Extractor] Sending to Render server:",e);const y=new AbortController,x=setTimeout(()=>y.abort(),5e4),v=await fetch(lO,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.trim()}),signal:y.signal});if(clearTimeout(x),!v.ok){if(console.error("[Extractor] Server response not OK:",v.status),v.status>=500||v.status===429)throw new Error("Server waking up  try again in 20 seconds");const C=await v.text();throw console.error("[Extractor] Error response:",C),new Error("Video extraction failed")}const j=await v.json();console.log("[Extractor] Raw data from server:",j);const N=j.thumbnail||j.image||"";console.log("[Extractor] Raw image URL:",N);let _=N;if(N)if(N.includes("cdninstagram.com")||N.includes("fbcdn.net")||N.includes("instagram.com")){const R=N.replace(/&amp;/g,"&");_=`${NN}/functions/v1/image-proxy?url=${encodeURIComponent(R)}`,console.log("[Extractor] Instagram image detected, proxying:",_)}else console.log("[Extractor] Direct image URL (no proxy needed):",_);const S=(j.ingredients||[]).map(C=>{const R=Nr(C.trim());if(!R)return{quantity:"",unit:"",name:""};const M=R.match(/^([\d\/\.\-\s\,]+)\s*/),D=M?M[1].trim():"",Q=hx(D);let q=R.slice(D.length).trim();const ee=q.match(/^(cups?|tbsps?|tablespoons?|tsps?|teaspoons?|oz|ounces?|lbs?|pounds?|grams?|g|kg|kilograms?|ml|milliliters?|l|liters?|pinch|dash|piece|pieces|clove|cloves|slice|slices|can|cans)\s+/i);let B="";if(ee){const F=ee[1].toLowerCase();q=q.slice(ee[0].length).trim(),F==="g"||F==="gram"||F==="grams"?B="g":F==="kg"||F==="kilogram"||F==="kilograms"?B="kg":F==="ml"||F==="milliliter"||F==="milliliters"?B="ml":F==="l"||F==="liter"||F==="liters"?B="l":F.startsWith("cup")?B="cup":F.startsWith("tbsp")||F.startsWith("tablespoon")?B="tbsp":F.startsWith("tsp")||F.startsWith("teaspoon")?B="tsp":F==="oz"||F.startsWith("ounce")?B="oz":F.startsWith("lb")||F.startsWith("pound")?B="lb":B=F}else B=Q?"piece":"";return{quantity:Q,unit:B,name:q||R}}),P=C=>{if(!C||C<=0)return"30 mins";if(C<60)return`${C} mins`;const R=Math.floor(C/60),M=C%60;return M?`${R} hr ${M} mins`:`${R} hr`};return console.log("[Extractor] Final image URL being returned:",_),{title:Nr(j.title||j.channel||"Video Recipe"),description:Nr(j.description||j.shortDescription||j.content||""),creator:Nr(j.channel||j.creator||"Unknown"),ingredients:S,instructions:(j.instructions||[]).map(C=>Nr(C)),prepTime:P(j.prep_time||15),cookTime:P(j.cook_time||35),servings:j.servings||j.yield||"4",cuisineType:"Global",difficulty:"Medium",mealTypes:["Dinner"],dietaryTags:[],imageUrl:_,videoUrl:e,notes:"Extracted using your Render server",sourceUrl:e}}catch(y){throw console.error("[Extractor] Catch block error:",y),y.name==="AbortError"?new Error("Server is waking up  please wait 20-30 seconds and try again"):new Error("Video extraction temporarily unavailable  try again soon")}const r=await fetch(iO,{method:"POST",headers:{"Content-Type":"application/json",apikey:Vx,Authorization:`Bearer ${Vx}`},body:JSON.stringify({url:e.trim()})});if(!r.ok)throw await r.text(),new Error("Failed to extract from website");const n=await r.json(),s=y=>y.map(x=>{const v=Nr(x.trim()),j=v.match(/^([\d\/\.\-\s\,]+)\s*/),N=j?j[1].trim():"",_=hx(N);let S=v.slice(N.length).trim();const P=S.match(/^(cups?|tbsps?|tablespoons?|tsps?|teaspoons?|oz|ounces?|lbs?|pounds?|grams?|g|kg|kilograms?|ml|milliliters?|l|liters?|pinch|dash|piece|pieces|clove|cloves|slice|slices|can|cans)\s+/i);let C="";if(P){const R=P[1].toLowerCase();S=S.slice(P[0].length).trim(),R==="g"||R==="gram"||R==="grams"?C="g":R==="kg"||R==="kilogram"||R==="kilograms"?C="kg":R==="ml"||R==="milliliter"||R==="milliliters"?C="ml":R==="l"||R==="liter"||R==="liters"?C="l":R.startsWith("cup")?C="cup":R.startsWith("tbsp")||R.startsWith("tablespoon")?C="tbsp":R.startsWith("tsp")||R.startsWith("teaspoon")?C="tsp":R==="oz"||R.startsWith("ounce")?C="oz":R.startsWith("lb")||R.startsWith("pound")?C="lb":C=R}else C=_?"piece":"";return{quantity:_,unit:C,name:S||v}}),a=s(n.ingredients||[]),i={title:Nr(n.title||"Untitled Recipe"),description:"Extracted recipe",creator:Nr(n.author||"Unknown"),ingredients:a,instructions:(n.instructions||[]).map(Nr),prepTime:n.prep_time?`${n.prep_time} mins`:"30 mins",cookTime:n.cook_time?`${n.cook_time} mins`:"45 mins",servings:String(n.yield||"4"),cuisineType:"Global",difficulty:"Medium",mealTypes:["Dinner"],dietaryTags:[],imageUrl:n.image||"",videoUrl:"",notes:n.notes||"",sourceUrl:e};return n.hasConflict&&(i.hasConflict=!0,i.structuredVersion={...i,ingredients:s(((l=n.structuredVersion)==null?void 0:l.ingredients)||[]),instructions:(((c=n.structuredVersion)==null?void 0:c.instructions)||[]).map(Nr),prepTime:(d=n.structuredVersion)!=null&&d.prep_time?`${n.structuredVersion.prep_time} mins`:"30 mins",cookTime:(h=n.structuredVersion)!=null&&h.cook_time?`${n.structuredVersion.cook_time} mins`:"45 mins",servings:String(((f=n.structuredVersion)==null?void 0:f.yield)||"4"),notes:""},i.aiVersion={...i,ingredients:s(((p=n.aiVersion)==null?void 0:p.ingredients)||[]),instructions:(((m=n.aiVersion)==null?void 0:m.instructions)||[]).map(Nr),prepTime:(b=n.aiVersion)!=null&&b.prep_time?`${n.aiVersion.prep_time} mins`:"30 mins",cookTime:(g=n.aiVersion)!=null&&g.cook_time?`${n.aiVersion.cook_time} mins`:"45 mins",servings:String(((w=n.aiVersion)==null?void 0:w.yield)||"4"),notes:""}),i}function _N(e){try{return new URL(e),!0}catch{return!1}}async function cO(e,t){try{console.log("[ImageStorage] Downloading image:",e);const r=e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net");let n=e;r&&(n=`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`);const s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch image: ${s.status}`);const a=await s.blob();console.log("[ImageStorage] Downloaded blob:",a.type,a.size);const i=a.type.split("/")[1]||"jpg",l=Date.now(),c=`recipes/${t}/${l}.${i}`;console.log("[ImageStorage] Uploading to:",c);const{data:d,error:h}=await U.storage.from("recipe-images").upload(c,a,{contentType:a.type,cacheControl:"31536000",upsert:!1});if(h)throw console.error("[ImageStorage] Upload error:",h),h;console.log("[ImageStorage] Upload successful:",d);const{data:{publicUrl:f}}=U.storage.from("recipe-images").getPublicUrl(c);return console.log("[ImageStorage]  Permanent URL:",f),f}catch(r){return console.error("[ImageStorage]  Failed to store image:",r),e}}function wl(e){if(typeof e=="number")return e;const t=String(e).trim();if(/^PT\d+[HM]$/i.test(t)){const n=t.match(/PT(\d+)H/i),s=t.match(/PT(\d+)M/i)||t.match(/(\d+)M/i);return(n?parseInt(n[1])*60:0)+(s?parseInt(s[1]):0)}const r=parseInt(t);return isNaN(r)?0:r}function qx(e){if(typeof e=="number")return e;const t=String(e).trim(),r=t.match(/(\d+)/),n=parseInt(r?r[1]:t);return isNaN(n)?1:n}const dO=["cup","TBSP","tsp","oz","lb","g","kg","ml","l","piece(s)","whole","pinch","dash","egg(s)","to taste"],uO=["American","Chinese","Culinary/Baked Goods","French","Healing/Medicine","Indian","Italian","Juices/Smoothies","Japanese","Korean","Mediterranean","Mexican/Spanish","Other","Pet Meals","Supplements","Thai","Vegan/Vegetarian","Vietnamese"],hO=["Breakfast","Lunch","Dinner","Snack","Dessert"],fO=["Vegetarian","Vegan","Gluten-Free","Dairy-Free","Keto","Paleo","Low-Carb","High-Protein"];function mO({onNavigate:e}={}){const{dispatch:t}=Qs(),[r,n]=u.useState(""),[s,a]=u.useState([{quantity:"",unit:"cup",name:""}]),[i,l]=u.useState([""]),[c,d]=u.useState(""),[h,f]=u.useState(""),[p,m]=u.useState(""),[b,g]=u.useState(""),[w,y]=u.useState("Easy"),[x,v]=u.useState([]),[j,N]=u.useState([]),[_,S]=u.useState(""),[P,C]=u.useState(""),[R,M]=u.useState(""),[D,Q]=u.useState({}),[q,ee]=u.useState(!1),[B,F]=u.useState(""),[A,k]=u.useState(!1),[I,te]=u.useState(null),[$,z]=u.useState(!1),[X,ue]=u.useState(null),[G,H]=u.useState(""),[fe,ce]=u.useState(!1),[O,J]=u.useState(!1),T=()=>{a([...s,{quantity:"",unit:"cup",name:""}])},K=V=>{s.length>1&&a(s.filter((he,_e)=>_e!==V))},oe=(V,he,_e)=>{const Ae=[...s];Ae[V]={...Ae[V],[he]:_e},a(Ae)},be=()=>{l([...i,""])},Te=V=>{i.length>1&&l(i.filter((he,_e)=>_e!==V))},W=(V,he)=>{const _e=[...i];_e[V]=he,l(_e)},ae=V=>{v(he=>he.includes(V)?he.filter(_e=>_e!==V):[...he,V])},Y=V=>{N(he=>he.includes(V)?he.filter(_e=>_e!==V):[...he,V])},je=async V=>{var _e;const he=(_e=V.target.files)==null?void 0:_e[0];if(he){if(!he.type.startsWith("image/")){L.error("Please select an image file");return}if(he.size>5*1024*1024){L.error("Image must be less than 5MB");return}ce(!0);try{const{supabase:Ae}=await Co(async()=>{const{supabase:wr}=await Promise.resolve().then(()=>hu);return{supabase:wr}},void 0),{data:{user:ut}}=await Ae.auth.getUser();if(!ut){L.error("You must be logged in to upload images");return}const Xt=he.name.split(".").pop(),Ue=`${ut.id}/${Date.now()}.${Xt}`,{error:Qt}=await Ae.storage.from("recipe-images").upload(Ue,he,{cacheControl:"3600",upsert:!1});if(Qt)throw Qt;const{data:{publicUrl:yr}}=Ae.storage.from("recipe-images").getPublicUrl(Ue);ue(he),H(yr),S(""),L.success("Image uploaded successfully!")}catch(Ae){L.error(Ae.message||"Failed to upload image")}finally{ce(!1)}}},Z=async()=>{if(!B.trim()){L.error("Please enter a URL");return}if(!_N(B)){L.error("Please enter a valid URL");return}if([".jpg",".jpeg",".png",".gif",".webp",".bmp"].some(_e=>B.toLowerCase().includes(_e))){L.error("Please paste a recipe page URL, not a direct image link.");return}k(!0);try{L.loading("Extracting recipe...",{id:"extract"});const _e=await Wx(B);te(_e),_e.hasConflict?(J(!0),L.warning("Multiple recipe versions found! Please choose which to use.",{id:"extract"})):(z(!0),L.success("Recipe extracted! Review and edit before saving.",{id:"extract"})),k(!1)}catch(_e){_e.message.includes("waking up")?(L.info("Server starting up... retrying in 30 seconds",{id:"extract",duration:3e4}),setTimeout(async()=>{try{L.loading("Retrying extraction...",{id:"extract"});const Ae=await Wx(B);te(Ae),z(!0),L.success("Recipe extracted!",{id:"extract"})}catch(Ae){L.error(Ae.message||"Extraction failed. Please try again.",{id:"extract"})}finally{k(!1)}},3e4)):(L.error(_e.message||"Failed to extract recipe.",{id:"extract"}),k(!1))}},pe=()=>{if(!I)return;n(I.title.replace(/\s+on\s+instagram$/i,""));const V=I.ingredients.map(_e=>({quantity:_e.quantity||"",unit:_e.unit||"cup",name:_e.name||""}));a(V),l(I.instructions),d(String(wl(I.prepTime))),f(String(wl(I.cookTime))),m(String(qx(I.servings))),g(I.cuisineType),y(I.difficulty),v(I.mealTypes),N(I.dietaryTags),I.imageUrl&&S(I.imageUrl),C(I.videoUrl||"");const he=B?`Source: ${B}

`:"";M(he+(I.notes||"")),z(!1),te(null),L.success("Recipe loaded! Edit any details as needed.")},Ne=()=>{z(!1),te(null)},Le=()=>{const V={};return r.trim()||(V.title="Title is required"),b||(V.cuisineType="Cuisine type is required"),(!c||parseInt(c)<=0)&&(V.prepTime="Valid prep time is required"),(!h||parseInt(h)<=0)&&(V.cookTime="Valid cook time is required"),(!p||parseInt(p)<=0)&&(V.servings="Valid servings count is required"),x.length===0&&(V.mealTypes="Select at least one meal type"),s.filter(Ae=>Ae.name.trim()).length===0&&(V.ingredients="Add at least one ingredient"),i.filter(Ae=>Ae.trim()).length===0&&(V.instructions="Add at least one instruction"),Q(V),Object.keys(V).length===0},Me=async V=>{if(V.preventDefault(),ee(!0),!Le()){L.error("Please fill in all required fields");return}const he=s.filter(Ue=>Ue.name.trim()),_e=i.filter(Ue=>Ue.trim());let Ae=G||_.trim()||void 0,ut=null;const Xt=Ae&&!G&&(Ae.includes("instagram.com")||Ae.includes("cdninstagram.com")||Ae.includes("fbcdn.net")||Ae.includes("tiktok")||Ae.includes("tiktokcdn"));try{const Ue=L.loading("Creating recipe..."),{createRecipe:Qt}=await Co(async()=>{const{createRecipe:ot}=await Promise.resolve().then(()=>Km);return{createRecipe:ot}},void 0),yr={title:r.trim(),ingredients:he,instructions:_e,prepTime:wl(c),cookTime:wl(h),servings:qx(p),tags:[...x,...j],cuisineType:b,difficulty:w,dietaryTags:j,mealType:x,imageUrl:Ae,videoUrl:P.trim()||void 0,sourceUrl:B.trim()||void 0,notes:R.trim()||void 0,isSaved:!0},wr=await Qt(yr);if(console.log("[AddRecipe] Recipe created with ID:",wr.id),Xt&&Ae)try{L.loading("Downloading and storing image permanently...",{id:Ue}),console.log("[AddRecipe] Downloading Instagram image:",Ae);const ot=await cO(Ae,wr.id);if(console.log("[AddRecipe] Permanent URL:",ot),ot!==Ae){const{supabase:yn}=await Co(async()=>{const{supabase:wn}=await Promise.resolve().then(()=>hu);return{supabase:wn}},void 0),{error:nn}=await yn.from("public_recipes").update({image_url:ot}).eq("id",wr.id);nn?console.error("[AddRecipe] Failed to update with permanent URL:",nn):(console.log("[AddRecipe]  Updated recipe with permanent URL"),Ae=ot,ut=ot)}}catch(ot){console.error("[AddRecipe] Image storage failed, using original URL:",ot)}try{const{supabase:ot}=await Co(async()=>{const{supabase:nn}=await Promise.resolve().then(()=>hu);return{supabase:nn}},void 0),{data:{user:yn}}=await ot.auth.getUser();if(yn){const nn=ut||G||null,{error:wn}=await ot.from("posts").insert({user_id:yn.id,title:r.trim(),image_url:nn,video_url:P.trim()||null,caption:R.trim()||"Check out my recipe!",recipe_url:P.trim()||B.trim()||null,recipe_id:wr.id});wn?(console.error("[AddRecipe] Post creation failed:",wn),L.success("Recipe created successfully!",{id:Ue})):L.success("Recipe created and posted to your profile!",{id:Ue})}else L.success("Recipe created successfully!",{id:Ue})}catch(ot){console.error("[AddRecipe] Post creation error:",ot),L.success("Recipe created successfully!",{id:Ue})}t({type:"SAVE_RECIPE",payload:wr}),e&&e("my-recipes")}catch(Ue){console.error("[AddRecipe] Recipe creation failed:",Ue);const Qt=(Ue==null?void 0:Ue.message)||"Failed to create recipe. Please try again.";L.error(Qt)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pb-32",children:[o.jsx("div",{className:"w-full bg-gradient-to-br from-blue-50 to-white border-b border-slate-200 py-4 md:py-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 text-center",children:"Create New Recipe"}),o.jsx("p",{className:"text-sm sm:text-base text-slate-600 text-center mt-1",children:"See a recipe online you like, add it here!"})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-4",children:[o.jsxs(Je,{className:"border-slate-200 shadow-sm bg-gradient-to-br from-blue-50 to-white",children:[o.jsxs(St,{className:"pb-3",children:[o.jsxs(kt,{className:"flex items-center gap-2 text-lg",children:[o.jsx(mu,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),o.jsx("span",{className:"leading-tight",children:"Import from URL"})]}),o.jsx(It,{className:"text-xs leading-relaxed",children:o.jsxs("div",{className:"mt-2 space-y-2",children:[o.jsx("p",{className:"font-bold text-black pb-0.5 border-b-2 border-black inline-block",children:"INSTRUCTIONS"}),o.jsxs("ol",{className:"space-y-1.5 text-black ml-0.5",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"1."}),o.jsxs("span",{children:[o.jsx("span",{className:"font-bold text-black",children:"COPY"})," a link from online/social media &"," ",o.jsx("span",{className:"font-bold text-black",children:"PASTE"})," below"]})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"2."}),o.jsxs("span",{children:["Click ",o.jsx("span",{className:"font-bold text-blue-600",children:"Extract Recipe"})]})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"3."}),o.jsx("span",{children:"Update as needed  AI does its best, some recipes may need manual editing"})]})]}),o.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 space-y-1 text-xs",children:[o.jsx("p",{className:"text-emerald-600 font-semibold",children:"Supported: All recipe websites & most blogs"}),o.jsx("p",{className:"text-orange-600",children:"Warning: Instagram & TikTok (may take 3060 seconds)"}),o.jsx("p",{className:"text-slate-500",children:"Coming Soon: YouTube videos"})]})]})})]}),o.jsxs(tt,{className:"space-y-3",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(UE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 flex-shrink-0"}),o.jsx(lt,{value:B,onChange:V=>F(V.target.value),placeholder:"Paste recipe link...",className:"pl-10 h-10 text-sm placeholder:text-slate-400",disabled:A,onKeyDown:V=>V.key==="Enter"&&Z()})]}),o.jsx(re,{type:"button",onClick:async()=>{try{const V=await navigator.clipboard.readText();F(V),L.success("Pasted!")}catch{L.error("Failed to paste. Copy a URL first.")}},disabled:A,variant:"outline",className:"h-10",children:"Paste"})]}),o.jsx(re,{type:"button",onClick:Z,disabled:A||!B.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-12",children:A?o.jsxs(o.Fragment,{children:[o.jsx(ui,{className:"w-5 h-5 mr-2 animate-spin"}),"Extracting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(mu,{className:"w-5 h-5 mr-2"}),"Extract Recipe"]})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-slate-200"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-gradient-to-br from-slate-50 via-white to-slate-50 px-3 py-1 text-slate-500",children:"Or enter manually"})})]}),o.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[q&&Object.keys(D).length>0&&o.jsx(Je,{className:"border-red-200 bg-red-50",children:o.jsx(tt,{className:"pt-4 pb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center",children:o.jsx("span",{className:"text-red-600 text-sm font-bold",children:"!"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Please fix these errors:"}),o.jsx("ul",{className:"space-y-1",children:Object.values(D).map((V,he)=>o.jsxs("li",{className:"text-sm text-red-700 break-words",children:[" ",V]},he))})]})]})})}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Basic Information"}),o.jsx(It,{className:"text-xs",children:"Review extracted info"})]}),o.jsxs(tt,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"title",className:"text-sm font-medium",children:"Recipe Title *"}),o.jsx(lt,{id:"title",value:r,onChange:V=>n(V.target.value),placeholder:"ex. Chocolate Chip Cookies",className:`mt-1.5 text-base ${D.title?"border-red-500":""}`}),D.title&&o.jsx("p",{className:"text-xs text-red-500 mt-1",children:D.title})]}),(G||_)&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-square rounded-lg overflow-hidden border-2 border-slate-200 bg-slate-100",children:o.jsx("img",{src:G||_,alt:r||"Recipe",className:"w-full h-full object-cover",onError:V=>{const he=V.target.parentElement;he&&(he.innerHTML=`
                            <div class="w-full h-full flex flex-col items-center justify-center text-slate-500 p-4 text-center">
                              <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                              </svg>
                              <p class="text-xs font-medium">Image unavailable</p>
                              <p class="text-xs text-slate-400">(Instagram images may not work)</p>
                            </div>
                          `)}})}),G&&o.jsx("div",{className:"text-center",children:o.jsxs(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>{ue(null),H("")},className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs",children:[o.jsx(Rt,{className:"w-3 h-3 mr-1"}),"Remove image"]})})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsxs(qe,{htmlFor:"prepTime",className:"text-xs font-medium flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"}),"Prep (min) *"]}),o.jsx(lt,{id:"prepTime",type:"number",value:c,onChange:V=>d(V.target.value),placeholder:"15",className:`mt-1 text-base ${D.prepTime?"border-red-500":""}`})]}),o.jsxs("div",{children:[o.jsxs(qe,{htmlFor:"cookTime",className:"text-xs font-medium flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"}),"Cook (min) *"]}),o.jsx(lt,{id:"cookTime",type:"number",value:h,onChange:V=>f(V.target.value),placeholder:"30",className:`mt-1 text-base ${D.cookTime?"border-red-500":""}`})]}),o.jsxs("div",{children:[o.jsxs(qe,{htmlFor:"servings",className:"text-xs font-medium flex items-center gap-1",children:[o.jsx(Ds,{className:"w-3 h-3"}),"Servings *"]}),o.jsx(lt,{id:"servings",type:"number",value:p,onChange:V=>m(V.target.value),placeholder:"4",className:`mt-1 text-base ${D.servings?"border-red-500":""}`})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"cuisineType",className:"text-sm font-medium",children:"Cuisine Type *"}),o.jsxs(mn,{value:b,onValueChange:g,children:[o.jsx(Yr,{className:`mt-1.5 ${D.cuisineType?"border-red-500":""}`,children:o.jsx(pn,{placeholder:"Select cuisine"})}),o.jsx(Jr,{children:uO.map(V=>o.jsx(hr,{value:V,children:V},V))})]})]}),o.jsxs("div",{children:[o.jsxs(qe,{htmlFor:"difficulty",className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Vs,{className:"w-4 h-4"}),"Difficulty *"]}),o.jsxs(mn,{value:w,onValueChange:V=>y(V),children:[o.jsx(Yr,{className:"mt-1.5",children:o.jsx(pn,{})}),o.jsxs(Jr,{children:[o.jsx(hr,{value:"Easy",children:"Easy"}),o.jsx(hr,{value:"Medium",children:"Medium"}),o.jsx(hr,{value:"Hard",children:"Hard"})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs(qe,{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(pc,{className:"w-4 h-4"}),"Recipe Image"]}),o.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:"Upload or paste URL"}),o.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:je,className:"hidden",disabled:fe}),o.jsx(re,{type:"button",variant:"outline",onClick:()=>{var V;return(V=document.getElementById("imageUpload"))==null?void 0:V.click()},disabled:fe,className:"w-full h-12",children:fe?o.jsxs(o.Fragment,{children:[o.jsx(ui,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(_m,{className:"w-4 h-4 mr-2"}),"Upload Image"]})}),X&&o.jsxs("p",{className:"text-xs text-emerald-600 mt-2 flex items-center gap-1 truncate",children:[o.jsx(pc,{className:"w-3 h-3 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:X.name})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-slate-200"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-white px-2 text-slate-500",children:"or"})})]}),o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"imageUrl",className:"text-sm font-medium",children:"Image URL"}),o.jsx(lt,{id:"imageUrl",value:_,onChange:V=>{S(V.target.value),ue(null),H("")},placeholder:"https://example.com/image.jpg",className:"mt-1.5 text-base",disabled:!!X}),X&&o.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Clear uploaded image to use URL"})]})]})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Meal Types *"}),o.jsx(It,{className:"text-xs",children:"When is this served?"})]}),o.jsxs(tt,{children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:hO.map(V=>o.jsx(et,{variant:x.includes(V)?"default":"outline",className:"cursor-pointer transition-all hover:scale-105 text-sm py-1.5 px-3",onClick:()=>ae(V),children:V},V))}),D.mealTypes&&o.jsx("p",{className:"text-xs text-red-500 mt-2",children:D.mealTypes})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Dietary Tags"}),o.jsx(It,{className:"text-xs",children:"Select any that apply"})]}),o.jsx(tt,{children:o.jsx("div",{className:"flex flex-wrap gap-2",children:fO.map(V=>o.jsx(et,{variant:j.includes(V)?"default":"outline",className:"cursor-pointer transition-all hover:scale-105 text-sm py-1.5 px-3",onClick:()=>Y(V),children:V},V))})})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Ingredients *"}),o.jsx(It,{className:"text-xs",children:"List all ingredients"})]}),o.jsxs(tt,{className:"space-y-3",children:[s.map((V,he)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx(lt,{value:V.quantity,onChange:_e=>oe(he,"quantity",_e.target.value),placeholder:"1",className:"w-16 text-center text-base"}),o.jsxs(mn,{value:V.unit,onValueChange:_e=>oe(he,"unit",_e),children:[o.jsx(Yr,{className:"w-24",children:o.jsx(pn,{})}),o.jsx(Jr,{children:dO.map(_e=>o.jsx(hr,{value:_e,children:_e},_e))})]}),o.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:()=>K(he),disabled:s.length===1,className:"shrink-0",children:o.jsx(Rt,{className:"w-4 h-4"})})]}),o.jsx(lt,{value:V.name,onChange:_e=>oe(he,"name",_e.target.value),placeholder:"Ingredient name",className:"text-base"})]},he)),D.ingredients&&o.jsx("p",{className:"text-xs text-red-500",children:D.ingredients}),o.jsxs(re,{type:"button",variant:"outline",onClick:T,className:"w-full mt-2 h-11",children:[o.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Ingredient"]})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Instructions *"}),o.jsx(It,{className:"text-xs",children:"Step-by-step instructions"})]}),o.jsxs(tt,{className:"space-y-3",children:[i.map((V,he)=>o.jsxs("div",{className:"flex gap-2 items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-700 mt-2",children:he+1}),o.jsx(An,{value:V,onChange:_e=>W(he,_e.target.value),placeholder:"Describe this step...",className:"flex-1 min-h-[100px] text-base"}),o.jsx(re,{type:"button",variant:"ghost",size:"icon",onClick:()=>Te(he),disabled:i.length===1,className:"shrink-0 mt-2",children:o.jsx(Rt,{className:"w-4 h-4"})})]},he)),D.instructions&&o.jsx("p",{className:"text-xs text-red-500",children:D.instructions}),o.jsxs(re,{type:"button",variant:"outline",onClick:be,className:"w-full mt-2 h-11",children:[o.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Step"]})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-lg",children:"Notes"}),o.jsx(It,{className:"text-xs",children:"Tips or variations"})]}),o.jsx(tt,{children:o.jsx(An,{value:R,onChange:V=>M(V.target.value),placeholder:"Add any helpful notes...",className:"min-h-[120px] text-base"})})]}),o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex justify-center items-center gap-3",children:[e&&o.jsx(re,{type:"button",variant:"outline",onClick:()=>e("my-recipes"),className:"bg-white shadow-md border-2 border-gray-300 hover:bg-gray-50 px-6 h-12 text-base font-semibold rounded-full",children:"Cancel"}),o.jsx(re,{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-8 h-12 text-base font-semibold shadow-lg rounded-full transition-all transform active:scale-95",children:"Create Recipe"})]})})]}),"  ",o.jsx(Pt,{open:$,onOpenChange:z,children:o.jsxs(Nt,{className:"max-w-[95vw] sm:max-w-4xl max-h-[90vh] p-0",children:[o.jsxs(Gt,{className:"p-4 pb-3 border-b",children:[o.jsxs(Bt,{className:"text-xl flex items-center gap-2",children:[o.jsx(mu,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),o.jsx("span",{className:"leading-tight",children:"Review Recipe"})]}),"]"]}),I&&o.jsx($s,{className:"max-h-[calc(90vh-180px)]",children:o.jsxs("div",{className:"space-y-4 p-4",children:[I.imageUrl&&o.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-square rounded-lg overflow-hidden border-2 border-slate-200 bg-slate-100",children:o.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-full h-full object-cover",onError:V=>{const he=V.target.parentElement;he&&(he.innerHTML=`
                              <div class="w-full h-full flex flex-col items-center justify-center text-slate-500 p-4">
                                <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <p class="text-xs">No image</p>
                              </div>
                            `)}})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1 leading-tight",children:I.title}),I.description&&o.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:I.description})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(ln,{className:"w-3 h-3 text-slate-600"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Prep"})]}),o.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[I.prepTime," min"]})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(ln,{className:"w-3 h-3 text-slate-600"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Cook"})]}),o.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[I.cookTime," min"]})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[o.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[o.jsx(Ds,{className:"w-3 h-3 text-slate-600"}),o.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Serves"})]}),o.jsx("p",{className:"text-sm font-bold text-slate-900",children:I.servings})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx(et,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:I.cuisineType}),o.jsx(et,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 text-xs",children:I.difficulty}),I.mealTypes.map(V=>o.jsx(et,{variant:"outline",className:"text-xs",children:V},V)),I.dietaryTags.map(V=>o.jsx(et,{variant:"outline",className:"bg-amber-50 text-amber-700 text-xs",children:V},V))]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-2 text-sm",children:"Ingredients"}),o.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:o.jsx("ul",{className:"space-y-1.5",children:I.ingredients.map((V,he)=>o.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[o.jsx("span",{className:"text-slate-400 mt-0.5 flex-shrink-0",children:""}),o.jsxs("span",{className:"text-slate-700 break-words",children:[o.jsxs("span",{className:"font-semibold",children:[V.quantity," ",V.unit]})," ",V.name]})]},he))})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-2 text-sm",children:"Instructions"}),o.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:o.jsx("ol",{className:"space-y-2",children:I.instructions.map((V,he)=>o.jsxs("li",{className:"flex gap-2 text-xs",children:[o.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-slate-900 text-white flex items-center justify-center text-xs font-bold",children:he+1}),o.jsx("span",{className:"text-slate-700 pt-0.5 break-words",children:V})]},he))})})]}),I.notes&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-1.5 text-sm",children:"Notes"}),o.jsx("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:o.jsx("p",{className:"text-xs text-slate-700 break-words",children:I.notes})})]})]})]})}),o.jsxs(ds,{className:"sticky bottom-0 bg-white border-t p-4 flex flex-row justify-center items-center gap-3 shadow-lg",children:[o.jsx(re,{type:"button",variant:"outline",onClick:Ne,className:"px-6 h-12 text-base font-semibold rounded-full",children:"Cancel"}),o.jsx(re,{type:"button",onClick:pe,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 h-12 text-base font-semibold rounded-full shadow-lg",children:"Use This Recipe"})]})]})}),o.jsx(Pt,{open:O,onOpenChange:J,children:o.jsxs(Nt,{className:"max-w-[95vw] sm:max-w-5xl max-h-[90vh] p-0",children:[o.jsxs(Gt,{className:"p-4 pb-3 border-b",children:[o.jsx(Bt,{className:"text-lg leading-tight",children:"Multiple Versions Found"}),o.jsx(Kr,{className:"text-xs",children:"Choose which version to use:"})]}),o.jsx($s,{className:"h-[60vh] p-4",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(I==null?void 0:I.structuredVersion)&&o.jsxs(Je,{className:"cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>{I.structuredVersion&&(te(I.structuredVersion),J(!1),z(!0),L.success("Using recipe card version"))},children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-base",children:"Recipe Card"}),o.jsx(It,{className:"text-xs",children:"From structured data"})]}),o.jsxs(tt,{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[o.jsxs(et,{variant:"secondary",children:[I.structuredVersion.servings," servings"]}),o.jsxs(et,{variant:"secondary",children:[I.structuredVersion.prepTime,"min"]}),o.jsxs(et,{variant:"secondary",children:[I.structuredVersion.cookTime,"min"]})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-xs mb-1.5",children:["Ingredients (",I.structuredVersion.ingredients.length,"):"]}),o.jsxs("ul",{className:"space-y-1 text-xs text-slate-600 max-h-32 overflow-y-auto",children:[I.structuredVersion.ingredients.slice(0,6).map((V,he)=>o.jsxs("li",{className:"break-words",children:[" ",V.quantity," ",V.unit," ",V.name]},he)),I.structuredVersion.ingredients.length>6&&o.jsxs("li",{className:"text-slate-400",children:["+ ",I.structuredVersion.ingredients.length-6," more..."]})]})]})]})]}),(I==null?void 0:I.aiVersion)&&o.jsxs(Je,{className:"cursor-pointer hover:border-green-500 transition-colors",onClick:()=>{I.aiVersion&&(te(I.aiVersion),J(!1),z(!0),L.success("Using blog content version"))},children:[o.jsxs(St,{className:"pb-3",children:[o.jsx(kt,{className:"text-base",children:"Blog Content"}),o.jsx(It,{className:"text-xs",children:"From blog post"})]}),o.jsxs(tt,{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[o.jsxs(et,{variant:"secondary",children:[I.aiVersion.servings," servings"]}),o.jsxs(et,{variant:"secondary",children:[I.aiVersion.prepTime,"min"]}),o.jsxs(et,{variant:"secondary",children:[I.aiVersion.cookTime,"min"]})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-semibold text-xs mb-1.5",children:["Ingredients (",I.aiVersion.ingredients.length,"):"]}),o.jsxs("ul",{className:"space-y-1 text-xs text-slate-600 max-h-32 overflow-y-auto",children:[I.aiVersion.ingredients.slice(0,6).map((V,he)=>o.jsxs("li",{className:"break-words",children:[" ",V.quantity," ",V.unit," ",V.name]},he)),I.aiVersion.ingredients.length>6&&o.jsxs("li",{className:"text-slate-400",children:["+ ",I.aiVersion.ingredients.length-6," more..."]})]})]})]})]})]})}),o.jsx(ds,{className:"p-4 border-t",children:o.jsx(re,{variant:"outline",onClick:()=>J(!1),className:"w-full sm:w-auto",children:"Cancel"})})]})})]})]})}var _d="Collapsible",[pO,SN]=ar(_d),[gO,hp]=pO(_d),kN=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:a,onOpenChange:i,...l}=e,[c,d]=Qr({prop:n,defaultProp:s??!1,onChange:i,caller:_d});return o.jsx(gO,{scope:r,disabled:a,contentId:Gr(),open:c,onOpenToggle:u.useCallback(()=>d(h=>!h),[d]),children:o.jsx(Pe.div,{"data-state":mp(c),"data-disabled":a?"":void 0,...l,ref:t})})});kN.displayName=_d;var CN="CollapsibleTrigger",EN=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,s=hp(CN,r);return o.jsx(Pe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":mp(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:ge(e.onClick,s.onOpenToggle)})});EN.displayName=CN;var fp="CollapsibleContent",RN=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=hp(fp,e.__scopeCollapsible);return o.jsx(ir,{present:r||s.open,children:({present:a})=>o.jsx(xO,{...n,ref:t,present:a})})});RN.displayName=fp;var xO=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:s,...a}=e,i=hp(fp,r),[l,c]=u.useState(n),d=u.useRef(null),h=Oe(t,d),f=u.useRef(0),p=f.current,m=u.useRef(0),b=m.current,g=i.open||l,w=u.useRef(g),y=u.useRef(void 0);return u.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),Tt(()=>{const x=d.current;if(x){y.current=y.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const v=x.getBoundingClientRect();f.current=v.height,m.current=v.width,w.current||(x.style.transitionDuration=y.current.transitionDuration,x.style.animationName=y.current.animationName),c(n)}},[i.open,n]),o.jsx(Pe.div,{"data-state":mp(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&s})});function mp(e){return e?"open":"closed"}var vO=kN,yO=EN,wO=RN,rn="Accordion",bO=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[pp,jO,NO]=Oi(rn),[Sd]=ar(rn,[NO,SN]),gp=SN(),PN=se.forwardRef((e,t)=>{const{type:r,...n}=e,s=n,a=n;return o.jsx(pp.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?o.jsx(CO,{...a,ref:t}):o.jsx(kO,{...s,ref:t})})});PN.displayName=rn;var[TN,_O]=Sd(rn),[AN,SO]=Sd(rn,{collapsible:!1}),kO=se.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:a=!1,...i}=e,[l,c]=Qr({prop:r,defaultProp:n??"",onChange:s,caller:rn});return o.jsx(TN,{scope:e.__scopeAccordion,value:se.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:se.useCallback(()=>a&&c(""),[a,c]),children:o.jsx(AN,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(IN,{...i,ref:t})})})}),CO=se.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=e,[i,l]=Qr({prop:r,defaultProp:n??[],onChange:s,caller:rn}),c=se.useCallback(h=>l((f=[])=>[...f,h]),[l]),d=se.useCallback(h=>l((f=[])=>f.filter(p=>p!==h)),[l]);return o.jsx(TN,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:d,children:o.jsx(AN,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(IN,{...a,ref:t})})})}),[EO,kd]=Sd(rn),IN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:a="vertical",...i}=e,l=se.useRef(null),c=Oe(l,t),d=jO(r),f=oa(s)==="ltr",p=ge(e.onKeyDown,m=>{var P;if(!bO.includes(m.key))return;const b=m.target,g=d().filter(C=>{var R;return!((R=C.ref.current)!=null&&R.disabled)}),w=g.findIndex(C=>C.ref.current===b),y=g.length;if(w===-1)return;m.preventDefault();let x=w;const v=0,j=y-1,N=()=>{x=w+1,x>j&&(x=v)},_=()=>{x=w-1,x<v&&(x=j)};switch(m.key){case"Home":x=v;break;case"End":x=j;break;case"ArrowRight":a==="horizontal"&&(f?N():_());break;case"ArrowDown":a==="vertical"&&N();break;case"ArrowLeft":a==="horizontal"&&(f?_():N());break;case"ArrowUp":a==="vertical"&&_();break}const S=x%y;(P=g[S].ref.current)==null||P.focus()});return o.jsx(EO,{scope:r,disabled:n,direction:s,orientation:a,children:o.jsx(pp.Slot,{scope:r,children:o.jsx(Pe.div,{...i,"data-orientation":a,ref:c,onKeyDown:n?void 0:p})})})}),Pc="AccordionItem",[RO,xp]=Sd(Pc),ON=se.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...s}=e,a=kd(Pc,r),i=_O(Pc,r),l=gp(r),c=Gr(),d=n&&i.value.includes(n)||!1,h=a.disabled||e.disabled;return o.jsx(RO,{scope:r,open:d,disabled:h,triggerId:c,children:o.jsx(vO,{"data-orientation":a.orientation,"data-state":FN(d),...l,...s,ref:t,disabled:h,open:d,onOpenChange:f=>{f?i.onItemOpen(n):i.onItemClose(n)}})})});ON.displayName=Pc;var MN="AccordionHeader",DN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=kd(rn,r),a=xp(MN,r);return o.jsx(Pe.h3,{"data-orientation":s.orientation,"data-state":FN(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:t})});DN.displayName=MN;var nf="AccordionTrigger",$N=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=kd(rn,r),a=xp(nf,r),i=SO(nf,r),l=gp(r);return o.jsx(pp.ItemSlot,{scope:r,children:o.jsx(yO,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...n,ref:t})})});$N.displayName=nf;var LN="AccordionContent",UN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=kd(rn,r),a=xp(LN,r),i=gp(r);return o.jsx(wO,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...i,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});UN.displayName=LN;function FN(e){return e?"open":"closed"}var PO=PN,TO=ON,AO=DN,zN=$N,BN=UN;const Hx=PO,sf=u.forwardRef(({className:e,...t},r)=>o.jsx(TO,{ref:r,className:Ee("border-b",e),...t}));sf.displayName="AccordionItem";const of=u.forwardRef(({className:e,children:t,...r},n)=>o.jsx(AO,{className:"flex",children:o.jsxs(zN,{ref:n,className:Ee("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,o.jsx(vb,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));of.displayName=zN.displayName;const af=u.forwardRef(({className:e,children:t,...r},n)=>o.jsx(BN,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:o.jsx("div",{className:Ee("pb-4 pt-0",e),children:t})}));af.displayName=BN.displayName;function Ir(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Pa(e,t){const r=Ir(e);return isNaN(t)?fs(e,NaN):(t&&r.setDate(r.getDate()+t),r)}const VN=6048e5,IO=864e5;let OO={};function Cd(){return OO}function Ys(e,t){var l,c,d,h;const r=Cd(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Ir(e),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Tc(e){return Ys(e,{weekStartsOn:1})}function WN(e){const t=Ir(e),r=t.getFullYear(),n=fs(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Tc(n),a=fs(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=Tc(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Ac(e){const t=Ir(e);return t.setHours(0,0,0,0),t}function Gx(e){const t=Ir(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function MO(e,t){const r=Ac(e),n=Ac(t),s=+r-Gx(r),a=+n-Gx(n);return Math.round((s-a)/IO)}function DO(e){const t=WN(e),r=fs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Tc(r)}function qN(e,t){const r=t*7;return Pa(e,r)}function bl(e,t){const r=Ac(e),n=Ac(t);return+r==+n}function $O(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function LO(e){if(!$O(e)&&typeof e!="number")return!1;const t=Ir(e);return!isNaN(Number(t))}function UO(e){const t=Ir(e),r=fs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const FO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zO=(e,t,r)=>{let n;const s=FO[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Eu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const BO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qO={date:Eu({formats:BO,defaultWidth:"full"}),time:Eu({formats:VO,defaultWidth:"full"}),dateTime:Eu({formats:WO,defaultWidth:"full"})},HO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GO=(e,t,r,n)=>HO[e];function wa(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const KO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eM=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tM={ordinalNumber:eM,era:wa({values:KO,defaultWidth:"wide"}),quarter:wa({values:YO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:wa({values:JO,defaultWidth:"wide"}),day:wa({values:XO,defaultWidth:"wide"}),dayPeriod:wa({values:QO,defaultWidth:"wide",formattingValues:ZO,defaultFormattingWidth:"wide"})};function ba(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?nM(l,f=>f.test(i)):rM(l,f=>f.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const h=t.slice(i.length);return{value:d,rest:h}}}function rM(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function nM(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function sM(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const oM=/^(\d+)(th|st|nd|rd)?/i,aM=/\d+/i,iM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lM={any:[/^b/i,/^(a|c)/i]},cM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dM={any:[/1/i,/2/i,/3/i,/4/i]},uM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xM={ordinalNumber:sM({matchPattern:oM,parsePattern:aM,valueCallback:e=>parseInt(e,10)}),era:ba({matchPatterns:iM,defaultMatchWidth:"wide",parsePatterns:lM,defaultParseWidth:"any"}),quarter:ba({matchPatterns:cM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ba({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:hM,defaultParseWidth:"any"}),day:ba({matchPatterns:fM,defaultMatchWidth:"wide",parsePatterns:mM,defaultParseWidth:"any"}),dayPeriod:ba({matchPatterns:pM,defaultMatchWidth:"any",parsePatterns:gM,defaultParseWidth:"any"})},vM={code:"en-US",formatDistance:zO,formatLong:qO,formatRelative:GO,localize:tM,match:xM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yM(e){const t=Ir(e);return MO(t,UO(t))+1}function wM(e){const t=Ir(e),r=+Tc(t)-+DO(t);return Math.round(r/VN)+1}function HN(e,t){var h,f,p,m;const r=Ir(e),n=r.getFullYear(),s=Cd(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=fs(e,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const l=Ys(i,t),c=fs(e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const d=Ys(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function bM(e,t){var l,c,d,h;const r=Cd(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=HN(e,t),a=fs(e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Ys(a,t)}function jM(e,t){const r=Ir(e),n=+Ys(r,t)-+bM(r,t);return Math.round(n/VN)+1}function Ge(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Wn={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ge(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ge(r+1,2)},d(e,t){return Ge(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ge(e.getHours()%12||12,t.length)},H(e,t){return Ge(e.getHours(),t.length)},m(e,t){return Ge(e.getMinutes(),t.length)},s(e,t){return Ge(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Ge(s,t.length)}},ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Kx={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Wn.y(e,t)},Y:function(e,t,r,n){const s=HN(e,n),a=s>0?s:1-s;if(t==="YY"){const i=a%100;return Ge(i,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ge(a,t.length)},R:function(e,t){const r=WN(e);return Ge(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ge(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ge(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ge(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Wn.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ge(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=jM(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Ge(s,t.length)},I:function(e,t,r){const n=wM(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ge(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Wn.d(e,t)},D:function(e,t,r){const n=yM(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ge(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ge(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ge(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return Ge(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=ho.noon:n===0?s=ho.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=ho.evening:n>=12?s=ho.afternoon:n>=4?s=ho.morning:s=ho.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Wn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Wn.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Wn.s(e,t)},S:function(e,t){return Wn.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Jx(n);case"XXXX":case"XX":return ks(n);case"XXXXX":case"XXX":default:return ks(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Jx(n);case"xxxx":case"xx":return ks(n);case"xxxxx":case"xxx":default:return ks(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Yx(n,":");case"OOOO":default:return"GMT"+ks(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Yx(n,":");case"zzzz":default:return"GMT"+ks(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Ge(n,t.length)},T:function(e,t,r){const n=e.getTime();return Ge(n,t.length)}};function Yx(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+Ge(a,2)}function Jx(e,t){return e%60===0?(e>0?"-":"+")+Ge(Math.abs(e)/60,2):ks(e,t)}function ks(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Ge(Math.trunc(n/60),2),a=Ge(n%60,2);return r+s+t+a}const Xx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},GN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},NM=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Xx(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Xx(n,t)).replace("{{time}}",GN(s,t))},_M={p:GN,P:NM},SM=/^D+$/,kM=/^Y+$/,CM=["D","DD","YY","YYYY"];function EM(e){return SM.test(e)}function RM(e){return kM.test(e)}function PM(e,t,r){const n=TM(e,t,r);if(console.warn(n),CM.includes(e))throw new RangeError(n)}function TM(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OM=/^'([^]*?)'?$/,MM=/''/g,DM=/[a-zA-Z]/;function jr(e,t,r){var h,f,p,m;const n=Cd(),s=n.locale??vM,a=n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,l=Ir(e);if(!LO(l))throw new RangeError("Invalid time value");let c=t.match(IM).map(b=>{const g=b[0];if(g==="p"||g==="P"){const w=_M[g];return w(b,s.formatLong)}return b}).join("").match(AM).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:$M(b)};if(Kx[g])return{isToken:!0,value:b};if(g.match(DM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(RM(g)||EM(g))&&PM(g,t,String(e));const w=Kx[g[0]];return w(l,g,s.localize,d)}).join("")}function $M(e){const t=e.match(OM);return t?t[1].replace(MM,"'"):e}function LM(e,t){return qN(e,-t)}const UM={cup:{type:"volume",toBase:240},cups:{type:"volume",toBase:240},c:{type:"volume",toBase:240},tablespoon:{type:"volume",toBase:15},tablespoons:{type:"volume",toBase:15},tbsp:{type:"volume",toBase:15},teaspoon:{type:"volume",toBase:5},teaspoons:{type:"volume",toBase:5},tsp:{type:"volume",toBase:5},milliliter:{type:"volume",toBase:1},milliliters:{type:"volume",toBase:1},ml:{type:"volume",toBase:1},liter:{type:"volume",toBase:1e3},liters:{type:"volume",toBase:1e3},l:{type:"volume",toBase:1e3},"fluid ounce":{type:"volume",toBase:30},"fluid ounces":{type:"volume",toBase:30},"fl oz":{type:"volume",toBase:30},pint:{type:"volume",toBase:480},pints:{type:"volume",toBase:480},pt:{type:"volume",toBase:480},quart:{type:"volume",toBase:960},quarts:{type:"volume",toBase:960},qt:{type:"volume",toBase:960},gallon:{type:"volume",toBase:3840},gallons:{type:"volume",toBase:3840},gal:{type:"volume",toBase:3840},gram:{type:"weight",toBase:1},grams:{type:"weight",toBase:1},g:{type:"weight",toBase:1},kilogram:{type:"weight",toBase:1e3},kilograms:{type:"weight",toBase:1e3},kg:{type:"weight",toBase:1e3},ounce:{type:"weight",toBase:28.35},ounces:{type:"weight",toBase:28.35},oz:{type:"weight",toBase:28.35},pound:{type:"weight",toBase:453.59},pounds:{type:"weight",toBase:453.59},lb:{type:"weight",toBase:453.59},lbs:{type:"weight",toBase:453.59},milligram:{type:"weight",toBase:.001},milligrams:{type:"weight",toBase:.001},mg:{type:"weight",toBase:.001},piece:{type:"count",toBase:1},pieces:{type:"count",toBase:1},whole:{type:"count",toBase:1},item:{type:"count",toBase:1},items:{type:"count",toBase:1},clove:{type:"count",toBase:1},cloves:{type:"count",toBase:1},slice:{type:"count",toBase:1},slices:{type:"count",toBase:1},"":{type:"count",toBase:1}};function KN(e){return e.toLowerCase().trim()}function Ic(e){const t=KN(e);return UM[t]||null}function FM(e,t){const r=Ic(e),n=Ic(t);return!r||!n?!1:r.type===n.type}function Qx(e,t){const r=Ic(t);return r?e*r.toBase:null}function zM(e,t){return t==="volume"?e>=3840?{quantity:e/3840,unit:"gallon"}:e>=960?{quantity:e/960,unit:"quart"}:e>=240?{quantity:e/240,unit:"cup"}:e>=15?{quantity:e/15,unit:"tbsp"}:{quantity:e/5,unit:"tsp"}:t==="weight"?e>=1e3?{quantity:e/1e3,unit:"kg"}:e>=453.59?{quantity:e/453.59,unit:"lb"}:e>=28.35?{quantity:e/28.35,unit:"oz"}:{quantity:e,unit:"g"}:{quantity:e,unit:""}}function BM(e){if(e=e.trim(),e.includes("/")){const r=e.split(/\s+/);let n=0;for(const s of r)if(s.includes("/")){const[a,i]=s.split("/").map(l=>parseFloat(l));!isNaN(a)&&!isNaN(i)&&i!==0&&(n+=a/i)}else{const a=parseFloat(s);isNaN(a)||(n+=a)}return n}const t=parseFloat(e);return isNaN(t)?0:t}function VM(e){if(e===Math.floor(e))return e.toString();const t={"0.25":"1/4","0.33":"1/3","0.5":"1/2","0.66":"2/3","0.67":"2/3","0.75":"3/4"},r=Math.floor(e),n=e-r,s=n.toFixed(2);return t[s]?r>0?`${r} ${t[s]}`:t[s]:n<.01?r.toString():e.toFixed(2).replace(/\.?0+$/,"")}const WM=[{name:"Produce",sortOrder:0},{name:"Meat & Seafood",sortOrder:1},{name:"Dairy & Eggs",sortOrder:2},{name:"Bakery",sortOrder:3},{name:"Pantry",sortOrder:4},{name:"Frozen",sortOrder:5},{name:"Beverages",sortOrder:6},{name:"Other",sortOrder:7}],qM={tomato:"Produce",tomatoes:"Produce",onion:"Produce",onions:"Produce",garlic:"Produce",carrot:"Produce",carrots:"Produce",potato:"Produce",potatoes:"Produce",lettuce:"Produce",spinach:"Produce",broccoli:"Produce","bell pepper":"Produce",peppers:"Produce",mushroom:"Produce",mushrooms:"Produce",cucumber:"Produce",zucchini:"Produce",apple:"Produce",apples:"Produce",banana:"Produce",bananas:"Produce",lemon:"Produce",lemons:"Produce",lime:"Produce",limes:"Produce",avocado:"Produce",cilantro:"Produce",parsley:"Produce",basil:"Produce",chicken:"Meat & Seafood",beef:"Meat & Seafood",pork:"Meat & Seafood",turkey:"Meat & Seafood",salmon:"Meat & Seafood",shrimp:"Meat & Seafood",fish:"Meat & Seafood",bacon:"Meat & Seafood",sausage:"Meat & Seafood","ground beef":"Meat & Seafood",milk:"Dairy & Eggs",cheese:"Dairy & Eggs",butter:"Dairy & Eggs",eggs:"Dairy & Eggs",egg:"Dairy & Eggs",yogurt:"Dairy & Eggs",cream:"Dairy & Eggs","sour cream":"Dairy & Eggs",cheddar:"Dairy & Eggs",mozzarella:"Dairy & Eggs",parmesan:"Dairy & Eggs",bread:"Bakery",tortilla:"Bakery",tortillas:"Bakery",buns:"Bakery",rolls:"Bakery",bagels:"Bakery",croissant:"Bakery",rice:"Pantry",pasta:"Pantry",flour:"Pantry",sugar:"Pantry",salt:"Pantry",pepper:"Pantry",oil:"Pantry","olive oil":"Pantry","vegetable oil":"Pantry",vinegar:"Pantry","soy sauce":"Pantry",beans:"Pantry",chickpeas:"Pantry",lentils:"Pantry","tomato sauce":"Pantry","tomato paste":"Pantry",broth:"Pantry",stock:"Pantry",honey:"Pantry","peanut butter":"Pantry","canned tomatoes":"Pantry","ice cream":"Frozen","frozen vegetables":"Frozen","frozen peas":"Frozen","frozen corn":"Frozen",water:"Beverages",juice:"Beverages",coffee:"Beverages",tea:"Beverages",soda:"Beverages"};function YN(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/[^a-z0-9\s]/g,"")}function HM(e,t){var s;const r=YN(e);for(const[a,i]of Object.entries(qM))if(r.includes(a)){const l=t.find(c=>c.name===i);if(l)return l.id}const n=t.find(a=>a.name==="Other");return(n==null?void 0:n.id)||((s=t[0])==null?void 0:s.id)||""}function JN(){return WM.map((e,t)=>({id:`cat-${t}`,name:e.name,sortOrder:e.sortOrder}))}function GM(e,t){const r=JN(),n=new Map;for(const s of e){const a=t.find(l=>l.id===s.recipeId);if(!a)continue;const i=s.servings/a.servings;for(const l of a.ingredients){const c=BM(l.quantity)*i,h=`${YN(l.name)}-${KN(l.unit)}`,f=n.get(h);if(f){if(FM(f.unit,l.unit)){const p=Qx(f.quantity,f.unit)||0,m=Qx(c,l.unit)||0,b=p+m,g=Ic(f.unit);if(g){const w=zM(b,g.type);f.quantity=w.quantity,f.unit=w.unit}}else f.quantity+=c;f.sourceRecipeIds.includes(a.id)||f.sourceRecipeIds.push(a.id)}else{const p=HM(l.name,r),m={id:`item-${Date.now()}-${Math.random()}`,name:l.name,quantity:c,unit:l.unit,categoryId:p,checked:!1,sourceRecipeIds:[a.id]};n.set(h,m)}}}return Array.from(n.values())}function KM(e,t){const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${n}-${s}`}function YM(e){const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n,0,0,0,0)}const Ru=["Breakfast","Lunch","Dinner","Snack"];function JM({onNavigate:e}={}){const{state:t,dispatch:r}=Qs(),[n,s]=u.useState(Ys(new Date,{weekStartsOn:0})),[a,i]=u.useState(1),[l,c]=u.useState([]),[d,h]=u.useState(!0),[f,p]=u.useState(""),[m,b]=u.useState(!1),[g,w]=u.useState(null),[y,x]=u.useState(""),[v,j]=u.useState(""),[N,_]=u.useState(!1),[S,P]=u.useState(null),[C,R]=u.useState(null),[M,D]=u.useState(null),[Q,q]=u.useState(!1),[ee,B]=u.useState(window.innerWidth<768),[F,A]=u.useState(new Date);u.useEffect(()=>{const W=()=>B(window.innerWidth<768);return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),u.useEffect(()=>{const W=localStorage.getItem("userId");W?p(W):h(!1)},[]),u.useEffect(()=>{I()},[f,n,a,t.mealPlan,t.savedRecipes]);const k=u.useMemo(()=>{const W={};return t.savedRecipes.forEach(ae=>{const Y=ae.cuisineType||"Other";W[Y]||(W[Y]=[]),W[Y].push(ae)}),Object.entries(W).sort(([ae],[Y])=>ae.localeCompare(Y)).map(([ae,Y])=>({cuisine:ae,recipes:Y}))},[t.savedRecipes]),I=async()=>{h(!0);try{const W=t.mealPlan.map(ae=>{const Y=t.savedRecipes.find(je=>je.id===ae.recipeId);return{...ae,recipe:Y}});c(W)}catch(W){console.error("Error loading meal plans:",W),L.error("Failed to load meal plans")}finally{h(!1)}},te=async()=>{try{const W=t.mealPlan.map(Y=>({recipeId:Y.recipeId,servings:Y.servings||2})),ae=GM(W,t.savedRecipes);r({type:"UPDATE_GROCERY_LIST",payload:ae}),L.success("Grocery list updated!")}catch(W){console.error("Error syncing grocery list:",W),L.error("Failed to update grocery list")}},$=(W,ae)=>l.find(Y=>bl(YM(Y.date),W)&&Y.mealType===ae),z=W=>{(M==null?void 0:M.id)===W.id?(D(null),L.info("Recipe deselected")):(D(W),L.success("Recipe selected - now click a meal slot to assign"),ee&&q(!1))},X=async(W,ae,Y)=>{const je=KM(W),Z=$(W,ae);try{r(Z?{type:"UPDATE_MEAL_PLAN",payload:{id:Z.id,recipeId:Y.id,date:je,mealType:ae,servings:Y.servings}}:{type:"ADD_MEAL_PLAN",payload:{id:`meal-${Date.now()}`,recipeId:Y.id,date:je,mealType:ae,servings:Y.servings}}),await I(),await te()}catch(pe){throw console.error("Error adding meal:",pe),pe}},ue=async(W,ae)=>{const Y=M;if(Y)try{await X(W,ae,Y),L.success("Meal assigned to calendar"),D(null)}catch{L.error("Failed to add meal")}},G=async W=>{try{r({type:"REMOVE_MEAL_PLAN",payload:W}),L.success("Meal removed"),await I(),await te()}catch(ae){console.error("Error removing meal:",ae),L.error("Failed to remove meal")}},H=()=>{s(W=>LM(W,a))},fe=()=>{s(W=>qN(W,a))},ce=W=>{w(W),b(!0)},O=async()=>{if(!g||!y||!v){L.error("Please select both date and meal type");return}const W=new Date(y);try{await X(W,v,g),L.success("Meal added to calendar"),b(!1),w(null),x(""),j("")}catch{L.error("Failed to add meal")}},J=(W,ae)=>{P(W),R(ae),_(!0)},T=async W=>{if(!S||!C)return;const ae=t.savedRecipes.find(Y=>Y.id===W);if(ae)try{await X(S,C,ae),L.success("Meal added to calendar"),_(!1),P(null),R(null)}catch{L.error("Failed to add meal")}},K=()=>{const W=[],ae=a*7;for(let Y=0;Y<ae;Y++)W.push(Pa(n,Y));return W},oe=()=>{const W=Ys(new Date,{weekStartsOn:0});s(W),A(new Date)},be=W=>{i(W),A(n)},Te=()=>o.jsx("div",{className:`${ee?"fixed inset-0 z-40 bg-black/50":""}`,onClick:()=>ee&&q(!1),children:o.jsxs("div",{className:`${ee?"fixed left-0 top-0 bottom-0 w-80 bg-white shadow-lg":"w-80 border-r border-slate-200 bg-white shadow-sm"} flex flex-col`,onClick:W=>W.stopPropagation(),children:[o.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:o.jsx(sx,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"My Recipes"}),o.jsx("p",{className:"text-xs text-slate-600",children:"Select & click slot"})]})]}),ee&&o.jsx("button",{onClick:()=>q(!1),className:"p-1",children:o.jsx(Rt,{className:"w-6 h-6"})})]}),o.jsx($s,{className:"flex-1",children:o.jsx("div",{className:"p-4",children:t.savedRecipes.length===0?o.jsxs("div",{className:"text-center py-8 px-4",children:[o.jsx(sx,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-slate-500",children:"No saved recipes yet. Save recipes from the Discover page."})]}):o.jsx(Hx,{type:"multiple",defaultValue:k.map(W=>W.cuisine),className:"space-y-2",children:k.map(({cuisine:W,recipes:ae})=>o.jsxs(sf,{value:W,className:"border rounded-lg px-4 bg-slate-50",children:[o.jsx(of,{className:"hover:no-underline py-3",children:o.jsxs("div",{className:"flex items-center justify-between w-full pr-2",children:[o.jsx("span",{className:"font-semibold text-slate-900",children:W}),o.jsx(et,{variant:"secondary",children:ae.length})]})}),o.jsx(af,{className:"pb-3",children:o.jsx("div",{className:"space-y-3 pt-2",children:ae.map(Y=>{var je,Z;return o.jsx("div",{className:"group",children:o.jsx(Je,{className:`overflow-hidden hover:shadow-md transition-all duration-200 ${(M==null?void 0:M.id)===Y.id?"border-2 border-orange-500 bg-orange-50":"border-slate-200 hover:border-blue-300 bg-white"}`,children:o.jsxs(tt,{className:"p-0",children:[o.jsxs("div",{onClick:()=>z(Y),className:"flex gap-3 p-3 cursor-pointer",children:[Y.imageUrl&&o.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden shrink-0 bg-slate-100",children:o.jsx("img",{src:(je=Y.imageUrl)!=null&&je.includes("instagram.com")||(Z=Y.imageUrl)!=null&&Z.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(Y.imageUrl.replace(/&amp;/g,"&"))}`:Y.imageUrl,alt:Y.title,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[o.jsx("h3",{className:"font-semibold text-sm text-slate-900 line-clamp-2",children:Y.title}),(M==null?void 0:M.id)===Y.id&&o.jsx(mc,{className:"w-4 h-4 text-orange-600 shrink-0"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"}),o.jsxs("span",{children:[Y.prepTime+Y.cookTime,"m"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ds,{className:"w-3 h-3"}),o.jsx("span",{children:Y.servings})]})]}),Y.mealType.length>0&&o.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:Y.mealType.slice(0,2).map(pe=>o.jsx(et,{variant:"secondary",className:"text-xs",children:pe},pe))})]})]}),o.jsx("div",{className:"px-3 pb-3",children:o.jsxs(re,{variant:"outline",size:"sm",className:"w-full",onClick:pe=>{pe.stopPropagation(),ce(Y)},children:[o.jsx(hn,{className:"w-4 h-4 mr-1"}),"Add to Plan"]})})]})})},Y.id)})})})]},W))})})})]})});return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 flex flex-col md:flex-row",children:[!ee&&o.jsx(Te,{}),ee&&Q&&o.jsx(Te,{}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx("div",{className:"border-b border-slate-200 bg-white shadow-sm",children:o.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-blue-600 to-cyan-600 flex items-center justify-center",children:o.jsx(Yo,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"Meal Planner"}),o.jsx("p",{className:"text-xs md:text-sm text-slate-600",children:"Select recipe, click slot"})]})]}),ee&&o.jsx("button",{onClick:()=>q(!Q),className:"p-2 hover:bg-slate-100 rounded-lg",children:o.jsx(wm,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center",children:[o.jsxs(re,{variant:"destructive",size:"sm",onClick:()=>{confirm("Clear all meal plans?")&&(r({type:"CLEAR_MEAL_PLAN"}),L.success("All meals cleared"))},className:"gap-2 text-xs md:text-sm",children:[o.jsx(rr,{className:"w-4 h-4"}),"Clear"]}),!ee&&o.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 rounded-lg p-1",children:[o.jsx(re,{variant:a===1?"default":"ghost",size:"sm",onClick:()=>be(1),className:"h-8 text-xs",children:"1W"}),o.jsx(re,{variant:a===4?"default":"ghost",size:"sm",onClick:()=>be(4),className:"h-8 text-xs",children:"4W"})]})]}),o.jsxs(re,{onClick:()=>e==null?void 0:e("grocery-list"),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium shadow-lg text-xs md:text-sm",children:[o.jsx(Ws,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Grocery List"]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(re,{variant:"outline",size:"sm",onClick:H,className:"h-8 w-8 p-0",children:o.jsx($h,{className:"w-4 h-4"})}),o.jsx(re,{variant:"outline",size:"sm",onClick:oe,className:"h-8 text-xs px-2",children:"Today"}),o.jsx(re,{variant:"outline",size:"sm",onClick:fe,className:"h-8 w-8 p-0",children:o.jsx(Lh,{className:"w-4 h-4"})})]}),o.jsxs("h2",{className:"text-sm md:text-lg font-semibold text-slate-700 whitespace-nowrap",children:[jr(n,"MMM d")," - ",jr(Pa(n,a*7-1),"MMM d")]})]})]})}),o.jsx($s,{className:"flex-1",children:o.jsx("div",{className:"p-4 md:p-6",children:d?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):ee?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 -mx-4 px-4",children:[o.jsx(re,{variant:"outline",size:"sm",onClick:H,className:"h-8",children:o.jsx($h,{className:"w-4 h-4"})}),o.jsxs("span",{className:"text-sm font-medium text-slate-600 whitespace-nowrap",children:[jr(n,"MMM d")," - ",jr(Pa(n,6),"MMM d")]}),o.jsx(re,{variant:"outline",size:"sm",onClick:fe,className:"h-8",children:o.jsx(Lh,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:o.jsx("div",{className:"flex gap-2 pb-2",children:Array.from({length:7}).map((W,ae)=>{const Y=Pa(n,ae);return o.jsxs("button",{onClick:()=>A(Y),className:`flex-shrink-0 rounded-lg p-3 transition-all ${bl(Y,F)?"bg-blue-600 text-white shadow-lg":bl(Y,new Date)?"bg-blue-100 text-blue-600 border-2 border-blue-300":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[o.jsx("div",{className:"text-xs font-medium text-center",children:jr(Y,"EEE")}),o.jsx("div",{className:"text-lg font-bold text-center",children:jr(Y,"d")})]},Y.toISOString())})})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:jr(F,"EEEE, MMMM d")}),Ru.map(W=>{var Y,je;const ae=$(F,W);return o.jsx("div",{onClick:()=>{M&&!ae&&ue(F,W)},className:`rounded-lg border-2 overflow-hidden transition-all ${ae?"bg-white border-slate-200 shadow-sm":M?"border-orange-400 bg-orange-50 border-dashed cursor-pointer active:bg-orange-100":"border-slate-200 bg-slate-50 border-dashed"}`,children:ae&&ae.recipe?o.jsxs("div",{className:"group",children:[ae.recipe.imageUrl&&o.jsxs("div",{className:"w-full h-48 overflow-hidden bg-slate-100 relative",children:[o.jsx("img",{src:(Y=ae.recipe.imageUrl)!=null&&Y.includes("instagram.com")||(je=ae.recipe.imageUrl)!=null&&je.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(ae.recipe.imageUrl.replace(/&amp;/g,"&"))}`:ae.recipe.imageUrl,alt:ae.recipe.title,className:"w-full h-full object-cover"}),o.jsx("button",{onClick:Z=>{Z.stopPropagation(),G(ae.id)},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Rt,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"text-sm font-medium text-slate-500 mb-2",children:W}),o.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:ae.recipe.title}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-4 h-4"}),o.jsxs("span",{children:[ae.recipe.prepTime+ae.recipe.cookTime,"m"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ds,{className:"w-4 h-4"}),o.jsxs("span",{children:[ae.recipe.servings," servings"]})]})]})]})]}):o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"text-sm font-medium text-slate-500 mb-2",children:W}),o.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"No meal planned"}),o.jsxs(re,{variant:"outline",size:"sm",onClick:()=>J(F,W),className:"gap-2",children:[o.jsx(hn,{className:"w-4 h-4"}),"Add Meal"]})]})},W)})]})]}):o.jsx("div",{className:"grid gap-4 grid-cols-7",children:K().map((W,ae)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-center pb-2 border-b-2 border-slate-200",children:[o.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:jr(W,"EEE")}),o.jsx("div",{className:`text-lg font-bold ${bl(W,new Date)?"text-blue-600":"text-slate-900"}`,children:jr(W,"d")})]}),o.jsx("div",{className:"space-y-2",children:Ru.map(Y=>{var Z,pe;const je=$(W,Y);return o.jsx("div",{onClick:()=>{M&&ue(W,Y)},className:`
                              min-h-[100px] rounded-lg border-2 p-2
                              transition-all relative group
                              ${M&&!je?"border-orange-400 bg-orange-50 cursor-pointer hover:bg-orange-100 hover:border-orange-500 border-dashed":"border-slate-200 bg-slate-50/50"}
                              ${je?"border-solid bg-white hover:shadow-md":"border-dashed"}
                            `,children:je&&je.recipe?o.jsxs("div",{className:"relative h-full",children:[o.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),G(je.id)},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:o.jsx(Rt,{className:"w-3 h-3"})}),je.recipe.imageUrl&&o.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden mb-2 bg-slate-100",children:o.jsx("img",{src:(Z=je.recipe.imageUrl)!=null&&Z.includes("instagram.com")||(pe=je.recipe.imageUrl)!=null&&pe.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(je.recipe.imageUrl.replace(/&amp;/g,"&"))}`:je.recipe.imageUrl,alt:je.recipe.title,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"text-xs",children:[o.jsx("div",{className:"font-medium text-slate-500 mb-1",children:Y}),o.jsx("div",{className:"font-semibold text-slate-900 line-clamp-2 text-xs",children:je.recipe.title}),o.jsxs("div",{className:"flex items-center gap-1 mt-1 text-slate-500 text-xs",children:[o.jsx(ln,{className:"w-3 h-3"}),o.jsxs("span",{children:[je.recipe.prepTime+je.recipe.cookTime,"m"]})]})]})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center gap-1",children:[o.jsx("div",{className:"text-xs font-medium text-slate-400",children:Y}),o.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>J(W,Y),className:"h-6 text-xs px-2 gap-1 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[o.jsx(hn,{className:"w-3 h-3"}),"Add"]})]})},`${ae}-${Y}`)})})]},ae))})})})]}),o.jsx(Pt,{open:m,onOpenChange:b,children:o.jsxs(Nt,{className:"w-[95vw] max-w-sm",children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Add Meal to Plan"}),o.jsx(Kr,{children:g&&`Add "${g.title}" to your meal plan`})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Date"}),o.jsxs(mn,{value:y,onValueChange:x,children:[o.jsx(Yr,{children:o.jsx(pn,{placeholder:"Select date"})}),o.jsx(Jr,{children:K().map(W=>o.jsx(hr,{value:jr(W,"yyyy-MM-dd"),children:jr(W,"EEE, MMM d")},W.toISOString()))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Meal Type"}),o.jsxs(mn,{value:v,onValueChange:W=>j(W),children:[o.jsx(Yr,{children:o.jsx(pn,{placeholder:"Select meal type"})}),o.jsx(Jr,{children:Ru.map(W=>o.jsx(hr,{value:W,children:W},W))})]})]})]}),o.jsxs(ds,{className:"flex gap-2",children:[o.jsx(re,{variant:"outline",onClick:()=>{b(!1),w(null),x(""),j("")},children:"Cancel"}),o.jsx(re,{onClick:O,disabled:!y||!v,children:"Add"})]})]})}),o.jsx(Pt,{open:N,onOpenChange:_,children:o.jsxs(Nt,{className:"w-[95vw] max-w-2xl max-h-[80vh]",children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Select Recipe"}),o.jsx(Kr,{children:S&&C&&`Add a recipe for ${C} on ${jr(S,"EEE, MMM d")}`})]}),o.jsx($s,{className:"max-h-[50vh]",children:o.jsx("div",{className:"space-y-4 py-4 pr-4",children:k.length===0?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"No saved recipes. Save recipes from the Discover page first."}):o.jsx(Hx,{type:"multiple",defaultValue:k.map(W=>W.cuisine),children:k.map(({cuisine:W,recipes:ae})=>o.jsxs(sf,{value:W,children:[o.jsx(of,{children:o.jsxs("div",{className:"flex items-center justify-between w-full pr-2",children:[o.jsx("span",{className:"font-semibold",children:W}),o.jsx(et,{variant:"secondary",children:ae.length})]})}),o.jsx(af,{children:o.jsx("div",{className:"space-y-2 pt-2",children:ae.map(Y=>{var je,Z;return o.jsx("button",{onClick:()=>T(Y.id),className:"w-full text-left p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-all",children:o.jsxs("div",{className:"flex gap-3",children:[Y.imageUrl&&o.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden shrink-0 bg-slate-100",children:o.jsx("img",{src:(je=Y.imageUrl)!=null&&je.includes("instagram.com")||(Z=Y.imageUrl)!=null&&Z.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(Y.imageUrl.replace(/&amp;/g,"&"))}`:Y.imageUrl,alt:Y.title,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-sm text-slate-900 mb-1",children:Y.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"}),o.jsxs("span",{children:[Y.prepTime+Y.cookTime,"m"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ds,{className:"w-3 h-3"}),o.jsx("span",{children:Y.servings})]})]})]})]})},Y.id)})})})]},W))})})}),o.jsx(ds,{children:o.jsx(re,{variant:"outline",onClick:()=>{_(!1),P(null),R(null)},children:"Cancel"})})]})})]})}function XM({onNavigate:e}={}){const{state:t,dispatch:r}=Qs(),[n,s]=u.useState(JN()),[a,i]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState(null),[f,p]=u.useState(""),[m,b]=u.useState(""),[g,w]=u.useState(""),[y,x]=u.useState(""),[v,j]=u.useState(!1),[N,_]=u.useState(""),[S,P]=u.useState(new Date().toISOString().split("T")[0]),[C,R]=u.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[M,D]=u.useState(!1),[Q,q]=u.useState(null),[ee,B]=u.useState(null),F=t.groceryList;u.useEffect(()=>{A()},[S,C]);function A(){const Z=new Date(S);Z.setHours(0,0,0,0);const pe=new Date(C);pe.setHours(23,59,59,999);const Ne=t.mealPlan.filter(he=>{const _e=new Date(he.date);return _e.setHours(0,0,0,0),_e>=Z&&_e<=pe}),Le={};Ne.forEach(he=>{const _e=t.savedRecipes.find(Ae=>Ae.id===he.recipeId);_e&&_e.ingredients.forEach(Ae=>{const ut=`${Ae.name.toLowerCase()}-${Ae.unit}`;if(Le[ut])Le[ut].quantity+=parseFloat(Ae.quantity)||0,Le[ut].sourceRecipeIds.includes(_e.id)||Le[ut].sourceRecipeIds.push(_e.id);else{const Xt=k(Ae.name);Le[ut]={id:`item-${Date.now()}-${Math.random()}`,name:Ae.name,quantity:parseFloat(Ae.quantity)||1,unit:Ae.unit||"",categoryId:Xt,checked:!1,sourceRecipeIds:[_e.id]}}})});const Me=new Set(F.map(he=>`${he.name.toLowerCase()}-${he.unit}`)),V=Object.values(Le).filter(he=>!Me.has(`${he.name.toLowerCase()}-${he.unit}`));V.length>0&&r({type:"UPDATE_GROCERY_LIST",payload:[...F,...V]})}function k(Z){const pe=Z.toLowerCase();return pe.includes("milk")||pe.includes("cheese")||pe.includes("yogurt")||pe.includes("butter")||pe.includes("cream")?"dairy":pe.includes("chicken")||pe.includes("beef")||pe.includes("pork")||pe.includes("fish")||pe.includes("meat")?"meat":pe.includes("apple")||pe.includes("banana")||pe.includes("orange")||pe.includes("berry")||pe.includes("fruit")||pe.includes("lettuce")||pe.includes("tomato")||pe.includes("carrot")||pe.includes("onion")||pe.includes("vegetable")?"produce":pe.includes("bread")||pe.includes("pasta")||pe.includes("rice")||pe.includes("cereal")?"pantry":"other"}function I(Z){r({type:"TOGGLE_GROCERY_ITEM",payload:Z})}function te(Z){r({type:"REMOVE_GROCERY_ITEM",payload:Z}),B(null)}function $(){const Z=F.filter(pe=>!pe.checked);r({type:"UPDATE_GROCERY_LIST",payload:Z})}function z(){window.confirm("Are you sure you want to clear all items from your grocery list?")&&r({type:"UPDATE_GROCERY_LIST",payload:[]})}function X(){if(!f.trim()||!y)return;const Z={id:`item-${Date.now()}-${Math.random()}`,name:f.trim(),quantity:parseFloat(m)||1,unit:g||"",categoryId:y,checked:!1,sourceRecipeIds:[]};r({type:"ADD_GROCERY_ITEM",payload:Z}),i(!1),p(""),b(""),w(""),x("")}function ue(){if(!N)return;const Z=t.savedRecipes.find(Ne=>Ne.id===N);if(!Z){L.error("Recipe not found");return}const pe=Z.ingredients.map((Ne,Le)=>{const Me=k(Ne.name);return{id:`item-${Date.now()}-${Le}`,name:Ne.name,quantity:parseFloat(Ne.quantity)||1,unit:Ne.unit||"",categoryId:Me,checked:!1,sourceRecipeIds:[Z.id]}});r({type:"UPDATE_GROCERY_LIST",payload:[...F,...pe]}),L.success(`Added ${pe.length} ingredients from ${Z.title}`),j(!1),_("")}function G(Z,pe){const Ne=F.map(Le=>Le.id===Z?{...Le,categoryId:pe}:Le);r({type:"UPDATE_GROCERY_LIST",payload:Ne})}function H(Z){q(Z),D(!0)}function fe(Z){c(Z)}function ce(Z){Z.preventDefault()}function O(Z){l&&(G(l,Z),c(null))}function J(Z){h(Z)}async function T(Z){if(!d||d===Z){h(null);return}const pe=n.findIndex(he=>he.id===d),Ne=n.findIndex(he=>he.id===Z);if(pe===-1||Ne===-1)return;const Le=[...n],[Me]=Le.splice(pe,1);Le.splice(Ne,0,Me);const V=Le.map((he,_e)=>({...he,sortOrder:_e}));s(V),h(null)}async function K(){try{const{data:Z}=await U.auth.getUser();if(!Z.user){L.error("Please sign in to add items to cart");return}if(F.length===0){L.error("No items to send to cart");return}const pe=F.map(Le=>({user_id:Z.user.id,product_name:Le.name,quantity:`${Le.quantity} ${Le.unit}`.trim(),price:"0.00",image_url:null,affiliate_link:null})),{error:Ne}=await U.from("cart_items").insert(pe);if(Ne)throw Ne;L.success(`Added ${F.length} items to cart!`),e&&setTimeout(()=>e("cart"),1e3)}catch(Z){console.error("Failed to send to cart:",Z),L.error("Failed to send items to cart")}}let oe=0,be=0;function Te(Z,pe){oe=Z.targetTouches[0].clientX}function W(Z,pe){be=Z.changedTouches[0].clientX;const Ne=oe-be;Ne>100?B(pe):Ne<-50&&B(null)}const ae=n.reduce((Z,pe)=>(Z[pe.id]=F.filter(Ne=>Ne.categoryId===pe.id),Z),{}),Y=F.filter(Z=>Z.checked).length,je=F.length;return o.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Grocery List"}),o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Y," of ",je," items checked"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(re,{onClick:()=>i(!0),className:"flex-1 min-w-[140px] h-12",children:[o.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Item"]}),o.jsxs(re,{variant:"outline",onClick:()=>j(!0),className:"flex-1 min-w-[140px] h-12",children:[o.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Add Recipe"]})]}),(Y>0||je>0)&&o.jsxs("div",{className:"flex flex-wrap gap-2",children:[Y>0&&o.jsxs(re,{variant:"outline",onClick:$,className:"flex-1 h-12",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"}),"Clear Checked"]}),je>0&&o.jsxs(o.Fragment,{children:[o.jsxs(re,{variant:"destructive",onClick:z,className:"flex-1 h-12",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"}),"Clear All"]}),o.jsxs(re,{onClick:K,className:"w-full h-12 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600",children:[o.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Send to Cart"]})]})]})]}),o.jsx(Je,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:o.jsx(tt,{className:"pt-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yo,{className:"w-5 h-5 text-blue-600"}),o.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Auto-populate from Meal Planner"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(qe,{className:"text-xs text-gray-600",children:"From:"}),o.jsx(lt,{type:"date",value:S,onChange:Z=>P(Z.target.value),className:"w-full h-12"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx(qe,{className:"text-xs text-gray-600",children:"To:"}),o.jsx(lt,{type:"date",value:C,onChange:Z=>R(Z.target.value),className:"w-full h-12"})]}),o.jsx(re,{onClick:A,className:"h-12 sm:self-end",children:"Refresh"})]})]})})})]}),je===0?o.jsx(Je,{children:o.jsxs(tt,{className:"py-12 text-center",children:[o.jsx("p",{className:"text-gray-500 mb-4",children:"Your grocery list is empty. Add recipes to your meal plan to automatically generate a grocery list."}),o.jsxs(re,{onClick:()=>e==null?void 0:e("meal-planner"),className:"h-12",children:[o.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Go to Meal Planner"]})]})}):o.jsx("div",{className:"space-y-4",children:n.map(Z=>{const pe=ae[Z.id]||[];return pe.length===0?null:o.jsxs(Je,{draggable:!0,onDragStart:()=>J(Z.id),onDragOver:ce,onDrop:()=>T(Z.id),className:`transition-all ${d===Z.id?"opacity-50":""}`,children:[o.jsx(St,{className:"pb-3 cursor-move",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fu,{className:"w-4 h-4 text-gray-400"}),o.jsx(kt,{className:"text-lg",children:Z.name}),o.jsx(et,{variant:"secondary",children:pe.length})]})})}),o.jsx(tt,{onDragOver:ce,onDrop:()=>O(Z.id),children:o.jsx("div",{className:"space-y-2",children:pe.map(Ne=>o.jsxs("div",{draggable:!0,onDragStart:()=>fe(Ne.id),onTouchStart:Le=>Te(Le,Ne.id),onTouchEnd:Le=>W(Le,Ne.id),className:`relative flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all ${l===Ne.id?"opacity-50":""} ${Ne.checked?"opacity-60":""} ${ee===Ne.id?"bg-red-50":""}`,children:[o.jsx(fu,{className:"w-4 h-4 text-gray-400 cursor-move hidden md:block"}),o.jsx("button",{onClick:()=>H(Ne),className:"md:hidden p-2 -ml-2",children:o.jsx(fu,{className:"w-5 h-5 text-gray-400"})}),o.jsx(fi,{checked:Ne.checked,onCheckedChange:()=>I(Ne.id),className:"h-6 w-6"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`font-medium text-base ${Ne.checked?"line-through text-gray-500":"text-gray-900"}`,children:Ne.name}),Ne.sourceRecipeIds.length>1&&o.jsxs(et,{variant:"outline",className:"text-xs",children:[Ne.sourceRecipeIds.length," recipes"]})]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[VM(Ne.quantity)," ",Ne.unit]})]}),o.jsx(re,{variant:"ghost",size:"icon",onClick:()=>te(Ne.id),className:"shrink-0 h-10 w-10",children:o.jsx(rr,{className:"w-5 h-5 text-red-500"})})]},Ne.id))})})]},Z.id)})}),o.jsx(Pt,{open:M,onOpenChange:D,children:o.jsxs(Nt,{children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Move to Category"}),o.jsxs(Kr,{children:['Select a new category for "',Q==null?void 0:Q.name,'"']})]}),o.jsx("div",{className:"space-y-2 py-4",children:n.map(Z=>o.jsx(re,{variant:"outline",className:"w-full h-14 justify-start text-left",onClick:()=>{Q&&G(Q.id,Z.id),D(!1),q(null)},children:o.jsx("span",{className:"text-base font-medium",children:Z.name})},Z.id))})]})}),o.jsx(Pt,{open:a,onOpenChange:i,children:o.jsxs(Nt,{children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Add Item"}),o.jsx(Kr,{children:"Add a new item to your grocery list."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"itemName",children:"Item Name *"}),o.jsx(lt,{id:"itemName",value:f,onChange:Z=>p(Z.target.value),placeholder:"e.g., Milk, Eggs",className:"h-12"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"itemQuantity",children:"Quantity"}),o.jsx(lt,{id:"itemQuantity",type:"number",value:m,onChange:Z=>b(Z.target.value),placeholder:"1",className:"h-12"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"itemUnit",children:"Unit"}),o.jsx(lt,{id:"itemUnit",value:g,onChange:Z=>w(Z.target.value),placeholder:"e.g., cups, lbs",className:"h-12"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"itemCategory",children:"Category *"}),o.jsxs(mn,{value:y,onValueChange:x,children:[o.jsx(Yr,{className:"h-12",children:o.jsx(pn,{placeholder:"Select category"})}),o.jsx(Jr,{children:n.map(Z=>o.jsx(hr,{value:Z.id,children:Z.name},Z.id))})]})]})]}),o.jsxs(ds,{children:[o.jsx(re,{variant:"outline",onClick:()=>i(!1),className:"h-12",children:"Cancel"}),o.jsx(re,{onClick:X,disabled:!f.trim()||!y,className:"h-12",children:"Add Item"})]})]})}),o.jsx(Pt,{open:v,onOpenChange:j,children:o.jsxs(Nt,{children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Add Recipe to Grocery List"}),o.jsx(Kr,{children:"Select a recipe to add its ingredients to your grocery list."})]}),o.jsx("div",{className:"space-y-4 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"recipeSelect",children:"Recipe *"}),o.jsxs(mn,{value:N,onValueChange:_,children:[o.jsx(Yr,{className:"h-12",children:o.jsx(pn,{placeholder:"Select a recipe"})}),o.jsx(Jr,{children:t.savedRecipes.map(Z=>o.jsx(hr,{value:Z.id,children:Z.title},Z.id))})]})]})}),o.jsxs(ds,{children:[o.jsx(re,{variant:"outline",onClick:()=>j(!1),className:"h-12",children:"Cancel"}),o.jsx(re,{onClick:ue,disabled:!N,className:"h-12",children:"Add Ingredients"})]})]})})]})}function QM({onNavigate:e}={}){const[t,r]=u.useState([]),[n,s]=u.useState(!0),[a,i]=u.useState(null),[l,c]=u.useState(window.innerWidth<768);u.useEffect(()=>{const g=()=>c(window.innerWidth<768);return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),u.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:g}=await U.auth.getUser();if(!g.user)return;i(g.user.id);const{data:w,error:y}=await U.from("cart_items").select("*").eq("user_id",g.user.id).order("created_at",{ascending:!1});if(y)throw y;r(w||[])}catch(g){console.error("Error loading cart:",g),L.error("Failed to load cart")}finally{s(!1)}},h=async(g,w)=>{try{const{error:y}=await U.from("cart_items").update({quantity:w}).eq("id",g);if(y)throw y;r(x=>x.map(v=>v.id===g?{...v,quantity:w}:v)),L.success("Quantity updated")}catch(y){console.error("Error updating quantity:",y),L.error("Failed to update quantity")}},f=async g=>{try{const{error:w}=await U.from("cart_items").delete().eq("id",g);if(w)throw w;r(y=>y.filter(x=>x.id!==g)),L.success("Item removed from cart")}catch(w){console.error("Error removing item:",w),L.error("Failed to remove item")}},p=async()=>{if(a&&confirm("Are you sure you want to clear your entire cart?"))try{const{error:g}=await U.from("cart_items").delete().eq("user_id",a);if(g)throw g;r([]),L.success("Cart cleared")}catch(g){console.error("Error clearing cart:",g),L.error("Failed to clear cart")}},m=()=>t.reduce((g,w)=>{const y=w.price||0,x=parseFloat(w.quantity)||1;return g+y*x},0),b=()=>{L.info("Stripe checkout coming soon!")};return n?o.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50",children:[o.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200 shadow-sm",children:o.jsx("div",{className:"p-4 md:p-6",children:o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-orange-600 to-red-600 flex items-center justify-center",children:o.jsx(Ws,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-3xl font-bold text-slate-900",children:"Your Cart"}),o.jsxs("p",{className:"text-xs md:text-sm text-slate-600",children:[t.length," ",t.length===1?"item":"items"]})]})]}),t.length>0&&o.jsx(re,{variant:"ghost",size:"sm",onClick:p,className:"text-xs md:text-sm hover:bg-red-50 hover:text-red-600",children:"Clear"})]})})}),t.length===0?o.jsx("div",{className:"p-4 md:p-6 flex items-center justify-center min-h-[calc(100vh-200px)]",children:o.jsx(Je,{className:"w-full max-w-sm",children:o.jsxs(tt,{className:"flex flex-col items-center justify-center py-12 px-6",children:[o.jsx(Ws,{className:"w-16 h-16 text-gray-300 mb-4"}),o.jsx("p",{className:"text-gray-500 text-center mb-4 text-sm md:text-base",children:"Your cart is empty. Soon you will be able to order your ingredients and get them delivered!"}),o.jsx(re,{onClick:()=>e==null?void 0:e("meal-planner"),className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Add Items from Meal Planner"})]})})}):o.jsxs("div",{className:"p-4 md:p-6 pb-32 md:pb-24",children:[o.jsx("div",{className:"space-y-3 md:space-y-4 mb-6 max-w-4xl mx-auto",children:t.map(g=>o.jsx(Je,{className:"overflow-hidden hover:shadow-md transition-shadow",children:o.jsx(tt,{className:"p-3 md:p-4",children:o.jsxs("div",{className:"flex gap-3 md:gap-4",children:[g.image_url&&o.jsx("div",{className:"shrink-0",children:o.jsx("img",{src:g.image_url,alt:g.amazon_product_name||g.ingredient_name,className:"w-20 h-20 md:w-24 md:h-24 object-cover rounded-lg bg-slate-100"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-semibold text-sm md:text-lg text-slate-900 line-clamp-2 mb-1",children:g.amazon_product_name||g.ingredient_name}),g.ingredient_name!==g.amazon_product_name&&o.jsx("p",{className:"text-xs md:text-sm text-gray-600 italic mb-2 line-clamp-1",children:g.ingredient_name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg w-fit p-1",children:[o.jsx(re,{size:"sm",variant:"ghost",onClick:()=>{const w=parseFloat(g.quantity)||1;w>1&&h(g.id,(w-1).toString())},className:"h-7 w-7 p-0 hover:bg-slate-200",children:o.jsx(Ew,{className:"w-3 h-3"})}),o.jsx(lt,{type:"text",value:g.quantity,onChange:w=>h(g.id,w.target.value),className:"w-12 md:w-16 text-center text-sm h-7 border-0 bg-transparent"}),o.jsx(re,{size:"sm",variant:"ghost",onClick:()=>{const w=parseFloat(g.quantity)||1;h(g.id,(w+1).toString())},className:"h-7 w-7 p-0 hover:bg-slate-200",children:o.jsx(hn,{className:"w-3 h-3"})})]}),o.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:g.unit})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2 justify-between",children:[g.price&&o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm md:text-lg font-semibold text-orange-600",children:["$",(g.price*(parseFloat(g.quantity)||1)).toFixed(2)]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["$",g.price.toFixed(2)," each"]})]}),o.jsxs("div",{className:"flex gap-1 flex-col",children:[g.amazon_product_url&&o.jsxs("a",{href:g.amazon_product_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 text-xs md:text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded px-2 py-1 transition-colors",children:[o.jsx(Zc,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:"View"})]}),o.jsxs(re,{size:"sm",variant:"ghost",onClick:()=>f(g.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs md:text-sm h-7 px-2",children:[o.jsx(rr,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})]})]})]})})},g.id))}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx(Je,{className:"mb-4 bg-slate-50 border-slate-200",children:o.jsx(tt,{className:"p-4 md:p-6",children:o.jsxs("div",{className:"space-y-2 text-sm md:text-base",children:[o.jsxs("div",{className:"flex justify-between text-slate-700",children:[o.jsxs("span",{children:["Subtotal (",t.length," items)"]}),o.jsxs("span",{className:"font-medium",children:["$",m().toFixed(2)]})]}),o.jsx("div",{className:"flex justify-between text-slate-600 text-xs md:text-sm",children:o.jsx("span",{children:"Shipping & taxes calculated at checkout"})})]})})}),o.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 md:relative md:p-0 bg-white md:bg-transparent border-t md:border-t-0 border-slate-200",children:[o.jsxs(re,{className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-medium text-sm md:text-base h-12 md:h-14",size:"lg",onClick:b,children:[o.jsx(AE,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Proceed to Checkout"]}),o.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Stripe checkout integration coming soon"})]})]})]})]})}var XN=["PageUp","PageDown"],QN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ZN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ca="Slider",[lf,ZM,e6]=Oi(ca),[e_]=ar(ca,[e6]),[t6,Ed]=e_(ca),t_=u.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:h,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:b,...g}=e,w=u.useRef(new Set),y=u.useRef(0),v=i==="horizontal"?r6:n6,[j=[],N]=Qr({prop:h,defaultProp:d,onChange:M=>{var Q;(Q=[...w.current][y.current])==null||Q.focus(),f(M)}}),_=u.useRef(j);function S(M){const D=l6(j,M);R(M,D)}function P(M){R(M,y.current)}function C(){const M=_.current[y.current];j[y.current]!==M&&p(j)}function R(M,D,{commit:Q}={commit:!1}){const q=h6(a),ee=f6(Math.round((M-n)/a)*a+n,q),B=mi(ee,[n,s]);N((F=[])=>{const A=a6(F,B,D);if(u6(A,c*a)){y.current=A.indexOf(B);const k=String(A)!==String(F);return k&&Q&&p(A),k?A:F}else return F})}return o.jsx(t6,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:s,valueIndexToChangeRef:y,thumbs:w.current,values:j,orientation:i,form:b,children:o.jsx(lf.Provider,{scope:e.__scopeSlider,children:o.jsx(lf.Slot,{scope:e.__scopeSlider,children:o.jsx(v,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:ge(g.onPointerDown,()=>{l||(_.current=j)}),min:n,max:s,inverted:m,onSlideStart:l?void 0:S,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&R(n,0,{commit:!0}),onEndKeyDown:()=>!l&&R(s,j.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:D})=>{if(!l){const ee=XN.includes(M.key)||M.shiftKey&&QN.includes(M.key)?10:1,B=y.current,F=j[B],A=a*ee*D;R(F+A,B,{commit:!0})}}})})})})});t_.displayName=ca;var[r_,n_]=e_(ca,{startEdge:"left",endEdge:"right",size:"width",direction:1}),r6=u.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[f,p]=u.useState(null),m=Oe(t,v=>p(v)),b=u.useRef(void 0),g=oa(s),w=g==="ltr",y=w&&!a||!w&&a;function x(v){const j=b.current||f.getBoundingClientRect(),N=[0,j.width],S=vp(N,y?[r,n]:[n,r]);return b.current=j,S(v-j.left)}return o.jsx(r_,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:o.jsx(s_,{dir:g,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const j=x(v.clientX);i==null||i(j)},onSlideMove:v=>{const j=x(v.clientX);l==null||l(j)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:v=>{const N=ZN[y?"from-left":"from-right"].includes(v.key);d==null||d({event:v,direction:N?-1:1})}})})}),n6=u.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=u.useRef(null),f=Oe(t,h),p=u.useRef(void 0),m=!s;function b(g){const w=p.current||h.current.getBoundingClientRect(),y=[0,w.height],v=vp(y,m?[n,r]:[r,n]);return p.current=w,v(g-w.top)}return o.jsx(r_,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:o.jsx(s_,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=b(g.clientY);a==null||a(w)},onSlideMove:g=>{const w=b(g.clientY);i==null||i(w)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:g=>{const y=ZN[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:y?-1:1})}})})}),s_=u.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=Ed(ca,r);return o.jsx(Pe.span,{...d,ref:t,onKeyDown:ge(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):XN.concat(QN).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:ge(e.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(p)?p.focus():n(f)}),onPointerMove:ge(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:ge(e.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),a(f))})})}),o_="SliderTrack",a_=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=Ed(o_,r);return o.jsx(Pe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});a_.displayName=o_;var cf="SliderRange",i_=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=Ed(cf,r),a=n_(cf,r),i=u.useRef(null),l=Oe(t,i),c=s.values.length,d=s.values.map(p=>d_(p,s.min,s.max)),h=c>1?Math.min(...d):0,f=100-Math.max(...d);return o.jsx(Pe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:f+"%"}})});i_.displayName=cf;var df="SliderThumb",l_=u.forwardRef((e,t)=>{const r=ZM(e.__scopeSlider),[n,s]=u.useState(null),a=Oe(t,l=>s(l)),i=u.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return o.jsx(s6,{...e,ref:a,index:i})}),s6=u.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...a}=e,i=Ed(df,r),l=n_(df,r),[c,d]=u.useState(null),h=Oe(t,x=>d(x)),f=c?i.form||!!c.closest("form"):!0,p=ld(c),m=i.values[n],b=m===void 0?0:d_(m,i.min,i.max),g=i6(n,i.values.length),w=p==null?void 0:p[l.size],y=w?c6(w,b,l.direction):0;return u.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${y}px)`},children:[o.jsx(lf.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(Pe.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:ge(e.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),f&&o.jsx(c_,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},n)]})});l_.displayName=df;var o6="RadioBubbleInput",c_=u.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const s=u.useRef(null),a=Oe(s,n),i=id(t);return u.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),o.jsx(Pe.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});c_.displayName=o6;function a6(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,a)=>s-a)}function d_(e,t,r){const a=100/(r-t)*(e-t);return mi(a,[0,100])}function i6(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function l6(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function c6(e,t,r){const n=e/2,a=vp([0,50],[0,n]);return(n-a(t)*r)*r}function d6(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function u6(e,t){if(t>0){const r=d6(e);return Math.min(...r)>=t}return!0}function vp(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function h6(e){return(String(e).split(".")[1]||"").length}function f6(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var u_=t_,m6=a_,p6=i_,g6=l_;const h_=u.forwardRef(({className:e,...t},r)=>o.jsxs(u_,{ref:r,className:Ee("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(m6,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:o.jsx(p6,{className:"absolute h-full bg-primary"})}),o.jsx(g6,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));h_.displayName=u_.displayName;var Rd="Switch",[x6]=ar(Rd),[v6,y6]=x6(Rd),f_=u.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=e,[p,m]=u.useState(null),b=Oe(t,v=>m(v)),g=u.useRef(!1),w=p?h||!!p.closest("form"):!0,[y,x]=Qr({prop:s,defaultProp:a??!1,onChange:d,caller:Rd});return o.jsxs(v6,{scope:r,checked:y,disabled:l,children:[o.jsx(Pe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":x_(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:ge(e.onClick,v=>{x(j=>!j),w&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),w&&o.jsx(g_,{control:p,bubbles:!g.current,name:n,value:c,checked:y,required:i,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});f_.displayName=Rd;var m_="SwitchThumb",p_=u.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=y6(m_,r);return o.jsx(Pe.span,{"data-state":x_(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});p_.displayName=m_;var w6="SwitchBubbleInput",g_=u.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},a)=>{const i=u.useRef(null),l=Oe(i,a),c=id(r),d=ld(t);return u.useEffect(()=>{const h=i.current;if(!h)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const b=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(b)}},[c,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});g_.displayName=w6;function x_(e){return e?"checked":"unchecked"}var v_=f_,b6=p_;const y_=u.forwardRef(({className:e,...t},r)=>o.jsx(v_,{className:Ee("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:o.jsx(b6,{className:Ee("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));y_.displayName=v_.displayName;const j6=[{label:"Eastern Time (ET)",value:"America/New_York"},{label:"Central Time (CT)",value:"America/Chicago"},{label:"Mountain Time (MT)",value:"America/Denver"},{label:"Pacific Time (PT)",value:"America/Los_Angeles"}];function N6({onNavigate:e}){const[t,r]=u.useState("user-demo123@mealscrape.app"),[n,s]=u.useState(!1),[a,i]=u.useState(!1),[l,c]=u.useState(!1),[d,h]=u.useState(""),[f,p]=u.useState(!1),[m,b]=u.useState({speechRate:1,voiceIndex:0,autoRead:!0}),[g,w]=u.useState([]),[y,x]=u.useState(!1),[v,j]=u.useState("America/New_York"),[N,_]=u.useState(!1),[S,P]=u.useState(!1),[C,R]=u.useState(""),[M,D]=u.useState(""),[Q,q]=u.useState(!1);u.useEffect(()=>{if("speechSynthesis"in window){const F=window.speechSynthesis.getVoices();w(F)}},[]);const ee=async()=>{try{await navigator.clipboard.writeText(t),i(!0),setTimeout(()=>i(!1),2e3)}catch{console.error("Failed to copy")}},B=()=>{if("speechSynthesis"in window){x(!0),window.speechSynthesis.cancel();const F=new SpeechSynthesisUtterance("This is how I will read your recipe steps. Next, preheat the oven to 350 degrees Fahrenheit.");F.rate=m.speechRate,g.length>0&&m.voiceIndex<g.length&&(F.voice=g[m.voiceIndex]),F.onend=()=>x(!1),F.onerror=()=>x(!1),window.speechSynthesis.speak(F)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[o.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-4 pb-20 sm:px-6 sm:py-6 md:px-8 md:py-8",children:[o.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 mb-1 sm:mb-2",children:"Settings"}),o.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:"Manage your account and preferences"})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-5 md:space-y-6",children:[o.jsx(Je,{className:"border-slate-200 shadow-sm overflow-hidden",children:o.jsx(St,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-b border-orange-100 p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-orange-600 flex items-center justify-center shrink-0",children:o.jsx(xc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900 truncate",children:"Account"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600 truncate",children:"user@example.com"})]}),o.jsxs(re,{onClick:()=>console.log("Logout"),variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50 shrink-0 text-xs sm:text-sm",children:[o.jsx(FE,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Log Out"})]})]})})}),o.jsxs(Je,{className:"border-slate-200 shadow-sm overflow-hidden",children:[o.jsx(St,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-b border-emerald-100 p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-600 flex items-center justify-center shrink-0",children:o.jsx(kw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Timezone"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600",children:"Set your timezone for accurate meal planning"})]})]})}),o.jsx(tt,{className:"p-4 sm:p-6",children:o.jsx("div",{className:"space-y-3 sm:space-y-4",children:o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"timezone-select",className:"text-xs sm:text-sm font-medium text-slate-700 mb-2 block",children:"Select Timezone"}),o.jsxs(mn,{value:v,onValueChange:j,disabled:N,children:[o.jsx(Yr,{id:"timezone-select",className:"w-full h-10 sm:h-11 text-sm sm:text-base",children:o.jsx(pn,{placeholder:"Select your timezone"})}),o.jsx(Jr,{children:j6.map(F=>o.jsx(hr,{value:F.value,className:"text-sm sm:text-base",children:F.label},F.value))})]}),o.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 mt-2",children:["Current: ",o.jsx("span",{className:"font-medium text-slate-700",children:v})]})]})})})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm overflow-hidden",children:[o.jsx(St,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-b border-purple-100 p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-purple-600 flex items-center justify-center shrink-0",children:o.jsx(gc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Change Password"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600",children:"Update your account password"})]})]})}),o.jsx(tt,{className:"p-4 sm:p-6",children:o.jsxs(re,{onClick:()=>P(!0),className:"w-full bg-purple-600 hover:bg-purple-700 h-10 sm:h-11 text-sm sm:text-base",children:[o.jsx(gc,{className:"w-4 h-4 mr-2"}),"Change Password"]})})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm overflow-hidden",children:[o.jsx(St,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-b border-blue-100 p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center shrink-0",children:o.jsx(xc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Your Forwarding Email"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600",children:"Coming soon... Email recipes to your personal inbox"})]})]})}),o.jsxs(tt,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border-2 border-slate-200",children:[o.jsx(qe,{className:"text-xs font-medium text-slate-600 uppercase tracking-wide mb-2 block",children:"Your Unique Email Address"}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("code",{className:"flex-1 text-xs sm:text-sm md:text-base font-mono font-semibold text-slate-900 bg-white px-3 py-2 sm:px-4 sm:py-3 rounded-md border border-slate-200 overflow-x-auto",children:t}),o.jsx(re,{onClick:ee,variant:"outline",size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 shrink-0",children:a?o.jsx(mc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}):o.jsx(Uh,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),o.jsxs("div",{className:"mt-4 sm:mt-6 space-y-3",children:[o.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-100",children:o.jsxs("p",{className:"text-xs sm:text-sm text-slate-700",children:[o.jsx("span",{className:"font-semibold",children:"How it works:"})," Forward any recipe to this email, and it will automatically be saved to your collection."]})}),o.jsxs(re,{onClick:()=>c(!0),variant:"outline",className:"w-full border-blue-200 hover:bg-blue-50 h-10 sm:h-11 text-sm sm:text-base",children:[o.jsx(ax,{className:"w-4 h-4 mr-2"}),"Test Email Import"]})]})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsxs(St,{className:"p-4 sm:p-6",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"How to Save Recipes"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600",children:"Multiple ways to add recipes automatically"})]}),o.jsxs(tt,{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"space-y-4 md:grid md:grid-cols-2 md:gap-6 md:space-y-0",children:[o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center shrink-0",children:o.jsx($E,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),o.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"From Instagram DMs - Feature Coming Soon..."})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-pink-100 to-purple-100 rounded-md flex items-center justify-center mb-3",children:o.jsx(zE,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-purple-600"})}),o.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),o.jsx("span",{children:"Long-press on recipe post"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),o.jsx("span",{children:'Tap "Forward"  "Email"'})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),o.jsx("span",{children:"Paste forwarding email"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"4."}),o.jsx("span",{children:"Send and auto-save!"})]})]})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shrink-0",children:o.jsx(Ms,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),o.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"From Photos - Feature Coming Soon..."})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-cyan-100 rounded-md flex items-center justify-center mb-3",children:o.jsx(Ms,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-cyan-600"})}),o.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),o.jsx("span",{children:"Screenshot recipe"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),o.jsx("span",{children:"Open photos, select screenshot"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),o.jsx("span",{children:'Share  "Mail"'})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"4."}),o.jsx("span",{children:"Send to forwarding email"})]})]})]})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4 md:col-span-2",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shrink-0",children:o.jsx(Uh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),o.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"Copy & Paste Link"})]}),o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[o.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700 mb-3",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),o.jsx("span",{children:"Copy recipe URL from any website"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),o.jsx("span",{children:"Click button below to go to Add Recipe"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),o.jsx("span",{children:"Paste link and let AI extract!"})]})]}),o.jsxs(re,{onClick:()=>e("add-recipe"),className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 font-semibold shadow-lg h-12 text-base",children:[o.jsx(Ms,{className:"w-5 h-5 mr-3"}),"Go to Add Recipe"]})]})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-lg p-3 sm:p-4 md:p-5 border-2 border-blue-200",children:o.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center shrink-0",children:o.jsx(Nw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Pro Tip"}),o.jsx("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Save your forwarding email as a contact for quick access. Set up auto-forwarding rules to automatically send recipes."})]})]})})]})]}),o.jsxs(Je,{className:"border-slate-200 shadow-sm",children:[o.jsx(St,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-4 sm:p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-600 flex items-center justify-center shrink-0",children:o.jsx(Cw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Voice Control"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600",children:"Customize voice commands in Cook Mode"})]})]})}),o.jsx(tt,{className:"p-4 sm:p-6",children:"speechSynthesis"in window?o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:[o.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[o.jsx(qe,{htmlFor:"auto-read",className:"text-sm sm:text-base font-semibold text-slate-900 cursor-pointer",children:"Auto-Read Steps"}),o.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Auto-read each step aloud"})]}),o.jsx(y_,{id:"auto-read",checked:m.autoRead,onCheckedChange:F=>b(A=>({...A,autoRead:F}))})]}),o.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[o.jsxs(qe,{className:"text-sm sm:text-base font-semibold text-slate-900",children:["Speech Rate: ",m.speechRate.toFixed(1),"x"]}),o.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[o.jsx("span",{className:"text-xs sm:text-sm text-slate-600 w-10 sm:w-12",children:"Slow"}),o.jsx(h_,{value:[m.speechRate],onValueChange:F=>b(A=>({...A,speechRate:F[0]})),min:.5,max:2,step:.1,className:"flex-1"}),o.jsx("span",{className:"text-xs sm:text-sm text-slate-600 w-10 sm:w-12 text-right",children:"Fast"})]})]}),g.length>0&&o.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[o.jsx(qe,{className:"text-sm sm:text-base font-semibold text-slate-900",children:"Voice Selection"}),o.jsxs(mn,{value:m.voiceIndex.toString(),onValueChange:F=>b(A=>({...A,voiceIndex:parseInt(F)})),children:[o.jsx(Yr,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",children:o.jsx(pn,{})}),o.jsx(Jr,{children:g.map((F,A)=>o.jsxs(hr,{value:A.toString(),className:"text-sm sm:text-base",children:[F.name," (",F.lang,")"]},A))})]})]}),o.jsxs(re,{onClick:B,disabled:y,variant:"outline",className:"w-full border-emerald-300 hover:bg-emerald-50 h-10 sm:h-11 text-sm sm:text-base",children:[o.jsx(Aw,{className:"w-4 h-4 mr-2"}),y?"Playing...":"Test Voice Settings"]}),o.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-200",children:o.jsxs("p",{className:"text-xs sm:text-sm text-slate-700",children:[o.jsx("span",{className:"font-semibold",children:"Voice commands in Cook Mode:"}),o.jsx("br",{}),'"Next", "Previous", "Repeat", "Read ingredients", and more.']})})]}):o.jsx("div",{className:"p-3 sm:p-4 bg-amber-50 rounded-lg border border-amber-300",children:o.jsx("p",{className:"text-xs sm:text-sm text-amber-900",children:"Voice control not supported in your browser. Try Chrome, Edge, or Safari."})})})]})]})]}),o.jsx(Pt,{open:l,onOpenChange:c,children:o.jsxs(Nt,{className:"w-[95vw] max-w-2xl max-h-[85vh] overflow-y-auto mx-auto",children:[o.jsxs(Gt,{children:[o.jsxs(Bt,{className:"text-lg sm:text-xl md:text-2xl flex items-center gap-2",children:[o.jsx(ax,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),"Test Email Import"]}),o.jsx(Kr,{className:"text-xs sm:text-sm",children:"Paste recipe text to simulate email import"})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4 mt-4",children:[o.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[o.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mb-2",children:o.jsx("span",{className:"font-semibold",children:"Example format:"})}),o.jsx("pre",{className:"text-[10px] sm:text-xs text-slate-700 bg-white p-2 sm:p-3 rounded border border-slate-200 overflow-x-auto",children:`Chocolate Chip Cookies

Ingredients:
2 cups flour
1 tsp baking soda
1 cup butter
2 eggs
2 cups chocolate chips

Instructions:
1. Preheat oven to 375F
2. Mix dry ingredients
3. Cream butter and sugar
4. Fold in chips
5. Bake 10-12 minutes`})]}),o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"recipe-text",className:"text-sm sm:text-base font-semibold mb-2 block",children:"Paste Recipe Text"}),o.jsx(An,{id:"recipe-text",placeholder:"Paste your recipe here...",value:d,onChange:F=>h(F.target.value),className:"min-h-[200px] sm:min-h-[300px] font-mono text-xs sm:text-sm"})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[o.jsx(re,{onClick:()=>{p(!0),setTimeout(()=>{p(!1),c(!1),h("")},1e3)},disabled:f||!d.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 h-10 sm:h-11 text-sm sm:text-base",children:f?o.jsxs(o.Fragment,{children:[o.jsx(ui,{className:"w-4 h-4 mr-2 animate-spin"}),"Importing..."]}):"Import Recipe"}),o.jsx(re,{onClick:()=>{c(!1),h("")},variant:"outline",disabled:f,className:"h-10 sm:h-11 text-sm sm:text-base",children:"Cancel"})]})]})]})}),o.jsx(Pt,{open:S,onOpenChange:P,children:o.jsxs(Nt,{className:"w-[95vw] max-w-md mx-auto",children:[o.jsxs(Gt,{children:[o.jsx(Bt,{className:"text-lg sm:text-xl",children:"Change Password"}),o.jsx(Kr,{className:"text-xs sm:text-sm",children:"Enter your new password. Must be at least 6 characters."})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"new-password",className:"text-sm sm:text-base",children:"New Password"}),o.jsx("input",{id:"new-password",type:"password",value:C,onChange:F=>R(F.target.value),className:"w-full px-3 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter new password"})]}),o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"confirm-password",className:"text-sm sm:text-base",children:"Confirm Password"}),o.jsx("input",{id:"confirm-password",type:"password",value:M,onChange:F=>D(F.target.value),className:"w-full px-3 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Confirm new password"})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-2",children:[o.jsx(re,{onClick:()=>{if(C!==M){alert("Passwords do not match");return}if(C.length<6){alert("Password must be at least 6 characters");return}q(!0),setTimeout(()=>{q(!1),P(!1),R(""),D("")},1e3)},disabled:Q||!C||!M,className:"flex-1 bg-purple-600 hover:bg-purple-700 h-10 sm:h-11 text-sm sm:text-base",children:Q?o.jsxs(o.Fragment,{children:[o.jsx(ui,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Password"}),o.jsx(re,{onClick:()=>{P(!1),R(""),D("")},variant:"outline",disabled:Q,className:"h-10 sm:h-11 text-sm sm:text-base",children:"Cancel"})]})]})]})})]})}function _6({onNavigate:e}){var ue;const[t,r]=u.useState([]),[n,s]=u.useState([]),[a,i]=u.useState(null),[l,c]=u.useState("post"),[d,h]=u.useState(""),[f,p]=u.useState(""),[m,b]=u.useState(""),[g,w]=u.useState([]),[y,x]=u.useState(!1),[v,j]=u.useState(0),[N,_]=u.useState(!1),[S,P]=u.useState(""),[C,R]=u.useState([]),[M,D]=u.useState(null),[Q,q]=u.useState(!1),[ee,B]=u.useState(!1),F=se.useRef(null);u.useEffect(()=>{A()},[]);const A=async()=>{try{const{data:G}=await U.auth.getUser();if(!G.user)return;const{data:H,error:fe}=await U.from("public_recipes").select("id, title, image_url").eq("user_id",G.user.id).order("created_at",{ascending:!1});if(fe)throw fe;w(H||[])}catch(G){console.error("Error loading recipes:",G)}},k=G=>new Promise((H,fe)=>{const ce=document.createElement("video");ce.preload="metadata",ce.onloadedmetadata=()=>{window.URL.revokeObjectURL(ce.src);const O=Math.floor(ce.duration);isNaN(O)||O===0?fe(new Error("Invalid video duration")):H(O)},ce.onerror=()=>{window.URL.revokeObjectURL(ce.src),fe(new Error("Failed to load video metadata"))},ce.src=URL.createObjectURL(G)}),I=async G=>{const H=Array.from(G.target.files||[]);if(H.length===0)return;const fe=H.filter(oe=>oe.type.startsWith("image/")),ce=H.filter(oe=>oe.type.startsWith("video/")),O=[...fe,...ce];if(O.length===0){L.error("Please select at least one image or video");return}if(O.length>4){L.error("You can only upload up to 4 images/videos total");return}const J=[],T=[];let K=!1;for(const oe of O){const be=oe.type.startsWith("image/"),Te=oe.type.startsWith("video/");if(be&&oe.size>10*1024*1024){L.error(`${oe.name} is too large (max 10MB for images)`);continue}if(Te&&oe.size>100*1024*1024){L.error(`${oe.name} is too large (max 100MB for videos)`);continue}if(Te)try{const W=await k(oe);if(l==="daily"&&W>30){L.error(`${oe.name}: Daily videos must be 30 seconds or less`);continue}K=!0}catch(W){console.error("Video load error:",W),L.error(`Failed to load ${oe.name}`);continue}J.push(oe),T.push(URL.createObjectURL(oe))}if(J.length===0){L.error("No valid files to upload");return}r(J),s(T),i(K?"video":"image")},te=()=>{n.forEach(G=>URL.revokeObjectURL(G)),r([]),s([]),i(null)},$=()=>{F.current&&(ee?F.current.pause():F.current.play(),B(!ee))},z=async G=>{if(!G.trim()){R([]);return}q(!0);try{const ce=((await(await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(G)}&media=music&entity=song&limit=20`)).json()).results||[]).map(O=>{var J;return{id:O.trackId.toString(),name:O.trackName||"Unknown Song",artists:[{name:O.artistName||"Unknown Artist"}],album:{images:[{url:((J=O.artworkUrl100)==null?void 0:J.replace("100x100","300x300"))||"https://via.placeholder.com/300"}]},preview_url:O.previewUrl||null}});R(ce)}catch(H){console.error("Music search failed:",H),L.error("Search failed  try again"),R([])}finally{q(!1)}},X=async()=>{var G,H,fe,ce,O,J;if(t.length===0){L.error("Please select an image or video");return}if(l==="post"&&!d.trim()){L.error("Please enter a title");return}if(l==="daily"&&a==="video"&&v>30){L.error("Daily videos must be 30 seconds or less");return}x(!0);try{const{data:T}=await U.auth.getUser();if(!T.user)throw new Error("Not authenticated");const{data:K}=await U.from("profiles").select("id").eq("id",T.user.id).maybeSingle();K||await U.from("profiles").insert({id:T.user.id,username:((G=T.user.email)==null?void 0:G.split("@")[0])||"user",avatar_url:null});const oe=[];for(const W of t){const ae=W.name.split(".").pop(),Y=`${T.user.id}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${ae}`,{error:je}=await U.storage.from("posts").upload(Y,W,{cacheControl:"3600",upsert:!1});if(je)throw je;const{data:Z}=U.storage.from("posts").getPublicUrl(Y);oe.push(Z.publicUrl)}const be=oe.length>1?JSON.stringify(oe):oe[0],Te={spotify_track_id:(M==null?void 0:M.id)||null,spotify_track_name:(M==null?void 0:M.name)||null,spotify_artist_name:((fe=(H=M==null?void 0:M.artists)==null?void 0:H[0])==null?void 0:fe.name)||null,spotify_album_art:((J=(O=(ce=M==null?void 0:M.album)==null?void 0:ce.images)==null?void 0:O[0])==null?void 0:J.url)||null,spotify_preview_url:(M==null?void 0:M.preview_url)||null};if(l==="daily"){const W={user_id:T.user.id,media_url:be,media_type:a==="image"?"photo":"video",caption:f.trim()||null,duration:a==="video"?v:null,...Te},{error:ae}=await U.from("dailies").insert(W);if(ae)throw ae;await U.from("posts").insert({user_id:T.user.id,title:"Daily",caption:f.trim()||null,[a==="image"?"image_url":"video_url"]:be,...Te}),L.success("Daily posted successfully!")}else{let W=m?`${window.location.origin}/#recipe/${m}`:null;const ae={user_id:T.user.id,title:d.trim(),caption:f.trim()||null,recipe_url:W,[a==="image"?"image_url":"video_url"]:be,...Te},{data:Y,error:je}=await U.from("posts").insert(ae).select().single();if(je)throw je;const Z=X4(f);if(Z.length>0&&Y)for(const pe of Z){const{data:Ne}=await U.from("hashtags").select("id, usage_count").eq("tag",pe).maybeSingle();let Le;if(Ne)Le=Ne.id,await U.from("hashtags").update({usage_count:Ne.usage_count+1}).eq("id",Ne.id);else{const{data:Me}=await U.from("hashtags").insert({tag:pe,usage_count:1}).select().single();Le=Me.id}await U.from("post_hashtags").insert({post_id:Y.id,hashtag_id:Le})}L.success("Post uploaded successfully!")}te(),h(""),p(""),b(""),D(null),window.history.replaceState({},"","/discover"),e("discover")}catch(T){console.error("Upload error:",T),L.error(T.message||"Failed to upload")}finally{x(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 pb-40 overflow-x-hidden",style:{paddingBottom:"max(10rem, env(safe-area-inset-bottom))"},children:[o.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-20",style:{paddingTop:"env(safe-area-inset-top)"},children:o.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center justify-between",children:[o.jsx("button",{type:"button",onClick:G=>{G.preventDefault(),e("discover")},className:"text-gray-600 hover:text-gray-900 font-medium",children:"Cancel"}),o.jsxs("h1",{className:"text-lg font-semibold",children:["New ",l==="daily"?"Daily":"Post"]}),o.jsx("div",{className:"w-16"})]})}),o.jsxs("div",{className:"max-w-lg mx-auto p-4 space-y-4",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Post Type"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>c("post"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${l==="post"?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Post"}),o.jsx("button",{onClick:()=>c("daily"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${l==="daily"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Daily"})]}),l==="daily"&&o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Dailies expire after 24 hours. Videos must be 30 seconds or less."})]}),n.length===0?o.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 sm:p-12 text-center hover:border-orange-500 transition-colors cursor-pointer",children:o.jsxs("label",{className:"cursor-pointer",children:[o.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:I,className:"hidden"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-3 sm:gap-4 justify-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl shadow-lg",children:o.jsx(pc,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg",children:o.jsx(XE,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-1",children:"Upload a photo or video"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Click to select a file from your device"})]})]})]})}):o.jsxs("div",{className:"space-y-2",children:[n.map((G,H)=>{const fe=t[H],ce=fe==null?void 0:fe.type.startsWith("video/");return o.jsxs("div",{className:"relative",children:[ce?o.jsx("video",{src:G,controls:!0,className:"w-full aspect-square object-cover rounded-xl"}):o.jsx("img",{src:G,alt:`Preview ${H+1}`,className:"w-full aspect-square object-cover rounded-xl"}),o.jsx("button",{onClick:te,className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2",children:o.jsx(Rt,{className:"w-5 h-5"})})]},H)}),t.length<4&&o.jsxs("label",{className:"cursor-pointer",children:[o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:G=>{const H=Array.from(G.target.files||[]),fe=4-t.length,ce=H.slice(0,fe),O=[],J=[];for(const T of ce){if(T.size>10*1024*1024){L.error(`${T.name} is too large (max 10MB)`);continue}if(!T.type.startsWith("image/")){L.error(`${T.name} is not an image`);continue}O.push(T),J.push(URL.createObjectURL(T))}O.length>0&&(r([...t,...O]),s([...n,...J]),L.success(`Added ${O.length} image${O.length>1?"s":""}`))},className:"hidden"}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-500 transition-colors",children:[o.jsx(pc,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Add More Photos"}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.length,"/4 selected"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Add Music (optional)"}),o.jsxs("button",{onClick:()=>_(!0),className:"text-sm font-medium text-orange-600 hover:text-orange-700 flex items-center gap-1.5",children:[o.jsx(VE,{className:"w-5 h-5"}),M?"Change Music":"Add Music"]})]}),M&&o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[o.jsx("img",{src:(ue=M.album.images[0])==null?void 0:ue.url,alt:"album",className:"w-12 h-12 rounded object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:M.name}),o.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.artists[0].name})]}),o.jsx("button",{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2 transition-colors",children:ee?o.jsx(jm,{className:"w-4 h-4"}):o.jsx(Nm,{className:"w-4 h-4 ml-0.5"})}),o.jsx("button",{onClick:()=>D(null),className:"text-red-600",children:o.jsx(Rt,{className:"w-5 h-5"})}),o.jsx("audio",{ref:F,src:M.preview_url,onEnded:()=>B(!1),onPlay:()=>B(!0),onPause:()=>B(!1)})]})]}),o.jsxs("div",{className:"space-y-4 bg-white rounded-xl p-4 shadow-sm",children:[l==="post"&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:d,onChange:G=>h(G.target.value),placeholder:"Enter a title for your post",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",maxLength:200}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d.length,"/200"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption"}),o.jsx(An,{value:f,onChange:G=>p(G.target.value),placeholder:"Write a caption...",className:"min-h-24 resize-none",maxLength:2200}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[f.length,"/2200"]})]}),l==="post"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Recipe (optional)"}),o.jsxs(mn,{value:m,onValueChange:b,children:[o.jsx(Yr,{children:o.jsx(pn,{placeholder:"Select a recipe from your collection"})}),o.jsx(Jr,{children:g.length===0?o.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No recipes yet. Add some recipes first!"}):g.map(G=>o.jsx(hr,{value:G.id,children:o.jsxs("div",{className:"flex items-center gap-2",children:[G.image_url&&o.jsx("img",{src:G.image_url,alt:G.title,className:"w-8 h-8 rounded object-cover"}),o.jsx("span",{children:G.title})]})},G.id))})]})]})]}),t.length>0&&o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(_m,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Ready to post"}),o.jsxs("p",{className:"text-xs text-orange-700 mt-1 truncate",children:[t.length," image",t.length>1?"s":""," selected"]}),"              "]})]})})]}),o.jsx("div",{className:"fixed left-0 right-0 px-4 pb-6 bg-gradient-to-t from-white via-white to-transparent z-[60] lg:z-10 lg:bottom-0",style:{bottom:"80px",paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:o.jsx("div",{className:"max-w-lg mx-auto flex justify-center",children:o.jsx(re,{onClick:X,disabled:t.length===0||l==="post"&&!d.trim()||y,className:"px-12 sm:px-16 py-5 sm:py-6 text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 shadow-lg rounded-full",children:y?"Submitting...":"Submit"})})}),N&&o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-end md:items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full md:max-w-lg md:rounded-2xl flex flex-col",style:{maxHeight:"85vh",paddingBottom:"env(safe-area-inset-bottom)"},children:[o.jsxs("div",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[o.jsx("h3",{className:"font-semibold text-lg",children:"Choose Music"}),o.jsx("button",{onClick:()=>_(!1),children:o.jsx(Rt,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"p-4 flex-shrink-0",children:o.jsx("input",{type:"text",value:S,onChange:G=>{P(G.target.value),z(G.target.value)},placeholder:"Search any song...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500",autoFocus:!0})}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 space-y-2",children:[Q&&o.jsx("p",{className:"text-center text-gray-500 py-8",children:"Searching..."}),C.map(G=>{var H;return o.jsxs("button",{onClick:()=>{D(G),_(!1),L.success("Music added!")},className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition text-left",children:[o.jsx("img",{src:((H=G.album.images[0])==null?void 0:H.url)||"/placeholder.png",alt:"album",className:"w-12 h-12 rounded flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:G.name}),o.jsx("p",{className:"text-xs text-gray-600 truncate",children:G.artists.map(fe=>fe.name).join(", ")})]}),o.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded flex-shrink-0",children:"30s Preview"})]},G.id)}),S&&C.length===0&&!Q&&o.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tracks found"})]})]})})]})}const Pu=e=>e?e.includes("/functions/v1/image-proxy")||e.includes("supabase.co/storage/v1/object/public/")?e:e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`:e:null,S6=e=>{const t=e.trim();return t.length===0?"Username required":t.length>10?"Max 10 characters":t.includes(" ")?"No spaces allowed":/^[a-zA-Z0-9._]+$/.test(t)?/^[._]/.test(t)||/[._]$/.test(t)?"Cannot start or end with _ or .":null:"Only letters, numbers, _ . allowed"},Zx=(e,t,r,n=.85)=>new Promise(s=>{const a=new Image,i=document.createElement("canvas"),l=i.getContext("2d");a.onload=()=>{let c=a.width,d=a.height;c>d?c>t&&(d=Math.round(d*t/c),c=t):d>r&&(c=Math.round(c*r/d),d=r),i.width=c,i.height=d,l.drawImage(a,0,0,c,d),i.toBlob(h=>{if(!h)return s(e);const f=new File([h],e.name,{type:e.type||"image/jpeg",lastModified:Date.now()});s(f)},e.type||"image/jpeg",n)},a.onerror=()=>s(e),a.src=URL.createObjectURL(e)});function e0({username:e}){var ce;const[t,r]=u.useState([]),[n,s]=u.useState(null),[a,i]=u.useState(!0),[l,c]=u.useState(!1),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(!1),[g,w]=u.useState(!1),[y,x]=u.useState(""),[v,j]=u.useState(""),[N,_]=u.useState(""),[S,P]=u.useState(null),[C,R]=u.useState(!1),[M,D]=u.useState(!1),[Q,q]=u.useState(null),[ee,B]=u.useState(null),[F,A]=u.useState(!1),[k,I]=u.useState(null);u.useEffect(()=>{let O=!0;return(async()=>{var T;if(O)try{const{data:{user:K}}=await U.auth.getUser();if(!K){L.error("Please log in"),window.history.pushState({},"","/");return}h(K.id);let oe=null,be=null;if(e){const{data:Y,error:je}=await U.from("profiles").select("id, username, avatar_url, banner_url, bio, link").ilike("username",e).single();if(!O)return;if(je||!Y){O&&L.error("User not found"),O&&window.history.pushState({},"","/discover"),O&&i(!1);return}oe=Y,be=Y.id}else{const{data:Y}=await U.from("profiles").select("id, username, avatar_url, banner_url, bio, link").eq("id",K.id).single();if(Y)oe=Y;else{const je=((T=K.email)==null?void 0:T.split("@")[0])||"user";await U.from("profiles").insert({id:K.id,username:je}),oe={id:K.id,username:je,avatar_url:null}}be=K.id}if(!O)return;p(be),b(K.id===be);const{count:Te}=await U.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",be),{count:W}=await U.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",be);if(K.id!==be){const{data:Y}=await U.from("follows").select("id").eq("follower_id",K.id).eq("following_id",be).maybeSingle();O&&D(!!Y)}O&&s({...oe,followers_count:Te||0,following_count:W||0});const{data:ae}=await U.from("posts").select("id, user_id, title, image_url, video_url, caption, recipe_url, recipe_id, created_at").eq("user_id",be).order("created_at",{ascending:!1});O&&r(ae||[]),!e&&(oe!=null&&oe.username)&&window.history.replaceState({},"",`/profile/${oe.username}`),O&&R(await fc())}catch{O&&L.error("Failed to load profile")}finally{O&&i(!1)}})(),()=>{O=!1}},[e]),u.useEffect(()=>{const J=new URLSearchParams(window.location.search).get("post");J&&(P(J),window.history.replaceState({},"",window.location.pathname))},[]);const te=async O=>{var T;const J=(T=O.target.files)==null?void 0:T[0];if(!(!J||!d)){if(!J.type.startsWith("image/")){L.error("Please select an image");return}c(!0),L.loading("Resizing & uploading avatar...",{duration:0});try{const K=await Zx(J,1080,1080,.9),oe=K.name.split(".").pop()||"jpg",be=`${d}/avatar.${oe}`,{error:Te}=await U.storage.from("avatars").upload(be,K,{upsert:!0});if(Te)throw Te;const{data:{publicUrl:W}}=U.storage.from("avatars").getPublicUrl(be),{error:ae}=await U.from("profiles").update({avatar_url:W+"?t="+Date.now()}).eq("id",d);if(ae)throw ae;s(Y=>Y?{...Y,avatar_url:W+"?t="+Date.now()}:null),L.dismiss(),L.success("Avatar updated instantly!")}catch(K){L.dismiss(),L.error("Upload failed: "+K.message)}finally{c(!1)}}},$=async O=>{var T;const J=(T=O.target.files)==null?void 0:T[0];if(!(!J||!d)){if(!J.type.startsWith("image/")){L.error("Please select an image");return}c(!0),L.loading("Resizing & uploading banner...",{duration:0});try{const K=await Zx(J,1920,600,.9),oe=K.name.split(".").pop()||"jpg",be=`${d}/banner.${oe}`,{error:Te}=await U.storage.from("banners").upload(be,K,{upsert:!0});if(Te)throw Te;const{data:{publicUrl:W}}=U.storage.from("banners").getPublicUrl(be),{error:ae}=await U.from("profiles").update({banner_url:W+"?t="+Date.now()}).eq("id",d);if(ae)throw ae;s(Y=>Y?{...Y,banner_url:W+"?t="+Date.now()}:null),L.dismiss(),L.success("Banner updated instantly!")}catch(K){L.dismiss(),L.error("Upload failed: "+K.message)}finally{c(!1)}}},z=async()=>{d&&(await U.from("profiles").update({avatar_url:null}).eq("id",d),s(O=>O?{...O,avatar_url:null}:null),L.success("Avatar removed"))},X=async()=>{d&&(await U.from("profiles").update({banner_url:null}).eq("id",d),s(O=>O?{...O,banner_url:null}:null),L.success("Banner removed"))},ue=async()=>{if(!d)return;const O=S6(y);if(O){q(O),L.error(O);return}q(null);const J=v.trim().split(`
`);if(J.length>3){L.error("Maximum 3 lines allowed");return}if(J.some(oe=>oe.length>40)){L.error("Maximum 40 characters per line");return}const T={},K=y.trim();if(K!==(n==null?void 0:n.username)&&(T.username=K),v.trim()!==((n==null?void 0:n.bio)||"").trim()&&(T.bio=v.trim()||null),N.trim()!==((n==null?void 0:n.link)||"").trim()&&(T.link=N.trim()||null),Object.keys(T).length>0){const{error:oe}=await U.from("profiles").update(T).eq("id",d);if(oe){oe.message.includes("profiles_username_key")?L.error("Username already taken"):L.error("Failed to update profile");return}s(be=>be?{...be,...T}:null),L.success("Profile updated!"),T.username&&window.history.replaceState({},"",`/profile/${T.username}`)}w(!1)},G=async O=>{var T;const J=(T=O.target.files)==null?void 0:T[0];if(!(!J||!ee)){A(!0);try{const K=J.name.split(".").pop(),oe=`${Math.random()}.${K}`,be=`${d}/${oe}`,{error:Te}=await U.storage.from("posts").upload(be,J);if(Te)throw Te;const{data:{publicUrl:W}}=U.storage.from("posts").getPublicUrl(be);B(ae=>ae?{...ae,photoUrl:W}:null),L.success("Photo uploaded!")}catch(K){console.error("Upload error:",K),L.error("Failed to upload photo")}finally{A(!1)}}},H=async()=>{if(ee)try{const{error:O}=await U.from("posts").update({caption:ee.caption.trim()||null,recipe_url:ee.recipeUrl.trim()||null,image_url:ee.photoUrl.trim()||null}).eq("id",ee.id);if(O)throw O;r(J=>J.map(T=>T.id===ee.id?{...T,caption:ee.caption.trim()||null,image_url:ee.photoUrl.trim()||null,recipe_url:ee.recipeUrl.trim()||null}:T)),L.success("Post updated!"),B(null)}catch(O){console.error("Edit error:",O),L.error("Failed to update post")}},fe=async()=>{if(k)try{const{error:O}=await U.from("posts").delete().eq("id",k);if(O)throw O;r(J=>J.filter(T=>T.id!==k)),L.success("Post deleted!"),I(null)}catch(O){console.error("Delete error:",O),L.error("Failed to delete post")}};return a?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-32",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):n?o.jsxs("div",{className:"min-h-screen bg-gray-50 pb-32 overflow-x-hidden",style:{paddingBottom:"max(8rem, env(safe-area-inset-bottom))"},children:[o.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-30",style:{paddingTop:"env(safe-area-inset-top)"},children:o.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center gap-3",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ko,{className:"w-6 h-6"})}),o.jsxs("h1",{className:"text-lg font-semibold",children:["@",n.username]})]})}),")",o.jsxs("div",{className:"max-w-lg mx-auto w-full",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200",children:[o.jsxs("div",{className:"relative h-28 sm:h-32",children:[n.banner_url?o.jsx("img",{src:n.banner_url,alt:"Banner",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-100 to-amber-100"}),m&&o.jsxs("label",{className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:$,disabled:l,className:"hidden"}),o.jsx(Ms,{className:"w-4 h-4 text-gray-600"})]})]}),o.jsxs("div",{className:"relative px-4 pb-3",children:[o.jsxs("div",{className:"flex items-start gap-3 -mt-10",children:[o.jsxs("div",{className:"flex-shrink-0",children:[o.jsxs("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20",children:[n.avatar_url?o.jsx("img",{src:n.avatar_url,alt:n.username,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border-4 border-white shadow-lg"}):o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white text-xl sm:text-2xl font-bold border-4 border-white shadow-lg",children:n.username[0].toUpperCase()}),m&&o.jsxs("label",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-1.5 shadow-md cursor-pointer hover:bg-gray-50 z-20",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:te,disabled:l,className:"hidden"}),o.jsx(Ms,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-700"})]})]}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.username}),C&&o.jsx(Wa,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"})]})})]}),o.jsxs("div",{className:"flex-1 pt-8 sm:pt-11 text-center min-w-0 max-w-[60%]",children:[n.bio?o.jsx("div",{className:"space-y-1 sm:space-y-2 mt-2",children:n.bio.split(`
`).slice(0,3).map((O,J)=>o.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-800 italic tracking-wide leading-snug",style:{wordBreak:"break-word"},children:O.slice(0,40)},J))}):o.jsx("p",{className:"text-xs sm:text-sm text-gray-400 italic font-light mt-3",children:m?"Tap Edit Profile to add a bio":"No bio yet"}),n.link&&o.jsx("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 mt-2 block underline break-all",children:n.link})]})]}),m&&o.jsx("div",{className:"mt-4 flex justify-center px-2",children:o.jsxs("button",{onClick:()=>{x(n.username||""),j(n.bio||""),_(n.link||""),w(!0)},className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-orange-600 text-white text-sm sm:text-base font-medium rounded-full hover:bg-orange-700 shadow-md",children:[o.jsx(WE,{className:"w-4 h-4"}),"Edit Profile"]})})]}),!m&&o.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(re,{onClick:async()=>{if(!(!d||!f))try{M?(await U.from("follows").delete().eq("follower_id",d).eq("following_id",f),D(!1),s(O=>O?{...O,followers_count:(O.followers_count||0)-1}:null),L.success("Unsupported")):(await U.from("follows").insert({follower_id:d,following_id:f}),D(!0),s(O=>O?{...O,followers_count:(O.followers_count||0)+1}:null),L.success("Supporting!"))}catch{L.error("Failed to update")}},className:`flex-1 h-10 text-sm ${M?"bg-gray-200 text-gray-900 hover:bg-gray-300":"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600"}`,children:M?"Supporting":"Support"}),o.jsx(re,{onClick:handleSendMessage,className:"flex-1 h-10 text-sm bg-white border-2 border-gray-300 text-gray-900 hover:bg-gray-50",children:"Message"})]})}),o.jsx("div",{className:"px-4 py-3 sm:py-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-center gap-8 sm:gap-10",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg sm:text-xl font-bold",children:t.length}),o.jsx("div",{className:"text-xs text-gray-500",children:"posts"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg sm:text-xl font-bold",children:n.followers_count||0}),o.jsx("div",{className:"text-xs text-gray-500",children:"supporters"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-lg sm:text-xl font-bold",children:n.following_count||0}),o.jsx("div",{className:"text-xs text-gray-500",children:"supporting"})]})]})})]}),o.jsx("div",{className:"border-b border-gray-200 bg-white",children:o.jsxs("div",{className:"flex items-center justify-center gap-2 py-3",children:[o.jsx(OE,{className:"w-5 h-5 text-gray-900"}),o.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider",children:"Posts"})]})}),t.length===0?o.jsxs("div",{className:"text-center py-12 sm:py-16 px-4",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl shadow-lg mb-4",children:o.jsx(_m,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),o.jsx("p",{className:"text-gray-900 font-semibold text-base sm:text-lg mb-2",children:"No posts yet"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Share your first recipe!"})]}):o.jsx("div",{className:"grid grid-cols-3 gap-0.5 sm:gap-1",children:t.map(O=>{const J=Pu(O.image_url);let T=J;if(J)try{const K=JSON.parse(J);Array.isArray(K)&&K.length>0&&(T=Pu(K[0]))}catch{if(J.includes(",")){const K=J.split(",").map(oe=>oe.trim());T=Pu(K[0])}}return o.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden relative group",children:[o.jsxs("div",{onClick:()=>P(O.id),className:"cursor-pointer hover:opacity-90 w-full h-full",children:[T?o.jsx("img",{src:T,alt:O.title||"Post",className:"w-full h-full object-cover",loading:"lazy",onError:K=>{console.error("[Profile] Image failed to load:",T);const oe=K.target;oe.style.display="none";const be=oe.parentElement;be&&(be.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs">No image</div>')}}):O.video_url?o.jsx("video",{src:O.video_url,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"No media"}),O.title&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:o.jsx("p",{className:"text-white text-xs font-semibold truncate",children:O.title})})]}),(m||C)&&o.jsx("div",{className:"absolute top-2 right-2 z-10",onClick:K=>K.stopPropagation(),children:o.jsxs(gj,{children:[o.jsx(xj,{asChild:!0,children:o.jsx("button",{className:"p-1.5 bg-black/50 hover:bg-black/70 rounded-full backdrop-blur-sm",children:o.jsx(Sw,{className:"w-4 h-4 text-white"})})}),o.jsxs(dp,{align:"end",children:[o.jsxs(yi,{onClick:()=>{B({id:O.id,title:O.title||"",caption:O.caption||"",recipeUrl:O.recipe_url||"",photoUrl:O.image_url||O.video_url||""})},className:"cursor-pointer",children:[o.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Edit post"]}),o.jsxs(yi,{onClick:()=>I(O.id),className:"cursor-pointer text-red-600",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"}),"Delete post"]})]})]})})]},O.id)})})]}),o.jsx(Pt,{open:g,onOpenChange:w,children:o.jsxs(Nt,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsxs(Gt,{children:[o.jsx(Bt,{children:"Edit Profile"}),o.jsx(Kr,{children:"Max 40 characters per line  Max 3 lines"})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-5 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"username",children:"Username"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(lt,{id:"username",value:y,onChange:O=>{x(O.target.value),q(null)},placeholder:"max 20 chars, no spaces",maxLength:20,className:Q?"border-red-500":""}),Q&&o.jsx("p",{className:"text-xs text-red-600 font-medium",children:Q}),o.jsxs("p",{className:"text-xs text-gray-500",children:[y.length,"/20  letters, numbers, _ ."]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(qe,{htmlFor:"bio",children:"Bio"}),o.jsxs("span",{className:`text-xs font-medium ${v.length>120||v.split(`
`).length>3?"text-red-600":"text-gray-500"}`,children:[v.length,"/120  ",v.split(`
`).length,"/3 lines"]})]}),o.jsx(An,{id:"bio",value:v,onChange:O=>{let J=O.target.value;const T=J.split(`
`);T.length>3&&(J=T.slice(0,3).join(`
`)),J=J.split(`
`).map(K=>K.slice(0,40)).join(`
`),j(J)},placeholder:"i love peegi love peegi love peegi\\ni love peegi love peegi love peegi\\ni love peegi love peegi snguyen7",className:"min-h-[110px] resize-none text-center font-medium",rows:3}),o.jsx("p",{className:"text-xs text-gray-500 text-center -mt-2",children:"Press Enter for new line"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"link",children:"Link"}),o.jsx(lt,{id:"link",value:N,onChange:O=>_(O.target.value),placeholder:"https://example.com",type:"url"})]}),o.jsxs("div",{className:"flex gap-2",children:[n.avatar_url&&o.jsxs(re,{variant:"outline",onClick:z,disabled:l,className:"flex-1 text-red-600",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"})," Remove Avatar"]}),n.banner_url&&o.jsxs(re,{variant:"outline",onClick:X,disabled:l,className:"flex-1 text-red-600",children:[o.jsx(rr,{className:"w-4 h-4 mr-2"})," Remove Banner"]})]})]}),o.jsxs(ds,{children:[o.jsx(re,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),o.jsx(re,{onClick:ue,children:"Save Changes"})]})]})}),S&&o.jsx(Pt,{open:!!S,onOpenChange:()=>P(null),children:o.jsxs(Nt,{className:"max-w-lg p-0 overflow-hidden bg-black relative max-h-[90vh]",children:[o.jsx(hd,{postId:S,isOpen:!0,onClose:()=>P(null)}),o.jsxs("div",{className:"absolute inset-x-0 top-0 z-[100] flex items-center justify-between px-4 pt-4 pb-6 pointer-events-none",children:[o.jsx("button",{onClick:()=>P(null),className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-black/70 rounded-full transition-all shadow-lg",children:o.jsx(Ko,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(m||C)&&d===((ce=t.find(O=>O.id===S))==null?void 0:ce.user_id)&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{const O=t.find(J=>J.id===S);O&&B({id:O.id,title:O.title||"",caption:O.caption||"",recipeUrl:O.recipe_url||"",photoUrl:O.image_url||O.video_url||""}),P(null)},className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-orange-600/70 rounded-full transition-all shadow-lg",title:"Edit post",children:o.jsx(Fh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),o.jsx("button",{onClick:()=>{I(S),P(null)},className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-red-600/70 rounded-full transition-all shadow-lg",title:"Delete post",children:o.jsx(rr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})]})]})]})}),o.jsx(Ec,{open:!!ee,onOpenChange:O=>!O&&B(null),children:o.jsxs(wi,{className:"max-h-[85vh] overflow-y-auto",children:[o.jsxs(bi,{children:[o.jsx(Ni,{children:"Edit post"}),o.jsx(_i,{children:"Update your caption and recipe link."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Caption"}),o.jsx(An,{value:(ee==null?void 0:ee.caption)||"",onChange:O=>B(J=>J?{...J,caption:O.target.value}:null),placeholder:"Write a caption...",className:"resize-none",rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Recipe URL"}),o.jsx("input",{type:"url",value:(ee==null?void 0:ee.recipeUrl)||"",onChange:O=>B(J=>J?{...J,recipeUrl:O.target.value}:null),placeholder:"https://...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Change Photo/Video (Upload from device)"}),o.jsx("input",{type:"file",accept:"image/*,video/*",onChange:G,disabled:F,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),F&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Uploading..."}),(ee==null?void 0:ee.photoUrl)&&o.jsx("img",{src:ee.photoUrl,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg",onError:O=>{O.currentTarget.style.display="none"}})]})]}),o.jsxs(ji,{children:[o.jsx(ki,{children:"Cancel"}),o.jsx(Si,{onClick:H,className:"bg-orange-600 hover:bg-orange-700",children:"Save changes"})]})]})}),o.jsx(Ec,{open:!!k,onOpenChange:O=>!O&&I(null),children:o.jsxs(wi,{children:[o.jsxs(bi,{children:[o.jsx(Ni,{children:"Delete post"}),o.jsx(_i,{children:"Are you sure you want to delete this post? This action cannot be undone."})]}),o.jsxs(ji,{children:[o.jsx(ki,{children:"Cancel"}),o.jsx(Si,{onClick:fe,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}):o.jsx("div",{className:"text-center py-20 text-gray-500",children:"Profile not found"})}function k6(){const[e,t]=u.useState(!1),[r,n]=u.useState(null),[s,a]=u.useState(null),{user:i}=Qc(),l=async()=>{if(i!=null&&i.email){t(!0),a(null),n(null);try{const{error:c}=await U.auth.resend({type:"signup",email:i.email});if(c)throw c;n("Verification email sent! Check your inbox.")}catch(c){a(c.message||"Failed to resend verification email")}finally{t(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-amber-50 flex items-center justify-center px-4 overflow-hidden",style:{paddingTop:"max(1rem, env(safe-area-inset-top))",paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-red-200/30 to-transparent rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-orange-200/30 to-transparent rounded-full blur-3xl"}),o.jsx("div",{className:"relative z-10 w-full max-w-md",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 border border-red-100",children:[o.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg mb-4",children:o.jsx(xc,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Check your email and click the link to verify."})]}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(_w,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"text-sm text-orange-800 min-w-0",children:[o.jsx("p",{className:"font-medium mb-1",children:"Email sent to:"}),o.jsx("p",{className:"font-mono text-xs sm:text-sm text-orange-900 break-all",children:i==null?void 0:i.email})]})]})}),o.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[o.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[o.jsx(Ol,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsx("p",{children:"Check your inbox and spam folder"})]}),o.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[o.jsx(Ol,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsx("p",{children:"Click the verification link in the email"})]}),o.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[o.jsx(Ol,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsx("p",{children:"Return to this page after verifying"})]})]}),s&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm mb-4",children:s}),r&&o.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm mb-4",children:r}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(re,{onClick:l,disabled:e,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-semibold h-11 sm:h-12 text-sm sm:text-base shadow-lg",children:e?o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(zh,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(zh,{className:"w-4 h-4"}),"Resend Verification Email"]})}),o.jsx(re,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50 h-11 sm:h-12 text-sm sm:text-base",children:"I've Verified - Refresh Page"})]}),o.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:o.jsx("button",{onClick:async()=>{await U.auth.signOut(),window.location.reload()},className:"text-xs sm:text-sm text-gray-600 hover:text-gray-700",children:"Sign out"})})]})})]})}function C6({recipientUserId:e,recipientUsername:t,onBack:r}){const[n,s]=u.useState(null),[a,i]=u.useState([]),[l,c]=u.useState(null),[d,h]=u.useState([]),[f,p]=u.useState(""),[m,b]=u.useState(!0),g=u.useRef(null);u.useEffect(()=>{(async()=>{const{data:R}=await U.auth.getUser();R.user&&(s(R.user.id),await w(R.user.id),e&&t?await x(e,t,R.user.id):await y(R.user.id)),b(!1)})()},[e]);const w=async C=>{try{await U.from("notifications").update({read:!0}).eq("user_id",C).eq("type","message").eq("read",!1)}catch(R){console.error("Error marking notifications as read:",R)}};u.useEffect(()=>{if(!l||!n)return;const C=U.channel(`messages:${l.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages",filter:`conversation_id=eq.${l.id}`},async R=>{const M=R.new;h(D=>D.find(q=>q.id===M.id)?D:[...D,M]),M.sender_id!==n&&await U.from("direct_messages").update({read:!0}).eq("id",M.id)}).subscribe();return()=>{U.removeChannel(C)}},[l,n]),u.useEffect(()=>{l&&(v(l.id),j(l.id))},[l]),u.useEffect(()=>{var C;(C=g.current)==null||C.scrollIntoView({behavior:"smooth"})},[d]);const y=async C=>{const{data:R,error:M}=await U.from("conversations").select("*").or(`user1_id.eq.${C},user2_id.eq.${C}`).order("last_message_at",{ascending:!1});if(M){console.error("Error loading conversations:",M);return}const D=await Promise.all((R||[]).map(async Q=>{const q=Q.user1_id===C?Q.user2_id:Q.user1_id,{data:ee}=await U.from("profiles").select("id, username, avatar_url").eq("id",q).maybeSingle(),{data:B}=await U.from("direct_messages").select("content, created_at").eq("conversation_id",Q.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),{count:F}=await U.from("direct_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",Q.id).eq("read",!1).neq("sender_id",C);return{...Q,other_user:ee||{id:q,username:"Unknown",avatar_url:null},last_message:B,unread_count:F||0}}));i(D)},x=async(C,R,M)=>{const D=M||n;if(!D)return;const[Q,q]=D<C?[D,C]:[C,D];let{data:ee}=await U.from("conversations").select("*").eq("user1_id",Q).eq("user2_id",q).maybeSingle();if(!ee){const{data:F,error:A}=await U.from("conversations").insert({user1_id:Q,user2_id:q}).select().single();if(A){console.error("Error creating conversation:",A),L.error("Failed to start conversation");return}ee=F}const{data:B}=await U.from("profiles").select("id, username, avatar_url").eq("id",C).maybeSingle();c({...ee,other_user:B||{id:C,username:R,avatar_url:null},unread_count:0})},v=async C=>{const{data:R,error:M}=await U.from("direct_messages").select("*").eq("conversation_id",C).order("created_at",{ascending:!0});if(M){console.error("Error loading messages:",M);return}h(R||[])},j=async C=>{n&&await U.from("direct_messages").update({read:!0}).eq("conversation_id",C).neq("sender_id",n).eq("read",!1)},N=async()=>{if(!f.trim()||!l||!n)return;const C=f.trim();p("");const{error:R,data:M}=await U.from("direct_messages").insert({conversation_id:l.id,sender_id:n,content:C}).select();if(R){console.error("Error sending message:",R),L.error("Failed to send message"),p(C);return}M&&M[0]&&h(Q=>[...Q,M[0]]),await U.from("conversations").update({last_message_at:new Date().toISOString()}).eq("id",l.id);const D=l.user1_id===n?l.user2_id:l.user1_id;D!==n&&await U.from("notifications").insert({user_id:D,actor_id:n,type:"message",conversation_id:l.id})},_=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),N())},S=C=>{const R=/(https?:\/\/[^\s]+)/g;return C.split(R).map((D,Q)=>D.match(R)?o.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80",onClick:q=>q.stopPropagation(),children:D},Q):o.jsx("span",{children:D},Q))},P=async C=>{if(!n)return;h(M=>M.filter(D=>D.id!==C));const{error:R}=await U.from("direct_messages").delete().eq("id",C).eq("sender_id",n);R?(console.error("Failed to delete message:",R),L.error("Could not delete message"),l&&v(l.id)):L.success("Message deleted")};return m?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-20",children:o.jsx("div",{className:"text-gray-600",children:"Loading messages..."})}):l?o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>{c(null),h([]),r&&e?r():n&&y(n)},className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ko,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:l.other_user.avatar_url?o.jsx("img",{src:l.other_user.avatar_url,alt:l.other_user.username,className:"w-full h-full object-cover"}):l.other_user.username.charAt(0).toUpperCase()}),o.jsx("span",{className:"font-semibold",children:l.other_user.username})]})]})}),o.jsx("div",{className:"pt-16 flex-1 overflow-y-auto px-4 pb-[88px]",children:o.jsxs("div",{className:"space-y-4 py-4",children:[d.map(C=>o.jsx("div",{className:"flex justify-end",children:o.jsxs("div",{className:"relative group max-w-[75%]",onTouchStart:R=>{if(C.sender_id!==n)return;const M=setTimeout(()=>{var q;(q=R.target.closest(".group"))==null||q.classList.add("show-delete")},400),D=()=>{clearTimeout(M),document.removeEventListener("touchend",D)};document.addEventListener("touchend",D)},children:[o.jsxs("div",{className:`rounded-2xl px-4 py-2.5 text-sm leading-tight break-words shadow-sm ${C.sender_id===n?"bg-gray-200 text-gray-900":"bg-orange-500 text-white"}`,children:[o.jsx("p",{className:"whitespace-pre-wrap",children:S(C.content)}),o.jsx("span",{className:"text-xs opacity-70 mt-1 block text-right",children:new Date(C.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),C.sender_id===n&&o.jsx("button",{onClick:R=>{R.stopPropagation(),P(C.id)},className:`
                absolute -top-3 -right-3 
                w-9 h-9 rounded-full 
                bg-red-500 text-white 
                flex items-center justify-center 
                shadow-lg text-lg
                opacity-0 
                group-hover:opacity-100 
                group-[.show-delete]:opacity-100 
                transition-all duration-200 
                hover:bg-red-600 active:scale-95
                z-10
              `,children:""})]})},C.id)),o.jsx("div",{ref:g})]})}),o.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 w-80 bg-white border-t border-gray-200 px-4 py-3 z-50",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),onKeyPress:_,placeholder:"Type a message...",className:"w-[80%] px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500"}),o.jsx(re,{onClick:N,disabled:!f.trim(),className:"rounded-full bg-orange-500 hover:bg-orange-600 text-white px-6",children:o.jsx(Mo,{className:"w-5 h-5"})})]})})]}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[r&&o.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ko,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-xl font-bold",children:r?"Social Feed":"Messages"})]})}),o.jsx("div",{className:"pt-16 pb-20 px-4",children:a.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-500 mb-4",children:"No conversations yet"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Start a conversation from a user's profile"})]}):o.jsx("div",{className:"space-y-2",children:a.map(C=>o.jsxs("button",{onClick:()=>c(C),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:C.other_user.avatar_url?o.jsx("img",{src:C.other_user.avatar_url,alt:C.other_user.username,className:"w-full h-full object-cover"}):C.other_user.username.charAt(0).toUpperCase()}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-semibold truncate",children:C.other_user.username}),C.last_message&&o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:new Date(C.last_message.created_at).toLocaleDateString()})]}),C.last_message&&o.jsx("p",{className:"text-sm text-gray-600 truncate",children:C.last_message.content}),C.unread_count>0&&o.jsx("span",{className:"inline-block mt-1 bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full",children:C.unread_count})]})]},C.id))})})]})}var t0=["light","dark"],E6="(prefers-color-scheme: dark)",R6=u.createContext(void 0),P6={setTheme:e=>{},themes:[]},T6=()=>{var e;return(e=u.useContext(R6))!=null?e:P6};u.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let d=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?t0.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(b,g=!1,w=!0)=>{let y=i?i[b]:b,x=g?b+"|| ''":`'${y}'`,v="";return s&&w&&!g&&t0.includes(b)&&(v+=`d.style.colorScheme = '${b}';`),r==="class"?g||y?v+=`c.add(${x})`:v+="null":y&&(v+=`d[s](n,${x})`),v},m=e?`!function(){${h}${p(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${E6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${f}}catch(t){}}();`;return u.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});const A6=({...e})=>{const{theme:t="system"}=T6();return o.jsx(T4,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},I6=ed("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),uf=u.forwardRef(({className:e,variant:t,...r},n)=>o.jsx("div",{ref:n,role:"alert",className:Ee(I6({variant:t}),e),...r}));uf.displayName="Alert";const O6=u.forwardRef(({className:e,...t},r)=>o.jsx("h5",{ref:r,className:Ee("mb-1 font-medium leading-none tracking-tight",e),...t}));O6.displayName="AlertTitle";const hf=u.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("text-sm [&_p]:leading-relaxed",e),...t}));hf.displayName="AlertDescription";function M6(){const[e,t]=u.useState(!0),[r,n]=u.useState(!1),[s,a]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState({email:"",password:"",confirmPassword:"",name:""}),h=()=>{const w=window.location.origin;return console.log(" Redirect URL will be:",w),w},f=async()=>{if(a(""),l(""),!c.email||!c.password){a("Please fill in all required fields");return}if(!e){if(!c.name){a("Please enter your name");return}if(c.password!==c.confirmPassword){a("Passwords do not match");return}if(c.password.length<6){a("Password must be at least 6 characters");return}}n(!0);try{if(e){console.log(" Attempting email/password sign in...");const{error:w}=await U.auth.signInWithPassword({email:c.email,password:c.password});if(w)throw w;console.log(" Sign in successful")}else{console.log(" Attempting sign up...");const{error:w}=await U.auth.signUp({email:c.email,password:c.password,options:{data:{full_name:c.name},emailRedirectTo:h()}});if(w)throw w;console.log(" Sign up successful - check email"),l("Check your email for the verification link!")}}catch(w){console.error(" Auth error:",w),a(w.message||"An error occurred")}finally{n(!1)}},p=async()=>{console.log(" Google login initiated"),n(!0),a("");try{const w=h();console.log(" Calling signInWithOAuth with redirectTo:",w);const{data:y,error:x}=await U.auth.signInWithOAuth({provider:"google",options:{redirectTo:w,queryParams:{access_type:"offline",prompt:"consent"}}});if(console.log(" OAuth response:",{data:y,error:x}),x)throw x;console.log(" OAuth called but no redirect happened")}catch(w){console.error(" Google OAuth error:",w),a(w.message||"Failed to sign in with Google"),n(!1)}},m=(w,y)=>{d(x=>({...x,[w]:y})),a("")},b=()=>{t(!e),a(""),l(""),d({email:"",password:"",confirmPassword:"",name:""})},g=w=>{w.key==="Enter"&&f()};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-3 sm:p-4",style:{paddingTop:"max(0.75rem, env(safe-area-inset-top))",paddingBottom:"max(0.75rem, env(safe-area-inset-bottom))"},children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-4 sm:mb-6 md:mb-8",children:[o.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full bg-gradient-to-br from-orange-500 to-red-600 shadow-xl p-1.5 sm:p-2 overflow-hidden",children:o.jsx("img",{src:"/Woodenspoon.png",alt:"Meal Scrape",className:"w-full h-full object-contain drop-shadow-md"})})}),o.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3 px-2",children:"Meal Scrape"}),o.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 mb-1.5 max-w-sm mx-auto px-4",children:"The Only Recipe Book You'll Ever Need"}),o.jsx("p",{className:"text-xs sm:text-sm text-slate-500 px-4",children:"Meal Calendar  Shopping List  Social Community"})]}),o.jsxs(Je,{className:"border-slate-200 shadow-xl overflow-hidden",children:[o.jsxs(St,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-b border-orange-100 p-3 sm:p-4 md:p-6",children:[o.jsx(kt,{className:"text-lg sm:text-xl md:text-2xl text-slate-900 text-center",children:e?"Welcome Back":"Create Account"}),o.jsx(It,{className:"text-xs sm:text-sm text-slate-600 text-center",children:e?"Sign in to access your recipes":"Join to start saving and organizing recipes"})]}),o.jsx(tt,{className:"p-3 sm:p-4 md:p-6",children:o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s&&o.jsxs(uf,{variant:"destructive",className:"bg-red-50 border-red-200 py-2 sm:py-3",children:[o.jsx(_w,{className:"h-3 w-3 sm:h-4 sm:w-4"}),o.jsx(hf,{className:"text-xs sm:text-sm",children:s})]}),i&&o.jsx(uf,{className:"bg-green-50 border-green-200 py-2 sm:py-3",children:o.jsx(hf,{className:"text-xs sm:text-sm text-green-700",children:i})}),!e&&o.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[o.jsx(qe,{htmlFor:"name",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Full Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tw,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),o.jsx(lt,{id:"name",type:"text",placeholder:"John Doe",value:c.name,onChange:w=>m("name",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r})]})]}),o.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[o.jsx(qe,{htmlFor:"email",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(xc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),o.jsx(lt,{id:"email",type:"email",placeholder:"you@example.com",value:c.email,onChange:w=>m("email",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:"email"})]})]}),o.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[o.jsx(qe,{htmlFor:"password",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(gc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),o.jsx(lt,{id:"password",type:"password",placeholder:e?"Enter password":"Min. 6 characters",value:c.password,onChange:w=>m("password",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:e?"current-password":"new-password"})]})]}),!e&&o.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[o.jsx(qe,{htmlFor:"confirmPassword",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(gc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),o.jsx(lt,{id:"confirmPassword",type:"password",placeholder:"Re-enter password",value:c.confirmPassword,onChange:w=>m("confirmPassword",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:"new-password"})]})]}),o.jsx(re,{onClick:f,disabled:r,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base font-semibold shadow-lg",children:r?o.jsxs(o.Fragment,{children:[o.jsx(ui,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 mr-1.5 sm:mr-2 animate-spin"}),e?"Signing in...":"Creating account..."]}):o.jsxs(o.Fragment,{children:[e?"Sign In":"Create Account",o.jsx(Nw,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 ml-1.5 sm:ml-2"})]})}),o.jsxs("div",{className:"relative my-3 sm:my-4",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-slate-200"})}),o.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:o.jsx("span",{className:"px-2 bg-white text-slate-500",children:"OR"})})]}),o.jsxs(re,{variant:"outline",className:"w-full h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base border-slate-300 hover:bg-slate-50",onClick:p,disabled:r,children:[o.jsxs("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 mr-1.5 sm:mr-2",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]})}),o.jsx("div",{className:"bg-slate-50 px-3 py-3 sm:px-4 sm:py-4 border-t border-slate-200",children:o.jsxs("p",{className:"text-xs sm:text-sm text-center text-slate-600",children:[e?"Don't have an account? ":"Already have an account? ",o.jsx("button",{onClick:b,disabled:r,className:"font-semibold text-orange-600 hover:text-orange-700 disabled:opacity-50",children:e?"Sign up":"Sign in"})]})})]}),!e&&o.jsxs("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-center text-slate-500 mt-3 sm:mt-4 px-3 sm:px-4",children:["By creating an account, you agree to our"," ",o.jsx("button",{className:"underline hover:text-slate-700",children:"Terms of Service"})," ","and"," ",o.jsx("button",{className:"underline hover:text-slate-700",children:"Privacy Policy"})]})]})})}isAdmin&&(Route,ImageMigrationTool);const D6=({children:e})=>o.jsx("div",{className:"min-h-screen pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-gradient-to-br from-orange-50 to-amber-50",children:e});function $6(){const{user:e,loading:t,isEmailVerified:r}=Qc(),[n,s]=u.useState(()=>{const l=window.location.pathname;if(l.match(/^\/post\/[a-f0-9-]{36}$/))return"discover";if(l==="/"||l==="/discover-recipes")return"discover-recipes";if(l==="/discover")return"discover";if(l==="/recipes"||l==="/my-recipes")return"my-recipes";if(l==="/add-recipe")return"add-recipe";if(l==="/meal-planner")return"meal-planner";if(l==="/grocery-list")return"grocery-list";if(l==="/cart")return"cart";if(l==="/upload")return"upload";if(l==="/profile")return"profile";if(l==="/messages")return"messages";if(l==="/settings")return"settings";if(l==="/onboarding")return"onboarding";if(l.startsWith("/profile/")&&l!=="/profile"){const c=l.split("/profile/")[1];if(c)return`profile:${c}`}if(l!=="/"&&l.length>1&&!l.includes(".")){const c=l.substring(1),d=["add-recipe","meal-planner","grocery-list","cart","upload","messages","settings"];if(c&&!c.includes("/")&&!d.includes(c))return`profile:${c}`}return"discover-recipes"});u.useEffect(()=>{const c=window.location.pathname.match(/^\/post\/([a-f0-9]{36})$/);if(c){const d=c[1];s("discover"),window.dispatchEvent(new CustomEvent("open-shared-post",{detail:d})),window.history.replaceState({},"","/discover")}},[]),u.useEffect(()=>{const l=()=>{const c=window.location.pathname;if(c==="/"||c==="/discover-recipes")s("discover-recipes");else if(c==="/discover")s("discover");else if(c==="/recipes"||c==="/my-recipes")s("my-recipes");else if(c==="/upload")s("upload");else if(c==="/messages")s("messages");else if(c==="/settings")s("settings");else if(c==="/profile")s("profile");else if(c.startsWith("/profile/")&&c!=="/profile"){const d=c.split("/profile/")[1];d&&s(`profile:${d}`)}else if(c.match(/^\/post\/[a-f0-9-]{36}$/))s("discover");else if(c!=="/"&&c.length>1&&!c.includes(".")){const d=c.substring(1),h=["add-recipe","meal-planner","grocery-list","cart"];d&&!d.includes("/")&&!h.includes(d)?s(`profile:${d}`):s("discover-recipes")}else s("discover-recipes")};return window.addEventListener("popstate",l),()=>window.removeEventListener("popstate",l)},[]);const a=l=>{const c={"discover-recipes":"/",discover:"/discover","my-recipes":"/recipes","add-recipe":"/add-recipe","meal-planner":"/meal-planner","grocery-list":"/grocery-list",cart:"/cart",upload:"/upload",profile:"/profile",messages:"/messages",settings:"/settings",onboarding:"/onboarding"};if(l.startsWith("profile:")){const h=l.split("profile:")[1];window.history.pushState({},"",`/${h}`),s(l);return}const d=c[l]||"/";window.history.pushState({},"",d),s(l)},i=()=>{if(n.startsWith("profile:")){const l=n.split("profile:")[1];return o.jsx(e0,{username:l})}switch(n){case"discover-recipes":return o.jsx(J4,{onNavigate:a});case"discover":return o.jsx(xI,{onNavigate:a});case"my-recipes":return o.jsx(vI,{});case"add-recipe":return o.jsx(mO,{onNavigate:a});case"meal-planner":return o.jsx(JM,{onNavigate:a});case"grocery-list":return o.jsx(XM,{onNavigate:a});case"cart":return o.jsx(QM,{onNavigate:a});case"upload":return o.jsx(_6,{onNavigate:a});case"profile":return o.jsx(e0,{});case"messages":return o.jsx(C6,{onBack:()=>a("discover")});case"settings":return o.jsx(N6,{onNavigate:a});default:return o.jsx(Home,{onNavigate:a})}};return t||e&&r===void 0?o.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative w-20 h-28",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-12 border-8 border-orange-300 rounded-t-full"}),o.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-16 h-12 border-8 border-orange-300 rounded-b-full"}),o.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 w-1 bg-orange-600 origin-top animate-sand"})]}),o.jsx("p",{className:"mt-8 text-lg font-medium text-orange-800",children:"Preparing your kitchen"})]}),o.jsx("style",{children:`
          @keyframes sand {
            0%, 100% { height: 0; opacity: 1; }
            50% { height: 40px; opacity: 1; }
          }
          .animate-sand { animation: sand 2.4s infinite ease-in-out; }
        `})]}):e?r?o.jsx(D6,{children:o.jsxs(zR,{currentPage:n,onNavigate:a,children:[i(),o.jsx(A6,{})]})}):o.jsx(k6,{}):o.jsx(M6,{})}function L6(){return o.jsx(jE,{children:o.jsx(rk,{children:o.jsx($6,{})})})}class U6 extends u.Component{constructor(r){super(r);Pd(this,"handleReload",()=>{window.location.reload()});Pd(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return console.error("ErrorBoundary caught error:",r),{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary componentDidCatch:",r,n),this.setState({errorInfo:n})}render(){var r;if(this.state.hasError){const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-pink-50 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-2xl",children:o.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden border-2 border-red-200",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 p-4 sm:p-6",children:[o.jsx("div",{className:"flex items-center justify-center mb-3",children:o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:o.jsx(KE,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white",strokeWidth:2.5})})}),o.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-white text-center mb-2",children:"Oops! Something Went Wrong"}),o.jsx("p",{className:"text-sm sm:text-base text-white/90 text-center",children:"Don't worry, we're here to help you get back on track"})]}),o.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"bg-orange-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-orange-200",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:"We encountered an unexpected error. This has been logged and we'll look into it. In the meantime, try refreshing the page or returning to the home screen."})}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsxs("button",{onClick:this.handleReload,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-semibold rounded-lg sm:rounded-xl px-4 py-3 sm:py-4 transition-all hover:scale-105 active:scale-95 shadow-lg",children:[o.jsx(zh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Reload Page"})]}),o.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-50 text-gray-700 font-semibold rounded-lg sm:rounded-xl px-4 py-3 sm:py-4 transition-all hover:scale-105 active:scale-95 shadow-md border-2 border-gray-200",children:[o.jsx(DE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),o.jsx("span",{className:"text-sm sm:text-base",children:"Go Home"})]})]}),n&&this.state.error&&o.jsxs("details",{className:"bg-gray-50 rounded-lg sm:rounded-xl border border-gray-200",children:[o.jsxs("summary",{className:"px-3 py-2 sm:px-4 sm:py-3 cursor-pointer hover:bg-gray-100 rounded-lg sm:rounded-xl transition-colors flex items-center gap-2 text-xs sm:text-sm font-medium text-gray-700",children:[o.jsx(EE,{className:"w-4 h-4"}),o.jsx("span",{children:"Developer Info (Click to expand)"})]}),o.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Error Message"}),o.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 sm:p-3",children:o.jsx("code",{className:"text-[10px] sm:text-xs text-red-800 break-words",children:this.state.error.toString()})})]}),this.state.error.stack&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Stack Trace"}),o.jsx("div",{className:"bg-gray-900 rounded p-2 sm:p-3 overflow-x-auto max-h-48 sm:max-h-64",children:o.jsx("pre",{className:"text-[9px] sm:text-[10px] text-green-400 font-mono whitespace-pre-wrap break-words",children:this.state.error.stack})})]}),((r=this.state.errorInfo)==null?void 0:r.componentStack)&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Component Stack"}),o.jsx("div",{className:"bg-gray-900 rounded p-2 sm:p-3 overflow-x-auto max-h-48 sm:max-h-64",children:o.jsx("pre",{className:"text-[9px] sm:text-[10px] text-blue-400 font-mono whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})})]})]})]}),!n&&o.jsxs("div",{className:"bg-blue-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-blue-200",children:[o.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Need Help?"})]}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"If this problem persists, please contact our support team."}),o.jsx("button",{onClick:()=>window.location.href="mailto:support@mealscrape.app",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-semibold underline",children:"Contact Support "})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-purple-200",children:[o.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:" Quick Fixes"}),o.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 space-y-1.5 sm:space-y-2",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 shrink-0",children:""}),o.jsx("span",{children:"Try refreshing the page"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 shrink-0",children:""}),o.jsx("span",{children:"Clear your browser cache and cookies"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 shrink-0",children:""}),o.jsx("span",{children:"Check your internet connection"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-purple-600 shrink-0",children:""}),o.jsx("span",{children:"Update your browser to the latest version"})]})]})]})]}),o.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:py-4 border-t border-gray-200",children:o.jsxs("p",{className:"text-[10px] sm:text-xs text-center text-gray-500",children:["Error ID: ",Date.now(),"  Meal Scrape v1.0"]})})]})})})}return this.props.children}}const w_=document.getElementById("root");if(!w_)throw new Error("Root element not found");xy(w_).render(o.jsx(u.StrictMode,{children:o.jsx(U6,{children:o.jsx(L6,{})})}));

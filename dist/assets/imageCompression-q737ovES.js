import{i as n}from"./browser-image-compression-BzWLnoYn.js";const u={maxSizeMB:.5,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.8};async function s(c,e){const i=c.size;e==null||e({percent:0,originalSize:i,isCompressing:!0});try{const t=await n(c,{...u,onProgress:p=>{e==null||e({percent:p,originalSize:i,isCompressing:!0})}}),a=t.size,m=a/i*100;return e==null||e({percent:100,originalSize:i,currentSize:a,isCompressing:!1}),{file:t,originalSize:i,compressedSize:a,compressionRatio:m}}catch(t){return console.error("Image compression failed:",t),e==null||e({percent:100,originalSize:i,currentSize:i,isCompressing:!1}),{file:c,originalSize:i,compressedSize:i,compressionRatio:100}}}async function f(c,e){const i=c.map((t,a)=>s(t,m=>{e==null||e(a,c.length,m)}));return Promise.all(i)}function S(c){if(c===0)return"0 Bytes";const e=1024,i=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(c)/Math.log(e));return`${parseFloat((c/Math.pow(e,t)).toFixed(2))} ${i[t]}`}function h(c){return c.type.startsWith("image/")}async function d(c,e,i){const t=c.size;i==null||i({percent:0,originalSize:t,isCompressing:!0});try{const a=await n(c,{...u,...e,onProgress:l=>{i==null||i({percent:l,originalSize:t,isCompressing:!0})}}),m=a.size,p=m/t*100;return i==null||i({percent:100,originalSize:t,currentSize:m,isCompressing:!1}),{file:a,originalSize:t,compressedSize:m,compressionRatio:p}}catch(a){return console.error("Image compression failed:",a),i==null||i({percent:100,originalSize:t,currentSize:t,isCompressing:!1}),{file:c,originalSize:t,compressedSize:t,compressionRatio:100}}}export{f as a,d as b,s as c,S as f,h as i};

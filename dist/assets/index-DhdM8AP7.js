var __=Object.defineProperty;var S_=(e,t,r)=>t in e?__(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Id=(e,t,r)=>S_(e,typeof t!="symbol"?t+"":t,r);function s0(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();function o0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function k_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var a0={exports:{}},$c={},i0={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ri=Symbol.for("react.element"),C_=Symbol.for("react.portal"),E_=Symbol.for("react.fragment"),R_=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),T_=Symbol.for("react.provider"),A_=Symbol.for("react.context"),I_=Symbol.for("react.forward_ref"),O_=Symbol.for("react.suspense"),M_=Symbol.for("react.memo"),D_=Symbol.for("react.lazy"),yp=Symbol.iterator;function $_(e){return e===null||typeof e!="object"?null:(e=yp&&e[yp]||e["@@iterator"],typeof e=="function"?e:null)}var l0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,d0={};function ea(e,t,r){this.props=e,this.context=t,this.refs=d0,this.updater=r||l0}ea.prototype.isReactComponent={};ea.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ea.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function u0(){}u0.prototype=ea.prototype;function ff(e,t,r){this.props=e,this.context=t,this.refs=d0,this.updater=r||l0}var mf=ff.prototype=new u0;mf.constructor=ff;c0(mf,ea.prototype);mf.isPureReactComponent=!0;var wp=Array.isArray,h0=Object.prototype.hasOwnProperty,pf={current:null},f0={key:!0,ref:!0,__self:!0,__source:!0};function m0(e,t,r){var n,o={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)h0.call(t,n)&&!f0.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)o[n]===void 0&&(o[n]=l[n]);return{$$typeof:Ri,type:e,key:a,ref:i,props:o,_owner:pf.current}}function L_(e,t){return{$$typeof:Ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ri}function U_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bp=/\/+/g;function Od(e,t){return typeof e=="object"&&e!==null&&e.key!=null?U_(""+e.key):t.toString(36)}function _l(e,t,r,n,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ri:case C_:i=!0}}if(i)return i=e,o=o(i),e=n===""?"."+Od(i,0):n,wp(o)?(r="",e!=null&&(r=e.replace(bp,"$&/")+"/"),_l(o,t,r,"",function(d){return d})):o!=null&&(gf(o)&&(o=L_(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(bp,"$&/")+"/")+e)),t.push(o)),1;if(i=0,n=n===""?".":n+":",wp(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Od(a,l);i+=_l(a,t,r,c,o)}else if(c=$_(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Od(a,l++),i+=_l(a,t,r,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Bi(e,t,r){if(e==null)return e;var n=[],o=0;return _l(e,n,"","",function(a){return t.call(r,a,o++)}),n}function F_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yt={current:null},Sl={transition:null},z_={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:pf};function p0(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Bi,forEach:function(e,t,r){Bi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Bi(e,function(){t++}),t},toArray:function(e){return Bi(e,function(t){return t})||[]},only:function(e){if(!gf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=ea;ze.Fragment=E_;ze.Profiler=P_;ze.PureComponent=ff;ze.StrictMode=R_;ze.Suspense=O_;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z_;ze.act=p0;ze.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=c0({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=pf.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)h0.call(t,c)&&!f0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ri,type:e.type,key:o,ref:a,props:n,_owner:i}};ze.createContext=function(e){return e={$$typeof:A_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:T_,_context:e},e.Consumer=e};ze.createElement=m0;ze.createFactory=function(e){var t=m0.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:I_,render:e}};ze.isValidElement=gf;ze.lazy=function(e){return{$$typeof:D_,_payload:{_status:-1,_result:e},_init:F_}};ze.memo=function(e,t){return{$$typeof:M_,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Sl.transition;Sl.transition={};try{e()}finally{Sl.transition=t}};ze.unstable_act=p0;ze.useCallback=function(e,t){return Yt.current.useCallback(e,t)};ze.useContext=function(e){return Yt.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return Yt.current.useDeferredValue(e)};ze.useEffect=function(e,t){return Yt.current.useEffect(e,t)};ze.useId=function(){return Yt.current.useId()};ze.useImperativeHandle=function(e,t,r){return Yt.current.useImperativeHandle(e,t,r)};ze.useInsertionEffect=function(e,t){return Yt.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return Yt.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return Yt.current.useMemo(e,t)};ze.useReducer=function(e,t,r){return Yt.current.useReducer(e,t,r)};ze.useRef=function(e){return Yt.current.useRef(e)};ze.useState=function(e){return Yt.current.useState(e)};ze.useSyncExternalStore=function(e,t,r){return Yt.current.useSyncExternalStore(e,t,r)};ze.useTransition=function(){return Yt.current.useTransition()};ze.version="18.3.1";i0.exports=ze;var u=i0.exports;const se=o0(u),xf=s0({__proto__:null,default:se},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=u,V_=Symbol.for("react.element"),W_=Symbol.for("react.fragment"),q_=Object.prototype.hasOwnProperty,H_=B_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K_={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,r){var n,o={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)q_.call(t,n)&&!K_.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:V_,type:e,key:a,ref:i,props:o,_owner:H_.current}}$c.Fragment=W_;$c.jsx=g0;$c.jsxs=g0;a0.exports=$c;var s=a0.exports,x0={exports:{}},vr={},v0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,S){var T=I.length;I.push(S);e:for(;0<T;){var Z=T-1>>>1,F=I[Z];if(0<o(F,S))I[Z]=S,I[T]=F,T=Z;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var S=I[0],T=I.pop();if(T!==S){I[0]=T;e:for(var Z=0,F=I.length,W=F>>>1;Z<W;){var A=2*(Z+1)-1,X=I[A],J=A+1,V=I[J];if(0>o(X,T))J<F&&0>o(V,X)?(I[Z]=V,I[J]=T,Z=J):(I[Z]=X,I[A]=T,Z=A);else if(J<F&&0>o(V,T))I[Z]=V,I[J]=T,Z=J;else break e}}return S}function o(I,S){var T=I.sortIndex-S.sortIndex;return T!==0?T:I.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,f=null,p=3,m=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(I){for(var S=r(d);S!==null;){if(S.callback===null)n(d);else if(S.startTime<=I)n(d),S.sortIndex=S.expirationTime,t(c,S);else break;S=r(d)}}function j(I){if(g=!1,v(I),!b)if(r(c)!==null)b=!0,q(N);else{var S=r(d);S!==null&&G(j,S.startTime-I)}}function N(I,S){b=!1,g&&(g=!1,y(P),P=-1),m=!0;var T=p;try{for(v(S),f=r(c);f!==null&&(!(f.expirationTime>S)||I&&!M());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var F=Z(f.expirationTime<=S);S=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),v(S)}else n(c);f=r(c)}if(f!==null)var W=!0;else{var A=r(d);A!==null&&G(j,A.startTime-S),W=!1}return W}finally{f=null,p=T,m=!1}}var _=!1,k=null,P=-1,C=5,R=-1;function M(){return!(e.unstable_now()-R<C)}function $(){if(k!==null){var I=e.unstable_now();R=I;var S=!0;try{S=k(!0,I)}finally{S?Q():(_=!1,k=null)}}else _=!1}var Q;if(typeof x=="function")Q=function(){x($)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,oe=H.port2;H.port1.onmessage=$,Q=function(){oe.postMessage(null)}}else Q=function(){w($,0)};function q(I){k=I,_||(_=!0,Q())}function G(I,S){P=w(function(){I(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,q(N))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(p){case 1:case 2:case 3:var S=3;break;default:S=p}var T=p;p=S;try{return I()}finally{p=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,S){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var T=p;p=I;try{return S()}finally{p=T}},e.unstable_scheduleCallback=function(I,S,T){var Z=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?Z+T:Z):T=Z,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=T+F,I={id:h++,callback:S,priorityLevel:I,startTime:T,expirationTime:F,sortIndex:-1},T>Z?(I.sortIndex=T,t(d,I),r(c)===null&&I===r(d)&&(g?(y(P),P=-1):g=!0,G(j,T-Z))):(I.sortIndex=F,t(c,I),b||m||(b=!0,q(N))),I},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(I){var S=p;return function(){var T=p;p=S;try{return I.apply(this,arguments)}finally{p=T}}}})(y0);v0.exports=y0;var G_=v0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_=u,xr=G_;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,Ga={};function Ys(e,t){zo(e,t),zo(e+"Capture",t)}function zo(e,t){for(Ga[e]=t,e=0;e<t.length;e++)w0.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=Object.prototype.hasOwnProperty,J_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jp={},Np={};function X_(e){return Iu.call(Np,e)?!0:Iu.call(jp,e)?!1:J_.test(e)?Np[e]=!0:(jp[e]=!0,!1)}function Q_(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Z_(e,t,r,n){if(t===null||typeof t>"u"||Q_(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jt(e,t,r,n,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new Jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new Jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new Jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new Jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new Jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new Jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new Jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new Jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new Jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function yf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vf,yf);Lt[t]=new Jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vf,yf);Lt[t]=new Jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vf,yf);Lt[t]=new Jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new Jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function wf(e,t,r,n){var o=Lt.hasOwnProperty(t)?Lt[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Z_(t,r,o,n)&&(r=null),n||o===null?X_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Mn=Y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vi=Symbol.for("react.element"),mo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),j0=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),Du=Symbol.for("react.suspense_list"),Nf=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),N0=Symbol.for("react.offscreen"),_p=Symbol.iterator;function fa(e){return e===null||typeof e!="object"?null:(e=_p&&e[_p]||e["@@iterator"],typeof e=="function"?e:null)}var ut=Object.assign,Md;function Sa(e){if(Md===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Md=t&&t[1]||""}return`
`+Md+e}var Dd=!1;function $d(e,t){if(!e||Dd)return"";Dd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),a=n.stack.split(`
`),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==a[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Dd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Sa(e):""}function eS(e){switch(e.tag){case 5:return Sa(e.type);case 16:return Sa("Lazy");case 13:return Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 2:case 15:return e=$d(e.type,!1),e;case 11:return e=$d(e.type.render,!1),e;case 1:return e=$d(e.type,!0),e;default:return""}}function $u(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case po:return"Fragment";case mo:return"Portal";case Ou:return"Profiler";case bf:return"StrictMode";case Mu:return"Suspense";case Du:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j0:return(e.displayName||"Context")+".Consumer";case b0:return(e._context.displayName||"Context")+".Provider";case jf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nf:return t=e.displayName||null,t!==null?t:$u(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return $u(e(t))}catch{}}return null}function tS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $u(t);case 8:return t===bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rS(e){var t=_0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wi(e){e._valueTracker||(e._valueTracker=rS(e))}function S0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lu(e,t){var r=t.checked;return ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Sp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ls(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k0(e,t){t=t.checked,t!=null&&wf(e,"checked",t,!1)}function Uu(e,t){k0(e,t);var r=ls(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fu(e,t.type,ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fu(e,t,r){(t!=="number"||zl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ka=Array.isArray;function Co(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ls(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function zu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ae(92));if(ka(r)){if(1<r.length)throw Error(ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ls(r)}}function C0(e,t){var r=ls(t.value),n=ls(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ep(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qi,R0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ya(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nS=["Webkit","ms","Moz","O"];Object.keys(Oa).forEach(function(e){nS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oa[t]=Oa[e]})});function P0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oa.hasOwnProperty(e)&&Oa[e]?(""+t).trim():t+"px"}function T0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=P0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var sS=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vu(e,t){if(t){if(sS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Wu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=null;function _f(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hu=null,Eo=null,Ro=null;function Rp(e){if(e=Ai(e)){if(typeof Hu!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Bc(t),Hu(e.stateNode,e.type,t))}}function A0(e){Eo?Ro?Ro.push(e):Ro=[e]:Eo=e}function I0(){if(Eo){var e=Eo,t=Ro;if(Ro=Eo=null,Rp(e),t)for(e=0;e<t.length;e++)Rp(t[e])}}function O0(e,t){return e(t)}function M0(){}var Ld=!1;function D0(e,t,r){if(Ld)return e(t,r);Ld=!0;try{return O0(e,t,r)}finally{Ld=!1,(Eo!==null||Ro!==null)&&(M0(),I0())}}function Ja(e,t){var r=e.stateNode;if(r===null)return null;var n=Bc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ae(231,t,typeof r));return r}var Ku=!1;if(En)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Ku=!1}function oS(e,t,r,n,o,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Ma=!1,Bl=null,Vl=!1,Gu=null,aS={onError:function(e){Ma=!0,Bl=e}};function iS(e,t,r,n,o,a,i,l,c){Ma=!1,Bl=null,oS.apply(aS,arguments)}function lS(e,t,r,n,o,a,i,l,c){if(iS.apply(this,arguments),Ma){if(Ma){var d=Bl;Ma=!1,Bl=null}else throw Error(ae(198));Vl||(Vl=!0,Gu=d)}}function Js(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pp(e){if(Js(e)!==e)throw Error(ae(188))}function cS(e){var t=e.alternate;if(!t){if(t=Js(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return Pp(o),e;if(a===n)return Pp(o),t;a=a.sibling}throw Error(ae(188))}if(r.return!==n.return)r=o,n=a;else{for(var i=!1,l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?e:t}function L0(e){return e=cS(e),e!==null?U0(e):null}function U0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U0(e);if(t!==null)return t;e=e.sibling}return null}var F0=xr.unstable_scheduleCallback,Tp=xr.unstable_cancelCallback,dS=xr.unstable_shouldYield,uS=xr.unstable_requestPaint,gt=xr.unstable_now,hS=xr.unstable_getCurrentPriorityLevel,Sf=xr.unstable_ImmediatePriority,z0=xr.unstable_UserBlockingPriority,Wl=xr.unstable_NormalPriority,fS=xr.unstable_LowPriority,B0=xr.unstable_IdlePriority,Lc=null,dn=null;function mS(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Lc,e,void 0,(e.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:xS,pS=Math.log,gS=Math.LN2;function xS(e){return e>>>=0,e===0?32:31-(pS(e)/gS|0)|0}var Hi=64,Ki=4194304;function Ca(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ql(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~o;l!==0?n=Ca(l):(a&=i,a!==0&&(n=Ca(a)))}else i=r&~o,i!==0?n=Ca(i):a!==0&&(n=Ca(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qr(t),o=1<<r,n|=e[r],t&=~o;return n}function vS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-qr(a),l=1<<i,c=o[i];c===-1?(!(l&r)||l&n)&&(o[i]=vS(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Yu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function V0(){var e=Hi;return Hi<<=1,!(Hi&4194240)&&(Hi=64),e}function Ud(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qr(t),e[t]=r}function wS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-qr(r),a=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~a}}function kf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-qr(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var Ye=0;function W0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var q0,Cf,H0,K0,G0,Ju=!1,Gi=[],Zn=null,es=null,ts=null,Xa=new Map,Qa=new Map,Gn=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ap(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Xa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(t.pointerId)}}function pa(e,t,r,n,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[o]},t!==null&&(t=Ai(t),t!==null&&Cf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function jS(e,t,r,n,o){switch(t){case"focusin":return Zn=pa(Zn,e,t,r,n,o),!0;case"dragenter":return es=pa(es,e,t,r,n,o),!0;case"mouseover":return ts=pa(ts,e,t,r,n,o),!0;case"pointerover":var a=o.pointerId;return Xa.set(a,pa(Xa.get(a)||null,e,t,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,Qa.set(a,pa(Qa.get(a)||null,e,t,r,n,o)),!0}return!1}function Y0(e){var t=Rs(e.target);if(t!==null){var r=Js(t);if(r!==null){if(t=r.tag,t===13){if(t=$0(r),t!==null){e.blockedOn=t,G0(e.priority,function(){H0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qu=n,r.target.dispatchEvent(n),qu=null}else return t=Ai(r),t!==null&&Cf(t),e.blockedOn=r,!1;t.shift()}return!0}function Ip(e,t,r){kl(e)&&r.delete(t)}function NS(){Ju=!1,Zn!==null&&kl(Zn)&&(Zn=null),es!==null&&kl(es)&&(es=null),ts!==null&&kl(ts)&&(ts=null),Xa.forEach(Ip),Qa.forEach(Ip)}function ga(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,NS)))}function Za(e){function t(o){return ga(o,e)}if(0<Gi.length){ga(Gi[0],e);for(var r=1;r<Gi.length;r++){var n=Gi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Zn!==null&&ga(Zn,e),es!==null&&ga(es,e),ts!==null&&ga(ts,e),Xa.forEach(t),Qa.forEach(t),r=0;r<Gn.length;r++)n=Gn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gn.length&&(r=Gn[0],r.blockedOn===null);)Y0(r),r.blockedOn===null&&Gn.shift()}var Po=Mn.ReactCurrentBatchConfig,Hl=!0;function _S(e,t,r,n){var o=Ye,a=Po.transition;Po.transition=null;try{Ye=1,Ef(e,t,r,n)}finally{Ye=o,Po.transition=a}}function SS(e,t,r,n){var o=Ye,a=Po.transition;Po.transition=null;try{Ye=4,Ef(e,t,r,n)}finally{Ye=o,Po.transition=a}}function Ef(e,t,r,n){if(Hl){var o=Xu(e,t,r,n);if(o===null)Yd(e,t,n,Kl,r),Ap(e,n);else if(jS(o,e,t,r,n))n.stopPropagation();else if(Ap(e,n),t&4&&-1<bS.indexOf(e)){for(;o!==null;){var a=Ai(o);if(a!==null&&q0(a),a=Xu(e,t,r,n),a===null&&Yd(e,t,n,Kl,r),a===o)break;o=a}o!==null&&n.stopPropagation()}else Yd(e,t,n,null,r)}}var Kl=null;function Xu(e,t,r,n){if(Kl=null,e=_f(n),e=Rs(e),e!==null)if(t=Js(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kl=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hS()){case Sf:return 1;case z0:return 4;case Wl:case fS:return 16;case B0:return 536870912;default:return 16}default:return 16}}var Xn=null,Rf=null,Cl=null;function X0(){if(Cl)return Cl;var e,t=Rf,r=t.length,n,o="value"in Xn?Xn.value:Xn.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===o[a-n];n++);return Cl=o.slice(e,1<n?1-n:void 0)}function El(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Yi(){return!0}function Op(){return!1}function yr(e){function t(r,n,o,a,i){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Yi:Op,this.isPropagationStopped=Op,this}return ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),t}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=yr(ta),Ti=ut({},ta,{view:0,detail:0}),kS=yr(Ti),Fd,zd,xa,Uc=ut({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(Fd=e.screenX-xa.screenX,zd=e.screenY-xa.screenY):zd=Fd=0,xa=e),Fd)},movementY:function(e){return"movementY"in e?e.movementY:zd}}),Mp=yr(Uc),CS=ut({},Uc,{dataTransfer:0}),ES=yr(CS),RS=ut({},Ti,{relatedTarget:0}),Bd=yr(RS),PS=ut({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),TS=yr(PS),AS=ut({},ta,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IS=yr(AS),OS=ut({},ta,{data:0}),Dp=yr(OS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$S[e])?!!t[e]:!1}function Tf(){return LS}var US=ut({},Ti,{key:function(e){if(e.key){var t=MS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=El(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tf,charCode:function(e){return e.type==="keypress"?El(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?El(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FS=yr(US),zS=ut({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$p=yr(zS),BS=ut({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tf}),VS=yr(BS),WS=ut({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),qS=yr(WS),HS=ut({},Uc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=yr(HS),GS=[9,13,27,32],Af=En&&"CompositionEvent"in window,Da=null;En&&"documentMode"in document&&(Da=document.documentMode);var YS=En&&"TextEvent"in window&&!Da,Q0=En&&(!Af||Da&&8<Da&&11>=Da),Lp=" ",Up=!1;function Z0(e,t){switch(e){case"keyup":return GS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ev(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var go=!1;function JS(e,t){switch(e){case"compositionend":return ev(t);case"keypress":return t.which!==32?null:(Up=!0,Lp);case"textInput":return e=t.data,e===Lp&&Up?null:e;default:return null}}function XS(e,t){if(go)return e==="compositionend"||!Af&&Z0(e,t)?(e=X0(),Cl=Rf=Xn=null,go=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Q0&&t.locale!=="ko"?null:t.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QS[e.type]:t==="textarea"}function tv(e,t,r,n){A0(n),t=Gl(t,"onChange"),0<t.length&&(r=new Pf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $a=null,ei=null;function ZS(e){hv(e,0)}function Fc(e){var t=yo(e);if(S0(t))return e}function e2(e,t){if(e==="change")return t}var rv=!1;if(En){var Vd;if(En){var Wd="oninput"in document;if(!Wd){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),Wd=typeof zp.oninput=="function"}Vd=Wd}else Vd=!1;rv=Vd&&(!document.documentMode||9<document.documentMode)}function Bp(){$a&&($a.detachEvent("onpropertychange",nv),ei=$a=null)}function nv(e){if(e.propertyName==="value"&&Fc(ei)){var t=[];tv(t,ei,e,_f(e)),D0(ZS,t)}}function t2(e,t,r){e==="focusin"?(Bp(),$a=t,ei=r,$a.attachEvent("onpropertychange",nv)):e==="focusout"&&Bp()}function r2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fc(ei)}function n2(e,t){if(e==="click")return Fc(t)}function s2(e,t){if(e==="input"||e==="change")return Fc(t)}function o2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xr=typeof Object.is=="function"?Object.is:o2;function ti(e,t){if(Xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!Iu.call(t,o)||!Xr(e[o],t[o]))return!1}return!0}function Vp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wp(e,t){var r=Vp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vp(r)}}function sv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ov(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zl(e.document)}return t}function If(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function a2(e){var t=ov(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&sv(r.ownerDocument.documentElement,r)){if(n!==null&&If(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,a=Math.min(n.start,o);n=n.end===void 0?a:Math.min(n.end,o),!e.extend&&a>n&&(o=n,n=a,a=o),o=Wp(r,a);var i=Wp(r,n);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i2=En&&"documentMode"in document&&11>=document.documentMode,xo=null,Qu=null,La=null,Zu=!1;function qp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zu||xo==null||xo!==zl(n)||(n=xo,"selectionStart"in n&&If(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),La&&ti(La,n)||(La=n,n=Gl(Qu,"onSelect"),0<n.length&&(t=new Pf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xo)))}function Ji(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vo={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionend:Ji("Transition","TransitionEnd")},qd={},av={};En&&(av=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function zc(e){if(qd[e])return qd[e];if(!vo[e])return e;var t=vo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in av)return qd[e]=t[r];return e}var iv=zc("animationend"),lv=zc("animationiteration"),cv=zc("animationstart"),dv=zc("transitionend"),uv=new Map,Hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(e,t){uv.set(e,t),Ys(t,[e])}for(var Hd=0;Hd<Hp.length;Hd++){var Kd=Hp[Hd],l2=Kd.toLowerCase(),c2=Kd[0].toUpperCase()+Kd.slice(1);ms(l2,"on"+c2)}ms(iv,"onAnimationEnd");ms(lv,"onAnimationIteration");ms(cv,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(dv,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Kp(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,lS(n,t,void 0,e),e.currentTarget=null}function hv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&o.isPropagationStopped())break e;Kp(o,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&o.isPropagationStopped())break e;Kp(o,l,d),a=c}}}if(Vl)throw e=Gu,Vl=!1,Gu=null,e}function rt(e,t){var r=t[sh];r===void 0&&(r=t[sh]=new Set);var n=e+"__bubble";r.has(n)||(fv(t,e,2,!1),r.add(n))}function Gd(e,t,r){var n=0;t&&(n|=4),fv(r,e,n,t)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[Xi]){e[Xi]=!0,w0.forEach(function(r){r!=="selectionchange"&&(d2.has(r)||Gd(r,!1,e),Gd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xi]||(t[Xi]=!0,Gd("selectionchange",!1,t))}}function fv(e,t,r,n){switch(J0(t)){case 1:var o=_S;break;case 4:o=SS;break;default:o=Ef}r=o.bind(null,t,r,e),o=void 0,!Ku||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Yd(e,t,r,n,o){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=Rs(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}D0(function(){var d=a,h=_f(r),f=[];e:{var p=uv.get(e);if(p!==void 0){var m=Pf,b=e;switch(e){case"keypress":if(El(r)===0)break e;case"keydown":case"keyup":m=FS;break;case"focusin":b="focus",m=Bd;break;case"focusout":b="blur",m=Bd;break;case"beforeblur":case"afterblur":m=Bd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ES;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=VS;break;case iv:case lv:case cv:m=TS;break;case dv:m=qS;break;case"scroll":m=kS;break;case"wheel":m=KS;break;case"copy":case"cut":case"paste":m=IS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$p}var g=(t&4)!==0,w=!g&&e==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var x=d,v;x!==null;){v=x;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,y!==null&&(j=Ja(x,y),j!=null&&g.push(ni(x,j,v)))),w)break;x=x.return}0<g.length&&(p=new m(p,b,null,r,h),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==qu&&(b=r.relatedTarget||r.fromElement)&&(Rs(b)||b[Rn]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=d,b=b?Rs(b):null,b!==null&&(w=Js(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=d),m!==b)){if(g=Mp,j="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=$p,j="onPointerLeave",y="onPointerEnter",x="pointer"),w=m==null?p:yo(m),v=b==null?p:yo(b),p=new g(j,x+"leave",m,r,h),p.target=w,p.relatedTarget=v,j=null,Rs(h)===d&&(g=new g(y,x+"enter",b,r,h),g.target=v,g.relatedTarget=w,j=g),w=j,m&&b)t:{for(g=m,y=b,x=0,v=g;v;v=to(v))x++;for(v=0,j=y;j;j=to(j))v++;for(;0<x-v;)g=to(g),x--;for(;0<v-x;)y=to(y),v--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=to(g),y=to(y)}g=null}else g=null;m!==null&&Gp(f,p,m,g,!1),b!==null&&w!==null&&Gp(f,w,b,g,!0)}}e:{if(p=d?yo(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=e2;else if(Fp(p))if(rv)N=s2;else{N=r2;var _=t2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=n2);if(N&&(N=N(e,d))){tv(f,N,r,h);break e}_&&_(e,p,d),e==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Fu(p,"number",p.value)}switch(_=d?yo(d):window,e){case"focusin":(Fp(_)||_.contentEditable==="true")&&(xo=_,Qu=d,La=null);break;case"focusout":La=Qu=xo=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,qp(f,r,h);break;case"selectionchange":if(i2)break;case"keydown":case"keyup":qp(f,r,h)}var k;if(Af)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else go?Z0(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Q0&&r.locale!=="ko"&&(go||P!=="onCompositionStart"?P==="onCompositionEnd"&&go&&(k=X0()):(Xn=h,Rf="value"in Xn?Xn.value:Xn.textContent,go=!0)),_=Gl(d,P),0<_.length&&(P=new Dp(P,e,null,r,h),f.push({event:P,listeners:_}),k?P.data=k:(k=ev(r),k!==null&&(P.data=k)))),(k=YS?JS(e,r):XS(e,r))&&(d=Gl(d,"onBeforeInput"),0<d.length&&(h=new Dp("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=k))}hv(f,t)})}function ni(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gl(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Ja(e,r),a!=null&&n.unshift(ni(e,a,o)),a=Ja(e,t),a!=null&&n.push(ni(e,a,o))),e=e.return}return n}function to(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gp(e,t,r,n,o){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,o?(c=Ja(r,a),c!=null&&i.unshift(ni(r,c,l))):o||(c=Ja(r,a),c!=null&&i.push(ni(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var u2=/\r\n?/g,h2=/\u0000|\uFFFD/g;function Yp(e){return(typeof e=="string"?e:""+e).replace(u2,`
`).replace(h2,"")}function Qi(e,t,r){if(t=Yp(t),Yp(e)!==t&&r)throw Error(ae(425))}function Yl(){}var eh=null,th=null;function rh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nh=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,m2=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(e){return Jp.resolve(null).then(e).catch(p2)}:nh;function p2(e){setTimeout(function(){throw e})}function Jd(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),Za(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Za(t)}function rs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ra=Math.random().toString(36).slice(2),an="__reactFiber$"+ra,si="__reactProps$"+ra,Rn="__reactContainer$"+ra,sh="__reactEvents$"+ra,g2="__reactListeners$"+ra,x2="__reactHandles$"+ra;function Rs(e){var t=e[an];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rn]||r[an]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xp(e);e!==null;){if(r=e[an])return r;e=Xp(e)}return t}e=r,r=e.parentNode}return null}function Ai(e){return e=e[an]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Bc(e){return e[si]||null}var oh=[],wo=-1;function ps(e){return{current:e}}function st(e){0>wo||(e.current=oh[wo],oh[wo]=null,wo--)}function et(e,t){wo++,oh[wo]=e.current,e.current=t}var cs={},qt=ps(cs),sr=ps(!1),$s=cs;function Bo(e,t){var r=e.type.contextTypes;if(!r)return cs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function or(e){return e=e.childContextTypes,e!=null}function Jl(){st(sr),st(qt)}function Qp(e,t,r){if(qt.current!==cs)throw Error(ae(168));et(qt,t),et(sr,r)}function mv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(ae(108,tS(e)||"Unknown",o));return ut({},r,n)}function Xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cs,$s=qt.current,et(qt,e),et(sr,sr.current),!0}function Zp(e,t,r){var n=e.stateNode;if(!n)throw Error(ae(169));r?(e=mv(e,t,$s),n.__reactInternalMemoizedMergedChildContext=e,st(sr),st(qt),et(qt,e)):st(sr),et(sr,r)}var _n=null,Vc=!1,Xd=!1;function pv(e){_n===null?_n=[e]:_n.push(e)}function v2(e){Vc=!0,pv(e)}function gs(){if(!Xd&&_n!==null){Xd=!0;var e=0,t=Ye;try{var r=_n;for(Ye=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_n=null,Vc=!1}catch(o){throw _n!==null&&(_n=_n.slice(e+1)),F0(Sf,gs),o}finally{Ye=t,Xd=!1}}return null}var bo=[],jo=0,Ql=null,Zl=0,_r=[],Sr=0,Ls=null,Sn=1,kn="";function Ns(e,t){bo[jo++]=Zl,bo[jo++]=Ql,Ql=e,Zl=t}function gv(e,t,r){_r[Sr++]=Sn,_r[Sr++]=kn,_r[Sr++]=Ls,Ls=e;var n=Sn;e=kn;var o=32-qr(n)-1;n&=~(1<<o),r+=1;var a=32-qr(t)+o;if(30<a){var i=o-o%5;a=(n&(1<<i)-1).toString(32),n>>=i,o-=i,Sn=1<<32-qr(t)+o|r<<o|n,kn=a+e}else Sn=1<<a|r<<o|n,kn=e}function Of(e){e.return!==null&&(Ns(e,1),gv(e,1,0))}function Mf(e){for(;e===Ql;)Ql=bo[--jo],bo[jo]=null,Zl=bo[--jo],bo[jo]=null;for(;e===Ls;)Ls=_r[--Sr],_r[Sr]=null,kn=_r[--Sr],_r[Sr]=null,Sn=_r[--Sr],_r[Sr]=null}var pr=null,mr=null,ot=!1,Wr=null;function xv(e,t){var r=Cr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pr=e,mr=rs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pr=e,mr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ls!==null?{id:Sn,overflow:kn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Cr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,pr=e,mr=null,!0):!1;default:return!1}}function ah(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ih(e){if(ot){var t=mr;if(t){var r=t;if(!eg(e,t)){if(ah(e))throw Error(ae(418));t=rs(r.nextSibling);var n=pr;t&&eg(e,t)?xv(n,r):(e.flags=e.flags&-4097|2,ot=!1,pr=e)}}else{if(ah(e))throw Error(ae(418));e.flags=e.flags&-4097|2,ot=!1,pr=e}}}function tg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pr=e}function Zi(e){if(e!==pr)return!1;if(!ot)return tg(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rh(e.type,e.memoizedProps)),t&&(t=mr)){if(ah(e))throw vv(),Error(ae(418));for(;t;)xv(e,t),t=rs(t.nextSibling)}if(tg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){mr=rs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}mr=null}}else mr=pr?rs(e.stateNode.nextSibling):null;return!0}function vv(){for(var e=mr;e;)e=rs(e.nextSibling)}function Vo(){mr=pr=null,ot=!1}function Df(e){Wr===null?Wr=[e]:Wr.push(e)}var y2=Mn.ReactCurrentBatchConfig;function va(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,e));var o=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=o.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,e))}return e}function el(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rg(e){var t=e._init;return t(e._payload)}function yv(e){function t(y,x){if(e){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function o(y,x){return y=as(y,x),y.index=0,y.sibling=null,y}function a(y,x,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,v,j){return x===null||x.tag!==6?(x=su(v,y.mode,j),x.return=y,x):(x=o(x,v),x.return=y,x)}function c(y,x,v,j){var N=v.type;return N===po?h(y,x,v.props.children,j,v.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hn&&rg(N)===x.type)?(j=o(x,v.props),j.ref=va(y,x,v),j.return=y,j):(j=Ml(v.type,v.key,v.props,null,y.mode,j),j.ref=va(y,x,v),j.return=y,j)}function d(y,x,v,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=ou(v,y.mode,j),x.return=y,x):(x=o(x,v.children||[]),x.return=y,x)}function h(y,x,v,j,N){return x===null||x.tag!==7?(x=Os(v,y.mode,j,N),x.return=y,x):(x=o(x,v),x.return=y,x)}function f(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=su(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vi:return v=Ml(x.type,x.key,x.props,null,y.mode,v),v.ref=va(y,null,x),v.return=y,v;case mo:return x=ou(x,y.mode,v),x.return=y,x;case Hn:var j=x._init;return f(y,j(x._payload),v)}if(ka(x)||fa(x))return x=Os(x,y.mode,v,null),x.return=y,x;el(y,x)}return null}function p(y,x,v,j){var N=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:l(y,x,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vi:return v.key===N?c(y,x,v,j):null;case mo:return v.key===N?d(y,x,v,j):null;case Hn:return N=v._init,p(y,x,N(v._payload),j)}if(ka(v)||fa(v))return N!==null?null:h(y,x,v,j,null);el(y,v)}return null}function m(y,x,v,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(v)||null,l(x,y,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Vi:return y=y.get(j.key===null?v:j.key)||null,c(x,y,j,N);case mo:return y=y.get(j.key===null?v:j.key)||null,d(x,y,j,N);case Hn:var _=j._init;return m(y,x,v,_(j._payload),N)}if(ka(j)||fa(j))return y=y.get(v)||null,h(x,y,j,N,null);el(x,j)}return null}function b(y,x,v,j){for(var N=null,_=null,k=x,P=x=0,C=null;k!==null&&P<v.length;P++){k.index>P?(C=k,k=null):C=k.sibling;var R=p(y,k,v[P],j);if(R===null){k===null&&(k=C);break}e&&k&&R.alternate===null&&t(y,k),x=a(R,x,P),_===null?N=R:_.sibling=R,_=R,k=C}if(P===v.length)return r(y,k),ot&&Ns(y,P),N;if(k===null){for(;P<v.length;P++)k=f(y,v[P],j),k!==null&&(x=a(k,x,P),_===null?N=k:_.sibling=k,_=k);return ot&&Ns(y,P),N}for(k=n(y,k);P<v.length;P++)C=m(k,y,P,v[P],j),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?P:C.key),x=a(C,x,P),_===null?N=C:_.sibling=C,_=C);return e&&k.forEach(function(M){return t(y,M)}),ot&&Ns(y,P),N}function g(y,x,v,j){var N=fa(v);if(typeof N!="function")throw Error(ae(150));if(v=N.call(v),v==null)throw Error(ae(151));for(var _=N=null,k=x,P=x=0,C=null,R=v.next();k!==null&&!R.done;P++,R=v.next()){k.index>P?(C=k,k=null):C=k.sibling;var M=p(y,k,R.value,j);if(M===null){k===null&&(k=C);break}e&&k&&M.alternate===null&&t(y,k),x=a(M,x,P),_===null?N=M:_.sibling=M,_=M,k=C}if(R.done)return r(y,k),ot&&Ns(y,P),N;if(k===null){for(;!R.done;P++,R=v.next())R=f(y,R.value,j),R!==null&&(x=a(R,x,P),_===null?N=R:_.sibling=R,_=R);return ot&&Ns(y,P),N}for(k=n(y,k);!R.done;P++,R=v.next())R=m(k,y,P,R.value,j),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?P:R.key),x=a(R,x,P),_===null?N=R:_.sibling=R,_=R);return e&&k.forEach(function($){return t(y,$)}),ot&&Ns(y,P),N}function w(y,x,v,j){if(typeof v=="object"&&v!==null&&v.type===po&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Vi:e:{for(var N=v.key,_=x;_!==null;){if(_.key===N){if(N=v.type,N===po){if(_.tag===7){r(y,_.sibling),x=o(_,v.props.children),x.return=y,y=x;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Hn&&rg(N)===_.type){r(y,_.sibling),x=o(_,v.props),x.ref=va(y,_,v),x.return=y,y=x;break e}r(y,_);break}else t(y,_);_=_.sibling}v.type===po?(x=Os(v.props.children,y.mode,j,v.key),x.return=y,y=x):(j=Ml(v.type,v.key,v.props,null,y.mode,j),j.ref=va(y,x,v),j.return=y,y=j)}return i(y);case mo:e:{for(_=v.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){r(y,x.sibling),x=o(x,v.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=ou(v,y.mode,j),x.return=y,y=x}return i(y);case Hn:return _=v._init,w(y,x,_(v._payload),j)}if(ka(v))return b(y,x,v,j);if(fa(v))return g(y,x,v,j);el(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(r(y,x.sibling),x=o(x,v),x.return=y,y=x):(r(y,x),x=su(v,y.mode,j),x.return=y,y=x),i(y)):r(y,x)}return w}var Wo=yv(!0),wv=yv(!1),ec=ps(null),tc=null,No=null,$f=null;function Lf(){$f=No=tc=null}function Uf(e){var t=ec.current;st(ec),e._currentValue=t}function lh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function To(e,t){tc=e,$f=No=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rr=!0),e.firstContext=null)}function Pr(e){var t=e._currentValue;if($f!==e)if(e={context:e,memoizedValue:t,next:null},No===null){if(tc===null)throw Error(ae(308));No=e,tc.dependencies={lanes:0,firstContext:e}}else No=No.next=e;return t}var Ps=null;function Ff(e){Ps===null?Ps=[e]:Ps.push(e)}function bv(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,Ff(t)):(r.next=o.next,o.next=r),t.interleaved=r,Pn(e,n)}function Pn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Kn=!1;function zf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ns(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Pn(e,r)}return o=n.interleaved,o===null?(t.next=t,Ff(n)):(t.next=o.next,o.next=t),n.interleaved=t,Pn(e,r)}function Rl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kf(e,r)}}function ng(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?o=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?o=a=t:a=a.next=t}else o=a=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rc(e,t,r,n){var o=e.updateQueue;Kn=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var f=o.baseState;i=0,h=d=c=null,l=a;do{var p=l.lane,m=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(p=t,m=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){f=b.call(m,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(m,f,p):b,p==null)break e;f=ut({},f,p);break e;case 2:Kn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=m,c=f):h=h.next=m,i|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(h===null&&(c=f),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Fs|=i,e.lanes=i,e.memoizedState=f}}function sg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(ae(191,o));o.call(n)}}}var Ii={},un=ps(Ii),oi=ps(Ii),ai=ps(Ii);function Ts(e){if(e===Ii)throw Error(ae(174));return e}function Bf(e,t){switch(et(ai,t),et(oi,e),et(un,Ii),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bu(t,e)}st(un),et(un,t)}function qo(){st(un),st(oi),st(ai)}function Nv(e){Ts(ai.current);var t=Ts(un.current),r=Bu(t,e.type);t!==r&&(et(oi,e),et(un,r))}function Vf(e){oi.current===e&&(st(un),st(oi))}var lt=ps(0);function nc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qd=[];function Wf(){for(var e=0;e<Qd.length;e++)Qd[e]._workInProgressVersionPrimary=null;Qd.length=0}var Pl=Mn.ReactCurrentDispatcher,Zd=Mn.ReactCurrentBatchConfig,Us=0,dt=null,St=null,Pt=null,sc=!1,Ua=!1,ii=0,w2=0;function Ft(){throw Error(ae(321))}function qf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xr(e[r],t[r]))return!1;return!0}function Hf(e,t,r,n,o,a){if(Us=a,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pl.current=e===null||e.memoizedState===null?_2:S2,e=r(n,o),Ua){a=0;do{if(Ua=!1,ii=0,25<=a)throw Error(ae(301));a+=1,Pt=St=null,t.updateQueue=null,Pl.current=k2,e=r(n,o)}while(Ua)}if(Pl.current=oc,t=St!==null&&St.next!==null,Us=0,Pt=St=dt=null,sc=!1,t)throw Error(ae(300));return e}function Kf(){var e=ii!==0;return ii=0,e}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?dt.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function Tr(){if(St===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Pt===null?dt.memoizedState:Pt.next;if(t!==null)Pt=t,St=e;else{if(e===null)throw Error(ae(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?dt.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function li(e,t){return typeof t=="function"?t(e):t}function eu(e){var t=Tr(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=St,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}n.baseQueue=o=a,r.pending=null}if(o!==null){a=o.next,n=n.baseState;var l=i=null,c=null,d=a;do{var h=d.lane;if((Us&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,dt.lanes|=h,Fs|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,Xr(n,t.memoizedState)||(rr=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do a=o.lane,dt.lanes|=a,Fs|=a,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tu(e){var t=Tr(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);Xr(a,t.memoizedState)||(rr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function _v(){}function Sv(e,t){var r=dt,n=Tr(),o=t(),a=!Xr(n.memoizedState,o);if(a&&(n.memoizedState=o,rr=!0),n=n.queue,Gf(Ev.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,ci(9,Cv.bind(null,r,n,o,t),void 0,null),Tt===null)throw Error(ae(349));Us&30||kv(r,t,o)}return o}function kv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cv(e,t,r,n){t.value=r,t.getSnapshot=n,Rv(t)&&Pv(e)}function Ev(e,t,r){return r(function(){Rv(t)&&Pv(e)})}function Rv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xr(e,r)}catch{return!0}}function Pv(e){var t=Pn(e,1);t!==null&&Hr(t,e,1,-1)}function og(e){var t=on();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t.queue=e,e=e.dispatch=N2.bind(null,dt,e),[t.memoizedState,e]}function ci(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Tv(){return Tr().memoizedState}function Tl(e,t,r,n){var o=on();dt.flags|=e,o.memoizedState=ci(1|t,r,void 0,n===void 0?null:n)}function Wc(e,t,r,n){var o=Tr();n=n===void 0?null:n;var a=void 0;if(St!==null){var i=St.memoizedState;if(a=i.destroy,n!==null&&qf(n,i.deps)){o.memoizedState=ci(t,r,a,n);return}}dt.flags|=e,o.memoizedState=ci(1|t,r,a,n)}function ag(e,t){return Tl(8390656,8,e,t)}function Gf(e,t){return Wc(2048,8,e,t)}function Av(e,t){return Wc(4,2,e,t)}function Iv(e,t){return Wc(4,4,e,t)}function Ov(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mv(e,t,r){return r=r!=null?r.concat([e]):null,Wc(4,4,Ov.bind(null,t,e),r)}function Yf(){}function Dv(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $v(e,t){var r=Tr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Lv(e,t,r){return Us&21?(Xr(r,t)||(r=V0(),dt.lanes|=r,Fs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rr=!0),e.memoizedState=r)}function b2(e,t){var r=Ye;Ye=r!==0&&4>r?r:4,e(!0);var n=Zd.transition;Zd.transition={};try{e(!1),t()}finally{Ye=r,Zd.transition=n}}function Uv(){return Tr().memoizedState}function j2(e,t,r){var n=os(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fv(e))zv(t,r);else if(r=bv(e,t,r,n),r!==null){var o=Gt();Hr(r,e,n,o),Bv(r,t,n)}}function N2(e,t,r){var n=os(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fv(e))zv(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(o.hasEagerState=!0,o.eagerState=l,Xr(l,i)){var c=t.interleaved;c===null?(o.next=o,Ff(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}r=bv(e,t,o,n),r!==null&&(o=Gt(),Hr(r,e,n,o),Bv(r,t,n))}}function Fv(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function zv(e,t){Ua=sc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Bv(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,kf(e,r)}}var oc={readContext:Pr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},_2={readContext:Pr,useCallback:function(e,t){return on().memoizedState=[e,t===void 0?null:t],e},useContext:Pr,useEffect:ag,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Tl(4194308,4,Ov.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Tl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tl(4,2,e,t)},useMemo:function(e,t){var r=on();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=on();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=j2.bind(null,dt,e),[n.memoizedState,e]},useRef:function(e){var t=on();return e={current:e},t.memoizedState=e},useState:og,useDebugValue:Yf,useDeferredValue:function(e){return on().memoizedState=e},useTransition:function(){var e=og(!1),t=e[0];return e=b2.bind(null,e[1]),on().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=dt,o=on();if(ot){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=t(),Tt===null)throw Error(ae(349));Us&30||kv(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,ag(Ev.bind(null,n,a,e),[e]),n.flags|=2048,ci(9,Cv.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=on(),t=Tt.identifierPrefix;if(ot){var r=kn,n=Sn;r=(n&~(1<<32-qr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ii++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=w2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},S2={readContext:Pr,useCallback:Dv,useContext:Pr,useEffect:Gf,useImperativeHandle:Mv,useInsertionEffect:Av,useLayoutEffect:Iv,useMemo:$v,useReducer:eu,useRef:Tv,useState:function(){return eu(li)},useDebugValue:Yf,useDeferredValue:function(e){var t=Tr();return Lv(t,St.memoizedState,e)},useTransition:function(){var e=eu(li)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:_v,useSyncExternalStore:Sv,useId:Uv,unstable_isNewReconciler:!1},k2={readContext:Pr,useCallback:Dv,useContext:Pr,useEffect:Gf,useImperativeHandle:Mv,useInsertionEffect:Av,useLayoutEffect:Iv,useMemo:$v,useReducer:tu,useRef:Tv,useState:function(){return tu(li)},useDebugValue:Yf,useDeferredValue:function(e){var t=Tr();return St===null?t.memoizedState=e:Lv(t,St.memoizedState,e)},useTransition:function(){var e=tu(li)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:_v,useSyncExternalStore:Sv,useId:Uv,unstable_isNewReconciler:!1};function Fr(e,t){if(e&&e.defaultProps){t=ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ch(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qc={isMounted:function(e){return(e=e._reactInternals)?Js(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Gt(),o=os(e),a=Cn(n,o);a.payload=t,r!=null&&(a.callback=r),t=ns(e,a,o),t!==null&&(Hr(t,e,o,n),Rl(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Gt(),o=os(e),a=Cn(n,o);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ns(e,a,o),t!==null&&(Hr(t,e,o,n),Rl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Gt(),n=os(e),o=Cn(r,n);o.tag=2,t!=null&&(o.callback=t),t=ns(e,o,n),t!==null&&(Hr(t,e,n,r),Rl(t,e,n))}};function ig(e,t,r,n,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!ti(r,n)||!ti(o,a):!0}function Vv(e,t,r){var n=!1,o=cs,a=t.contextType;return typeof a=="object"&&a!==null?a=Pr(a):(o=or(t)?$s:qt.current,n=t.contextTypes,a=(n=n!=null)?Bo(e,o):cs),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function lg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&qc.enqueueReplaceState(t,t.state,null)}function dh(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},zf(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Pr(a):(a=or(t)?$s:qt.current,o.context=Bo(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ch(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&qc.enqueueReplaceState(o,o.state,null),rc(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ho(e,t){try{var r="",n=t;do r+=eS(n),n=n.return;while(n);var o=r}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function ru(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var C2=typeof WeakMap=="function"?WeakMap:Map;function Wv(e,t,r){r=Cn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ic||(ic=!0,bh=n),uh(e,t)},r}function qv(e,t,r){r=Cn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){uh(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){uh(e,t),typeof n!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function cg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new C2;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=z2.bind(null,e,t,r),t.then(e,e))}function dg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ug(e,t,r,n,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Cn(-1,1),t.tag=2,ns(r,t,1))),r.lanes|=1),e)}var E2=Mn.ReactCurrentOwner,rr=!1;function Ht(e,t,r,n){t.child=e===null?wv(t,null,r,n):Wo(t,e.child,r,n)}function hg(e,t,r,n,o){r=r.render;var a=t.ref;return To(t,o),n=Hf(e,t,r,n,a,o),r=Kf(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(ot&&r&&Of(t),t.flags|=1,Ht(e,t,n,o),t.child)}function fg(e,t,r,n,o){if(e===null){var a=r.type;return typeof a=="function"&&!nm(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Hv(e,t,a,n,o)):(e=Ml(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:ti,r(i,n)&&e.ref===t.ref)return Tn(e,t,o)}return t.flags|=1,e=as(a,n),e.ref=t.ref,e.return=t,t.child=e}function Hv(e,t,r,n,o){if(e!==null){var a=e.memoizedProps;if(ti(a,n)&&e.ref===t.ref)if(rr=!1,t.pendingProps=n=a,(e.lanes&o)!==0)e.flags&131072&&(rr=!0);else return t.lanes=e.lanes,Tn(e,t,o)}return hh(e,t,r,n,o)}function Kv(e,t,r){var n=t.pendingProps,o=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(So,cr),cr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(So,cr),cr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,et(So,cr),cr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,et(So,cr),cr|=n;return Ht(e,t,o,r),t.child}function Gv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hh(e,t,r,n,o){var a=or(r)?$s:qt.current;return a=Bo(t,a),To(t,o),r=Hf(e,t,r,n,a,o),n=Kf(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Tn(e,t,o)):(ot&&n&&Of(t),t.flags|=1,Ht(e,t,r,o),t.child)}function mg(e,t,r,n,o){if(or(r)){var a=!0;Xl(t)}else a=!1;if(To(t,o),t.stateNode===null)Al(e,t),Vv(t,r,n),dh(t,r,n,o),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Pr(d):(d=or(r)?$s:qt.current,d=Bo(t,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&lg(t,i,n,d),Kn=!1;var p=t.memoizedState;i.state=p,rc(t,n,i,o),c=t.memoizedState,l!==n||p!==c||sr.current||Kn?(typeof h=="function"&&(ch(t,r,h,n),c=t.memoizedState),(l=Kn||ig(t,r,l,n,p,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,jv(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Fr(t.type,l),i.props=d,f=t.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Pr(c):(c=or(r)?$s:qt.current,c=Bo(t,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==c)&&lg(t,i,n,c),Kn=!1,p=t.memoizedState,i.state=p,rc(t,n,i,o);var b=t.memoizedState;l!==f||p!==b||sr.current||Kn?(typeof m=="function"&&(ch(t,r,m,n),b=t.memoizedState),(d=Kn||ig(t,r,d,n,p,b,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,b,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),i.props=n,i.state=b,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return fh(e,t,r,n,a,o)}function fh(e,t,r,n,o,a){Gv(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return o&&Zp(t,r,!1),Tn(e,t,a);n=t.stateNode,E2.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Wo(t,e.child,null,a),t.child=Wo(t,null,l,a)):Ht(e,t,l,a),t.memoizedState=n.state,o&&Zp(t,r,!0),t.child}function Yv(e){var t=e.stateNode;t.pendingContext?Qp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qp(e,t.context,!1),Bf(e,t.containerInfo)}function pg(e,t,r,n,o){return Vo(),Df(o),t.flags|=256,Ht(e,t,r,n),t.child}var mh={dehydrated:null,treeContext:null,retryLane:0};function ph(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jv(e,t,r){var n=t.pendingProps,o=lt.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),et(lt,o&1),e===null)return ih(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Gc(i,n,0,null),e=Os(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ph(r),t.memoizedState=mh,e):Jf(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return R2(e,t,i,n,l,o,r);if(a){a=n.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=as(o,c),n.subtreeFlags=o.subtreeFlags&14680064),l!==null?a=as(l,a):(a=Os(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?ph(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=mh,n}return a=e.child,e=a.sibling,n=as(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Jf(e,t){return t=Gc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tl(e,t,r,n){return n!==null&&Df(n),Wo(t,e.child,null,r),e=Jf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function R2(e,t,r,n,o,a,i){if(r)return t.flags&256?(t.flags&=-257,n=ru(Error(ae(422))),tl(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=Gc({mode:"visible",children:n.children},o,0,null),a=Os(a,o,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Wo(t,e.child,null,i),t.child.memoizedState=ph(i),t.memoizedState=mh,a);if(!(t.mode&1))return tl(e,t,i,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ae(419)),n=ru(a,n,void 0),tl(e,t,i,n)}if(l=(i&e.childLanes)!==0,rr||l){if(n=Tt,n!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Pn(e,o),Hr(n,e,o,-1))}return rm(),n=ru(Error(ae(421))),tl(e,t,i,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=B2.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,mr=rs(o.nextSibling),pr=t,ot=!0,Wr=null,e!==null&&(_r[Sr++]=Sn,_r[Sr++]=kn,_r[Sr++]=Ls,Sn=e.id,kn=e.overflow,Ls=t),t=Jf(t,n.children),t.flags|=4096,t)}function gg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lh(e.return,t,r)}function nu(e,t,r,n,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o)}function Xv(e,t,r){var n=t.pendingProps,o=n.revealOrder,a=n.tail;if(Ht(e,t,n.children,r),n=lt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gg(e,r,t);else if(e.tag===19)gg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(et(lt,n),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&nc(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),nu(t,!1,o,r,a);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&nc(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}nu(t,!0,r,null,a);break;case"together":nu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Al(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,r=as(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=as(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function P2(e,t,r){switch(t.tag){case 3:Yv(t),Vo();break;case 5:Nv(t);break;case 1:or(t.type)&&Xl(t);break;case 4:Bf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;et(ec,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(et(lt,lt.current&1),t.flags|=128,null):r&t.child.childLanes?Jv(e,t,r):(et(lt,lt.current&1),e=Tn(e,t,r),e!==null?e.sibling:null);et(lt,lt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Xv(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),et(lt,lt.current),n)break;return null;case 22:case 23:return t.lanes=0,Kv(e,t,r)}return Tn(e,t,r)}var Qv,gh,Zv,ey;Qv=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gh=function(){};Zv=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Ts(un.current);var a=null;switch(r){case"input":o=Lu(e,o),n=Lu(e,n),a=[];break;case"select":o=ut({},o,{value:void 0}),n=ut({},n,{value:void 0}),a=[];break;case"textarea":o=zu(e,o),n=zu(e,n),a=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yl)}Vu(r,n);var i;r=null;for(d in o)if(!n.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ga.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=o!=null?o[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&rt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};ey=function(e,t,r,n){r!==n&&(t.flags|=4)};function ya(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function T2(e,t,r){var n=t.pendingProps;switch(Mf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return or(t.type)&&Jl(),zt(t),null;case 3:return n=t.stateNode,qo(),st(sr),st(qt),Wf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wr!==null&&(_h(Wr),Wr=null))),gh(e,t),zt(t),null;case 5:Vf(t);var o=Ts(ai.current);if(r=t.type,e!==null&&t.stateNode!=null)Zv(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return zt(t),null}if(e=Ts(un.current),Zi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[an]=t,n[si]=a,e=(t.mode&1)!==0,r){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(o=0;o<Ea.length;o++)rt(Ea[o],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":Sp(n,a),rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},rt("invalid",n);break;case"textarea":Cp(n,a),rt("invalid",n)}Vu(r,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Qi(n.textContent,l,e),o=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Qi(n.textContent,l,e),o=["children",""+l]):Ga.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&rt("scroll",n)}switch(r){case"input":Wi(n),kp(n,a,!0);break;case"textarea":Wi(n),Ep(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Yl)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[an]=t,e[si]=n,Qv(e,t,!1,!1),t.stateNode=e;e:{switch(i=Wu(r,n),r){case"dialog":rt("cancel",e),rt("close",e),o=n;break;case"iframe":case"object":case"embed":rt("load",e),o=n;break;case"video":case"audio":for(o=0;o<Ea.length;o++)rt(Ea[o],e);o=n;break;case"source":rt("error",e),o=n;break;case"img":case"image":case"link":rt("error",e),rt("load",e),o=n;break;case"details":rt("toggle",e),o=n;break;case"input":Sp(e,n),o=Lu(e,n),rt("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=ut({},n,{value:void 0}),rt("invalid",e);break;case"textarea":Cp(e,n),o=zu(e,n),rt("invalid",e);break;default:o=n}Vu(r,o),l=o;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?T0(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&R0(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ya(e,c):typeof c=="number"&&Ya(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ga.hasOwnProperty(a)?c!=null&&a==="onScroll"&&rt("scroll",e):c!=null&&wf(e,a,c,i))}switch(r){case"input":Wi(e),kp(e,n,!1);break;case"textarea":Wi(e),Ep(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ls(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Co(e,!!n.multiple,a,!1):n.defaultValue!=null&&Co(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Yl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zt(t),null;case 6:if(e&&t.stateNode!=null)ey(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(r=Ts(ai.current),Ts(un.current),Zi(t)){if(n=t.stateNode,r=t.memoizedProps,n[an]=t,(a=n.nodeValue!==r)&&(e=pr,e!==null))switch(e.tag){case 3:Qi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qi(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[an]=t,t.stateNode=n}return zt(t),null;case 13:if(st(lt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&mr!==null&&t.mode&1&&!(t.flags&128))vv(),Vo(),t.flags|=98560,a=!1;else if(a=Zi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ae(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[an]=t}else Vo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zt(t),a=!1}else Wr!==null&&(_h(Wr),Wr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||lt.current&1?kt===0&&(kt=3):rm())),t.updateQueue!==null&&(t.flags|=4),zt(t),null);case 4:return qo(),gh(e,t),e===null&&ri(t.stateNode.containerInfo),zt(t),null;case 10:return Uf(t.type._context),zt(t),null;case 17:return or(t.type)&&Jl(),zt(t),null;case 19:if(st(lt),a=t.memoizedState,a===null)return zt(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)ya(a,!1);else{if(kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=nc(e),i!==null){for(t.flags|=128,ya(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return et(lt,lt.current&1|2),t.child}e=e.sibling}a.tail!==null&&gt()>Ko&&(t.flags|=128,n=!0,ya(a,!1),t.lanes=4194304)}else{if(!n)if(e=nc(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ya(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ot)return zt(t),null}else 2*gt()-a.renderingStartTime>Ko&&r!==1073741824&&(t.flags|=128,n=!0,ya(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=gt(),t.sibling=null,r=lt.current,et(lt,n?r&1|2:r&1),t):(zt(t),null);case 22:case 23:return tm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cr&1073741824&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function A2(e,t){switch(Mf(t),t.tag){case 1:return or(t.type)&&Jl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qo(),st(sr),st(qt),Wf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vf(t),null;case 13:if(st(lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Vo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(lt),null;case 4:return qo(),null;case 10:return Uf(t.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var rl=!1,Vt=!1,I2=typeof WeakSet=="function"?WeakSet:Set,je=null;function _o(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mt(e,t,n)}else r.current=null}function xh(e,t,r){try{r()}catch(n){mt(e,t,n)}}var xg=!1;function O2(e,t){if(eh=Hl,e=ov(),If(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,h=0,f=e,p=null;t:for(;;){for(var m;f!==r||o!==0&&f.nodeType!==3||(l=i+o),f!==a||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++d===o&&(l=i),p===a&&++h===n&&(c=i),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(th={focusedElem:e,selectionRange:r},Hl=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Fr(t.type,g),w);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(j){mt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return b=xg,xg=!1,b}function Fa(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&xh(t,r,a)}o=o.next}while(o!==n)}}function Hc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ty(e){var t=e.alternate;t!==null&&(e.alternate=null,ty(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[si],delete t[sh],delete t[g2],delete t[x2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ry(e){return e.tag===5||e.tag===3||e.tag===4}function vg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ry(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yl));else if(n!==4&&(e=e.child,e!==null))for(yh(e,t,r),e=e.sibling;e!==null;)yh(e,t,r),e=e.sibling}function wh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wh(e,t,r),e=e.sibling;e!==null;)wh(e,t,r),e=e.sibling}var Ot=null,Br=!1;function Fn(e,t,r){for(r=r.child;r!==null;)ny(e,t,r),r=r.sibling}function ny(e,t,r){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Lc,r)}catch{}switch(r.tag){case 5:Vt||_o(r,t);case 6:var n=Ot,o=Br;Ot=null,Fn(e,t,r),Ot=n,Br=o,Ot!==null&&(Br?(e=Ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(Br?(e=Ot,r=r.stateNode,e.nodeType===8?Jd(e.parentNode,r):e.nodeType===1&&Jd(e,r),Za(e)):Jd(Ot,r.stateNode));break;case 4:n=Ot,o=Br,Ot=r.stateNode.containerInfo,Br=!0,Fn(e,t,r),Ot=n,Br=o;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&xh(r,t,i),o=o.next}while(o!==n)}Fn(e,t,r);break;case 1:if(!Vt&&(_o(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){mt(r,t,l)}Fn(e,t,r);break;case 21:Fn(e,t,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,Fn(e,t,r),Vt=n):Fn(e,t,r);break;default:Fn(e,t,r)}}function yg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new I2),t.forEach(function(n){var o=V2.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Mr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,Br=!1;break e;case 3:Ot=l.stateNode.containerInfo,Br=!0;break e;case 4:Ot=l.stateNode.containerInfo,Br=!0;break e}l=l.return}if(Ot===null)throw Error(ae(160));ny(a,i,o),Ot=null,Br=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){mt(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sy(t,e),t=t.sibling}function sy(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(t,e),sn(e),n&4){try{Fa(3,e,e.return),Hc(3,e)}catch(g){mt(e,e.return,g)}try{Fa(5,e,e.return)}catch(g){mt(e,e.return,g)}}break;case 1:Mr(t,e),sn(e),n&512&&r!==null&&_o(r,r.return);break;case 5:if(Mr(t,e),sn(e),n&512&&r!==null&&_o(r,r.return),e.flags&32){var o=e.stateNode;try{Ya(o,"")}catch(g){mt(e,e.return,g)}}if(n&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&k0(o,a),Wu(l,i);var d=Wu(l,a);for(i=0;i<c.length;i+=2){var h=c[i],f=c[i+1];h==="style"?T0(o,f):h==="dangerouslySetInnerHTML"?R0(o,f):h==="children"?Ya(o,f):wf(o,h,f,d)}switch(l){case"input":Uu(o,a);break;case"textarea":C0(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Co(o,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?Co(o,!!a.multiple,a.defaultValue,!0):Co(o,!!a.multiple,a.multiple?[]:"",!1))}o[si]=a}catch(g){mt(e,e.return,g)}}break;case 6:if(Mr(t,e),sn(e),n&4){if(e.stateNode===null)throw Error(ae(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){mt(e,e.return,g)}}break;case 3:if(Mr(t,e),sn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Za(t.containerInfo)}catch(g){mt(e,e.return,g)}break;case 4:Mr(t,e),sn(e);break;case 13:Mr(t,e),sn(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Zf=gt())),n&4&&yg(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Vt=(d=Vt)||h,Mr(t,e),Vt=d):Mr(t,e),sn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(je=e,h=e.child;h!==null;){for(f=je=h;je!==null;){switch(p=je,m=p.child,p.tag){case 0:case 11:case 14:case 15:Fa(4,p,p.return);break;case 1:_o(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){mt(n,r,g)}}break;case 5:_o(p,p.return);break;case 22:if(p.memoizedState!==null){bg(f);continue}}m!==null?(m.return=p,je=m):bg(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{o=f.stateNode,d?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=P0("display",i))}catch(g){mt(e,e.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){mt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mr(t,e),sn(e),n&4&&yg(e);break;case 21:break;default:Mr(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ry(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Ya(o,""),n.flags&=-33);var a=vg(e);wh(e,a,o);break;case 3:case 4:var i=n.stateNode.containerInfo,l=vg(e);yh(e,l,i);break;default:throw Error(ae(161))}}catch(c){mt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function M2(e,t,r){je=e,oy(e)}function oy(e,t,r){for(var n=(e.mode&1)!==0;je!==null;){var o=je,a=o.child;if(o.tag===22&&n){var i=o.memoizedState!==null||rl;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=rl;var d=Vt;if(rl=i,(Vt=c)&&!d)for(je=o;je!==null;)i=je,c=i.child,i.tag===22&&i.memoizedState!==null?jg(o):c!==null?(c.return=i,je=c):jg(o);for(;a!==null;)je=a,oy(a),a=a.sibling;je=o,rl=l,Vt=d}wg(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,je=a):wg(e)}}function wg(e){for(;je!==null;){var t=je;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||Hc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Fr(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&sg(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sg(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Vt||t.flags&512&&vh(t)}catch(p){mt(t,t.return,p)}}if(t===e){je=null;break}if(r=t.sibling,r!==null){r.return=t.return,je=r;break}je=t.return}}function bg(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var r=t.sibling;if(r!==null){r.return=t.return,je=r;break}je=t.return}}function jg(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hc(4,t)}catch(c){mt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(c){mt(t,o,c)}}var a=t.return;try{vh(t)}catch(c){mt(t,a,c)}break;case 5:var i=t.return;try{vh(t)}catch(c){mt(t,i,c)}}}catch(c){mt(t,t.return,c)}if(t===e){je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,je=l;break}je=t.return}}var D2=Math.ceil,ac=Mn.ReactCurrentDispatcher,Xf=Mn.ReactCurrentOwner,Er=Mn.ReactCurrentBatchConfig,We=0,Tt=null,wt=null,Dt=0,cr=0,So=ps(0),kt=0,di=null,Fs=0,Kc=0,Qf=0,za=null,tr=null,Zf=0,Ko=1/0,jn=null,ic=!1,bh=null,ss=null,nl=!1,Qn=null,lc=0,Ba=0,jh=null,Il=-1,Ol=0;function Gt(){return We&6?gt():Il!==-1?Il:Il=gt()}function os(e){return e.mode&1?We&2&&Dt!==0?Dt&-Dt:y2.transition!==null?(Ol===0&&(Ol=V0()),Ol):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function Hr(e,t,r,n){if(50<Ba)throw Ba=0,jh=null,Error(ae(185));Pi(e,r,n),(!(We&2)||e!==Tt)&&(e===Tt&&(!(We&2)&&(Kc|=r),kt===4&&Yn(e,Dt)),ar(e,n),r===1&&We===0&&!(t.mode&1)&&(Ko=gt()+500,Vc&&gs()))}function ar(e,t){var r=e.callbackNode;yS(e,t);var n=ql(e,e===Tt?Dt:0);if(n===0)r!==null&&Tp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Tp(r),t===1)e.tag===0?v2(Ng.bind(null,e)):pv(Ng.bind(null,e)),m2(function(){!(We&6)&&gs()}),r=null;else{switch(W0(n)){case 1:r=Sf;break;case 4:r=z0;break;case 16:r=Wl;break;case 536870912:r=B0;break;default:r=Wl}r=fy(r,ay.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ay(e,t){if(Il=-1,Ol=0,We&6)throw Error(ae(327));var r=e.callbackNode;if(Ao()&&e.callbackNode!==r)return null;var n=ql(e,e===Tt?Dt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=cc(e,n);else{t=n;var o=We;We|=2;var a=ly();(Tt!==e||Dt!==t)&&(jn=null,Ko=gt()+500,Is(e,t));do try{U2();break}catch(l){iy(e,l)}while(!0);Lf(),ac.current=a,We=o,wt!==null?t=0:(Tt=null,Dt=0,t=kt)}if(t!==0){if(t===2&&(o=Yu(e),o!==0&&(n=o,t=Nh(e,o))),t===1)throw r=di,Is(e,0),Yn(e,n),ar(e,gt()),r;if(t===6)Yn(e,n);else{if(o=e.current.alternate,!(n&30)&&!$2(o)&&(t=cc(e,n),t===2&&(a=Yu(e),a!==0&&(n=a,t=Nh(e,a))),t===1))throw r=di,Is(e,0),Yn(e,n),ar(e,gt()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:_s(e,tr,jn);break;case 3:if(Yn(e,n),(n&130023424)===n&&(t=Zf+500-gt(),10<t)){if(ql(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){Gt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=nh(_s.bind(null,e,tr,jn),t);break}_s(e,tr,jn);break;case 4:if(Yn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var i=31-qr(n);a=1<<i,i=t[i],i>o&&(o=i),n&=~a}if(n=o,n=gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*D2(n/1960))-n,10<n){e.timeoutHandle=nh(_s.bind(null,e,tr,jn),n);break}_s(e,tr,jn);break;case 5:_s(e,tr,jn);break;default:throw Error(ae(329))}}}return ar(e,gt()),e.callbackNode===r?ay.bind(null,e):null}function Nh(e,t){var r=za;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),e=cc(e,t),e!==2&&(t=tr,tr=r,t!==null&&_h(t)),e}function _h(e){tr===null?tr=e:tr.push.apply(tr,e)}function $2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],a=o.getSnapshot;o=o.value;try{if(!Xr(a(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~Qf,t&=~Kc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qr(t),n=1<<r;e[r]=-1,t&=~n}}function Ng(e){if(We&6)throw Error(ae(327));Ao();var t=ql(e,0);if(!(t&1))return ar(e,gt()),null;var r=cc(e,t);if(e.tag!==0&&r===2){var n=Yu(e);n!==0&&(t=n,r=Nh(e,n))}if(r===1)throw r=di,Is(e,0),Yn(e,t),ar(e,gt()),r;if(r===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_s(e,tr,jn),ar(e,gt()),null}function em(e,t){var r=We;We|=1;try{return e(t)}finally{We=r,We===0&&(Ko=gt()+500,Vc&&gs())}}function zs(e){Qn!==null&&Qn.tag===0&&!(We&6)&&Ao();var t=We;We|=1;var r=Er.transition,n=Ye;try{if(Er.transition=null,Ye=1,e)return e()}finally{Ye=n,Er.transition=r,We=t,!(We&6)&&gs()}}function tm(){cr=So.current,st(So)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,f2(r)),wt!==null)for(r=wt.return;r!==null;){var n=r;switch(Mf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Jl();break;case 3:qo(),st(sr),st(qt),Wf();break;case 5:Vf(n);break;case 4:qo();break;case 13:st(lt);break;case 19:st(lt);break;case 10:Uf(n.type._context);break;case 22:case 23:tm()}r=r.return}if(Tt=e,wt=e=as(e.current,null),Dt=cr=t,kt=0,di=null,Qf=Kc=Fs=0,tr=za=null,Ps!==null){for(t=0;t<Ps.length;t++)if(r=Ps[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=o,n.next=i}r.pending=n}Ps=null}return e}function iy(e,t){do{var r=wt;try{if(Lf(),Pl.current=oc,sc){for(var n=dt.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}sc=!1}if(Us=0,Pt=St=dt=null,Ua=!1,ii=0,Xf.current=null,r===null||r.return===null){kt=1,di=t,wt=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=Dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=dg(i);if(m!==null){m.flags&=-257,ug(m,i,l,a,t),m.mode&1&&cg(a,d,t),t=m,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){cg(a,d,t),rm();break e}c=Error(ae(426))}}else if(ot&&l.mode&1){var w=dg(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),ug(w,i,l,a,t),Df(Ho(c,l));break e}}a=c=Ho(c,l),kt!==4&&(kt=2),za===null?za=[a]:za.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Wv(a,c,t);ng(a,y);break e;case 1:l=c;var x=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=qv(a,l,t);ng(a,j);break e}}a=a.return}while(a!==null)}dy(r)}catch(N){t=N,wt===r&&r!==null&&(wt=r=r.return);continue}break}while(!0)}function ly(){var e=ac.current;return ac.current=oc,e===null?oc:e}function rm(){(kt===0||kt===3||kt===2)&&(kt=4),Tt===null||!(Fs&268435455)&&!(Kc&268435455)||Yn(Tt,Dt)}function cc(e,t){var r=We;We|=2;var n=ly();(Tt!==e||Dt!==t)&&(jn=null,Is(e,t));do try{L2();break}catch(o){iy(e,o)}while(!0);if(Lf(),We=r,ac.current=n,wt!==null)throw Error(ae(261));return Tt=null,Dt=0,kt}function L2(){for(;wt!==null;)cy(wt)}function U2(){for(;wt!==null&&!dS();)cy(wt)}function cy(e){var t=hy(e.alternate,e,cr);e.memoizedProps=e.pendingProps,t===null?dy(e):wt=t,Xf.current=null}function dy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=A2(r,t),r!==null){r.flags&=32767,wt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kt=6,wt=null;return}}else if(r=T2(r,t,cr),r!==null){wt=r;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);kt===0&&(kt=5)}function _s(e,t,r){var n=Ye,o=Er.transition;try{Er.transition=null,Ye=1,F2(e,t,r,n)}finally{Er.transition=o,Ye=n}return null}function F2(e,t,r,n){do Ao();while(Qn!==null);if(We&6)throw Error(ae(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(wS(e,a),e===Tt&&(wt=Tt=null,Dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nl||(nl=!0,fy(Wl,function(){return Ao(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Er.transition,Er.transition=null;var i=Ye;Ye=1;var l=We;We|=4,Xf.current=null,O2(e,r),sy(r,e),a2(th),Hl=!!eh,th=eh=null,e.current=r,M2(r),uS(),We=l,Ye=i,Er.transition=a}else e.current=r;if(nl&&(nl=!1,Qn=e,lc=o),a=e.pendingLanes,a===0&&(ss=null),mS(r.stateNode),ar(e,gt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(ic)throw ic=!1,e=bh,bh=null,e;return lc&1&&e.tag!==0&&Ao(),a=e.pendingLanes,a&1?e===jh?Ba++:(Ba=0,jh=e):Ba=0,gs(),null}function Ao(){if(Qn!==null){var e=W0(lc),t=Er.transition,r=Ye;try{if(Er.transition=null,Ye=16>e?16:e,Qn===null)var n=!1;else{if(e=Qn,Qn=null,lc=0,We&6)throw Error(ae(331));var o=We;for(We|=4,je=e.current;je!==null;){var a=je,i=a.child;if(je.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(je=d;je!==null;){var h=je;switch(h.tag){case 0:case 11:case 15:Fa(8,h,a)}var f=h.child;if(f!==null)f.return=h,je=f;else for(;je!==null;){h=je;var p=h.sibling,m=h.return;if(ty(h),h===d){je=null;break}if(p!==null){p.return=m,je=p;break}je=m}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}je=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,je=i;else e:for(;je!==null;){if(a=je,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fa(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,je=y;break e}je=a.return}}var x=e.current;for(je=x;je!==null;){i=je;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,je=v;else e:for(i=x;je!==null;){if(l=je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hc(9,l)}}catch(N){mt(l,l.return,N)}if(l===i){je=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,je=j;break e}je=l.return}}if(We=o,gs(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Lc,e)}catch{}n=!0}return n}finally{Ye=r,Er.transition=t}}return!1}function _g(e,t,r){t=Ho(r,t),t=Wv(e,t,1),e=ns(e,t,1),t=Gt(),e!==null&&(Pi(e,1,t),ar(e,t))}function mt(e,t,r){if(e.tag===3)_g(e,e,r);else for(;t!==null;){if(t.tag===3){_g(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ss===null||!ss.has(n))){e=Ho(r,e),e=qv(t,e,1),t=ns(t,e,1),e=Gt(),t!==null&&(Pi(t,1,e),ar(t,e));break}}t=t.return}}function z2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Gt(),e.pingedLanes|=e.suspendedLanes&r,Tt===e&&(Dt&r)===r&&(kt===4||kt===3&&(Dt&130023424)===Dt&&500>gt()-Zf?Is(e,0):Qf|=r),ar(e,t)}function uy(e,t){t===0&&(e.mode&1?(t=Ki,Ki<<=1,!(Ki&130023424)&&(Ki=4194304)):t=1);var r=Gt();e=Pn(e,t),e!==null&&(Pi(e,t,r),ar(e,r))}function B2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),uy(e,r)}function V2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),uy(e,r)}var hy;hy=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||sr.current)rr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return rr=!1,P2(e,t,r);rr=!!(e.flags&131072)}else rr=!1,ot&&t.flags&1048576&&gv(t,Zl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Al(e,t),e=t.pendingProps;var o=Bo(t,qt.current);To(t,r),o=Hf(null,t,n,e,o,r);var a=Kf();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,or(n)?(a=!0,Xl(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,zf(t),o.updater=qc,t.stateNode=o,o._reactInternals=t,dh(t,n,e,r),t=fh(null,t,n,!0,a,r)):(t.tag=0,ot&&a&&Of(t),Ht(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Al(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=q2(n),e=Fr(n,e),o){case 0:t=hh(null,t,n,e,r);break e;case 1:t=mg(null,t,n,e,r);break e;case 11:t=hg(null,t,n,e,r);break e;case 14:t=fg(null,t,n,Fr(n.type,e),r);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fr(n,o),hh(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fr(n,o),mg(e,t,n,o,r);case 3:e:{if(Yv(t),e===null)throw Error(ae(387));n=t.pendingProps,a=t.memoizedState,o=a.element,jv(e,t),rc(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Ho(Error(ae(423)),t),t=pg(e,t,n,r,o);break e}else if(n!==o){o=Ho(Error(ae(424)),t),t=pg(e,t,n,r,o);break e}else for(mr=rs(t.stateNode.containerInfo.firstChild),pr=t,ot=!0,Wr=null,r=wv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vo(),n===o){t=Tn(e,t,r);break e}Ht(e,t,n,r)}t=t.child}return t;case 5:return Nv(t),e===null&&ih(t),n=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,rh(n,o)?i=null:a!==null&&rh(n,a)&&(t.flags|=32),Gv(e,t),Ht(e,t,i,r),t.child;case 6:return e===null&&ih(t),null;case 13:return Jv(e,t,r);case 4:return Bf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Wo(t,null,n,r):Ht(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fr(n,o),hg(e,t,n,o,r);case 7:return Ht(e,t,t.pendingProps,r),t.child;case 8:return Ht(e,t,t.pendingProps.children,r),t.child;case 12:return Ht(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,et(ec,n._currentValue),n._currentValue=i,a!==null)if(Xr(a.value,i)){if(a.children===o.children&&!sr.current){t=Tn(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Cn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),lh(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ae(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),lh(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ht(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,To(t,r),o=Pr(o),n=n(o),t.flags|=1,Ht(e,t,n,r),t.child;case 14:return n=t.type,o=Fr(n,t.pendingProps),o=Fr(n.type,o),fg(e,t,n,o,r);case 15:return Hv(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fr(n,o),Al(e,t),t.tag=1,or(n)?(e=!0,Xl(t)):e=!1,To(t,r),Vv(t,n,o),dh(t,n,o,r),fh(null,t,n,!0,e,r);case 19:return Xv(e,t,r);case 22:return Kv(e,t,r)}throw Error(ae(156,t.tag))};function fy(e,t){return F0(e,t)}function W2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(e,t,r,n){return new W2(e,t,r,n)}function nm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q2(e){if(typeof e=="function")return nm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jf)return 11;if(e===Nf)return 14}return 2}function as(e,t){var r=e.alternate;return r===null?(r=Cr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ml(e,t,r,n,o,a){var i=2;if(n=e,typeof e=="function")nm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case po:return Os(r.children,o,a,t);case bf:i=8,o|=8;break;case Ou:return e=Cr(12,r,t,o|2),e.elementType=Ou,e.lanes=a,e;case Mu:return e=Cr(13,r,t,o),e.elementType=Mu,e.lanes=a,e;case Du:return e=Cr(19,r,t,o),e.elementType=Du,e.lanes=a,e;case N0:return Gc(r,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b0:i=10;break e;case j0:i=9;break e;case jf:i=11;break e;case Nf:i=14;break e;case Hn:i=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Cr(i,r,t,o),t.elementType=e,t.type=n,t.lanes=a,t}function Os(e,t,r,n){return e=Cr(7,e,n,t),e.lanes=r,e}function Gc(e,t,r,n){return e=Cr(22,e,n,t),e.elementType=N0,e.lanes=r,e.stateNode={isHidden:!1},e}function su(e,t,r){return e=Cr(6,e,null,t),e.lanes=r,e}function ou(e,t,r){return t=Cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H2(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ud(0),this.expirationTimes=Ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ud(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function sm(e,t,r,n,o,a,i,l,c){return e=new H2(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Cr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(a),e}function K2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function my(e){if(!e)return cs;e=e._reactInternals;e:{if(Js(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var r=e.type;if(or(r))return mv(e,r,t)}return t}function py(e,t,r,n,o,a,i,l,c){return e=sm(r,n,!0,e,o,a,i,l,c),e.context=my(null),r=e.current,n=Gt(),o=os(r),a=Cn(n,o),a.callback=t??null,ns(r,a,o),e.current.lanes=o,Pi(e,o,n),ar(e,n),e}function Yc(e,t,r,n){var o=t.current,a=Gt(),i=os(o);return r=my(r),t.context===null?t.context=r:t.pendingContext=r,t=Cn(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ns(o,t,i),e!==null&&(Hr(e,o,i,a),Rl(e,o,i)),i}function dc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function om(e,t){Sg(e,t),(e=e.alternate)&&Sg(e,t)}function G2(){return null}var gy=typeof reportError=="function"?reportError:function(e){console.error(e)};function am(e){this._internalRoot=e}Jc.prototype.render=am.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));Yc(e,t,null,null)};Jc.prototype.unmount=am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zs(function(){Yc(null,e,null,null)}),t[Rn]=null}};function Jc(e){this._internalRoot=e}Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=K0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gn.length&&t!==0&&t<Gn[r].priority;r++);Gn.splice(r,0,e),r===0&&Y0(e)}};function im(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kg(){}function Y2(e,t,r,n,o){if(o){if(typeof n=="function"){var a=n;n=function(){var d=dc(i);a.call(d)}}var i=py(t,n,e,0,null,!1,!1,"",kg);return e._reactRootContainer=i,e[Rn]=i.current,ri(e.nodeType===8?e.parentNode:e),zs(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var l=n;n=function(){var d=dc(c);l.call(d)}}var c=sm(e,0,!1,null,null,!1,!1,"",kg);return e._reactRootContainer=c,e[Rn]=c.current,ri(e.nodeType===8?e.parentNode:e),zs(function(){Yc(t,c,r,n)}),c}function Qc(e,t,r,n,o){var a=r._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var l=o;o=function(){var c=dc(i);l.call(c)}}Yc(t,i,e,o)}else i=Y2(r,t,e,o,n);return dc(i)}q0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ca(t.pendingLanes);r!==0&&(kf(t,r|1),ar(t,gt()),!(We&6)&&(Ko=gt()+500,gs()))}break;case 13:zs(function(){var n=Pn(e,1);if(n!==null){var o=Gt();Hr(n,e,1,o)}}),om(e,1)}};Cf=function(e){if(e.tag===13){var t=Pn(e,134217728);if(t!==null){var r=Gt();Hr(t,e,134217728,r)}om(e,134217728)}};H0=function(e){if(e.tag===13){var t=os(e),r=Pn(e,t);if(r!==null){var n=Gt();Hr(r,e,t,n)}om(e,t)}};K0=function(){return Ye};G0=function(e,t){var r=Ye;try{return Ye=e,t()}finally{Ye=r}};Hu=function(e,t,r){switch(t){case"input":if(Uu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Bc(n);if(!o)throw Error(ae(90));S0(n),Uu(n,o)}}}break;case"textarea":C0(e,r);break;case"select":t=r.value,t!=null&&Co(e,!!r.multiple,t,!1)}};O0=em;M0=zs;var J2={usingClientEntryPoint:!1,Events:[Ai,yo,Bc,A0,I0,em]},wa={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X2={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=L0(e),e===null?null:e.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||G2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{Lc=sl.inject(X2),dn=sl}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J2;vr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!im(t))throw Error(ae(200));return K2(e,t,null,r)};vr.createRoot=function(e,t){if(!im(e))throw Error(ae(299));var r=!1,n="",o=gy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=sm(e,1,!1,null,null,r,!1,n,o),e[Rn]=t.current,ri(e.nodeType===8?e.parentNode:e),new am(t)};vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=L0(t),e=e===null?null:e.stateNode,e};vr.flushSync=function(e){return zs(e)};vr.hydrate=function(e,t,r){if(!Xc(t))throw Error(ae(200));return Qc(null,e,t,!0,r)};vr.hydrateRoot=function(e,t,r){if(!im(e))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,o=!1,a="",i=gy;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=py(t,null,e,1,r??null,o,!1,a,i),e[Rn]=t.current,ri(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Jc(t)};vr.render=function(e,t,r){if(!Xc(t))throw Error(ae(200));return Qc(null,e,t,!1,r)};vr.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(ae(40));return e._reactRootContainer?(zs(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};vr.unstable_batchedUpdates=em;vr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xc(r))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Qc(e,t,r,!1,n)};vr.version="18.3.1-next-f1338f8080-20240426";function xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xy)}catch(e){console.error(e)}}xy(),x0.exports=vr;var na=x0.exports;const vy=o0(na);var yy,Cg=na;yy=Cg.createRoot,Cg.hydrateRoot;function Va(e){if(e.length===0)return{cuisinePreferences:{},dietaryPreferences:[],difficultyPreferences:{},avgCookTime:0,totalRecipesSaved:0};const t={},r=new Set,n={};let o=0;return e.forEach(a=>{t[a.cuisineType]=(t[a.cuisineType]||0)+1,n[a.difficulty]=(n[a.difficulty]||0)+1,a.dietaryTags.forEach(i=>r.add(i)),o+=a.prepTime+a.cookTime}),{cuisinePreferences:t,dietaryPreferences:Array.from(r),difficultyPreferences:n,avgCookTime:o/e.length,totalRecipesSaved:e.length}}function Q2(e,t,r,n){if(n.has(e.id))return-1e3;let o=0;const a=t.cuisinePreferences[e.cuisineType]||0;o+=a*10,r.favoriteCuisines.includes(e.cuisineType)&&(o+=15);let l=0;e.dietaryTags.forEach(m=>{t.dietaryPreferences.includes(m)&&l++,r.dietaryPreferences.includes(m)&&l++}),o+=l*8;const c=t.difficultyPreferences[e.difficulty]||0;o+=c*5;const h={Beginner:"Easy",Intermediate:"Medium",Advanced:"Hard"}[r.cookingSkillLevel];if(e.difficulty===h?o+=10:(r.cookingSkillLevel==="Intermediate"&&e.difficulty==="Easy"||r.cookingSkillLevel==="Advanced"&&e.difficulty==="Medium")&&(o+=5),t.avgCookTime>0){const m=e.prepTime+e.cookTime,b=Math.abs(m-t.avgCookTime),g=Math.max(0,10-b/10);o+=g}e.ingredients.some(m=>r.dislikedIngredients.some(b=>m.name.toLowerCase().includes(b.toLowerCase())))&&(o-=50),e.popularity&&(o+=e.popularity*.5);const p=Math.random()*5;return o+=p,o}function Z2(e,t,r,n=6){const o=Va(t),a=new Set(t.map(l=>l.id));return t.length===0?e.filter(l=>!a.has(l.id)).sort((l,c)=>(c.popularity||0)-(l.popularity||0)).slice(0,n):e.map(l=>({recipe:l,score:Q2(l,o,r,a)})).filter(l=>l.score>=0).sort((l,c)=>c.score-l.score).slice(0,n).map(l=>l.recipe)}function ek(e){if(e.length===0)return"Popular recipes to get you started";const t=Va(e),r=Object.entries(t.cuisinePreferences).sort((o,a)=>a[1]-o[1])[0],n=[];return r&&n.push(r[0]),t.dietaryPreferences.length>0&&n.push(t.dietaryPreferences[0]),n.length>0?`Based on your love for ${n.join(" and ")} recipes`:"Personalized recommendations based on your saved recipes"}async function Eg(){}async function Rg(){}const tk={savedRecipes:[],mealPlan:[],groceryList:[],userPreferences:{dietaryPreferences:[],favoriteCuisines:[],cookingSkillLevel:"Beginner",householdSize:2,dislikedIngredients:[],visualLearningStyle:"auto"},userProfile:{cuisinePreferences:{},dietaryPreferences:[],difficultyPreferences:{},avgCookTime:0,totalRecipesSaved:0},discoveryRecipes:[],hasSeenOnboarding:!0},wy=u.createContext(void 0);function rk(e,t){switch(t.type){case"SAVE_RECIPE":{const r=[...e.savedRecipes,{...t.payload,isSaved:!0}],n=Va(r);return Eg(),Rg(),{...e,savedRecipes:r,userProfile:n}}case"REMOVE_RECIPE":{const r=e.savedRecipes.filter(o=>o.id!==t.payload),n=Va(r);return Eg(),Rg(),{...e,savedRecipes:r,userProfile:n}}case"ADD_MEAL_PLAN":return{...e,mealPlan:[...e.mealPlan,t.payload]};case"REMOVE_MEAL_PLAN":return{...e,mealPlan:e.mealPlan.filter(r=>r.id!==t.payload)};case"CLEAR_MEAL_PLAN":return{...e,mealPlan:[],groceryList:[]};case"UPDATE_MEAL_PLAN":return{...e,mealPlan:e.mealPlan.map(r=>r.id===t.payload.id?t.payload:r)};case"ADD_GROCERY_ITEM":return{...e,groceryList:[...e.groceryList,t.payload]};case"REMOVE_GROCERY_ITEM":return{...e,groceryList:e.groceryList.filter(r=>r.id!==t.payload)};case"TOGGLE_GROCERY_ITEM":return{...e,groceryList:e.groceryList.map(r=>r.id===t.payload?{...r,checked:!r.checked}:r)};case"UPDATE_GROCERY_LIST":return{...e,groceryList:t.payload};case"UPDATE_PREFERENCES":{const r={...e.userPreferences,...t.payload};return{...e,userPreferences:r}}case"COMPLETE_ONBOARDING":return{...e,hasSeenOnboarding:!0};case"LOAD_STATE":{const r=t.payload,n=Va(r.savedRecipes||[]);return{...r,userProfile:n}}default:return e}}function nk({children:e}){const[t,r]=u.useReducer(rk,tk);return u.useEffect(()=>{const n=localStorage.getItem("recipeAppState");if(n)try{const o=JSON.parse(n);r({type:"LOAD_STATE",payload:{...o,discoveryRecipes:[]}})}catch(o){console.error("Failed to load state from localStorage",o)}},[]),u.useEffect(()=>{const n={...t,discoveryRecipes:[]};localStorage.setItem("recipeAppState",JSON.stringify(n))},[t]),s.jsx(wy.Provider,{value:{state:t,dispatch:r},children:e})}function Xs(){const e=u.useContext(wy);if(e===void 0)throw new Error("useRecipes must be used within a RecipeProvider");return e}var Sh=function(e,t){return Sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Sh(e,t)};function by(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Sh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var kr=function(){return kr=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},kr.apply(this,arguments)};function xs(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function jy(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function Ny(e,t){return function(r,n){t(r,n,e)}}function _y(e,t,r,n,o,a){function i(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,h=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),f,p=!1,m=r.length-1;m>=0;m--){var b={};for(var g in n)b[g]=g==="access"?{}:n[g];for(var g in n.access)b.access[g]=n.access[g];b.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(y||null))};var w=(0,r[m])(l==="accessor"?{get:h.get,set:h.set}:h[c],b);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=i(w.get))&&(h.get=f),(f=i(w.set))&&(h.set=f),(f=i(w.init))&&o.unshift(f)}else(f=i(w))&&(l==="field"?o.unshift(f):h[c]=f)}d&&Object.defineProperty(d,n.name,h),p=!0}function Sy(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function ky(e){return typeof e=="symbol"?e:"".concat(e)}function Cy(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Ey(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ce(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function l(h){try{d(n.next(h))}catch(f){i(f)}}function c(h){try{d(n.throw(h))}catch(f){i(f)}}function d(h){h.done?a(h.value):o(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function Ry(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(d){return function(h){return c([d,h])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Zc=Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Py(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Zc(t,e,r)}function uc(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lm(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}function Ty(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(lm(arguments[t]));return e}function Ay(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)n[o]=a[i];return n}function cm(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Go(e){return this instanceof Go?(this.v=e,this):new Go(e)}function Iy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(m){return function(b){return Promise.resolve(b).then(m,f)}}function l(m,b){n[m]&&(o[m]=function(g){return new Promise(function(w,y){a.push([m,g,w,y])>1||c(m,g)})},b&&(o[m]=b(o[m])))}function c(m,b){try{d(n[m](b))}catch(g){p(a[0][3],g)}}function d(m){m.value instanceof Go?Promise.resolve(m.value.v).then(h,f):p(a[0][2],m)}function h(m){c("next",m)}function f(m){c("throw",m)}function p(m,b){m(b),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Oy(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,a){t[o]=e[o]?function(i){return(r=!r)?{value:Go(e[o](i)),done:!1}:a?a(i):i}:a}}function My(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof uc=="function"?uc(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(i){return new Promise(function(l,c){i=e[a](i),o(l,c,i.done,i.value)})}}function o(a,i,l,c){Promise.resolve(c).then(function(d){a({value:d,done:l})},i)}}function Dy(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var sk=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},kh=function(e){return kh=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},kh(e)};function $y(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=kh(e),n=0;n<r.length;n++)r[n]!=="default"&&Zc(t,e,r[n]);return sk(t,e),t}function Ly(e){return e&&e.__esModule?e:{default:e}}function Uy(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Fy(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function zy(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function By(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var ok=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Vy(e){function t(a){e.error=e.hasError?new ok(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Wy(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,a,i){return n?t?".jsx":".js":o&&(!a||!i)?r:o+a+"."+i.toLowerCase()+"js"}):e}const ak={__extends:by,__assign:kr,__rest:xs,__decorate:jy,__param:Ny,__esDecorate:_y,__runInitializers:Sy,__propKey:ky,__setFunctionName:Cy,__metadata:Ey,__awaiter:Ce,__generator:Ry,__createBinding:Zc,__exportStar:Py,__values:uc,__read:lm,__spread:Ty,__spreadArrays:Ay,__spreadArray:cm,__await:Go,__asyncGenerator:Iy,__asyncDelegator:Oy,__asyncValues:My,__makeTemplateObject:Dy,__importStar:$y,__importDefault:Ly,__classPrivateFieldGet:Uy,__classPrivateFieldSet:Fy,__classPrivateFieldIn:zy,__addDisposableResource:By,__disposeResources:Vy,__rewriteRelativeImportExtension:Wy},ik=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:By,get __assign(){return kr},__asyncDelegator:Oy,__asyncGenerator:Iy,__asyncValues:My,__await:Go,__awaiter:Ce,__classPrivateFieldGet:Uy,__classPrivateFieldIn:zy,__classPrivateFieldSet:Fy,__createBinding:Zc,__decorate:jy,__disposeResources:Vy,__esDecorate:_y,__exportStar:Py,__extends:by,__generator:Ry,__importDefault:Ly,__importStar:$y,__makeTemplateObject:Dy,__metadata:Ey,__param:Ny,__propKey:ky,__read:lm,__rest:xs,__rewriteRelativeImportExtension:Wy,__runInitializers:Sy,__setFunctionName:Cy,__spread:Ty,__spreadArray:cm,__spreadArrays:Ay,__values:uc,default:ak},Symbol.toStringTag,{value:"Module"})),lk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class dm extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Pg extends dm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tg extends dm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ag extends dm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ch;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ch||(Ch={}));class ck{constructor(t,{headers:r={},customFetch:n,region:o=Ch.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=lk(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ce(this,arguments,void 0,function*(r,n={}){var o;try{const{headers:a,method:i,body:l,signal:c}=n;let d={},{region:h}=n;h||(h=this.region);const f=new URL(`${this.url}/${r}`);h&&h!=="any"&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h));let p;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(d["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)):p=l;const m=yield this.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:p,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new Pg(y)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new Tg(m);if(!m.ok)throw new Ag(m);let g=((o=m.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield m.json():g==="application/octet-stream"||g==="application/pdf"?w=yield m.blob():g==="text/event-stream"?w=m:g==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Pg(a)}:{data:null,error:a,response:a instanceof Ag||a instanceof Tg?a.context:void 0}}})}}var Kt={};const sa=k_(ik);var ol={},al={},il={},ll={},cl={},dl={},Ig;function qy(){if(Ig)return dl;Ig=1,Object.defineProperty(dl,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return dl.default=e,dl}var Og;function Hy(){if(Og)return cl;Og=1,Object.defineProperty(cl,"__esModule",{value:!0});const t=sa.__importDefault(qy());class r{constructor(o){var a,i;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(a=o.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=o.signal,this.isMaybeSingle=(i=o.isMaybeSingle)!==null&&i!==void 0?i:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,a){return this.headers=new Headers(this.headers),this.headers.set(o,a),this}then(o,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,f,p;let m=null,b=null,g=null,w=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?b=N:b=JSON.parse(N))}const v=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");v&&j&&j.length>1&&(g=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(m={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,g=null,w=406,y="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const v=await c.text();try{m=JSON.parse(v),Array.isArray(m)&&c.status===404&&(b=[],m=null,w=200,y="OK")}catch{c.status===404&&v===""?(w=204,y="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,w=200,y="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:b,count:g,status:w,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,h,f;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,a)}returns(){return this}overrideTypes(){return this}}return cl.default=r,cl}var Mg;function Ky(){if(Mg)return ll;Mg=1,Object.defineProperty(ll,"__esModule",{value:!0});const t=sa.__importDefault(Hy());class r extends t.default{select(o){let a=!1;const i=(o??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${o}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${o}`),this}range(o,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${o}`),this.url.searchParams.set(d,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var h;const f=[o?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${f};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ll.default=r,ll}var Dg;function um(){if(Dg)return il;Dg=1,Object.defineProperty(il,"__esModule",{value:!0});const t=sa.__importDefault(Ky()),r=new RegExp("[,()]");class n extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${h}.${i}`),this}match(a){return Object.entries(a).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(a,i,l){return this.url.searchParams.append(a,`not.${i}.${l}`),this}or(a,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,l){return this.url.searchParams.append(a,`${i}.${l}`),this}}return il.default=n,il}var $g;function Gy(){if($g)return al;$g=1,Object.defineProperty(al,"__esModule",{value:!0});const t=sa.__importDefault(um());class r{constructor(o,{headers:a={},schema:i,fetch:l}){this.url=o,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(o,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let d=!1;const h=(o??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const d=o.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(o,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:o}={}){var a;const i="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return al.default=r,al}var Lg;function dk(){if(Lg)return ol;Lg=1,Object.defineProperty(ol,"__esModule",{value:!0});const e=sa,t=e.__importDefault(Gy()),r=e.__importDefault(um());class n{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:d}={}){var h;let f;const p=new URL(`${this.url}/rpc/${a}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(i).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{p.searchParams.append(g,w)})):(f="POST",m=i);const b=new Headers(this.headers);return d&&b.set("Prefer",`count=${d}`),new r.default({method:f,url:p,headers:b,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return ol.default=n,ol}Object.defineProperty(Kt,"__esModule",{value:!0});var Yy=Kt.PostgrestError=ow=Kt.PostgrestBuilder=nw=Kt.PostgrestTransformBuilder=tw=Kt.PostgrestFilterBuilder=Zy=Kt.PostgrestQueryBuilder=Xy=Kt.PostgrestClient=void 0;const oa=sa,Jy=oa.__importDefault(dk());var Xy=Kt.PostgrestClient=Jy.default;const Qy=oa.__importDefault(Gy());var Zy=Kt.PostgrestQueryBuilder=Qy.default;const ew=oa.__importDefault(um());var tw=Kt.PostgrestFilterBuilder=ew.default;const rw=oa.__importDefault(Ky());var nw=Kt.PostgrestTransformBuilder=rw.default;const sw=oa.__importDefault(Hy());var ow=Kt.PostgrestBuilder=sw.default;const aw=oa.__importDefault(qy());Yy=Kt.PostgrestError=aw.default;var iw=Kt.default={PostgrestClient:Jy.default,PostgrestQueryBuilder:Qy.default,PostgrestFilterBuilder:ew.default,PostgrestTransformBuilder:rw.default,PostgrestBuilder:sw.default,PostgrestError:aw.default};const uk=s0({__proto__:null,get PostgrestBuilder(){return ow},get PostgrestClient(){return Xy},get PostgrestError(){return Yy},get PostgrestFilterBuilder(){return tw},get PostgrestQueryBuilder(){return Zy},get PostgrestTransformBuilder(){return nw},default:iw},[Kt]),{PostgrestClient:hk,PostgrestQueryBuilder:H6,PostgrestFilterBuilder:K6,PostgrestTransformBuilder:G6,PostgrestBuilder:Y6,PostgrestError:J6}=iw||uk;class fk{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,o=parseInt(n.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mk="2.80.0",pk=`realtime-js/${mk}`,gk="1.0.0",Eh=1e4,xk=1e3,vk=100;var Wa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wa||(Wa={}));var jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jt||(jt={}));var Vr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vr||(Vr={}));var Rh;(function(e){e.websocket="websocket"})(Rh||(Rh={}));var Cs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cs||(Cs={}));class yk{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const o=r.getUint8(1),a=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+o));i=i+o;const c=n.decode(t.slice(i,i+a));i=i+a;const d=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}let lw=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Qe||(Qe={}));const Ug=(e,t,r={})=>{var n;const o=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=wk(i,e,t,o),a),{}):{}},wk=(e,t,r,n)=>{const o=t.find(l=>l.name===e),a=o==null?void 0:o.type,i=r[e];return a&&!n.includes(a)?cw(a,i):Ph(i)},cw=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _k(t,r)}switch(e){case Qe.bool:return bk(t);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return jk(t);case Qe.json:case Qe.jsonb:return Nk(t);case Qe.timestamp:return Sk(t);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return Ph(t);default:return Ph(t)}},Ph=e=>e,bk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Nk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_k=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const i=e.slice(1,r);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>cw(t,l))}return e},Sk=e=>typeof e=="string"?e.replace(" ","T"):e,dw=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class au{constructor(t,r,n={},o=Eh){this.channel=t,this.event=r,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Fg||(Fg={}));class qa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qa.syncState(this.state,o,a,i),this.pendingDiffs.forEach(c=>{this.state=qa.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=qa.syncDiff(this.state,o,a,i),l())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,o){const a=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(a,(d,h)=>{i[d]||(c[d]=h)}),this.map(i,(d,h)=>{const f=a[d];if(f){const p=h.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),b=h.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(a,{joins:l,leaves:c},n,o)}static syncDiff(t,r,n,o){const{joins:a,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(a,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...p)}n(l,h,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=d,o(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const o=t[n];return"metas"in o?r[n]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zg||(zg={}));var Ha;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ha||(Ha={}));var Nn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class hm{constructor(t,r={config:{}},n){var o,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new au(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new lw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new qa(this),this.broadcastEndpointURL=dw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&o!==void 0?o:[],h=!!this.bindings[Ha.PRESENCE]&&this.bindings[Ha.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Nn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket.setAuth(),m===void 0){t==null||t(Nn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,y=[];for(let x=0;x<w;x++){const v=g[x],{filter:{event:j,schema:N,table:_,filter:k}}=v,P=m&&m[x];if(P&&P.event===j&&P.schema===N&&P.table===_&&P.filter===k)y.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=jt.errored,t==null||t(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Nn.SUBSCRIBED);return}}).receive("error",m=>{this.state=jt.errored,t==null||t(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===jt.joined&&t===Ha.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((o=d.body)===null||o===void 0?void 0:o.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new au(this,Vr.leave,{},t),n.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const o=new AbortController,a=setTimeout(()=>o.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(a),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new au(this,t,r,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vk){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var o,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Vr;if(n&&[l,c,d,h].indexOf(i)>=0&&n!==this._joinRef())return;let p=this._onMessage(i,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(m=>{var b,g,w;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(m=>m.callback(p,n)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var b,g,w,y,x,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const j=m.id,N=(b=m.filter)===null||b===void 0?void 0:b.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(x=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return j==="*"||j===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:g,table:w,commit_timestamp:y,type:x,errors:v}=b;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:y,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(p,n)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const o=t.toLocaleLowerCase(),a={type:o,filter:r,callback:n};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&hm.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vr.close,{},t)}_onError(t){this._on(Vr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ug(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ug(t.columns,t.old_record)),r}}const iu=()=>{},ul={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kk=[1e3,2e3,5e3,1e4],Ck=1e4,Ek=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rk{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eh,this.transport=null,this.heartbeatIntervalMs=ul.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=iu,this.ref=0,this.reconnectTimer=null,this.logger=iu,this.conn=null,this.sendBuffer=[],this.serializer=new yk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Rh.websocket}`,this.httpEndpoint=dw(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fk.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gk}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wa.connecting:return Cs.Connecting;case Wa.open:return Cs.Open;case Wa.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===n);if(o)return o;{const a=new hm(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:o,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(xk,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ul.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:o,payload:a,ref:i}=r,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${o} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(o,a,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${n}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ek],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const o={access_token:r,version:pk};r&&n.updateJoinPayload(o),n.joinedOnce&&n._isJoined()&&n._push(Vr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ul.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,o,a,i,l,c,d,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Eh,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:ul.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:iu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>kk[f-1]||Ck,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(f,p)=>p(JSON.stringify(f)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class fm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function it(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Pk extends fm{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Th extends fm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const mm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Tk=()=>Response,Ah=e=>{if(Array.isArray(e))return e.map(r=>Ah(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const o=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=Ah(n)}),t},Ak=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Ik=(e,t,r)=>Ce(void 0,void 0,void 0,function*(){const n=yield Tk();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(o=>{const a=e.status||500,i=(o==null?void 0:o.statusCode)||a+"";t(new Pk(lu(o),a,i))}).catch(o=>{t(new Th(lu(o),o))}):t(new Th(lu(e),e))}),Ok=(e,t,r,n)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?o:(Ak(n)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,t!=null&&t.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function Oi(e,t,r,n,o,a){return Ce(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,Ok(t,n,o,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Ik(c,l,n))})})}function ui(e,t,r,n){return Ce(this,void 0,void 0,function*(){return Oi(e,"GET",t,r,n)})}function zr(e,t,r,n,o){return Ce(this,void 0,void 0,function*(){return Oi(e,"POST",t,n,o,r)})}function Ih(e,t,r,n,o){return Ce(this,void 0,void 0,function*(){return Oi(e,"PUT",t,n,o,r)})}function Mk(e,t,r,n){return Ce(this,void 0,void 0,function*(){return Oi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function pm(e,t,r,n,o){return Ce(this,void 0,void 0,function*(){return Oi(e,"DELETE",t,n,o,r)})}class Dk{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}}var uw;class $k{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[uw]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dk(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(it(t))return{data:null,error:t};throw t}})}}uw=Symbol.toStringTag;const Lk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uk{constructor(t,r={},n,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=mm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,o){return Ce(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Bg),o);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const d=this._removeEmptyFolders(r),h=this._getFinalPath(d),f=yield(t=="PUT"?Ih:zr)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(it(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,o){return Ce(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Bg.upsert},o),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield Ih(this.fetch,l.toString(),c,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(it(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const o=Object.assign({},this.headers);r!=null&&r.upsert&&(o["x-upsert"]="true");const a=yield zr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:o}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new fm("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}copy(t,r,n){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield zr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,n){return Ce(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield zr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,n){return Ce(this,void 0,void 0,function*(){try{const o=yield zr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>ui(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new $k(c,this.shouldThrowOnError)}info(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ui(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ah(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}exists(t){return Ce(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Mk(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n)&&n instanceof Th){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),o=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&o.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&o.push(c);let d=o.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ce(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Lk),r),{prefix:t||""});return{data:yield zr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}listV2(t,r){return Ce(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const hw="2.80.0",fw={"X-Client-Info":`storage-js/${hw}`};class Fk{constructor(t,r={},n,o){this.shouldThrowOnError=!1;const a=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fw),r),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ce(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ui(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}getBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}createBucket(t){return Ce(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield zr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return Ce(this,void 0,void 0,function*(){try{return{data:yield Ih(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class zk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fw),r),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ce(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),o=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ui(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield pm(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}})}}const gm={"X-Client-Info":`storage-js/${hw}`,"Content-Type":"application/json"};class mw extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ur(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class cu extends mw{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bk extends mw{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Vg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Vg||(Vg={}));const xm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Vk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wk=(e,t,r)=>Ce(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const o=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||o+"";t(new cu(Wg(i),o,l))}).catch(()=>{const i=o+"",l=a.statusText||`HTTP ${o} error`;t(new cu(l,o,i))});else{const i=o+"",l=a.statusText||`HTTP ${o} error`;t(new cu(l,o,i))}}else t(new Bk(Wg(e),e))}),qk=(e,t,r,n)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(Vk(n)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,Object.assign(Object.assign({},o),r)):o};function Hk(e,t,r,n,o,a){return Ce(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,qk(t,n,o,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>Wk(c,l,n))})})}function hr(e,t,r,n,o){return Ce(this,void 0,void 0,function*(){return Hk(e,"POST",t,n,o,r)})}class Kk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ce(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ce(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ur(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ce(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ur(n))return{data:null,error:n};throw n}})}}class Gk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ce(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getVectors(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}listVectors(t){return Ce(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield hr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ce(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}}class Yk{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gm),r),this.fetch=xm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}getBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}listBuckets(){return Ce(this,arguments,void 0,function*(t={}){try{return{data:yield hr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ce(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ur(r))return{data:null,error:r};throw r}})}}class Jk extends Yk{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Xk(this.url,this.headers,t,this.fetch)}}class Xk extends Kk{constructor(t,r,n,o){super(t,r,o),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ce(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ce(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ce(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ce(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Qk(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Qk extends Gk{constructor(t,r,n,o,a){super(t,r,a),this.vectorBucketName=n,this.indexName=o}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ce(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ce(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ce(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ce(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ce(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Zk extends Fk{constructor(t,r={},n,o){super(t,r,n,o)}from(t){return new Uk(this.url,this.headers,t,this.fetch)}get vectors(){return new Jk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zk(this.url+"/iceberg",this.headers,this.fetch)}}const eC="2.80.0";let Ra="";typeof Deno<"u"?Ra="deno":typeof document<"u"?Ra="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ra="react-native":Ra="node";const tC={"X-Client-Info":`supabase-js-${Ra}/${eC}`},rC={headers:tC},nC={schema:"public"},sC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oC={},aC=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iC=()=>Headers,lC=(e,t,r)=>{const n=aC(r),o=iC();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new o(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},i),{headers:d}))}};function cC(e){return e.endsWith("/")?e:e+"/"}function dC(e,t){var r,n;const{db:o,auth:a,realtime:i,global:l}=e,{db:c,auth:d,realtime:h,global:f}=t,p={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function uC(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cC(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const pw="2.80.0",ho=30*1e3,Oh=3,du=Oh*ho,hC="http://localhost:9999",fC="supabase.auth.token",mC={"X-Client-Info":`gotrue-js/${pw}`},Mh="X-Supabase-Api-Version",gw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gC=10*60*1e3;class hi extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xC extends hi{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function vC(e){return Re(e)&&e.name==="AuthApiError"}class Es extends hi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class vs extends hi{constructor(t,r,n,o){super(t,n,o),this.name=r,this.status=n}}class $r extends vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yC(e){return Re(e)&&e.name==="AuthSessionMissingError"}class ro extends vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hl extends vs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fl extends vs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wC(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class qg extends vs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dh extends vs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function uu(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class Hg extends vs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class $h extends vs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kg=` 	
\r=`.split(""),bC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kg.length;t+=1)e[Kg[t].charCodeAt(0)]=-2;for(let t=0;t<hc.length;t+=1)e[hc[t].charCodeAt(0)]=t;return e})();function Gg(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hc[n]),t.queuedBits-=6}}function xw(e,t,r){const n=bC[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yg(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{_C(i,n,r)};for(let i=0;i<e.length;i+=1)xw(e.charCodeAt(i),o,a);return t.join("")}function jC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function NC(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}jC(n,t)}}function _C(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Io(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)xw(e.charCodeAt(o),r,n);return new Uint8Array(t)}function SC(e){const t=[];return NC(e,r=>t.push(r)),new Uint8Array(t)}function As(e){const t=[],r={queue:0,queuedBits:0},n=o=>{t.push(o)};return e.forEach(o=>Gg(o,r,n)),Gg(null,r,n),t.join("")}function kC(e){return Math.round(Date.now()/1e3)+e}function CC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Bt=()=>typeof window<"u"&&typeof document<"u",bs={tested:!1,writable:!1},vw=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bs.tested)return bs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bs.tested=!0,bs.writable=!0}catch{bs.tested=!0,bs.writable=!1}return bs.writable};function EC(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return r.searchParams.forEach((n,o)=>{t[o]=n}),t}const yw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},js=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},zn=async(e,t)=>{await e.removeItem(t)};class ed{constructor(){this.promise=new ed.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ed.promiseConstructor=Promise;function hu(e){const t=e.split(".");if(t.length!==3)throw new $h("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!pC.test(t[n]))throw new $h("JWT not in base64url format");return{header:JSON.parse(Yg(t[0])),payload:JSON.parse(Yg(t[1])),signature:Io(t[2]),raw:{header:t[0],payload:t[1]}}}async function PC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function TC(e,t){return new Promise((n,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){n(i);return}}catch(i){if(!t(a,i)){o(i);return}}})()})}function AC(e){return("0"+e.toString(16)).substr(-2)}function IC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let o="";for(let a=0;a<56;a++)o+=r.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,AC).join("")}async function OC(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(n);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function MC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await OC(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function no(e,t,r=!1){const n=IC();let o=n;r&&(o+="/PASSWORD_RECOVERY"),await fo(e,`${t}-code-verifier`,o);const a=await MC(n);return[a,n===a?"plain":"s256"]}const DC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $C(e){const t=e.headers.get(Mh);if(!t||!t.match(DC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LC(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function UC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function so(e){if(!FC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zC(e,t){return new Proxy(e,{get:(r,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,o)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,o)}})}function Jg(e){return JSON.parse(JSON.stringify(e))}const Ss=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),BC=[502,503,504];async function Xg(e){var t;if(!RC(e))throw new Dh(Ss(e),0);if(BC.includes(e.status))throw new Dh(Ss(e),e.status);let r;try{r=await e.json()}catch(a){throw new Es(Ss(a),a)}let n;const o=$C(e);if(o&&o.getTime()>=gw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hg(Ss(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Hg(Ss(r),e.status,r.weak_password.reasons);throw new xC(Ss(r),e.status||500,n)}const VC=(e,t,r,n)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),r))};async function De(e,t,r,n){var o;const a=Object.assign({},n==null?void 0:n.headers);a[Mh]||(a[Mh]=gw["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const i=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await WC(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function WC(e,t,r,n,o,a){const i=VC(t,n,o,a);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Dh(Ss(c),0)}if(l.ok||await Xg(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Xg(c)}}function Lr(e){var t;let r=null;KC(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=kC(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qg(e){const t=Lr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function qC(e){return{data:e,error:null}}function HC(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a}=e,i=xs(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Zg(e){return e}function KC(e){return e.access_token&&e.refresh_token&&e.expires_in}const mu=["global","local","others"];class GC{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=yw(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=mu[0]){if(mu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mu.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Jn})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=xs(t,["options"]),o=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:HC,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jn})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,o,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Zg});if(h.error)throw h.error;const f=await h.json(),p=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Re(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){so(t);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jn})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){so(t);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Jn})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){so(t);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Jn})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){so(t.userId);try{const{data:r,error:n}=await De(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:n}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteFactor(t){so(t.userId),so(t.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,o,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Zg});if(h.error)throw h.error;const f=await h.json(),p=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Re(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await De(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}}function ex(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const oo={debug:!!(globalThis&&vw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ww extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class YC extends ww{}async function JC(e,t,r){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),oo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async o=>{if(o){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new YC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(oo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function XC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bw(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function QC(e){return parseInt(e,16)}function ZC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function eE(e){var t;const{chainId:r,domain:n,expirationTime:o,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:h,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=bw(e.address),b=h?`${h}://${n}`:n,g=e.statement?`${e.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${m}

${g}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(o&&(y+=`
Expiration Time: ${o.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let x=`
Resources:`;for(const v of d){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);x+=`
- ${v}`}y+=x}return`${w}
${y}`}class vt extends Error{constructor({message:t,code:r,cause:n,name:o}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=o??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class fc extends vt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function tE({error:e,options:t}){var r,n,o;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(jw(i)){if(a.rp.id!==i)return new vt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function rE({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(jw(n)){if(r.rpId!==n)return new vt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class nE{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const sE=new nE;function oE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,o=xs(e,["challenge","user","excludeCredentials"]),a=Io(t).buffer,i=Object.assign(Object.assign({},r),{id:Io(r.id).buffer}),l=Object.assign(Object.assign({},o),{challenge:a,user:i});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:Io(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function aE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=xs(e,["challenge","allowCredentials"]),o=Io(t).buffer,a=Object.assign(Object.assign({},n),{challenge:o});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const l=r[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Io(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function iE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:As(new Uint8Array(e.response.attestationObject)),clientDataJSON:As(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function lE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:As(new Uint8Array(o.authenticatorData)),clientDataJSON:As(new Uint8Array(o.clientDataJSON)),signature:As(new Uint8Array(o.signature)),userHandle:o.userHandle?As(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jw(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tx(){var e,t;return!!(Bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function cE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fc("Browser returned unexpected credential type",t)}:{data:null,error:new fc("Empty credential response",t)}}catch(t){return{data:null,error:tE({error:t,options:e})}}}async function dE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new fc("Browser returned unexpected credential type",t)}:{data:null,error:new fc("Empty credential response",t)}}catch(t){return{data:null,error:rE({error:t,options:e})}}}const uE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},hE={userVerification:"preferred",hints:["security-key"]};function mc(...e){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of e)if(o)for(const a in o){const i=o[a];if(i!==void 0)if(Array.isArray(i))n[a]=i;else if(r(i))n[a]=i;else if(t(i)){const l=n[a];t(l)?n[a]=mc(l,i):n[a]=mc(i)}else n[a]=i}return n}function fE(e,t){return mc(uE,e,t||{})}function mE(e,t){return mc(hE,e,t||{})}class pE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:o},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!i)return{data:null,error:l};const c=o??sE.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:d}=i.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(i.webauthn.type){case"create":{const d=fE(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await cE({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=mE(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await dE(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o}},a){if(!r)return{data:null,error:new hi("rpId is required for WebAuthn authentication")};try{if(!tx())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:o},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:o},a){if(!r)return{data:null,error:new hi("rpId is required for WebAuthn registration")};try{if(!tx())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:o},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new Es("Unexpected error in register",i)}}}}XC();const gE={url:hC,storageKey:fC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rx(e,t,r){return await r()}const ao={};class fi{get jwks(){var t,r;return(r=(t=ao[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ao[this.storageKey]=Object.assign(Object.assign({},ao[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ao[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ao[this.storageKey]=Object.assign(Object.assign({},ao[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},gE),t);if(this.storageKey=a.storageKey,this.instanceID=(r=fi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,fi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Bt()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GC({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yw(a.fetch),this.lock=a.lock||rx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Bt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JC:this.lock=rx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new pE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:vw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ex(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ex(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${pw}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Bt()&&(r=EC(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Bt()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),wC(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Re(r)?this._returnResult({error:r}):this._returnResult({error:new Es("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,o;try{const a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Lr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,o;try{let a;if("email"in t){const{email:h,password:f,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await no(this.storage,this.storageKey)),a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:Lr})}else if("phone"in t){const{phone:h,password:f,options:p}=t;a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(o=p==null?void 0:p.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Lr})}else throw new hl("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:i,options:l}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else if("phone"in t){const{phone:a,password:i,options:l}=t;r=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else throw new hl("You must provide either an email or phone number and a password");const{data:n,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const a=new ro;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,o,a,i,l,c,d,h,f,p;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:g,wallet:w,statement:y,options:x}=t;let v;if(Bt())if(typeof w=="object")v=w;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")v=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),N=await v.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=bw(N[0]);let k=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const C=await v.request({method:"eth_chainId"});k=QC(C)}const P={domain:j.host,address:_,statement:y,uri:j.href,version:"1",chainId:k,nonce:(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(i=(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=eE(P),b=await v.request({method:"personal_sign",params:[ZC(m),_]})}try{const{data:g,error:w}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Lr});if(w)throw w;if(!g||!g.session||!g.user){const y=new ro;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(Re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,o,a,i,l,c,d,h,f,p,m;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:y,statement:x,options:v}=t;let j;if(Bt())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const N=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),x?{statement:x}:null));let k;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")k=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)k=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)b=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(o=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:w,error:y}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:As(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Lr});if(y)throw y;if(!w||!w.session||!w.user){const x=new ro;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:y})}catch(w){if(Re(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await js(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(r??"").split("/");try{const{data:a,error:i}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Lr});if(await zn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new ro;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:o,access_token:a,nonce:i}=t,l=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Lr}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new ro;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,o,a,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await no(this.storage,this.storageKey));const{error:f}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new hl("You must provide either an email or phone number.")}catch(l){if(Re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let o,a;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Lr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,n,o;try{let a=null,i=null;this.flowType==="pkce"&&([a,i]=await no(this.storage,this.storageKey));const l=await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:qC});return this._returnResult(l)}catch(a){if(Re(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $r;const{error:o}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(Re(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:a}=t,{error:i}=await De(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:n,type:o,options:a}=t,{data:i,error:l}=await De(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new hl("You must provide either an email or phone number and a type")}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<du:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await js(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=fu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=zC(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jn}):await this._useSession(async r=>{var n,o,a;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $r}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Jn})})}catch(r){if(Re(r))return yC(r)&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:o,error:a}=n;if(a)throw a;if(!o.session)throw new $r;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await no(this.storage,this.storageKey));const{data:d,error:h}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Jn});if(h)throw h;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $r;const r=Date.now()/1e3;let n=r,o=!0,a=null;const{payload:i}=hu(t.access_token);if(i.exp&&(n=i.exp,o=n<=r),o){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $r;const{data:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Bt())throw new fl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qg("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!a||!l||!i||!d)throw new fl("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let p=h+f;c&&(p=parseInt(c));const m=p-h;m*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const b=p-f;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,h);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const y={provider_token:n,provider_refresh_token:o,access_token:a,expires_in:f,expires_at:p,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a)return this._returnResult({error:a});const i=(n=o.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(vC(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await zn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=CC(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,o;try{const{data:{session:a},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,o=null;this.flowType==="pkce"&&([n,o]=await no(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:o}=await this._useSession(async a=>{var i,l,c,d,h;const{data:f,error:p}=a;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(o)throw o;return Bt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Re(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:o,data:{session:a}}=r;if(o)throw o;const{options:i,provider:l,token:c,access_token:d,nonce:h}=t,f=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Lr}),{data:p,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new ro}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,o;const{data:a,error:i}=r;if(i)throw i;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await TC(async o=>(o>0&&await PC(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Lr})),(o,a)=>{const i=200*Math.pow(2,o);return a&&uu(a)&&Date.now()+i-n<ho})}catch(n){if(this._debug(r,"error",n),Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Bt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=await js(this.storage,this.storageKey);if(o&&this.userStorage){let i=await js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await fo(this.userStorage,this.storageKey+"-user",i)),o.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:fu()}else if(o&&!o.user&&!o.user){const i=await js(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await zn(this.storage,this.storageKey+"-user"),await fo(this.storage,this.storageKey,o)):o.user=fu()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&await this._removeSession();return}const a=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<du;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${du}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),uu(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ed;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new $r;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),Re(a)){const i={data:null,error:a};return uu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,n=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await fo(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const a=Jg(o);await fo(this.storage,this.storageKey,a)}else{const o=Jg(r);await fo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await zn(this.storage,this.storageKey),await zn(this.storage,this.storageKey+"-code-verifier"),await zn(this.storage,this.storageKey+"-user"),this.userStorage&&await zn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ho}ms, refresh threshold is ${Oh} ticks`),o<=Oh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ww)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const o=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,i]=await no(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);o.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;return a?this._returnResult({data:null,error:a}):await De(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,o;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await De(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?iE(t.webauthn.credential_response):lE(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const i=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:oE(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:aE(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=hu(n.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await De(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new $r})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new $r});const i=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new $r});const i=await De(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const o=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+gC>o)return n;const{data:a,error:i}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});n=m.session.access_token}const{header:o,payload:a,signature:i,raw:{header:l,payload:c}}=hu(n);r!=null&&r.allowExpired||LC(a.exp);const d=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:o,signature:i},error:null}}const h=UC(o.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,i,SC(`${l}.${c}`)))throw new $h("Invalid JWT signature");return{data:{claims:a,header:o,signature:i},error:null}}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}}fi.nextInstanceID={};const xE=fi;class vE extends xE{constructor(t){super(t)}}class yE{constructor(t,r,n){var o,a,i;this.supabaseUrl=t,this.supabaseKey=r;const l=uC(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:nC,realtime:oC,auth:Object.assign(Object.assign({},sC),{storageKey:c}),global:rC},h=dC(n??{},d);this.storageKey=(o=h.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=lC(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new hk(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Zk(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ck(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:a,storageKey:i,flowType:l,lock:c,debug:d,throwOnError:h},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vE({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:a,flowType:l,lock:c,debug:d,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Rk(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vm=(e,t,r)=>new yE(e,t,r);function wE(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}wE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bE="https://vohvdarghgqskzqjclux.supabase.co",jE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",L=vm(bE,jE),mi=async()=>{const{data:{user:e}}=await L.auth.getUser();if(!e)return!1;const{data:t}=await L.from("admin_users").select("user_id").eq("user_id",e.id).single();return!!t},pu=Object.freeze(Object.defineProperty({__proto__:null,isAdmin:mi,supabase:L},Symbol.toStringTag,{value:"Module"})),Nw=u.createContext(void 0);function NE({children:e}){const[t,r]=u.useState(null),[n,o]=u.useState(null),[a,i]=u.useState(!0),[l,c]=u.useState(!1),[d,h]=u.useState(!1),f=t?!!t.email_confirmed_at:!1;u.useEffect(()=>{console.log(" Auth State:",{hasUser:!!t,userEmail:t==null?void 0:t.email,isEmailVerified:f,hasSession:!!n,loading:a,showVerifying:l,currentUrl:window.location.href,hash:window.location.hash})},[t,n,a,f,l]),u.useEffect(()=>{(async()=>{var x;console.log(" Initializing auth...");const g=window.location.hash;if(console.log(" URL hash:",g),g&&g.includes("access_token")){console.log(" Found access_token in URL");const v=new URLSearchParams(g.substring(1)),j=v.get("access_token"),N=v.get("type"),_=v.get("refresh_token");if(console.log(" Token params:",{hasAccessToken:!!j,type:N,hasRefreshToken:!!_}),j&&N==="signup")try{console.log(" Processing signup verification...");const{data:k,error:P}=await L.auth.getUser(j);P&&console.error(" getUser error:",P),!P&&k.user&&(console.log(" User verified:",k.user.email),c(!0),r(k.user),window.history.replaceState({},document.title,window.location.pathname))}catch(k){console.error(" Token verification error:",k)}else if(j){console.log(" Processing OAuth/password reset token...");try{const{data:k,error:P}=await L.auth.setSession({access_token:j,refresh_token:_||""});P?console.error(" setSession error:",P):console.log(" Session set successfully")}catch(k){console.error(" Session error:",k)}}}console.log(" Getting current session...");const{data:{session:w},error:y}=await L.auth.getSession();if(y&&console.error(" Session error:",y),console.log(" Session retrieved:",{hasSession:!!w,userEmail:(x=w==null?void 0:w.user)==null?void 0:x.email}),o(w),r((w==null?void 0:w.user)??null),w!=null&&w.user){console.log(" Checking admin status...");const v=await mi();console.log(" Admin status:",v),h(v)}i(!1),console.log(" Auth initialization complete")})();const{data:{subscription:b}}=L.auth.onAuthStateChange((g,w)=>{var y;console.log(" Auth state change event:",g,{hasSession:!!w,userEmail:(y=w==null?void 0:w.user)==null?void 0:y.email}),(async()=>{var v;(g==="SIGNED_IN"||g==="USER_UPDATED"||g==="TOKEN_REFRESHED")&&((v=w==null?void 0:w.user)!=null&&v.email_confirmed_at)&&(!(t!=null&&t.email_confirmed_at)||g==="SIGNED_IN")&&(console.log(" Email verified, showing verification screen"),c(!0)),o(w),r((w==null?void 0:w.user)??null),w!=null&&w.user?mi().then(j=>{console.log(" Admin check result:",j),h(j)}):h(!1)})()});return()=>{console.log(" Cleaning up auth subscription"),b.unsubscribe()}},[t==null?void 0:t.email_confirmed_at]);const p=async()=>{console.log(" Signing out..."),await L.auth.signOut(),r(null),o(null),console.log(" Sign out complete")};return s.jsx(Nw.Provider,{value:{user:t,session:n,loading:a,isEmailVerified:f,showVerifying:l,isAdmin:d,signOut:p},children:e})}function td(){const e=u.useContext(Nw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_w=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...SE,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:_w("lucide",o),...l},[...i.map(([d,h])=>u.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const r=u.forwardRef(({className:n,...o},a)=>u.createElement(kE,{ref:a,iconNode:t,className:_w(`lucide-${_E(e)}`,n),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ve("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=ve("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ve("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=ve("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=ve("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ve("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=ve("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=ve("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=ve("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=ve("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=ve("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ve("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=ve("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=ve("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ve("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=ve("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ve("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ve("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ve("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ve("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=ve("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ve("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ve("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=ve("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=ve("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ve("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function lx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Dn(...e){return t=>{let r=!1;const n=e.map(o=>{const a=lx(o,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let o=0;o<n.length;o++){const a=n[o];typeof a=="function"?a():lx(e[o],null)}}}}function $e(...e){return u.useCallback(Dn(...e),e)}var tR=Symbol.for("react.lazy"),bc=xf[" use ".trim().toString()];function rR(e){return typeof e=="object"&&e!==null&&"then"in e}function Mw(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===tR&&"_payload"in e&&rR(e._payload)}function Sm(e){const t=sR(e),r=u.forwardRef((n,o)=>{let{children:a,...i}=n;Mw(a)&&typeof bc=="function"&&(a=bc(a._payload));const l=u.Children.toArray(a),c=l.find(aR);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}var nR=Sm("Slot");function sR(e){const t=u.forwardRef((r,n)=>{let{children:o,...a}=r;if(Mw(o)&&typeof bc=="function"&&(o=bc(o._payload)),u.isValidElement(o)){const i=lR(o),l=iR(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oR=Symbol("radix.slottable");function aR(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oR}function iR(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function lR(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Dw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Dw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $w(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Dw(e))&&(n&&(n+=" "),n+=t);return n}const cx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,dx=$w,nd=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return dx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:a}=t,i=Object.keys(o).map(d=>{const h=r==null?void 0:r[d],f=a==null?void 0:a[d];if(h===null)return null;const p=cx(h)||cx(f);return o[d][p]}),l=r&&Object.entries(r).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...d,f,p]:d},[]);return dx(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},km="-",cR=e=>{const t=uR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(km);return l[0]===""&&l.length!==1&&l.shift(),Lw(l,t)||dR(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},Lw=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),o=n?Lw(e.slice(1),n):void 0;if(o)return o;if(t.validators.length===0)return;const a=e.join(km);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},ux=/^\[(.+)\]$/,dR=e=>{if(ux.test(e)){const t=ux.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},uR=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return fR(Object.entries(e.classGroups),r).forEach(([a,i])=>{Bh(i,n,a,t)}),n},Bh=(e,t,r,n)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?t:hx(t,o);a.classGroupId=r;return}if(typeof o=="function"){if(hR(o)){Bh(o(n),t,r,n);return}t.validators.push({validator:o,classGroupId:r});return}Object.entries(o).forEach(([a,i])=>{Bh(i,hx(t,a),r,n)})})},hx=(e,t)=>{let r=e;return t.split(km).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},hR=e=>e.isThemeGetter,fR=(e,t)=>t?e.map(([r,n])=>{const o=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[r,o]}):e,mR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const o=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return o(a,i),i},set(a,i){r.has(a)?r.set(a,i):o(a,i)}}},Uw="!",pR=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,o=t[0],a=t.length,i=l=>{const c=[];let d=0,h=0,f;for(let w=0;w<l.length;w++){let y=l[w];if(d===0){if(y===o&&(n||l.slice(w,w+a)===t)){c.push(l.slice(h,w)),h=w+a;continue}if(y==="/"){f=w;continue}}y==="["?d++:y==="]"&&d--}const p=c.length===0?l:l.substring(h),m=p.startsWith(Uw),b=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},gR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},xR=e=>({cache:mR(e.cacheSize),parseClassName:pR(e),...cR(e)}),vR=/\s+/,yR=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:o}=t,a=[],i=e.trim().split(vR);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=r(d);let b=!!m,g=n(b?p.substring(0,m):p);if(!g){if(!b){l=d+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=d+(l.length>0?" "+l:l);continue}b=!1}const w=gR(h).join(":"),y=f?w+Uw:w,x=y+g;if(a.includes(x))continue;a.push(x);const v=o(g,b);for(let j=0;j<v.length;++j){const N=v[j];a.push(y+N)}l=d+(l.length>0?" "+l:l)}return l};function wR(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Fw(t))&&(n&&(n+=" "),n+=r);return n}const Fw=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Fw(e[n]))&&(r&&(r+=" "),r+=t);return r};function bR(e,...t){let r,n,o,a=i;function i(c){const d=t.reduce((h,f)=>f(h),e());return r=xR(d),n=r.cache.get,o=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=yR(c,r);return o(c,h),h}return function(){return a(wR.apply(null,arguments))}}const tt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},zw=/^\[(?:([a-z-]+):)?(.+)\]$/i,jR=/^\d+\/\d+$/,NR=new Set(["px","full","screen"]),_R=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ER=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bn=e=>Do(e)||NR.has(e)||jR.test(e),Bn=e=>aa(e,"length",DR),Do=e=>!!e&&!Number.isNaN(Number(e)),vu=e=>aa(e,"number",Do),ba=e=>!!e&&Number.isInteger(Number(e)),RR=e=>e.endsWith("%")&&Do(e.slice(0,-1)),Ue=e=>zw.test(e),Vn=e=>_R.test(e),PR=new Set(["length","size","percentage"]),TR=e=>aa(e,PR,Bw),AR=e=>aa(e,"position",Bw),IR=new Set(["image","url"]),OR=e=>aa(e,IR,LR),MR=e=>aa(e,"",$R),ja=()=>!0,aa=(e,t,r)=>{const n=zw.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},DR=e=>SR.test(e)&&!kR.test(e),Bw=()=>!1,$R=e=>CR.test(e),LR=e=>ER.test(e),UR=()=>{const e=tt("colors"),t=tt("spacing"),r=tt("blur"),n=tt("brightness"),o=tt("borderColor"),a=tt("borderRadius"),i=tt("borderSpacing"),l=tt("borderWidth"),c=tt("contrast"),d=tt("grayscale"),h=tt("hueRotate"),f=tt("invert"),p=tt("gap"),m=tt("gradientColorStops"),b=tt("gradientColorStopPositions"),g=tt("inset"),w=tt("margin"),y=tt("opacity"),x=tt("padding"),v=tt("saturate"),j=tt("scale"),N=tt("sepia"),_=tt("skew"),k=tt("space"),P=tt("translate"),C=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ue,t],$=()=>[Ue,t],Q=()=>["",bn,Bn],H=()=>["auto",Do,Ue],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],S=()=>["","0",Ue],T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Do,Ue];return{cacheSize:500,separator:":",theme:{colors:[ja],spacing:[bn,Bn],blur:["none","",Vn,Ue],brightness:Z(),borderColor:[e],borderRadius:["none","","full",Vn,Ue],borderSpacing:$(),borderWidth:Q(),contrast:Z(),grayscale:S(),hueRotate:Z(),invert:S(),gap:$(),gradientColorStops:[e],gradientColorStopPositions:[RR,Bn],inset:M(),margin:M(),opacity:Z(),padding:$(),saturate:Z(),scale:Z(),sepia:S(),skew:Z(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[Vn]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),Ue]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ba,Ue]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:S()}],shrink:[{shrink:S()}],order:[{order:["first","last","none",ba,Ue]}],"grid-cols":[{"grid-cols":[ja]}],"col-start-end":[{col:["auto",{span:["full",ba,Ue]},Ue]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[ja]}],"row-start-end":[{row:["auto",{span:[ba,Ue]},Ue]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,t]}],"min-w":[{"min-w":[Ue,t,"min","max","fit"]}],"max-w":[{"max-w":[Ue,t,"none","full","min","max","fit","prose",{screen:[Vn]},Vn]}],h:[{h:[Ue,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Vn,Bn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vu]}],"font-family":[{font:[ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",Do,vu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bn,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bn,Bn]}],"underline-offset":[{"underline-offset":["auto",bn,Ue]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),AR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},OR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:q()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[bn,Ue]}],"outline-w":[{outline:[bn,Bn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[bn,Bn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Vn,MR]}],"shadow-color":[{shadow:[ja]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vn,Ue]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ba,Ue]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bn,Bn,vu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},FR=bR(UR);function Te(...e){return FR($w(e))}function Nr(e){if(!e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value}function zR(e){const t=typeof e=="string"?parseFloat(e):e;if(isNaN(t)||t===0)return"0";if(Number.isInteger(t))return t.toString();const r={"0.125":"1/8","0.25":"1/4","0.333":"1/3","0.3333":"1/3","0.375":"3/8","0.5":"1/2","0.625":"5/8","0.666":"2/3","0.6666":"2/3","0.75":"3/4","0.875":"7/8"},n=Math.abs(t),o=Math.floor(n),a=n-o;if(a===0)return t.toString();const i=a.toFixed(4),l=r[i];if(l)return o===0?t<0?`-${l}`:l:t<0?`-${o} ${l}`:`${o} ${l}`;let c=1,d=a;const h=1e-4;for(;Math.abs(d-Math.round(d))>h&&c<100;)c++,d=a*c;d=Math.round(d);const f=(m,b)=>b===0?m:f(b,m%b),p=f(d,c);return d/=p,c/=p,o===0?t<0?`-${d}/${c}`:`${d}/${c}`:t<0?`-${o} ${d}/${c}`:`${o} ${d}/${c}`}function fx(e){if(!e)return e;const t=e.match(/(\d+\.?\d*)/);if(t){const r=t[1];if(r.includes(".")){const n=zR(r);return e.replace(r,n)}}return e}const Cm=nd("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=u.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...o},a)=>{const i=n?nR:"button";return s.jsx(i,{className:Te(Cm({variant:t,size:r,className:e})),ref:a,...o})});te.displayName="Button";function BR({currentPage:e,onNavigate:t,children:r}){var v;const[n,o]=u.useState(e),[a,i]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState(0),[f,p]=u.useState(null),m=[{id:"discover-recipes",label:"Discover Recipes",icon:Bs},{id:"discover",label:"Social Feed",icon:Pa},{id:"my-recipes",label:"My Recipes",icon:nx},{id:"add-recipe",label:"Add Recipe",icon:hn},{id:"meal-planner",label:"Meal Planner",icon:Jo},{id:"grocery-list",label:"Grocery List",icon:Vs},{id:"cart",label:"Cart",icon:Xo},{id:"settings",label:"Settings",icon:ax}],b=["discover","upload","profile","messages","add-recipe"],g=j=>{o(j),t(j),i(!1),j==="messages"&&h(0)};u.useEffect(()=>{y(),w()},[]),u.useEffect(()=>{if(!f)return;const j=L.channel("direct-message-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},async N=>{const _=N.new;if(_.sender_id!==f&&!_.read){const{data:k}=await L.from("conversations").select("id").eq("id",_.conversation_id).or(`user1_id.eq.${f},user2_id.eq.${f}`).maybeSingle();k&&h(P=>P+1)}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"direct_messages"},N=>{const _=N.new,k=N.old;_.read&&!k.read&&_.sender_id!==f&&h(P=>Math.max(0,P-1))}).subscribe();return()=>{L.removeChannel(j)}},[f]);const w=async()=>{try{const{data:{user:j}}=await L.auth.getUser();if(!j)return;p(j.id),await x(j.id)}catch(j){console.error("Error initializing messaging:",j)}},y=async()=>{try{const{data:j}=await L.auth.getUser();if(!j.user)return;const{data:N}=await L.from("profiles").select("avatar_url").eq("id",j.user.id).maybeSingle();N!=null&&N.avatar_url&&c(N.avatar_url)}catch(j){console.error("Error loading avatar:",j)}},x=async j=>{try{const{data:N}=await L.from("conversations").select("id, user1_id, user2_id, last_message_at").or(`user1_id.eq.${j},user2_id.eq.${j}`).order("last_message_at",{ascending:!1});if(!N||N.length===0){h(0);return}let _=0;for(const k of N){const{count:P}=await L.from("direct_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",k.id).eq("read",!1).neq("sender_id",j);_+=P||0}h(_)}catch(N){console.error("Error loading unread count:",N)}};return s.jsxs("div",{className:"min-h-screen bg-white",children:[a&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>i(!1)}),s.jsx("aside",{className:`fixed left-0 top-0 z-40 h-screen w-60 sm:w-60 lg:w-56 transform bg-white shadow-2xl transition-transform duration-300 ease-in-out lg:translate-x-0 ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-gray-200 p-3 sm:p-4 lg:p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"absolute inset-0 rounded-xl ring-3 ring-orange-500 shadow-xl -z-10"}),s.jsx("div",{className:"relative flex h-9 w-9 sm:h-10 sm:w-10 lg:h-12 lg:w-12 items-center justify-center rounded-lg bg-white overflow-hidden shadow-lg",children:s.jsx("img",{src:"/Woodenspoon.png",alt:"Meal Scrape",className:"w-full h-full object-cover scale-110"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-sm sm:text-base lg:text-xl font-bold text-gray-900 truncate",children:"Meal Scrape"}),s.jsx("p",{className:"text-[8px] sm:text-[9px] lg:text-xs text-gray-500 truncate leading-tight",children:"Discover, Plan, Enjoy "})]})]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"lg:hidden h-8 w-8 flex-shrink-0",children:s.jsx(At,{className:"h-5 w-5"})})]}),s.jsx("nav",{className:"flex-1 space-y-0.5 sm:space-y-1 p-2 sm:p-3 lg:p-4 overflow-y-auto",children:m.map(j=>{const N=j.icon,_=n===j.id;return s.jsxs("button",{onClick:()=>g(j.id),className:`flex w-full items-center gap-2 sm:gap-3 rounded-lg px-2.5 py-2 sm:px-3 sm:py-2.5 lg:px-4 lg:py-3 text-left transition-all touch-manipulation ${_?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg scale-[1.02]":"text-gray-700 hover:bg-gray-100 active:bg-gray-200"}`,children:[s.jsx(N,{className:`h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0 ${_?"opacity-100":"opacity-70"}`}),s.jsx("span",{className:"font-medium text-xs sm:text-sm lg:text-base truncate",children:j.label}),j.id==="messages"&&d>0&&s.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] sm:text-xs rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center font-bold flex-shrink-0",children:d>9?"9+":d})]},j.id)})}),s.jsx("div",{className:"border-t border-gray-200 p-2 sm:p-3 lg:p-4 flex-shrink-0",children:s.jsxs("div",{className:"rounded-lg bg-gradient-to-br from-amber-50 to-orange-50 p-2.5 sm:p-3 lg:p-4 border border-orange-200",children:[s.jsx("p",{className:"text-[10px] sm:text-xs lg:text-sm font-semibold text-gray-900 leading-tight",children:"Discover, Save, Plan"}),s.jsx("p",{className:"mt-0.5 sm:mt-1 text-[9px] sm:text-[10px] lg:text-xs text-gray-600 leading-tight",children:"All in One Place"})]})})]})}),s.jsxs("div",{className:"lg:ml-56",children:[s.jsx("header",{className:"sticky top-0 z-30 border-b border-gray-200 bg-white/95 backdrop-blur-sm shadow-sm",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4 md:px-6",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>i(!a),className:"lg:hidden h-9 w-9 sm:h-10 sm:w-10",children:s.jsx(wm,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),!b.includes(n)&&s.jsxs("div",{className:"flex-1 flex items-center justify-center lg:justify-start gap-2",children:[n==="discover-recipes"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(Bs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="my-recipes"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(nx,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="meal-planner"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(Jo,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="grocery-list"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(Vs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="cart"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(Xo,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),n==="settings"&&s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:s.jsx(ax,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),s.jsx("span",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-900 truncate",children:((v=m.find(j=>j.id===n))==null?void 0:v.label)||"Meal Scrape"})]}),b.includes(n)&&s.jsxs("div",{className:"flex-1 flex items-center justify-center lg:justify-start gap-2",children:[s.jsx("div",{className:"flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:n==="add-recipe"?s.jsx(hn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):n==="upload"?s.jsx(Ms,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"}):s.jsx(Pa,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),s.jsx("span",{className:"text-base sm:text-lg font-semibold text-gray-900",children:n==="add-recipe"?"Add Recipe":n==="upload"?"New Post":"Social Feed"})]}),s.jsx("div",{className:"w-9 sm:w-10 lg:hidden"})]})}),s.jsx("div",{className:"hidden lg:block fixed top-3 right-3 z-40",children:s.jsx("div",{className:"flex items-center gap-1.5 bg-white/90 backdrop-blur-lg rounded-full shadow-lg border border-gray-200/50 px-2 py-1.5",children:m.filter(j=>!["discover","settings","messages"].includes(j.id)).map(j=>{const N=j.icon,_=n===j.id;return s.jsx("button",{onClick:()=>g(j.id),className:`h-8 w-8 rounded-full transition-all flex items-center justify-center ${_?"bg-orange-500 text-white shadow-md scale-110":"text-gray-600 hover:bg-gray-100 hover:scale-105"}`,title:j.label,children:s.jsx(N,{className:"h-4 w-4"})},j.id)})})}),s.jsx("main",{className:b.includes(n)?"pt-16":"pt-16 lg:pt-0",children:r}),n!=="add-recipe"&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 lg:hidden bg-white border-t border-gray-200 shadow-lg safe-area-bottom",children:s.jsx("div",{className:"max-w-lg mx-auto px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-around",children:[s.jsxs("button",{onClick:()=>g("messages"),className:`relative flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="messages"?"text-cyan-500 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[s.jsxs("div",{className:"relative",children:[s.jsx(bm,{className:"w-6 h-6",strokeWidth:n==="messages"?2.5:2}),d>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center font-bold animate-pulse",children:d>9?"9+":d})]}),s.jsx("span",{className:"text-[10px] font-medium",children:"Messages"})]}),s.jsxs("button",{onClick:()=>g("discover"),className:`relative flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="discover"?"text-orange-500 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[s.jsx(Pa,{className:"w-6 h-6",strokeWidth:n==="discover"?2.5:2}),s.jsx("span",{className:"text-[10px] font-medium",children:"Feed"})]}),s.jsx("button",{onClick:()=>g("upload"),className:"relative -mt-6 flex items-center justify-center bg-gradient-to-br from-orange-500 to-red-600 rounded-full shadow-xl hover:shadow-2xl transition-all active:scale-95 touch-manipulation",style:{width:"56px",height:"56px"},children:s.jsx(Ms,{className:"w-7 h-7 text-white",strokeWidth:2.5})}),s.jsxs("button",{onClick:()=>g("profile"),className:`flex flex-col items-center gap-1 transition-all touch-manipulation ${n==="profile"?"text-orange-600 scale-110":"text-gray-600"}`,style:{minWidth:"50px",minHeight:"48px"},children:[s.jsx("div",{className:"relative",children:l?s.jsx("img",{src:l,alt:"Profile",className:`w-7 h-7 rounded-full object-cover ${n==="profile"?"ring-2 ring-orange-600 ring-offset-2":"ring-1 ring-gray-300"}`}):s.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center ${n==="profile"?"bg-orange-100 ring-2 ring-orange-600":"bg-gray-100"}`,children:s.jsx(Iw,{className:"w-4 h-4",strokeWidth:n==="profile"?2.5:2})})}),s.jsx("span",{className:"text-[10px] font-medium",children:"Profile"})]})]})})}),!b.includes(n)&&s.jsx("div",{className:"hidden lg:block fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:s.jsx("button",{onClick:()=>g("discover"),className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white w-14 h-14 rounded-full shadow-2xl hover:shadow-3xl transition-all hover:scale-110 flex items-center justify-center",title:"Social Feed",children:s.jsx(Pa,{className:"w-7 h-7"})})})]}),s.jsx("button",{onClick:()=>c(j=>j?null:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop"),className:"fixed top-20 right-4 bg-slate-800 text-white text-xs px-3 py-2 rounded-full shadow-lg hover:bg-slate-700 z-50 hidden lg:block",children:"Toggle Avatar"})]})}const VR=nd("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nt({className:e,variant:t,...r}){return s.jsx("div",{className:Te(VR({variant:t}),e),...r})}const Xe=u.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Te("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Xe.displayName="Card";const Nt=u.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));Nt.displayName="CardHeader";const _t=u.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Te("font-semibold leading-none tracking-tight",e),...t}));_t.displayName="CardTitle";const Rt=u.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Rt.displayName="CardDescription";const Ze=u.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Te("p-6 pt-0",e),...t}));Ze.displayName="CardContent";const Vw=u.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Te("flex items-center p-6 pt-0",e),...t}));Vw.displayName="CardFooter";function ye(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function WR(e,t){const r=u.createContext(t),n=a=>{const{children:i,...l}=a,c=u.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function o(a){const i=u.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,o]}function ir(e,t=[]){let r=[];function n(a,i){const l=u.createContext(i),c=r.length;r=[...r,i];const d=f=>{var y;const{scope:p,children:m,...b}=f,g=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,w=u.useMemo(()=>b,Object.values(b));return s.jsx(g.Provider,{value:w,children:m})};d.displayName=a+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,b=u.useContext(m);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,h]}const o=()=>{const a=r.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return o.scopeName=e,[n,qR(o,...t)]}function qR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var It=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},HR=xf[" useId ".trim().toString()]||(()=>{}),KR=0;function Kr(e){const[t,r]=u.useState(HR());return It(()=>{r(n=>n??String(KR++))},[e]),t?`radix-${t}`:""}var GR=xf[" useInsertionEffect ".trim().toString()]||It;function Qr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[o,a,i]=YR({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:o;{const h=u.useRef(e!==void 0);u.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=u.useCallback(h=>{var f;if(l){const p=JR(h)?h(e):h;p!==e&&((f=i.current)==null||f.call(i,p))}else a(h)},[l,e,a,i]);return[c,d]}function YR({defaultProp:e,onChange:t}){const[r,n]=u.useState(e),o=u.useRef(r),a=u.useRef(t);return GR(()=>{a.current=t},[t]),u.useEffect(()=>{var i;o.current!==r&&((i=a.current)==null||i.call(a,r),o.current=r)},[r,o]),[r,n,a]}function JR(e){return typeof e=="function"}function XR(e){const t=QR(e),r=u.forwardRef((n,o)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(eP);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function QR(e){const t=u.forwardRef((r,n)=>{const{children:o,...a}=r;if(u.isValidElement(o)){const i=rP(o),l=tP(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ZR=Symbol("radix.slottable");function eP(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ZR}function tP(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function rP(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var nP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ie=nP.reduce((e,t)=>{const r=XR(`Primitive.${t}`),n=u.forwardRef((o,a)=>{const{asChild:i,...l}=o,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Ww(e,t){e&&na.flushSync(()=>e.dispatchEvent(t))}function Mt(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function sP(e,t=globalThis==null?void 0:globalThis.document){const r=Mt(e);u.useEffect(()=>{const n=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var oP="DismissableLayer",Vh="dismissableLayer.update",aP="dismissableLayer.pointerDownOutside",iP="dismissableLayer.focusOutside",mx,qw=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sd=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(qw),[h,f]=u.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),b=$e(t,k=>f(k)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(w),x=h?g.indexOf(h):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,j=x>=y,N=dP(k=>{const P=k.target,C=[...d.branches].some(R=>R.contains(P));!j||C||(o==null||o(k),i==null||i(k),k.defaultPrevented||l==null||l())},p),_=uP(k=>{const P=k.target;[...d.branches].some(R=>R.contains(P))||(a==null||a(k),i==null||i(k),k.defaultPrevented||l==null||l())},p);return sP(k=>{x===d.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},p),u.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(mx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),px(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=mx)}},[h,p,r,d]),u.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),px())},[h,d]),u.useEffect(()=>{const k=()=>m({});return document.addEventListener(Vh,k),()=>document.removeEventListener(Vh,k)},[]),s.jsx(Ie.div,{...c,ref:b,style:{pointerEvents:v?j?"auto":"none":void 0,...e.style},onFocusCapture:ye(e.onFocusCapture,_.onFocusCapture),onBlurCapture:ye(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ye(e.onPointerDownCapture,N.onPointerDownCapture)})});sd.displayName=oP;var lP="DismissableLayerBranch",cP=u.forwardRef((e,t)=>{const r=u.useContext(qw),n=u.useRef(null),o=$e(t,n);return u.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(Ie.div,{...e,ref:o})});cP.displayName=lP;function dP(e,t=globalThis==null?void 0:globalThis.document){const r=Mt(e),n=u.useRef(!1),o=u.useRef(()=>{});return u.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){Hw(aP,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function uP(e,t=globalThis==null?void 0:globalThis.document){const r=Mt(e),n=u.useRef(!1);return u.useEffect(()=>{const o=a=>{a.target&&!n.current&&Hw(iP,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function px(){const e=new CustomEvent(Vh);document.dispatchEvent(e)}function Hw(e,t,r,{discrete:n}){const o=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(e,t,{once:!0}),n?Ww(o,a):o.dispatchEvent(a)}var yu="focusScope.autoFocusOnMount",wu="focusScope.autoFocusOnUnmount",gx={bubbles:!1,cancelable:!0},hP="FocusScope",od=u.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[l,c]=u.useState(null),d=Mt(o),h=Mt(a),f=u.useRef(null),p=$e(t,g=>c(g)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let g=function(v){if(m.paused||!l)return;const j=v.target;l.contains(j)?f.current=j:qn(f.current,{select:!0})},w=function(v){if(m.paused||!l)return;const j=v.relatedTarget;j!==null&&(l.contains(j)||qn(f.current,{select:!0}))},y=function(v){if(document.activeElement===document.body)for(const N of v)N.removedNodes.length>0&&qn(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(y);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[n,l,m.paused]),u.useEffect(()=>{if(l){vx.add(m);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(yu,gx);l.addEventListener(yu,d),l.dispatchEvent(y),y.defaultPrevented||(fP(vP(Kw(l)),{select:!0}),document.activeElement===g&&qn(l))}return()=>{l.removeEventListener(yu,d),setTimeout(()=>{const y=new CustomEvent(wu,gx);l.addEventListener(wu,h),l.dispatchEvent(y),y.defaultPrevented||qn(g??document.body,{select:!0}),l.removeEventListener(wu,h),vx.remove(m)},0)}}},[l,d,h,m]);const b=u.useCallback(g=>{if(!r&&!n||m.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(w&&y){const x=g.currentTarget,[v,j]=mP(x);v&&j?!g.shiftKey&&y===j?(g.preventDefault(),r&&qn(v,{select:!0})):g.shiftKey&&y===v&&(g.preventDefault(),r&&qn(j,{select:!0})):y===x&&g.preventDefault()}},[r,n,m.paused]);return s.jsx(Ie.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});od.displayName=hP;function fP(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(qn(n,{select:t}),document.activeElement!==r)return}function mP(e){const t=Kw(e),r=xx(t,e),n=xx(t.reverse(),e);return[r,n]}function Kw(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xx(e,t){for(const r of e)if(!pP(r,{upTo:t}))return r}function pP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function gP(e){return e instanceof HTMLInputElement&&"select"in e}function qn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&gP(e)&&t&&e.select()}}var vx=xP();function xP(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=yx(e,t),e.unshift(t)},remove(t){var r;e=yx(e,t),(r=e[0])==null||r.resume()}}}function yx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function vP(e){return e.filter(t=>t.tagName!=="A")}var yP="Portal",ad=u.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[o,a]=u.useState(!1);It(()=>a(!0),[]);const i=r||o&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?vy.createPortal(s.jsx(Ie.div,{...n,ref:t}),i):null});ad.displayName=yP;function wP(e,t){return u.useReducer((r,n)=>t[r][n]??r,e)}var lr=e=>{const{present:t,children:r}=e,n=bP(t),o=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),a=$e(n.ref,jP(o));return typeof r=="function"||n.isPresent?u.cloneElement(o,{ref:a}):null};lr.displayName="Presence";function bP(e){const[t,r]=u.useState(),n=u.useRef(null),o=u.useRef(e),a=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=wP(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=ml(n.current);a.current=l==="mounted"?d:"none"},[l]),It(()=>{const d=n.current,h=o.current;if(h!==e){const p=a.current,m=ml(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),It(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,f=m=>{const g=ml(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&g&&(c("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=m=>{m.target===t&&(a.current=ml(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function ml(e){return(e==null?void 0:e.animationName)||"none"}function jP(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var bu=0;function Em(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??wx()),document.body.insertAdjacentElement("beforeend",e[1]??wx()),bu++,()=>{bu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bu--}},[])}function wx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $l="right-scroll-bar-position",Ll="width-before-scroll-bar",NP="with-scroll-bars-hidden",_P="--removed-body-scroll-bar-size";function ju(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function SP(e,t){var r=u.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}})[0];return r.callback=t,r.facade}var kP=typeof window<"u"?u.useLayoutEffect:u.useEffect,bx=new WeakMap;function CP(e,t){var r=SP(null,function(n){return e.forEach(function(o){return ju(o,n)})});return kP(function(){var n=bx.get(r);if(n){var o=new Set(n),a=new Set(e),i=r.current;o.forEach(function(l){a.has(l)||ju(l,null)}),a.forEach(function(l){o.has(l)||ju(l,i)})}bx.set(r,e)},[e]),r}function EP(e){return e}function RP(e,t){t===void 0&&(t=EP);var r=[],n=!1,o={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(n=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var h=i;i=[],h.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(h){i.push(h),d()},filter:function(h){return i=i.filter(h),r}}}};return o}function PP(e){e===void 0&&(e={});var t=RP(null);return t.options=kr({async:!0,ssr:!1},e),t}var Gw=function(e){var t=e.sideCar,r=xs(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return u.createElement(n,kr({},r))};Gw.isSideCarExport=!0;function TP(e,t){return e.useMedium(t),Gw}var Yw=PP(),Nu=function(){},id=u.forwardRef(function(e,t){var r=u.useRef(null),n=u.useState({onScrollCapture:Nu,onWheelCapture:Nu,onTouchMoveCapture:Nu}),o=n[0],a=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,f=e.shards,p=e.sideCar,m=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,v=e.gapMode,j=xs(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=p,_=CP([r,t]),k=kr(kr({},j),o);return u.createElement(u.Fragment,null,h&&u.createElement(N,{sideCar:Yw,removeScrollBar:d,shards:f,noRelative:m,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:r,gapMode:v}),i?u.cloneElement(u.Children.only(l),kr(kr({},k),{ref:_})):u.createElement(x,kr({},k,{className:c,ref:_}),l))});id.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};id.classNames={fullWidth:Ll,zeroRight:$l};var AP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function IP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=AP();return t&&e.setAttribute("nonce",t),e}function OP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function MP(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var DP=function(){var e=0,t=null;return{add:function(r){e==0&&(t=IP())&&(OP(t,r),MP(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$P=function(){var e=DP();return function(t,r){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Jw=function(){var e=$P(),t=function(r){var n=r.styles,o=r.dynamic;return e(n,o),null};return t},LP={left:0,top:0,right:0,gap:0},_u=function(e){return parseInt(e||"",10)||0},UP=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[_u(r),_u(n),_u(o)]},FP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return LP;var t=UP(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},zP=Jw(),$o="data-scroll-locked",BP=function(e,t,r,n){var o=e.left,a=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(NP,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($l,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ll,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat($l," .").concat($l,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ll," .").concat(Ll,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat($o,`] {
    `).concat(_P,": ").concat(l,`px;
  }
`)},jx=function(){var e=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(e)?e:0},VP=function(){u.useEffect(function(){return document.body.setAttribute($o,(jx()+1).toString()),function(){var e=jx()-1;e<=0?document.body.removeAttribute($o):document.body.setAttribute($o,e.toString())}},[])},WP=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,o=n===void 0?"margin":n;VP();var a=u.useMemo(function(){return FP(o)},[o]);return u.createElement(zP,{styles:BP(a,!t,o,r?"":"!important")})},Wh=!1;if(typeof window<"u")try{var pl=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Wh=!1}var io=Wh?{passive:!1}:!1,qP=function(e){return e.tagName==="TEXTAREA"},Xw=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!qP(e)&&r[t]==="visible")},HP=function(e){return Xw(e,"overflowY")},KP=function(e){return Xw(e,"overflowX")},Nx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var o=Qw(e,n);if(o){var a=Zw(e,n),i=a[1],l=a[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},GP=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},YP=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Qw=function(e,t){return e==="v"?HP(t):KP(t)},Zw=function(e,t){return e==="v"?GP(t):YP(t)},JP=function(e,t){return e==="h"&&t==="rtl"?-1:1},XP=function(e,t,r,n,o){var a=JP(e,window.getComputedStyle(t).direction),i=a*n,l=r.target,c=t.contains(l),d=!1,h=i>0,f=0,p=0;do{if(!l)break;var m=Zw(e,l),b=m[0],g=m[1],w=m[2],y=g-w-a*b;(b||y)&&Qw(e,l)&&(f+=y,p+=b);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},gl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_x=function(e){return[e.deltaX,e.deltaY]},Sx=function(e){return e&&"current"in e?e.current:e},QP=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ZP=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},e5=0,lo=[];function t5(e){var t=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),o=u.useState(e5++)[0],a=u.useState(Jw)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var g=cm([e.lockRef.current],(e.shards||[]).map(Sx),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=gl(g),x=r.current,v="deltaX"in g?g.deltaX:x[0]-y[0],j="deltaY"in g?g.deltaY:x[1]-y[1],N,_=g.target,k=Math.abs(v)>Math.abs(j)?"h":"v";if("touches"in g&&k==="h"&&_.type==="range")return!1;var P=Nx(k,_);if(!P)return!0;if(P?N=k:(N=k==="v"?"h":"v",P=Nx(k,_)),!P)return!1;if(!n.current&&"changedTouches"in g&&(v||j)&&(n.current=N),!N)return!0;var C=n.current||N;return XP(C,w,g,C==="h"?v:j)},[]),c=u.useCallback(function(g){var w=g;if(!(!lo.length||lo[lo.length-1]!==a)){var y="deltaY"in w?_x(w):gl(w),x=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&QP(N.delta,y)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var v=(i.current.shards||[]).map(Sx).filter(Boolean).filter(function(N){return N.contains(w.target)}),j=v.length>0?l(w,v[0]):!i.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=u.useCallback(function(g,w,y,x){var v={name:g,delta:w,target:y,should:x,shadowParent:r5(y)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(j){return j!==v})},1)},[]),h=u.useCallback(function(g){r.current=gl(g),n.current=void 0},[]),f=u.useCallback(function(g){d(g.type,_x(g),g.target,l(g,e.lockRef.current))},[]),p=u.useCallback(function(g){d(g.type,gl(g),g.target,l(g,e.lockRef.current))},[]);u.useEffect(function(){return lo.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,io),document.addEventListener("touchmove",c,io),document.addEventListener("touchstart",h,io),function(){lo=lo.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,io),document.removeEventListener("touchmove",c,io),document.removeEventListener("touchstart",h,io)}},[]);var m=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(a,{styles:ZP(o)}):null,m?u.createElement(WP,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function r5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const n5=TP(Yw,t5);var ld=u.forwardRef(function(e,t){return u.createElement(id,kr({},e,{ref:t,sideCar:n5}))});ld.classNames=id.classNames;var s5=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},co=new WeakMap,xl=new WeakMap,vl={},Su=0,eb=function(e){return e&&(e.host||eb(e.parentNode))},o5=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=eb(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},a5=function(e,t,r,n){var o=o5(t,Array.isArray(e)?e:[e]);vl[r]||(vl[r]=new WeakMap);var a=vl[r],i=[],l=new Set,c=new Set(o),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};o.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var m=p.getAttribute(n),b=m!==null&&m!=="false",g=(co.get(p)||0)+1,w=(a.get(p)||0)+1;co.set(p,g),a.set(p,w),i.push(p),g===1&&b&&xl.set(p,!0),w===1&&p.setAttribute(r,"true"),b||p.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return h(t),l.clear(),Su++,function(){i.forEach(function(f){var p=co.get(f)-1,m=a.get(f)-1;co.set(f,p),a.set(f,m),p||(xl.has(f)||f.removeAttribute(n),xl.delete(f)),m||f.removeAttribute(r)}),Su--,Su||(co=new WeakMap,co=new WeakMap,xl=new WeakMap,vl={})}},Rm=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),o=s5(e);return o?(n.push.apply(n,Array.from(o.querySelectorAll("[aria-live], script"))),a5(n,o,r,"aria-hidden")):function(){return null}};function i5(e){const t=l5(e),r=u.forwardRef((n,o)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(d5);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function l5(e){const t=u.forwardRef((r,n)=>{const{children:o,...a}=r;if(u.isValidElement(o)){const i=h5(o),l=u5(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var c5=Symbol("radix.slottable");function d5(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===c5}function u5(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function h5(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var cd="Dialog",[tb,rb]=ir(cd),[f5,tn]=tb(cd),nb=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,h]=Qr({prop:n,defaultProp:o??!1,onChange:a,caller:cd});return s.jsx(f5,{scope:t,triggerRef:l,contentRef:c,contentId:Kr(),titleId:Kr(),descriptionId:Kr(),open:d,onOpenChange:h,onOpenToggle:u.useCallback(()=>h(f=>!f),[h]),modal:i,children:r})};nb.displayName=cd;var sb="DialogTrigger",ob=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=tn(sb,r),a=$e(t,o.triggerRef);return s.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Am(o.open),...n,ref:a,onClick:ye(e.onClick,o.onOpenToggle)})});ob.displayName=sb;var Pm="DialogPortal",[m5,ab]=tb(Pm,{forceMount:void 0}),ib=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:o}=e,a=tn(Pm,t);return s.jsx(m5,{scope:t,forceMount:r,children:u.Children.map(n,i=>s.jsx(lr,{present:r||a.open,children:s.jsx(ad,{asChild:!0,container:o,children:i})}))})};ib.displayName=Pm;var jc="DialogOverlay",lb=u.forwardRef((e,t)=>{const r=ab(jc,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=tn(jc,e.__scopeDialog);return a.modal?s.jsx(lr,{present:n||a.open,children:s.jsx(g5,{...o,ref:t})}):null});lb.displayName=jc;var p5=i5("DialogOverlay.RemoveScroll"),g5=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=tn(jc,r);return s.jsx(ld,{as:p5,allowPinchZoom:!0,shards:[o.contentRef],children:s.jsx(Ie.div,{"data-state":Am(o.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ws="DialogContent",cb=u.forwardRef((e,t)=>{const r=ab(Ws,e.__scopeDialog),{forceMount:n=r.forceMount,...o}=e,a=tn(Ws,e.__scopeDialog);return s.jsx(lr,{present:n||a.open,children:a.modal?s.jsx(x5,{...o,ref:t}):s.jsx(v5,{...o,ref:t})})});cb.displayName=Ws;var x5=u.forwardRef((e,t)=>{const r=tn(Ws,e.__scopeDialog),n=u.useRef(null),o=$e(t,r.contentRef,n);return u.useEffect(()=>{const a=n.current;if(a)return Rm(a)},[]),s.jsx(db,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,a=>a.preventDefault())})}),v5=u.forwardRef((e,t)=>{const r=tn(Ws,e.__scopeDialog),n=u.useRef(!1),o=u.useRef(!1);return s.jsx(db,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),db=u.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,l=tn(Ws,r),c=u.useRef(null),d=$e(t,c);return Em(),s.jsxs(s.Fragment,{children:[s.jsx(od,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(sd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Am(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(w5,{titleId:l.titleId}),s.jsx(j5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Tm="DialogTitle",ub=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=tn(Tm,r);return s.jsx(Ie.h2,{id:o.titleId,...n,ref:t})});ub.displayName=Tm;var hb="DialogDescription",fb=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=tn(hb,r);return s.jsx(Ie.p,{id:o.descriptionId,...n,ref:t})});fb.displayName=hb;var mb="DialogClose",pb=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,o=tn(mb,r);return s.jsx(Ie.button,{type:"button",...n,ref:t,onClick:ye(e.onClick,()=>o.onOpenChange(!1))})});pb.displayName=mb;function Am(e){return e?"open":"closed"}var gb="DialogTitleWarning",[y5,xb]=WR(gb,{contentName:Ws,titleName:Tm,docsSlug:"dialog"}),w5=({titleId:e})=>{const t=xb(gb),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},b5="DialogDescriptionWarning",j5=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xb(b5).contentName}}.`;return u.useEffect(()=>{var a;const o=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},vb=nb,N5=ob,yb=ib,Im=lb,Om=cb,Mm=ub,Dm=fb,$m=pb;function Qs(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var _5=["color"],S5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,_5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),k5=["color"],Lm=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,k5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),C5=["color"],wb=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,C5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),E5=["color"],R5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,E5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),P5=["color"],T5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,P5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),A5=["color"],I5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,A5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),O5=["color"],M5=u.forwardRef(function(e,t){var r=e.color,n=r===void 0?"currentColor":r,o=Qs(e,O5);return u.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),u.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});const Ct=vb,D5=yb,bb=u.forwardRef(({className:e,...t},r)=>s.jsx(Im,{ref:r,className:Te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));bb.displayName=Im.displayName;const bt=u.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(D5,{children:[s.jsx(bb,{}),s.jsxs(Om,{ref:n,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs($m,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(I5,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bt.displayName=Om.displayName;const Wt=({className:e,...t})=>s.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Wt.displayName="DialogHeader";const ds=({className:e,...t})=>s.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ds.displayName="DialogFooter";const $t=u.forwardRef(({className:e,...t},r)=>s.jsx(Mm,{ref:r,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));$t.displayName=Mm.displayName;const Gr=u.forwardRef(({className:e,...t},r)=>s.jsx(Dm,{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Gr.displayName=Dm.displayName;function dd(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ud(e){const[t,r]=u.useState(void 0);return It(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var hd="Checkbox",[$5]=ir(hd),[L5,Um]=$5(hd);function U5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:o,disabled:a,form:i,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:f}=e,[p,m]=Qr({prop:r,defaultProp:o??!1,onChange:c,caller:hd}),[b,g]=u.useState(null),[w,y]=u.useState(null),x=u.useRef(!1),v=b?!!i||!!b.closest("form"):!0,j={checked:p,disabled:a,setChecked:m,control:b,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:is(o)?!1:o,isFormControl:v,bubbleInput:w,setBubbleInput:y};return s.jsx(L5,{scope:t,...j,children:F5(f)?f(j):n})}var jb="CheckboxTrigger",Nb=u.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},o)=>{const{control:a,value:i,disabled:l,checked:c,required:d,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:b}=Um(jb,e),g=$e(o,h),w=u.useRef(c);return u.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const x=()=>f(w.current);return y.addEventListener("reset",x),()=>y.removeEventListener("reset",x)}},[a,f]),s.jsx(Ie.button,{type:"button",role:"checkbox","aria-checked":is(c)?"mixed":c,"aria-required":d,"data-state":Eb(c),"data-disabled":l?"":void 0,disabled:l,value:i,...n,ref:g,onKeyDown:ye(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:ye(r,y=>{f(x=>is(x)?!0:!x),b&&m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})});Nb.displayName=jb;var Fm=u.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:o,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:d,form:h,...f}=e;return s.jsx(U5,{__scopeCheckbox:r,checked:o,defaultChecked:a,disabled:l,required:i,onCheckedChange:d,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(Nb,{...f,ref:t,__scopeCheckbox:r}),p&&s.jsx(Cb,{__scopeCheckbox:r})]})})});Fm.displayName=hd;var _b="CheckboxIndicator",Sb=u.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...o}=e,a=Um(_b,r);return s.jsx(lr,{present:n||is(a.checked)||a.checked===!0,children:s.jsx(Ie.span,{"data-state":Eb(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});Sb.displayName=_b;var kb="CheckboxBubbleInput",Cb=u.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:i,required:l,disabled:c,name:d,value:h,form:f,bubbleInput:p,setBubbleInput:m}=Um(kb,e),b=$e(r,m),g=dd(a),w=ud(n);u.useEffect(()=>{const x=p;if(!x)return;const v=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(v,"checked").set,_=!o.current;if(g!==a&&N){const k=new Event("click",{bubbles:_});x.indeterminate=is(a),N.call(x,is(a)?!1:a),x.dispatchEvent(k)}},[p,g,a,o]);const y=u.useRef(is(a)?!1:a);return s.jsx(Ie.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:l,disabled:c,name:d,value:h,form:f,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Cb.displayName=kb;function F5(e){return typeof e=="function"}function is(e){return e==="indeterminate"}function Eb(e){return is(e)?"indeterminate":e?"checked":"unchecked"}const pi=u.forwardRef(({className:e,...t},r)=>s.jsx(Fm,{ref:r,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Sb,{className:Te("flex items-center justify-center text-current"),children:s.jsx(Lm,{className:"h-4 w-4"})})}));pi.displayName=Fm.displayName;var z5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B5=z5.reduce((e,t)=>{const r=Sm(`Primitive.${t}`),n=u.forwardRef((o,a)=>{const{asChild:i,...l}=o,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),V5="Separator",kx="horizontal",W5=["horizontal","vertical"],Rb=u.forwardRef((e,t)=>{const{decorative:r,orientation:n=kx,...o}=e,a=q5(n)?n:kx,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(B5.div,{"data-orientation":a,...l,...o,ref:t})});Rb.displayName=V5;function q5(e){return W5.includes(e)}var Pb=Rb;const Ul=u.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},o)=>s.jsx(Pb,{ref:o,decorative:r,orientation:t,className:Te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Ul.displayName=Pb.displayName;var H5=e=>{switch(e){case"success":return Y5;case"info":return X5;case"warning":return J5;case"error":return Q5;default:return null}},K5=Array(12).fill(0),G5=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},K5.map((r,n)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Y5=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),J5=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),X5=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Q5=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Z5=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),e4=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},qh=1,t4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:qh++,a=this.toasts.find(l=>l.id===o),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:r}),{...l,...e,id:o,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),o=r!==void 0,a,i=n.then(async c=>{if(a=["resolve",c],se.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(n4(c)&&!c.ok){o=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){o=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){o=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;o&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||qh++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},er=new t4,r4=(e,t)=>{let r=(t==null?void 0:t.id)||qh++;return er.addToast({title:e,...t,id:r}),r},n4=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",s4=r4,o4=()=>er.toasts,a4=()=>er.getActiveToasts(),D=Object.assign(s4,{success:er.success,info:er.info,warning:er.warning,error:er.error,custom:er.custom,message:er.message,promise:er.promise,dismiss:er.dismiss,loading:er.loading},{getHistory:o4,getToasts:a4});function i4(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}i4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function yl(e){return e.label!==void 0}var l4=3,c4="32px",d4="16px",Cx=4e3,u4=356,h4=14,f4=20,m4=200;function Dr(...e){return e.filter(Boolean).join(" ")}function p4(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var g4=e=>{var t,r,n,o,a,i,l,c,d,h,f;let{invert:p,toast:m,unstyled:b,interacting:g,setHeights:w,visibleToasts:y,heights:x,index:v,toasts:j,expanded:N,removeToast:_,defaultRichColors:k,closeButton:P,style:C,cancelButtonStyle:R,actionButtonStyle:M,className:$="",descriptionClassName:Q="",duration:H,position:oe,gap:q,loadingIcon:G,expandByDefault:I,classNames:S,icons:T,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:F}=e,[W,A]=se.useState(null),[X,J]=se.useState(null),[V,ee]=se.useState(!1),[pe,de]=se.useState(!1),[fe,z]=se.useState(!1),[ie,O]=se.useState(!1),[he,ge]=se.useState(!1),[U,re]=se.useState(0),[Y,Ne]=se.useState(0),K=se.useRef(m.duration||H||Cx),ce=se.useRef(null),we=se.useRef(null),Le=v===0,Pe=v+1<=y,B=m.type,me=m.dismissible!==!1,_e=m.className||"",Oe=m.descriptionClassName||"",ht=se.useMemo(()=>x.findIndex(ne=>ne.toastId===m.id)||0,[x,m.id]),Qt=se.useMemo(()=>{var ne;return(ne=m.closeButton)!=null?ne:P},[m.closeButton,P]),Fe=se.useMemo(()=>m.duration||H||Cx,[m.duration,H]),Zt=se.useRef(0),wr=se.useRef(0),br=se.useRef(0),at=se.useRef(null),[yn,Or]=oe.split("-"),wn=se.useMemo(()=>x.reduce((ne,xe,Ee)=>Ee>=ht?ne:ne+xe.height,0),[x,ht]),E=e4(),le=m.invert||p,be=B==="loading";wr.current=se.useMemo(()=>ht*q+wn,[ht,wn]),se.useEffect(()=>{K.current=Fe},[Fe]),se.useEffect(()=>{ee(!0)},[]),se.useEffect(()=>{let ne=we.current;if(ne){let xe=ne.getBoundingClientRect().height;return Ne(xe),w(Ee=>[{toastId:m.id,height:xe,position:m.position},...Ee]),()=>w(Ee=>Ee.filter(Be=>Be.toastId!==m.id))}},[w,m.id]),se.useLayoutEffect(()=>{if(!V)return;let ne=we.current,xe=ne.style.height;ne.style.height="auto";let Ee=ne.getBoundingClientRect().height;ne.style.height=xe,Ne(Ee),w(Be=>Be.find(ft=>ft.toastId===m.id)?Be.map(ft=>ft.toastId===m.id?{...ft,height:Ee}:ft):[{toastId:m.id,height:Ee,position:m.position},...Be])},[V,m.title,m.description,w,m.id]);let Ae=se.useCallback(()=>{de(!0),re(wr.current),w(ne=>ne.filter(xe=>xe.toastId!==m.id)),setTimeout(()=>{_(m)},m4)},[m,_,w,wr]);se.useEffect(()=>{if(m.promise&&B==="loading"||m.duration===1/0||m.type==="loading")return;let ne;return N||g||F&&E?(()=>{if(br.current<Zt.current){let xe=new Date().getTime()-Zt.current;K.current=K.current-xe}br.current=new Date().getTime()})():K.current!==1/0&&(Zt.current=new Date().getTime(),ne=setTimeout(()=>{var xe;(xe=m.onAutoClose)==null||xe.call(m,m),Ae()},K.current)),()=>clearTimeout(ne)},[N,g,m,B,F,E,Ae]),se.useEffect(()=>{m.delete&&Ae()},[Ae,m.delete]);function Se(){var ne,xe,Ee;return T!=null&&T.loading?se.createElement("div",{className:Dr(S==null?void 0:S.loader,(ne=m==null?void 0:m.classNames)==null?void 0:ne.loader,"sonner-loader"),"data-visible":B==="loading"},T.loading):G?se.createElement("div",{className:Dr(S==null?void 0:S.loader,(xe=m==null?void 0:m.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":B==="loading"},G):se.createElement(G5,{className:Dr(S==null?void 0:S.loader,(Ee=m==null?void 0:m.classNames)==null?void 0:Ee.loader),visible:B==="loading"})}return se.createElement("li",{tabIndex:0,ref:we,className:Dr($,_e,S==null?void 0:S.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,S==null?void 0:S.default,S==null?void 0:S[B],(r=m==null?void 0:m.classNames)==null?void 0:r[B]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:k,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":V,"data-promise":!!m.promise,"data-swiped":he,"data-removed":pe,"data-visible":Pe,"data-y-position":yn,"data-x-position":Or,"data-index":v,"data-front":Le,"data-swiping":fe,"data-dismissible":me,"data-type":B,"data-invert":le,"data-swipe-out":ie,"data-swipe-direction":X,"data-expanded":!!(N||I&&V),style:{"--index":v,"--toasts-before":v,"--z-index":j.length-v,"--offset":`${pe?U:wr.current}px`,"--initial-height":I?"auto":`${Y}px`,...C,...m.style},onDragEnd:()=>{z(!1),A(null),at.current=null},onPointerDown:ne=>{be||!me||(ce.current=new Date,re(wr.current),ne.target.setPointerCapture(ne.pointerId),ne.target.tagName!=="BUTTON"&&(z(!0),at.current={x:ne.clientX,y:ne.clientY}))},onPointerUp:()=>{var ne,xe,Ee,Be;if(ie||!me)return;at.current=null;let ft=Number(((ne=we.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ve=Number(((xe=we.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pt=new Date().getTime()-((Ee=ce.current)==null?void 0:Ee.getTime()),qe=W==="x"?ft:Ve,Et=Math.abs(qe)/pt;if(Math.abs(qe)>=f4||Et>.11){re(wr.current),(Be=m.onDismiss)==null||Be.call(m,m),J(W==="x"?ft>0?"right":"left":Ve>0?"down":"up"),Ae(),O(!0),ge(!1);return}z(!1),A(null)},onPointerMove:ne=>{var xe,Ee,Be,ft;if(!at.current||!me||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;let Ve=ne.clientY-at.current.y,pt=ne.clientX-at.current.x,qe=(Ee=e.swipeDirections)!=null?Ee:p4(oe);!W&&(Math.abs(pt)>1||Math.abs(Ve)>1)&&A(Math.abs(pt)>Math.abs(Ve)?"x":"y");let Et={x:0,y:0};W==="y"?(qe.includes("top")||qe.includes("bottom"))&&(qe.includes("top")&&Ve<0||qe.includes("bottom")&&Ve>0)&&(Et.y=Ve):W==="x"&&(qe.includes("left")||qe.includes("right"))&&(qe.includes("left")&&pt<0||qe.includes("right")&&pt>0)&&(Et.x=pt),(Math.abs(Et.x)>0||Math.abs(Et.y)>0)&&ge(!0),(Be=we.current)==null||Be.style.setProperty("--swipe-amount-x",`${Et.x}px`),(ft=we.current)==null||ft.style.setProperty("--swipe-amount-y",`${Et.y}px`)}},Qt&&!m.jsx?se.createElement("button",{"aria-label":Z,"data-disabled":be,"data-close-button":!0,onClick:be||!me?()=>{}:()=>{var ne;Ae(),(ne=m.onDismiss)==null||ne.call(m,m)},className:Dr(S==null?void 0:S.closeButton,(o=m==null?void 0:m.classNames)==null?void 0:o.closeButton)},(a=T==null?void 0:T.close)!=null?a:Z5):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:se.createElement(se.Fragment,null,B||m.icon||m.promise?se.createElement("div",{"data-icon":"",className:Dr(S==null?void 0:S.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Se():null,m.type!=="loading"?m.icon||(T==null?void 0:T[B])||H5(B):null):null,se.createElement("div",{"data-content":"",className:Dr(S==null?void 0:S.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},se.createElement("div",{"data-title":"",className:Dr(S==null?void 0:S.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?se.createElement("div",{"data-description":"",className:Dr(Q,Oe,S==null?void 0:S.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&yl(m.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:ne=>{var xe,Ee;yl(m.cancel)&&me&&((Ee=(xe=m.cancel).onClick)==null||Ee.call(xe,ne),Ae())},className:Dr(S==null?void 0:S.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&yl(m.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:ne=>{var xe,Ee;yl(m.action)&&((Ee=(xe=m.action).onClick)==null||Ee.call(xe,ne),!ne.defaultPrevented&&Ae())},className:Dr(S==null?void 0:S.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function Ex(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function x4(e,t){let r={};return[e,t].forEach((n,o)=>{let a=o===1,i=a?"--mobile-offset":"--offset",l=a?d4:c4;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${i}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var v4=u.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:b=l4,toastOptions:g,dir:w=Ex(),gap:y=h4,loadingIcon:x,icons:v,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=e,[_,k]=se.useState([]),P=se.useMemo(()=>Array.from(new Set([n].concat(_.filter(F=>F.position).map(F=>F.position)))),[_,n]),[C,R]=se.useState([]),[M,$]=se.useState(!1),[Q,H]=se.useState(!1),[oe,q]=se.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=se.useRef(null),I=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=se.useRef(null),T=se.useRef(!1),Z=se.useCallback(F=>{k(W=>{var A;return(A=W.find(X=>X.id===F.id))!=null&&A.delete||er.dismiss(F.id),W.filter(({id:X})=>X!==F.id)})},[]);return se.useEffect(()=>er.subscribe(F=>{if(F.dismiss){k(W=>W.map(A=>A.id===F.id?{...A,delete:!0}:A));return}setTimeout(()=>{vy.flushSync(()=>{k(W=>{let A=W.findIndex(X=>X.id===F.id);return A!==-1?[...W.slice(0,A),{...W[A],...F},...W.slice(A+1)]:[F,...W]})})})}),[]),se.useEffect(()=>{if(h!=="system"){q(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;let F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:W})=>{q(W?"dark":"light")})}catch{F.addListener(({matches:A})=>{try{q(A?"dark":"light")}catch(X){console.error(X)}})}},[h]),se.useEffect(()=>{_.length<=1&&$(!1)},[_]),se.useEffect(()=>{let F=W=>{var A,X;o.every(J=>W[J]||W.code===J)&&($(!0),(A=G.current)==null||A.focus()),W.code==="Escape"&&(document.activeElement===G.current||(X=G.current)!=null&&X.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[o]),se.useEffect(()=>{if(G.current)return()=>{S.current&&(S.current.focus({preventScroll:!0}),S.current=null,T.current=!1)}},[G.current]),se.createElement("section",{ref:t,"aria-label":`${j} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((F,W)=>{var A;let[X,J]=F.split("-");return _.length?se.createElement("ol",{key:F,dir:w==="auto"?Ex():w,tabIndex:-1,ref:G,className:l,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":X,"data-lifted":M&&_.length>1&&!a,"data-x-position":J,style:{"--front-toast-height":`${((A=C[0])==null?void 0:A.height)||0}px`,"--width":`${u4}px`,"--gap":`${y}px`,...m,...x4(c,d)},onBlur:V=>{T.current&&!V.currentTarget.contains(V.relatedTarget)&&(T.current=!1,S.current&&(S.current.focus({preventScroll:!0}),S.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||T.current||(T.current=!0,S.current=V.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{Q||$(!1)},onDragEnd:()=>$(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},_.filter(V=>!V.position&&W===0||V.position===F).map((V,ee)=>{var pe,de;return se.createElement(g4,{key:V.id,icons:v,index:ee,toast:V,defaultRichColors:f,duration:(pe=g==null?void 0:g.duration)!=null?pe:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(de=g==null?void 0:g.closeButton)!=null?de:i,interacting:Q,position:F,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Z,toasts:_.filter(fe=>fe.position==V.position),heights:C.filter(fe=>fe.position==V.position),setHeights:R,expandByDefault:a,gap:y,loadingIcon:x,expanded:M,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});function zm({recipe:e,onClose:t}){var F;const[r,n]=u.useState(0),[o,a]=u.useState(new Set),[i,l]=u.useState(new Set),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(0),[b,g]=u.useState(!0),[w,y]=u.useState(!1),[x,v]=u.useState(e.servings||4),j=u.useRef(null),N=u.useRef(null),_=e.steps||[];u.useEffect(()=>{if(c&&!h&&p>0){const W=setInterval(()=>{m(A=>A<=1?(d(!1),f(!1),b&&k(),0):A-1)},1e3);return()=>clearInterval(W)}},[c,h,p,b]);const k=()=>{const W=new(window.AudioContext||window.webkitAudioContext),A=W.createOscillator(),X=W.createGain();A.connect(X),X.connect(W.destination),A.frequency.value=800,A.type="sine",X.gain.setValueAtTime(.3,W.currentTime),X.gain.exponentialRampToValueAtTime(.01,W.currentTime+.5),A.start(W.currentTime),A.stop(W.currentTime+.5)},P=W=>{j.current=W.touches[0].clientX},C=W=>{N.current=W.touches[0].clientX},R=()=>{if(!j.current||!N.current)return;const W=j.current-N.current;Math.abs(W)>50&&(W>0&&r<_.length-1?M():W<0&&r>0&&$()),j.current=null,N.current=null},M=()=>{r<_.length-1&&(n(r+1),Q())},$=()=>{r>0&&(n(r-1),Q())},Q=()=>{d(!1),f(!1),m(0)},H=()=>{const W=_[r];if(W!=null&&W.duration){const A=W.duration.match(/(\d+)/);if(A){const X=parseInt(A[1]);m(X*60),d(!0),f(!1)}}},oe=()=>{c?f(!h):H()},q=W=>{const A=Math.floor(W/60),X=W%60;return`${A}:${X.toString().padStart(2,"0")}`},G=W=>{a(A=>{const X=new Set(A);return X.has(W)?X.delete(W):X.add(W),X})},I=W=>{l(A=>{const X=new Set(A);return X.has(W)?X.delete(W):X.add(W),X})},S=W=>{const A=W.toLowerCase(),X={flour:"",sugar:"",butter:"",egg:"",chocolate:"",vanilla:"",baking:""};for(const[J,V]of Object.entries(X))if(A.includes(J))return V;return""},T=o.size===e.ingredients.length,Z=(r+1)/_.length*100;return s.jsx("div",{className:"fixed inset-0 z-50 bg-white overflow-hidden",children:s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white px-3 py-2 sm:px-4 sm:py-3 flex items-center justify-between shadow-lg flex-shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[s.jsx("h2",{className:"text-base sm:text-lg md:text-xl font-bold truncate",children:e.title}),s.jsxs("p",{className:"text-orange-100 text-[10px] sm:text-xs",children:["Step ",r+1," of ",_.length]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g(!b),className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",children:b?s.jsx(Ow,{className:"w-4 h-4 sm:w-5 sm:h-5"}):s.jsx(ZE,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20 h-8 w-8 sm:h-9 sm:w-9",children:s.jsx(At,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),s.jsx("div",{className:"w-full bg-gray-200 h-1 sm:h-1.5 flex-shrink-0",children:s.jsx("div",{className:"bg-orange-600 h-full transition-all duration-300",style:{width:`${Z}%`}})}),s.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:s.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 pb-24",children:[s.jsxs("div",{className:"relative w-full h-40 sm:h-48 md:h-64 rounded-lg sm:rounded-xl overflow-hidden shadow-lg flex-shrink-0",children:[s.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),s.jsxs("div",{className:"absolute bottom-2 left-2 right-2 sm:bottom-3 sm:left-3 sm:right-3 md:bottom-4 md:left-4 md:right-4",children:[s.jsx("h3",{className:"text-white text-base sm:text-lg md:text-xl font-bold drop-shadow-lg line-clamp-1",children:e.title}),s.jsxs("p",{className:"text-white/90 text-[10px] sm:text-xs md:text-sm mt-0.5 sm:mt-1 drop-shadow",children:[e.prepTime+e.cookTime," min  ",e.servings," servings"]})]})]}),s.jsxs("div",{className:`rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 shadow-sm ${w?"bg-orange-50 border-orange-300":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300"}`,children:[s.jsx(te,{onClick:()=>y(!w),className:`w-full font-semibold h-10 sm:h-11 text-sm sm:text-base ${w?"bg-orange-600 hover:bg-orange-700":"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700"}`,children:w?s.jsxs(s.Fragment,{children:[s.jsx(VE,{className:"w-4 h-4 mr-2"}),"Disable Voice Control"]}):s.jsxs(s.Fragment,{children:[s.jsx(Rw,{className:"w-4 h-4 mr-2"}),"Enable Voice Control"]})}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 text-center mt-2",children:w?'Say "Next", "Previous", "Repeat", or "Read ingredients"':"Navigate recipes hands-free with voice commands"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-emerald-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-600"}),s.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:"Servings"})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>v(Math.max(1,x-1)),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:s.jsx(Pw,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("span",{className:"text-base sm:text-lg font-bold text-gray-900 min-w-[1.5rem] sm:min-w-[2rem] text-center",children:x}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>v(x+1),className:"h-7 w-7 sm:h-8 sm:w-8 p-0",children:s.jsx(hn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),x!==e.servings&&s.jsxs("p",{className:"text-[10px] sm:text-xs text-emerald-700 mt-2 text-center",children:["Scaled from original ",e.servings," servings"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border-2 border-blue-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsxs("h3",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-900 flex items-center gap-2",children:[T?s.jsx(Dl,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600"}):s.jsx(AE,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),"Ingredients"]}),s.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-600",children:[o.size,"/",e.ingredients.length]})]}),s.jsx("div",{className:"space-y-2",children:e.ingredients.map((W,A)=>s.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-lg transition-all ${o.has(A)?"bg-orange-100 border border-orange-300":"bg-white border border-gray-200"}`,children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gray-100 flex items-center justify-center text-lg sm:text-xl flex-shrink-0",children:S(W.name)}),s.jsx(pi,{id:`ingredient-${A}`,checked:o.has(A),onCheckedChange:()=>G(A),className:"flex-shrink-0"}),s.jsxs("label",{htmlFor:`ingredient-${A}`,className:`text-xs sm:text-sm cursor-pointer flex-1 min-w-0 ${o.has(A)?"text-gray-500 line-through":"text-gray-900"}`,children:[s.jsxs("span",{className:"font-semibold",children:[W.quantity," ",W.unit]})," ",W.name]})]},A))})]}),s.jsx("div",{className:"touch-pan-y select-none",onTouchStart:P,onTouchMove:C,onTouchEnd:R,children:s.jsxs("div",{className:`bg-white rounded-lg sm:rounded-xl shadow-lg border-2 p-4 sm:p-6 md:p-8 transition-all ${i.has(r)?"border-orange-600 bg-orange-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[s.jsx(pi,{id:`step-${r}`,checked:i.has(r),onCheckedChange:()=>I(r),className:"w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0"}),s.jsxs("h3",{className:`font-bold text-lg sm:text-xl md:text-2xl ${i.has(r)?"text-gray-500 line-through":"text-gray-900"}`,children:["Step ",r+1]})]}),((F=_[r])==null?void 0:F.duration)&&s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:oe,className:`gap-1 sm:gap-2 h-8 sm:h-9 text-xs sm:text-sm px-2 sm:px-3 ${c&&!h?"border-orange-600 bg-orange-50":"border-blue-300"}`,children:[c&&!h?s.jsx(jm,{className:"w-3 h-3 sm:w-4 sm:h-4"}):s.jsx(Nm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{className:"hidden sm:inline",children:c&&!h?"Pause":"Start"})]}),c&&s.jsx(te,{variant:"outline",size:"sm",onClick:Q,className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:s.jsx(HE,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),c&&s.jsxs("div",{className:`mb-3 sm:mb-4 p-3 sm:p-4 md:p-6 rounded-lg sm:rounded-xl text-center ${p<=10?"bg-red-100 border-2 border-red-300 animate-pulse":"bg-orange-100 border-2 border-orange-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[s.jsx(Aw,{className:`w-4 h-4 sm:w-5 sm:h-5 ${p<=10?"text-red-600":"text-orange-600"}`}),s.jsx("span",{className:`font-mono text-3xl sm:text-4xl md:text-5xl font-bold ${p<=10?"text-red-600":"text-orange-600"}`,children:q(p)})]}),h&&s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-2",children:"Timer paused"})]}),s.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-700 leading-relaxed",children:_[r].instruction}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 text-center mt-4 sm:mt-6",children:" Swipe left or right to navigate"})]})})]})}),s.jsx("div",{className:"bg-white border-t-2 border-gray-200 px-3 py-2 sm:px-4 sm:py-3 shadow-lg flex-shrink-0 safe-area-bottom",children:s.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3 max-w-4xl mx-auto",children:[s.jsxs(te,{variant:"outline",size:"lg",onClick:$,disabled:r===0,className:"gap-1 sm:gap-2 text-xs sm:text-sm px-3 sm:px-4 h-10 sm:h-11",children:[s.jsx(gc,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"hidden xs:inline",children:"Previous"}),s.jsx("span",{className:"xs:hidden",children:"Prev"})]}),s.jsx("div",{className:"flex-1 text-center",children:s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600",children:w?'Say "Next" or swipe':"Swipe to navigate"})}),s.jsxs(te,{size:"lg",onClick:M,disabled:r===_.length-1,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 gap-1 sm:gap-2 text-xs sm:text-sm px-3 sm:px-4 h-10 sm:h-11",children:[s.jsx("span",{children:"Next"}),s.jsx(xc,{className:"w-4 h-4 sm:w-5 sm:h-5"})]})]})})]})})}function Bm({recipe:e,open:t,onOpenChange:r}){var y,x;const{state:n,dispatch:o}=Xs(),[a,i]=u.useState(new Set),[l,c]=u.useState(!1),d=n.savedRecipes.some(v=>v.id===e.id),h=e.steps&&e.steps.length>0;if(u.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),l&&h)return s.jsx(zm,{recipe:e,onClose:()=>c(!1)});const f=v=>{i(j=>{const N=new Set(j);return N.has(v)?N.delete(v):N.add(v),N})},p=()=>{d?(o({type:"REMOVE_RECIPE",payload:e.id}),D.success("Recipe removed from your collection")):(o({type:"SAVE_RECIPE",payload:e}),D.success("Recipe saved to your collection"))},m=()=>{e.ingredients.forEach(v=>{const j={id:`${e.id}-${v.name}-${Date.now()}`,name:v.name,quantity:parseFloat(v.quantity)||1,unit:v.unit,categoryId:"cat-7",checked:!1,sourceRecipeIds:[e.id]};o({type:"ADD_GROCERY_ITEM",payload:j})}),D.success("Ingredients added to grocery list")},b=()=>{const v={id:`${e.id}-${Date.now()}`,recipeId:e.id,date:new Date().toISOString().split("T")[0],mealType:e.mealType[0]||"Dinner",servings:e.servings};o({type:"ADD_MEAL_PLAN",payload:v}),D.success("Recipe added to meal plan")},g=()=>{d&&(o({type:"REMOVE_RECIPE",payload:e.id}),D.success("Recipe deleted"),r(!1))},w={Easy:"bg-orange-100 text-orange-700 border-orange-200",Medium:"bg-amber-100 text-amber-700 border-amber-200",Hard:"bg-red-100 text-red-700 border-red-200"};return s.jsx(Ct,{open:t,onOpenChange:r,children:s.jsxs(bt,{className:"max-w-full w-full h-[100dvh] max-h-[100dvh] p-0 gap-0 overflow-hidden m-0 rounded-none border-0",children:[s.jsx($t,{className:"sr-only",children:e.title}),s.jsx("div",{className:"h-full overflow-y-auto overscroll-contain",children:s.jsxs("div",{className:"relative min-h-full",children:[s.jsx(te,{variant:"ghost",size:"icon",className:"fixed top-2 right-2 z-50 bg-white/95 hover:bg-white shadow-lg rounded-full min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",onClick:()=>r(!1),children:s.jsx(At,{className:"w-5 h-5"})}),s.jsxs("div",{className:"relative w-full h-56 sm:h-64 bg-gray-100",children:[s.jsx("img",{src:(y=e.imageUrl)!=null&&y.includes("instagram.com")||(x=e.imageUrl)!=null&&x.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e.imageUrl.replace(/&amp;/g,"&"))}`:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 text-white",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-2 leading-tight pr-12",children:e.title}),s.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-1.5",children:[s.jsx(nt,{className:"bg-white/95 text-gray-900 hover:bg-white text-[10px] sm:text-xs px-2 py-0.5",children:e.cuisineType}),s.jsx(nt,{variant:"outline",className:`${w[e.difficulty]} border text-[10px] sm:text-xs px-2 py-0.5`,children:e.difficulty}),e.dietaryTags.slice(0,2).map(v=>s.jsx(nt,{variant:"secondary",className:"bg-white/90 text-gray-900 text-[10px] sm:text-xs px-2 py-0.5",children:v},v)),e.dietaryTags.length>2&&s.jsxs(nt,{variant:"secondary",className:"bg-white/90 text-gray-900 text-[10px] sm:text-xs px-2 py-0.5",children:["+",e.dietaryTags.length-2]})]})]})]}),s.jsxs("div",{className:"p-3 sm:p-4 pb-32 sm:pb-24",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-100",children:[s.jsx("div",{className:"bg-primary p-1.5 sm:p-2 rounded-lg",children:s.jsx(ln,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Total"}),s.jsxs("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:[e.prepTime+e.cookTime,"m"]})]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-100",children:[s.jsx("div",{className:"bg-blue-500 p-1.5 sm:p-2 rounded-lg",children:s.jsx(Ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Serves"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:e.servings})]})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg border border-amber-100",children:[s.jsx("div",{className:"bg-amber-500 p-1.5 sm:p-2 rounded-lg",children:s.jsx(Aw,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-medium",children:"Prep"}),s.jsxs("p",{className:"text-xs sm:text-sm font-bold text-gray-900",children:[e.prepTime,"m"]})]})]})]}),h&&s.jsxs("div",{className:"mb-3 sm:mb-4",children:[s.jsxs(te,{size:"lg",onClick:()=>c(!0),className:"w-full bg-accent hover:bg-accent/90 text-white text-sm sm:text-base min-h-[48px] sm:min-h-[52px] gap-2 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:[s.jsx(TE,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Start Cooking"]}),s.jsx("p",{className:"text-center text-[10px] sm:text-xs text-gray-600 mt-2 px-2",children:"Step-by-step mode with timers and ingredient checklist"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 sm:mb-4",children:[s.jsxs(te,{size:"lg",variant:d?"outline":"default",onClick:p,className:`gap-2 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm ${d?"border-2 border-secondary text-secondary hover:bg-orange-50":"bg-secondary hover:bg-secondary/90 text-white"}`,children:[s.jsx(Lh,{className:`w-4 h-4 flex-shrink-0 ${d?"fill-current":""}`}),s.jsx("span",{className:"truncate",children:d?"Saved":"Save"})]}),s.jsxs(te,{size:"lg",variant:"outline",onClick:b,className:"gap-2 border-2 hover:bg-blue-50 hover:border-blue-500 hover:text-blue-700 min-h-[44px] sm:min-h-[48px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm",children:[s.jsx(Jo,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Meal Plan"})]})]}),s.jsxs("div",{className:"flex gap-2 mb-4 sm:mb-6",children:[s.jsxs(te,{variant:"outline",onClick:m,className:"flex-1 gap-2 hover:bg-orange-50 hover:border-primary hover:text-primary min-h-[40px] sm:min-h-[44px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm",children:[s.jsx(Vs,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Grocery List"})]}),d&&s.jsx(te,{variant:"outline",size:"icon",onClick:g,className:"hover:bg-rose-50 hover:border-rose-500 hover:text-rose-700 min-h-[40px] min-w-[40px] sm:min-h-[44px] sm:min-w-[44px] touch-manipulation active:scale-95 transition-all",children:s.jsx(nr,{className:"w-4 h-4"})})]}),s.jsx(Ul,{className:"my-4 sm:my-6"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:s.jsx(Pa,{className:"w-4 h-4 text-primary"})}),s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Ingredients"})]}),s.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-3 sm:p-4",children:s.jsx("div",{className:"space-y-2",children:e.ingredients.map((v,j)=>s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 p-2 rounded-lg hover:bg-orange-50 transition-colors min-h-[40px] sm:min-h-[44px]",children:[s.jsx(pi,{id:`ingredient-${j}`,checked:a.has(j),onCheckedChange:()=>f(j),className:"mt-1 min-w-[18px] min-h-[18px] sm:min-w-[20px] sm:min-h-[20px] touch-manipulation"}),s.jsxs("label",{htmlFor:`ingredient-${j}`,className:`flex-1 text-xs sm:text-sm text-gray-700 cursor-pointer leading-relaxed ${a.has(j)?"line-through text-gray-400":""}`,children:[s.jsxs("span",{className:"font-semibold text-primary",children:[v.quantity," ",v.unit]})," ",v.name]})]},j))})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Bs,{className:"w-4 h-4 text-blue-600"})}),s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Instructions"})]}),s.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-lg p-3 sm:p-4",children:s.jsx("ol",{className:"space-y-3 sm:space-y-4",children:e.instructions.map((v,j)=>s.jsxs("li",{className:"flex gap-2 sm:gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-primary text-white flex items-center justify-center font-bold text-xs sm:text-sm shadow-md",children:j+1}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-700 pt-0.5 leading-relaxed",children:v})]},j))})})]}),e.notes&&s.jsxs(s.Fragment,{children:[s.jsx(Ul,{className:"my-4 sm:my-6"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-3",children:"Notes"}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 sm:p-4",children:s.jsx("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:e.notes})})]})]}),e.sourceUrl&&s.jsxs(s.Fragment,{children:[s.jsx(Ul,{className:"my-4 sm:my-6"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 bg-gray-50 border border-gray-200 rounded-lg p-3 sm:p-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-xs sm:text-sm mb-1",children:"Recipe Source"}),s.jsx("p",{className:"text-xs text-gray-600",children:"View original recipe"})]}),s.jsx(te,{variant:"outline",size:"sm",asChild:!0,className:"gap-2 hover:bg-white min-h-[40px] touch-manipulation active:scale-95 transition-all w-full sm:w-auto text-xs sm:text-sm",children:s.jsxs("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(rd,{className:"w-4 h-4"}),"Visit Source"]})})]})]})]})]})})]})})}const y4="https://vohvdarghgqskzqjclux.supabase.co",w4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",yt=vm(y4,w4);async function b4(e){if(!yt)return[];const{data:t,error:r}=await yt.from("reviews").select("*").eq("recipe_id",e).order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((t||[]).map(async o=>{const{data:a}=await yt.from("review_images").select("id, image_url").eq("review_id",o.id);return{...o,images:a||[]}}))}async function j4(e,t){if(!yt)return null;const{data:r,error:n}=await yt.from("reviews").select("*").eq("recipe_id",e).eq("user_id",t).maybeSingle();if(n)throw n;if(!r)return null;const{data:o}=await yt.from("review_images").select("id, image_url").eq("review_id",r.id);return{...r,images:o||[]}}async function Tb(e){if(!yt)throw new Error("Supabase not configured");const r=`reviews/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}-${e.name}`}`,{error:n}=await yt.storage.from("recipe-images").upload(r,e);if(n)throw n;const{data:o}=yt.storage.from("recipe-images").getPublicUrl(r);return o.publicUrl}async function N4(e,t,r,n){if(!yt)throw new Error("Supabase not configured");const{data:{user:o}}=await yt.auth.getUser();if(!o)throw new Error("User not authenticated");const{data:a,error:i}=await yt.from("reviews").insert({recipe_id:e,user_id:o.id,rating:t,comment:r}).select().single();if(i)throw i;if(n.length>0){const l=await Promise.all(n.map(Tb)),{error:c}=await yt.from("review_images").insert(l.map(d=>({review_id:a.id,image_url:d})));if(c)throw c}try{const{data:l}=await yt.from("posts").select("id").eq("recipe_id",e);if(l&&l.length>0){const c=l[0].id,d="".repeat(t),h=r?` ${r}`:"";await yt.from("comments").insert({post_id:c,user_id:o.id,text:`${d}${h}`,rating:t})}}catch(l){console.error("Failed to add review as comment to social post:",l)}return a}async function _4(e,t,r,n){if(!yt)throw new Error("Supabase not configured");const{error:o}=await yt.from("reviews").update({rating:t,comment:r,updated_at:new Date().toISOString()}).eq("id",e);if(o)throw o;if(n.length>0){const a=await Promise.all(n.map(Tb)),{error:i}=await yt.from("review_images").insert(a.map(l=>({review_id:e,image_url:l})));if(i)throw i}return{id:e,rating:t,comment:r}}async function S4(e){if(!yt)return 0;const{data:t,error:r}=await yt.from("reviews").select("rating").eq("recipe_id",e);if(r)throw r;if(!t||t.length===0)return 0;const n=t.reduce((o,a)=>o+a.rating,0)/t.length;return Math.round(n*10)/10}const An=u.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Te("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));An.displayName="Textarea";function k4({rating:e,size:t="md",interactive:r=!1,onRate:n}){const[o,a]=u.useState(0),i={sm:{text:"text-base",button:"w-8 h-8",gap:"gap-1"},md:{text:"text-xl",button:"w-10 h-10",gap:"gap-1.5"},lg:{text:"text-2xl",button:"w-12 h-12",gap:"gap-2"}}[t],l=c=>{r&&n&&n(c)};return s.jsx("div",{className:`flex ${i.gap}`,children:[1,2,3,4,5].map(c=>{const d=c<=(o||e);return s.jsx("button",{onClick:()=>l(c),onMouseEnter:()=>r&&a(c),onMouseLeave:()=>r&&a(0),disabled:!r,className:`
              flex items-center justify-center rounded-lg transition-all duration-200
              ${i.button}
              ${r?"cursor-pointer hover:scale-110 active:scale-95 touch-manipulation":"cursor-default"}
              ${r?"hover:bg-orange-50":""}
              ${i.text}
            `,"aria-label":`Rate ${c} out of 5`,children:s.jsx("span",{className:`transition-all duration-200 ${d?"opacity-100 scale-100":"opacity-20 grayscale scale-90"}`,children:""})},c)})})}function C4({recipe:e,open:t,onOpenChange:r,onReviewSubmitted:n}){const[o,a]=u.useState(0),[i,l]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(null);u.useEffect(()=>{t&&p()},[t,e.id]);const p=async()=>{try{const b=localStorage.getItem("userId");if(!b)return;const g=await j4(e.id,b);g?(a(g.rating),l(g.comment||""),f(g.id)):(a(0),l(""),f(null))}catch(b){console.error("Failed to load existing review:",b)}},m=async()=>{if(o===0){D.error("Please select a rating");return}d(!0);try{h?(await _4(h,o,i,[]),D.success("Review updated successfully!")):(await N4(e.id,o,i,[]),D.success("Review submitted successfully!")),n==null||n(),r(!1),a(0),l("")}catch(b){console.error("Failed to submit review:",b),D.error("Failed to submit review. Please try again.")}finally{d(!1)}};return s.jsx(Ct,{open:t,onOpenChange:r,children:s.jsx(bt,{className:"max-w-full w-full max-h-full h-full p-0 gap-0 m-0 rounded-none sm:max-w-2xl sm:max-h-[90vh] sm:rounded-lg sm:m-4",children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs(Wt,{className:"px-4 py-4 border-b border-gray-200 flex-shrink-0",children:[s.jsx($t,{className:"text-xl",children:h?"Edit Your Review":"Write a Review"}),s.jsxs(Gr,{className:"text-sm",children:["Share your experience with ",e.title]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-3 block",children:"Your Rating"}),s.jsx("div",{className:"flex justify-center py-2",children:s.jsx(k4,{rating:o,size:"lg",interactive:!0,onRate:a})}),o>0&&s.jsx("p",{className:"text-center text-sm text-gray-600 mt-2",children:o===5?" Amazing!":o===4?" Great!":o===3?" Good":o===2?" Okay":" Not great"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Comments (Optional)"}),s.jsx(An,{value:i,onChange:b=>l(b.target.value),placeholder:"Share your experience with this recipe... What did you love? Any tips for others?",className:"min-h-32 text-base resize-none",disabled:c,maxLength:500}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[i.length,"/500 characters"]})]})]})}),s.jsx("div",{className:"px-4 py-4 border-t border-gray-200 flex-shrink-0 bg-white",children:s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:justify-end",children:[s.jsx(te,{variant:"outline",onClick:()=>r(!1),disabled:c,className:"w-full sm:w-auto min-h-[48px] touch-manipulation active:scale-95 transition-all",children:"Cancel"}),s.jsx(te,{onClick:m,disabled:c||o===0,className:"w-full sm:w-auto min-h-[48px] bg-accent hover:bg-accent/90 touch-manipulation active:scale-95 transition-all",children:c?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):h?"Update Review":"Submit Review"})]})})]})})})}function Hh({recipe:e,onSave:t,onCook:r,onDelete:n,showReviewButton:o=!1,isAdmin:a=!1,preloadedSocialPost:i}){var M,$,Q;const{state:l}=Xs(),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(0),[b,g]=u.useState(0),[w,y]=u.useState(null),[x,v]=u.useState(!0),j=e.prepTime+e.cookTime,N=l.savedRecipes.some(H=>H.id===e.id),[_,k]=u.useState(!1),P={Easy:"bg-orange-100 text-orange-700 border-orange-200",Medium:"bg-amber-100 text-amber-700 border-amber-200",Hard:"bg-red-100 text-red-700 border-red-200"},C=async()=>{try{const H=await b4(e.id);g(H.length);const oe=await S4(e.id);m(oe)}catch(H){console.error("Failed to load review data:",H)}};u.useEffect(()=>{C(),i!==void 0&&y(i),v(!1)},[e.id,i]),u.useEffect(()=>{console.log("[RecipeCard] Recipe:",e.id,"Review count:",b,"Social post:",w?"EXISTS":"NULL")},[b,w]);const R=H=>{if(H.stopPropagation(),!w){console.error("[RecipeCard] No social post available");return}console.log("[RecipeCard]  Opening post:",w.id),window.dispatchEvent(new CustomEvent("open-shared-post",{detail:w.id})),window.__pendingSharedPostId=w.id,setTimeout(()=>{delete window.__pendingSharedPostId},2e3),window.location.pathname!=="/discover"&&(console.log("[RecipeCard] Navigating to /discover"),window.history.pushState({},"","/discover"),window.dispatchEvent(new CustomEvent("navigate",{detail:"discover"})))};return s.jsxs(s.Fragment,{children:[s.jsxs(Xe,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 border-0 bg-white cursor-pointer active:scale-[0.98] flex flex-col h-full",onClick:()=>d(!0),children:[s.jsxs("div",{className:"relative overflow-hidden aspect-square",children:[s.jsx("img",{src:(M=e.imageUrl)!=null&&M.includes("instagram.com")||($=e.imageUrl)!=null&&$.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e.imageUrl.replace(/&amp;/g,"&"))}`:e.imageUrl,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[N&&s.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-full p-2 shadow-lg",children:s.jsx(Lh,{className:"w-4 h-4 text-rose-500 fill-rose-500"})}),a&&n&&s.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Are you sure you want to delete this recipe?")&&n(e.id)},className:"bg-red-600/95 backdrop-blur-sm rounded-full p-2.5 shadow-lg hover:bg-red-700 active:scale-95 transition-all touch-manipulation",children:s.jsx(nr,{className:"w-4 h-4 text-white"})})]})]}),s.jsxs(Ze,{className:"p-4 space-y-3 flex-1",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(nt,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 font-medium text-xs",children:e.cuisineType}),s.jsx("h3",{className:"font-bold text-gray-900 leading-tight text-sm sm:text-base lg:text-lg xl:text-xl hyphens-auto break-words",children:Nr(e.title)})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ln,{className:"w-4 h-4 flex-shrink-0"}),s.jsxs("span",{className:"font-medium whitespace-nowrap",children:[j," min"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Bs,{className:"w-4 h-4 flex-shrink-0"}),s.jsx(nt,{variant:"outline",className:`text-xs ${P[e.difficulty]}`,children:e.difficulty})]})]}),e.dietaryTags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.dietaryTags.slice(0,3).map(H=>s.jsx(nt,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:H},H)),e.dietaryTags.length>3&&s.jsxs(nt,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:["+",e.dietaryTags.length-3]})]})]}),s.jsxs(Vw,{className:"p-3 sm:p-4 pt-0 flex flex-col gap-2",children:[s.jsxs(te,{variant:N?"default":"outline",size:"sm",className:`w-full min-h-[44px] touch-manipulation active:scale-95 transition-all text-xs sm:text-sm ${N?"bg-secondary hover:bg-secondary/90 text-white":"border-gray-300 hover:bg-primary hover:text-white"}`,onClick:H=>{H.stopPropagation(),t==null||t(e.id)},children:[s.jsx(Lh,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0 ${N?"fill-white":""}`}),s.jsx("span",{className:"truncate text-xs sm:text-sm leading-tight",children:N?"Saved":"Save Recipe"})]}),s.jsxs(te,{size:"sm",className:"w-full min-h-[44px] bg-accent hover:bg-accent/90 text-white shadow-md hover:shadow-lg active:scale-95 transition-all touch-manipulation text-xs sm:text-sm",onClick:H=>{H.stopPropagation(),r==null||r(e.id)},children:[s.jsx(OE,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0"}),s.jsx("span",{className:"leading-tight",children:"Cook"})]}),o&&s.jsx(s.Fragment,{children:!x&&w?s.jsx(te,{variant:"outline",size:"sm",disabled:_,className:`w-full min-h-[44px] border-orange-300 text-orange-600 hover:bg-orange-50 hover:border-orange-500 active:scale-95 transition-all touch-manipulation text-xs sm:text-sm ${_?"opacity-60 cursor-wait":""}`,onClick:async H=>{H.stopPropagation(),k(!0),await new Promise(oe=>setTimeout(oe,200)),R(H),setTimeout(()=>k(!1),500)},children:_?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-orange-600 border-t-transparent rounded-full animate-spin mr-2 flex-shrink-0"}),s.jsx("span",{className:"leading-tight",children:"Loading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-sm sm:text-base mr-1.5 sm:mr-2 flex-shrink-0",children:""}),s.jsxs("span",{className:"flex items-center gap-1.5 sm:gap-2 truncate min-w-0 leading-tight",children:[s.jsx("span",{children:"See Reviews"}),((Q=w._count)==null?void 0:Q.comments)>0&&s.jsx("span",{className:"text-xs bg-orange-100 px-1.5 sm:px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:w._count.comments})]})]})}):s.jsx("div",{className:"w-full min-h-[44px] border border-gray-200 rounded-lg bg-gray-50 animate-pulse"})})]})]}),s.jsx(Bm,{recipe:e,open:c,onOpenChange:d}),s.jsx(C4,{recipe:e,open:h,onOpenChange:f,onReviewSubmitted:()=>{C()}})]})}const ct=u.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Te("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ct.displayName="Input";const E4="https://vohvdarghgqskzqjclux.supabase.co",R4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",Mi=vm(E4,R4);function Vm(e){return{id:e.id,title:e.title,ingredients:e.ingredients,instructions:e.instructions,prepTime:e.prep_time,cookTime:e.cook_time,servings:e.servings,tags:e.tags||[],cuisineType:e.cuisine_type,difficulty:e.difficulty,dietaryTags:e.dietary_tags||[],mealType:e.meal_type||[],imageUrl:e.image_url,videoUrl:e.video_url,sourceUrl:e.source_url,notes:e.notes,isSaved:!1}}function P4(e){return{title:e.title,ingredients:e.ingredients,instructions:e.instructions,prep_time:e.prepTime,cook_time:e.cookTime,servings:e.servings,tags:e.tags||[],cuisine_type:e.cuisineType,difficulty:e.difficulty,dietary_tags:e.dietaryTags||[],meal_type:e.mealType||[],image_url:e.imageUrl,video_url:e.videoUrl,source_url:e.sourceUrl,notes:e.notes,is_public:!0}}async function T4(e){const t=P4(e);console.log("[createRecipe] Attempting to insert:",t);const{data:r,error:n}=await Mi.from("public_recipes").insert(t).select().single();if(n)throw console.error("Error creating recipe:",n),console.error("Error details:",{message:n.message,details:n.details,hint:n.hint,code:n.code}),console.error("Supabase request failed",n),new Error(n.message||"Failed to create recipe");return Vm(r)}async function Ab(){const{data:e,error:t}=await Mi.from("public_recipes").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching recipes:",t),new Error("Failed to fetch recipes");return(e||[]).map(Vm)}async function A4(e){const{data:t,error:r}=await Mi.from("public_recipes").select("*").eq("id",e).maybeSingle();return r?(console.error("Error fetching recipe:",r),null):t?Vm(t):null}async function Ib(e){if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))throw new Error("Cannot delete mock recipes - only database recipes can be deleted");const{error:r}=await Mi.from("public_recipes").delete().eq("id",e);if(r)throw console.error("Error deleting recipe:",r),new Error("Failed to delete recipe")}const Wm=Object.freeze(Object.defineProperty({__proto__:null,createRecipe:T4,deleteRecipe:Ib,getAllPublicRecipes:Ab,getRecipeById:A4,supabase:Mi},Symbol.toStringTag,{value:"Module"})),I4="modulepreload",O4=function(e){return"/"+e},Rx={},ko=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(r.map(c=>{if(c=O4(c),c in Rx)return;Rx[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":I4,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},M4=e=>{if(!e){console.log("[imageUtils]  No image URL provided");return}if(console.log("[imageUtils]  Input URL:",e),e.includes("vohvdarghgqskzqjclux.supabase.co/storage"))return console.log("[imageUtils]  Supabase storage URL - returning directly"),e;if(e.includes("instagram.com")||e.includes("cdninstagram.com")){console.warn("[imageUtils]  Instagram URL detected - this should have been reuploaded");const t=e.replace(/&amp;/g,"&"),r=`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(t)}`;return console.log("[imageUtils]  Attempting to proxy:",r),r}return console.log("[imageUtils]  Other URL - returning directly"),e},ku=()=>s.jsxs("div",{className:"flex gap-2 sm:gap-3 animate-pulse",children:[s.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gray-300 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"bg-gray-200 rounded-2xl px-3 py-2 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-300 rounded w-24"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-16 ml-3"})]})]}),D4=()=>s.jsxs("div",{className:"space-y-3 animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>s.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded"},e))}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-24"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>s.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded"},e))})]})]});function fd({postId:e,isOpen:t,onClose:r,onCommentPosted:n}){const[o,a]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[p,m]=u.useState(null),[b,g]=u.useState(0),[w,y]=u.useState(0),[x,v]=u.useState(0),[j,N]=u.useState(0),[_,k]=u.useState(null),[P,C]=u.useState(null),[R,M]=u.useState(!1),$=u.useRef(null),[Q,H]=u.useState(!1),[oe,q]=u.useState(0);u.useEffect(()=>{t&&e&&(console.log("[CommentModal]  Modal opened with postId:",e),G())},[t,e]);const G=async()=>{var A,X;d(!0);try{console.log("[CommentModal]  Starting to load data for post:",e);const{data:J}=await L.auth.getUser(),V=((A=J.user)==null?void 0:A.id)||null;m(V);const{data:ee,error:pe}=await L.from("posts").select("*").eq("id",e).maybeSingle();if(console.log("[CommentModal]  Raw post data:",ee),console.log("[CommentModal]  Post columns:",ee?Object.keys(ee):"none"),pe)throw pe;if(!ee){console.log("[CommentModal]  Post not found!"),D.error("Post not found"),r();return}console.log("[CommentModal]  Post fields:",{id:ee.id,title:ee.title,image_url:ee.image_url,recipe_id:ee.recipe_id,recipe_url:ee.recipe_url,hasImageUrl:!!ee.image_url});let de=null;if(ee.recipe_id){console.log("[CommentModal]  Fetching recipe with ID:",ee.recipe_id);const{data:O,error:he}=await L.from("public_recipes").select("image_url, video_url, title").eq("id",ee.recipe_id).maybeSingle();console.log("[CommentModal]  Recipe data:",O),de=O,O&&console.log("[CommentModal]  Recipe fields:",{id:ee.recipe_id,title:O.title,image_url:O.image_url,hasImageUrl:!!O.image_url})}!ee.image_url&&(de!=null&&de.image_url)?(console.log("[CommentModal]  Using recipe image as fallback:",de.image_url),ee.image_url=de.image_url):ee.image_url||console.log("[CommentModal]  NO IMAGE AVAILABLE"),k(ee);const[fe,z,ie]=await Promise.all([L.from("post_ratings").select("rating").eq("post_id",e),L.from("comments").select("id, text, created_at, user_id, profiles!comments_user_id_fkey(username, avatar_url)").eq("post_id",e).order("created_at",{ascending:!0}),V?L.from("post_ratings").select("rating").eq("post_id",e).eq("user_id",V).maybeSingle():Promise.resolve({data:null,error:null})]);if(fe.data&&fe.data.length>0){const O=fe.data.reduce((he,ge)=>he+ge.rating,0)/fe.data.length;v(O),N(fe.data.length)}z.data&&a(z.data.map(O=>({...O,profiles:Array.isArray(O.profiles)?O.profiles[0]:O.profiles}))),g(((X=ie.data)==null?void 0:X.rating)||0),ee.spotify_preview_url&&setTimeout(()=>{},500)}catch(J){console.error("[CommentModal]  Error loading modal data:",J),D.error("Failed to load post details")}finally{d(!1)}},I=async()=>{try{const{data:A,error:X}=await L.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(X)throw X;if(!A||A.length===0){a([]);return}const J=[...new Set(A.map(fe=>fe.user_id))],{data:V,error:ee}=await L.from("profiles").select("id, username, avatar_url").in("id",J);if(ee)throw ee;const pe=new Map((V||[]).map(fe=>[fe.id,fe])),de=A.map(fe=>({...fe,profiles:pe.get(fe.user_id)||{username:"Unknown User",avatar_url:null}}));a(de)}catch(A){console.error("Error reloading comments:",A)}},S=async()=>{try{const{data:A,error:X}=await L.from("post_ratings").select("rating").eq("post_id",e);if(X)throw X;if(A&&A.length>0){const J=A.reduce((V,ee)=>V+ee.rating,0)/A.length;v(J),N(A.length)}else v(0),N(0)}catch(A){console.error("Error reloading ratings:",A)}},T=async A=>{if(!p){D.error("Please log in to rate");return}try{const{error:X}=await L.from("post_ratings").upsert({post_id:e,user_id:p,rating:A},{onConflict:"post_id,user_id"});if(X)throw X;g(A),await S(),n&&n(),D.success("Rating submitted!")}catch(X){console.error("Error submitting rating:",X),D.error("Failed to submit rating")}},Z=async A=>{if(A.preventDefault(),!(!i.trim()||!p)){f(!0);try{const{data:X}=await L.from("posts").select("user_id").eq("id",e).maybeSingle(),{error:J}=await L.from("comments").insert({post_id:e,user_id:p,text:i.trim()});if(J)throw J;X&&X.user_id!==p&&await L.from("notifications").insert({user_id:X.user_id,actor_id:p,type:"comment",post_id:e}),l(""),await I(),D.success("Comment posted!"),n&&n()}catch(X){console.error("Error posting comment:",X),D.error("Failed to post comment")}finally{f(!1)}}},F=async A=>{if(confirm("Delete this comment?"))try{const{error:X}=await L.from("comments").delete().eq("id",A).eq("user_id",p);if(X)throw X;await I(),D.success("Comment deleted"),n&&n()}catch(X){console.error("Error deleting comment:",X),D.error("Failed to delete comment")}},W=()=>{$.current&&(Q?$.current.pause():$.current.play().catch(A=>console.log("Play failed:",A)),H(!Q))};return!_&&c?s.jsx(Ct,{open:t&&!R,onOpenChange:r,children:s.jsx(bt,{className:"max-w-lg w-[95vw] h-[90vh] sm:max-h-[85vh] p-0 gap-0 overflow-hidden z-[9999] flex flex-col",children:s.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 sm:px-4 sm:py-3 space-y-2 sm:space-y-3 min-h-[100px] max-h-[35vh] sm:max-h-none",children:s.jsx("button",{onClick:r,className:"absolute top-2 right-2 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-10",children:s.jsx(At,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex-1 flex flex-col bg-white min-h-0",children:[s.jsxs("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0 space-y-2 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]}),s.jsx("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0",children:s.jsx(D4,{})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 sm:px-4 sm:py-3 space-y-3 min-h-[100px]",children:[s.jsx(ku,{}),s.jsx(ku,{}),s.jsx(ku,{})]}),s.jsx("div",{className:"border-t px-3 py-3 sm:px-4 sm:py-4 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2 animate-pulse",children:[s.jsx("div",{className:"flex-1 h-9 sm:h-10 bg-gray-200 rounded-lg"}),s.jsx("div",{className:"h-9 w-9 sm:h-10 sm:w-10 bg-gray-300 rounded-lg"})]})})]})]})})}):s.jsxs(s.Fragment,{children:[s.jsx(Ct,{open:t&&!R,onOpenChange:r,children:s.jsxs(bt,{className:`
          max-w-5xl 
          w-[calc(100vw-1rem)]
          sm:w-[95vw] 
          h-[calc(100vh-2rem)]
          sm:h-[85vh] 
          p-0 
          gap-0 
          overflow-hidden 
          z-[9999]
          mx-2
          sm:mx-auto
        `,children:[s.jsx("button",{onClick:r,className:"absolute top-2 right-2 sm:top-4 sm:right-4 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-50",children:s.jsx(At,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex flex-col sm:flex-row h-full overflow-hidden",children:[s.jsxs("div",{className:"w-full sm:w-1/2 flex flex-col bg-black sm:border-r border-gray-200",children:[s.jsxs("div",{className:"w-full h-[35vh] sm:h-[70%] bg-black flex items-center justify-center relative overflow-hidden flex-shrink-0",children:[(()=>{let A=[],X=[];if(_!=null&&_.image_url)try{const ee=JSON.parse(_.image_url);Array.isArray(ee)?ee.forEach(pe=>{A.push(pe),X.push("image")}):(A.push(ee),X.push("image"))}catch{A.push(_.image_url),X.push("image")}if(_!=null&&_.video_url)try{const ee=JSON.parse(_.video_url);Array.isArray(ee)?ee.forEach(pe=>{A.push(pe),X.push("video")}):(A.push(ee),X.push("video"))}catch{A.push(_.video_url),X.push("video")}if(A.length===0)return s.jsxs("div",{className:"text-white text-center",children:[s.jsx("p",{children:"No media available"}),s.jsxs("p",{className:"text-xs mt-2",children:["Post ID: ",e]})]});const J=A[oe],V=X[oe];return s.jsxs(s.Fragment,{children:[V==="video"?s.jsx("video",{src:J,controls:!0,playsInline:!0,className:"w-full h-full object-contain",preload:"metadata"},J):s.jsx("img",{src:M4(J),alt:_.title||"Post",className:"w-full h-full object-contain"},J),A.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>q(ee=>ee===0?A.length-1:ee-1),className:"absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-10",children:s.jsx(gc,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>q(ee=>ee===A.length-1?0:ee+1),className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-black/70 backdrop-blur-sm text-white rounded-full flex items-center justify-center hover:bg-black/90 z-10",children:s.jsx(xc,{className:"w-5 h-5"})}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:A.map((ee,pe)=>s.jsx("button",{onClick:()=>q(pe),className:`w-1.5 h-1.5 rounded-full transition-all ${pe===oe?"bg-white w-4":"bg-white/50"}`},pe))})]})]})})(),(_==null?void 0:_.spotify_preview_url)&&s.jsxs("div",{className:"absolute bottom-2 left-2 right-2 z-10",children:[s.jsxs("button",{onClick:W,className:"bg-black/70 hover:bg-black/90 backdrop-blur-sm text-white px-2 py-1.5 sm:px-3 sm:py-2 rounded-full shadow-lg transition-all flex items-center gap-2 w-full",children:[Q?s.jsx(jm,{className:"w-4 h-4 sm:w-5 sm:h-5"}):s.jsx(Nm,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsxs("div",{className:"text-left text-[10px] sm:text-xs flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold truncate",children:_.spotify_track_name}),s.jsx("div",{className:"text-white/80 truncate",children:_.spotify_artist_name})]})]}),s.jsx("audio",{ref:$,src:_.spotify_preview_url,onPlay:()=>H(!0),onPause:()=>H(!1),onEnded:()=>H(!1)})]})]}),s.jsx("div",{className:"flex-1 sm:flex-none sm:h-[30%] bg-white overflow-y-auto",children:s.jsxs("div",{className:"p-3 sm:p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:(_==null?void 0:_.title)||"Post"}),(_==null?void 0:_.caption)&&s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-0.5 line-clamp-2",children:_.caption})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(A=>s.jsx("span",{className:`text-sm sm:text-base ${A<=x?"opacity-100":"opacity-20 grayscale"}`,children:""},A))}),s.jsxs("span",{className:"text-xs sm:text-sm text-gray-600",children:[x>0?x.toFixed(1):"No ratings",j>0&&` (${j})`]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-medium",children:"Your rating:"}),s.jsx("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[1,2,3,4,5].map(A=>s.jsx("button",{type:"button",onClick:()=>T(A),onMouseEnter:()=>y(A),onMouseLeave:()=>y(0),className:"transition-transform active:scale-110 touch-manipulation p-1",children:s.jsx("span",{className:`text-base sm:text-lg ${A<=(w||b)?"opacity-100":"opacity-20 grayscale"}`,children:""})},A))})]})]}),((_==null?void 0:_.recipe_id)||(_==null?void 0:_.recipe_url))&&s.jsxs(te,{onClick:async()=>{if(_.recipe_id){const{getRecipeById:A}=await ko(async()=>{const{getRecipeById:J}=await Promise.resolve().then(()=>Wm);return{getRecipeById:J}},void 0),X=await A(_.recipe_id);X?(C(X),M(!0)):D.error("Recipe not found")}else _.recipe_url&&window.open(_.recipe_url,"_blank")},variant:"outline",size:"sm",className:"border-orange-600 text-orange-600 hover:bg-orange-50 w-full",children:[s.jsx(rd,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5"}),s.jsx("span",{className:"text-xs sm:text-sm",children:"View Recipe"})]})]})})]}),s.jsxs("div",{className:"w-full sm:w-1/2 flex flex-col bg-white min-h-0",children:[s.jsx("div",{className:"px-3 py-2 sm:px-4 sm:py-3 border-b flex-shrink-0",children:s.jsx("h3",{className:"font-bold text-sm sm:text-base",children:"Comments"})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 sm:px-4 sm:py-3 space-y-2 sm:space-y-3 min-h-0",children:c?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):o.length===0?s.jsx("div",{className:"text-center py-8 sm:py-12 text-gray-500 text-xs sm:text-sm",children:"No comments yet. Be the first to comment!"}):o.map(A=>{var X,J,V,ee,pe;return s.jsxs("div",{className:"flex gap-2 sm:gap-3 group",children:[(X=A.profiles)!=null&&X.avatar_url?s.jsx("img",{src:A.profiles.avatar_url,alt:A.profiles.username,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full object-cover flex-shrink-0"}):s.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white font-medium text-xs flex-shrink-0",children:(ee=(V=(J=A.profiles)==null?void 0:J.username)==null?void 0:V[0])==null?void 0:ee.toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"bg-gray-100 rounded-2xl px-3 py-2 relative",children:[s.jsx("button",{onClick:()=>{var de;return window.location.href=`/${((de=A.profiles)==null?void 0:de.username)||"user"}`},className:"font-semibold text-xs sm:text-sm hover:underline",children:(pe=A.profiles)==null?void 0:pe.username}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-700 break-words mt-0.5",children:A.text}),p===A.user_id&&s.jsx("button",{onClick:()=>F(A.id),className:"absolute top-1 right-1 p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity touch-manipulation",title:"Delete comment",children:s.jsx(At,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-400 mt-1 px-3",children:new Date(A.created_at).toLocaleDateString()})]})]},A.id)})}),s.jsx("form",{onSubmit:Z,className:"border-t px-3 py-3 sm:px-4 sm:py-4 bg-white flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ct,{value:i,onChange:A=>l(A.target.value),placeholder:"Add a comment...",disabled:h,className:"flex-1 text-xs sm:text-sm h-9 sm:h-10"}),s.jsx(te,{type:"submit",disabled:!i.trim()||h,size:"icon",className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 flex-shrink-0 h-9 w-9 sm:h-10 sm:w-10",children:s.jsx(Mo,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})})]})]})]})}),t&&R&&s.jsxs("button",{onClick:()=>M(!1),className:"fixed bottom-20 right-4 z-[99999] bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-4 py-3 rounded-full shadow-xl flex items-center gap-2 transition-all active:scale-95 touch-manipulation animate-bounce",style:{animationDuration:"2s",animationIterationCount:"3"},children:[s.jsx("span",{className:"text-sm sm:text-base",children:""}),s.jsx("span",{className:"text-sm font-medium",children:"Back to Comments"})]}),P&&s.jsx(Bm,{recipe:P,open:!!P,onOpenChange:A=>{A||(C(null),M(!1))}})]})}const $4=()=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden animate-pulse",children:[s.jsx("div",{className:"bg-gray-300 aspect-square w-full"}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsx("div",{className:"h-5 bg-gray-300 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsx("div",{className:"h-8 w-20 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-8 w-20 bg-gray-300 rounded-full"})]}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"})]})]})]});function Px({onNavigate:e}){const{state:t,dispatch:r}=Xs(),{isAdmin:n}=td(),[o,a]=u.useState(""),[i,l]=u.useState(null),[c,d]=u.useState(null),[h,f]=u.useState([]),[p,m]=u.useState(null),[b,g]=u.useState(window.innerWidth<768),[w,y]=u.useState(new Map),[x,v]=u.useState(!1);u.useEffect(()=>{const z=()=>g(window.innerWidth<768);return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),u.useEffect(()=>{const z=ie=>{m(ie.detail)};return window.addEventListener("open-shared-post",z),()=>{window.removeEventListener("open-shared-post",z)}},[]);const j=async z=>{var ie,O,he;try{console.log("[Discover] Batch loading social posts...");const ge=z.map(Pe=>Pe.id),{data:U}=await L.from("posts").select("*").in("recipe_id",ge),{data:re}=await L.from("public_recipes").select("id, video_url, image_url").in("id",ge).not("video_url","is",null),Y=(re==null?void 0:re.map(Pe=>Pe.video_url).filter(Boolean))||[],{data:Ne}=Y.length>0?await L.from("posts").select("*").in("recipe_url",Y):{data:[]},K=new Map,ce=new Map(z.map(Pe=>[Pe.id,Pe.imageUrl]));U==null||U.forEach(Pe=>{Pe.recipe_id&&(!Pe.image_url&&ce.has(Pe.recipe_id)&&(Pe.image_url=ce.get(Pe.recipe_id)),K.set(Pe.recipe_id,Pe))});const we=new Map((re==null?void 0:re.map(Pe=>[Pe.video_url,Pe.id]))||[]);Ne==null||Ne.forEach(Pe=>{const B=we.get(Pe.recipe_url);B&&!K.has(B)&&(!Pe.image_url&&ce.has(B)&&(Pe.image_url=ce.get(B)),K.set(B,Pe))});const Le=Array.from(K.values()).map(Pe=>Pe.id);if(Le.length>0){const[Pe,B,me]=await Promise.all([L.from("profiles").select("id, username, avatar_url").in("id",Array.from(K.values()).map(Fe=>Fe.user_id)),L.from("likes").select("post_id, user_id").in("post_id",Le),L.from("comments").select("post_id").in("post_id",Le)]),_e=new Map(((ie=Pe.data)==null?void 0:ie.map(Fe=>[Fe.id,Fe]))||[]),Oe=new Map;(O=B.data)==null||O.forEach(Fe=>{Oe.set(Fe.post_id,(Oe.get(Fe.post_id)||0)+1)});const ht=new Map;(he=me.data)==null||he.forEach(Fe=>{ht.set(Fe.post_id,(ht.get(Fe.post_id)||0)+1)});const Qt=new Map;K.forEach((Fe,Zt)=>{Qt.set(Zt,{...Fe,profiles:_e.get(Fe.user_id),_count:{likes:Oe.get(Fe.id)||0,comments:ht.get(Fe.id)||0}})}),y(Qt),console.log("[Discover]  Loaded",Qt.size,"social posts with images")}}catch(ge){console.error("[Discover] Failed to batch load social posts:",ge)}};u.useEffect(()=>{const z=async()=>{try{console.log("[Discover] Loading recipes from database...");const O=await Ab();console.log("[Discover] Loaded",O.length,"recipes from database"),f(O),await j(O)}catch(O){console.error("Failed to load recipes:",O),f([])}};z();const ie=()=>{document.visibilityState==="visible"&&z()};return document.addEventListener("visibilitychange",ie),()=>{document.removeEventListener("visibilitychange",ie)}},[]);const N=async z=>{try{await Ib(z),f(h.filter(ie=>ie.id!==z)),D.success("Recipe deleted successfully")}catch(ie){console.error("Failed to delete recipe:",ie),D.error("Failed to delete recipe")}},_=u.useMemo(()=>{const z=new Set(h.map(ie=>ie.cuisineType));return Array.from(z).sort()},[h]),k=u.useMemo(()=>h.filter(z=>{const ie=o===""||z.title.toLowerCase().includes(o.toLowerCase())||z.tags.some(he=>he.toLowerCase().includes(o.toLowerCase()))||z.ingredients.some(he=>he.name.toLowerCase().includes(o.toLowerCase())),O=!i||z.cuisineType===i;return ie&&O}),[o,i,h]),[P,C]=u.useState(!1),[R,M]=u.useState(!1),[$,Q]=u.useState(!1),[H,oe]=u.useState(!1),[q,G]=u.useState(!1),[I,S]=u.useState(!1),T=u.useMemo(()=>{const z=[...h].sort((ie,O)=>(O.popularity||0)-(ie.popularity||0));return P?z:z.slice(0,b?6:12)},[h,P,b]),Z=u.useMemo(()=>{const z=h.filter(ie=>ie.prepTime+ie.cookTime<=30&&ie.difficulty==="Easy");return R?z:z.slice(0,b?6:12)},[h,R,b]),F=u.useMemo(()=>{const z=h.filter(ie=>ie.dietaryTags.includes("Vegetarian")||ie.dietaryTags.includes("Vegan"));return $?z:z.slice(0,b?6:12)},[h,$,b]),W=u.useMemo(()=>{const z=["Thai","Japanese","Korean","Indian","Middle Eastern","Mexican","Vietnamese","Vegan/Vegetarian"],ie=h.filter(O=>z.includes(O.cuisineType));return H?ie:ie.slice(0,b?6:12)},[h,H,b]),A=u.useMemo(()=>{const z=h.filter(ie=>ie.cuisineType==="Pet Meals");return q?z:z.slice(0,b?6:12)},[h,q,b]),X=u.useMemo(()=>{const z=h.filter(ie=>ie.cuisineType==="Culinary/Baked Goods");return I?z:z.slice(0,b?6:12)},[h,I,b]),[J,V]=u.useState([]);u.useEffect(()=>{(()=>{const ie=Z2(h,t.savedRecipes,t.userPreferences,6);V(ie)})()},[h,t.savedRecipes,t.userPreferences,b]);const ee=u.useMemo(()=>ek(t.savedRecipes),[t.savedRecipes]),pe=z=>{const ie=h.find(O=>O.id===z);if(ie){const O=t.savedRecipes.some(he=>he.id===z);r(O?{type:"REMOVE_RECIPE",payload:z}:{type:"SAVE_RECIPE",payload:ie})}},de=z=>{const ie=h.find(O=>O.id===z);ie&&(console.log("Cook clicked for:",ie.title),d(ie))},fe=({title:z,subtitle:ie,icon:O,recipes:he,showAll:ge,onToggle:U,allCount:re,buttonColor:Y})=>s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:`bg-gradient-to-r ${Y} p-2 rounded-lg`,children:s.jsx(O,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:z}),s.jsx("p",{className:"text-sm md:text-base text-gray-600",children:ie})]})]}),s.jsx("div",{className:`grid gap-4 md:gap-6 auto-rows-fr ${b?"grid-cols-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:he.map(Ne=>s.jsx(Hh,{recipe:Ne,onSave:pe,onCook:de,onDelete:N,isAdmin:n,showReviewButton:!0,preloadedSocialPost:w.get(Ne.id)||null},Ne.id))}),re>(b?6:12)&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(te,{onClick:()=>U(!ge),variant:"outline",size:"lg",className:"text-sm md:text-base",children:ge?"Show Less":"Show More"})})]});return h.length===0&&!o&&!i?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("div",{className:"h-12 bg-gray-300 rounded-xl w-96 mx-auto mb-4 animate-pulse"}),s.jsx("div",{className:"h-6 bg-gray-300 rounded-lg w-80 mx-auto animate-pulse"})]}),s.jsx("div",{className:"mb-12",children:s.jsx("div",{className:"h-14 bg-gray-200 rounded-2xl w-full max-w-2xl mx-auto animate-pulse"})}),s.jsx("div",{className:"space-y-16",children:[...Array(6)].map((z,ie)=>s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"w-14 h-14 bg-gray-300 rounded-xl animate-pulse"}),s.jsxs("div",{children:[s.jsx("div",{className:"h-9 bg-gray-300 rounded-lg w-72 animate-pulse"}),s.jsx("div",{className:"h-6 bg-gray-300 rounded-lg w-56 mt-3 animate-pulse"})]})]}),s.jsx("div",{className:`grid gap-6 ${b?"grid-cols-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"} auto-rows-fr`,children:[...Array(b?4:8)].map((O,he)=>s.jsx($4,{},he))})]},ie))})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[s.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-3 md:mb-4",children:"Discover Amazing Recipes"}),s.jsxs("p",{className:"text-sm md:text-base text-gray-600 max-w-2xl mx-auto mb-2",children:["Recipes scraped from ",s.jsx("span",{className:"font-semibold text-blue-600",children:"social media"})," and the ",s.jsx("span",{className:"font-semibold text-blue-600",children:"web"})]}),s.jsx("p",{className:"text-xs md:text-sm text-gray-500 max-w-2xl mx-auto",children:"Meal Calendar  Shopping List  Social Community"})]}),s.jsxs("div",{className:"mb-8 md:mb-12 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Tw,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(ct,{type:"text",placeholder:"Search recipes, ingredients...",value:o,onChange:z=>a(z.target.value),className:"pl-12 h-12 md:h-14 text-base border-gray-300 focus:border-orange-500 focus:ring-orange-500 shadow-sm"})]}),b?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>v(!x),className:"w-full flex items-center justify-between px-4 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx("span",{className:"font-medium text-gray-900",children:i?`Cuisine: ${i}`:"Filter by Cuisine"}),x?s.jsx(At,{className:"w-5 h-5"}):s.jsx(wm,{className:"w-5 h-5"})]}),x&&s.jsxs("div",{className:"space-y-2 bg-white border border-gray-200 rounded-lg p-3",children:[s.jsx(te,{variant:i===null?"default":"outline",onClick:()=>{l(null),v(!1)},size:"sm",className:`w-full justify-start ${i===null?"bg-orange-500 hover:bg-orange-600":""}`,children:"All Cuisines"}),_.map(z=>s.jsx(te,{variant:i===z?"default":"outline",onClick:()=>{l(z),v(!1)},size:"sm",className:`w-full justify-start text-sm ${i===z?"bg-orange-500 hover:bg-orange-600":""}`,children:z},z))]})]}):s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[s.jsx(te,{variant:i===null?"default":"outline",onClick:()=>l(null),size:"sm",className:i===null?"bg-orange-500 hover:bg-orange-600":"",children:"All Cuisines"}),_.map(z=>s.jsx(te,{variant:i===z?"default":"outline",onClick:()=>l(z),size:"sm",className:i===z?"bg-orange-500 hover:bg-orange-600":"",children:z},z))]})]}),o===""&&i===null?s.jsxs("div",{className:"space-y-12 md:space-y-16",children:[s.jsx(fe,{title:"Trending Now",subtitle:"Most popular recipes this week",icon:GE,recipes:T,showAll:P,onToggle:C,allCount:h.length,buttonColor:"from-orange-500 to-rose-500"}),s.jsx(fe,{title:"Quick & Easy",subtitle:"Delicious meals ready in 30 minutes or less",icon:eR,recipes:Z,showAll:R,onToggle:M,allCount:h.filter(z=>z.prepTime+z.cookTime<=30&&z.difficulty==="Easy").length,buttonColor:"from-emerald-500 to-teal-500"}),s.jsx(fe,{title:"Healthy Options",subtitle:"Vegetarian and vegan recipes for a lighter meal",icon:UE,recipes:F,showAll:$,onToggle:Q,allCount:h.filter(z=>z.dietaryTags.includes("Vegetarian")||z.dietaryTags.includes("Vegan")).length,buttonColor:"from-green-500 to-emerald-500"}),s.jsx(fe,{title:"International Flavors",subtitle:"Explore cuisines from around the world",icon:Ew,recipes:W,showAll:H,onToggle:oe,allCount:h.filter(z=>["Thai","Japanese","Korean","Indian","Middle Eastern","Mexican","Vietnamese"].includes(z.cuisineType)).length,buttonColor:"from-amber-500 to-orange-500"}),A.length>0&&s.jsx(fe,{title:"Pet Meals & Treats",subtitle:"Homemade recipes for your furry friends",icon:ym,recipes:A,showAll:q,onToggle:G,allCount:h.filter(z=>z.cuisineType==="Pet Meals").length,buttonColor:"from-pink-500 to-rose-500"}),X.length>0&&s.jsx(fe,{title:"Culinary & Baked Goods",subtitle:"From artisan breads to elegant pastries",icon:PE,recipes:X,showAll:I,onToggle:S,allCount:h.filter(z=>z.cuisineType==="Culinary/Baked Goods").length,buttonColor:"from-amber-500 to-orange-500"}),s.jsx(fe,{title:"Recommended for You",subtitle:ee,icon:KE,recipes:J,showAll:!1,onToggle:()=>{},allCount:J.length,buttonColor:"from-blue-500 to-cyan-500"})]}):s.jsxs("section",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search Results"}),s.jsxs("p",{className:"text-gray-600",children:["Found ",k.length," recipe",k.length!==1?"s":""]})]}),k.length>0?s.jsx("div",{className:`grid gap-4 md:gap-6 auto-rows-fr ${b?"grid-cols-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"}`,children:k.map(z=>s.jsx(Hh,{recipe:z,onSave:pe,onCook:de,onDelete:N,isAdmin:n,showReviewButton:!0,preloadedSocialPost:w.get(z.id)||null},z.id))}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-lg text-gray-500",children:"No recipes found. Try adjusting your search."})})]})]}),c&&s.jsx(zm,{recipe:c,onClose:()=>d(null)}),p&&s.jsx(fd,{postId:p,isOpen:!!p,onClose:()=>m(null),onCommentPosted:()=>{}})]})}function L4(e){if(!e)return[];const t=/#(\w+)/g,r=e.match(t);return r?r.map(n=>n.slice(1).toLowerCase()).filter((n,o,a)=>a.indexOf(n)===o):[]}function U4(e,t){return e&&e.split(/(\s+)/g).map((n,o)=>{if(n.startsWith("#")){const a=n.slice(1);return se.createElement("span",{key:o,onClick:i=>{i.stopPropagation(),t(a)},className:"text-blue-600 hover:text-blue-700 cursor-pointer font-semibold"},n)}return n.startsWith("http://")||n.startsWith("https://")?se.createElement("a",{key:o,href:n,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"text-blue-600 hover:underline"},n):se.createElement("span",{key:o},n)})}function F4({userId:e,currentUserId:t,posts:r,isFollowing:n,onBack:o,onToggleFollow:a,onMessage:i,onRefresh:l}){var G,I;const c=r.filter(S=>S.user_id===e),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(new Set),[g,w]=u.useState(0),[y,x]=u.useState(0),[v,j]=u.useState(!1),[N,_]=u.useState(!1),[k,P]=u.useState([]),[C,R]=u.useState([]),[M,$]=u.useState(null);u.useEffect(()=>{const S=async()=>{const{data:F}=await L.from("profiles").select("username, avatar_url, bio, banner_url").eq("id",e).maybeSingle();F&&h(F)},T=async()=>{const{count:F}=await L.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",e),{count:W}=await L.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",e);w(F||0),x(W||0)},Z=async()=>{if(!t)return;const{data:F}=await L.from("likes").select("post_id").eq("user_id",t).in("post_id",c.map(W=>W.id));F&&b(new Set(F.map(W=>W.post_id)))};S(),T(),Z()},[e,t,c.length]);const Q=async()=>{const{data:S}=await L.from("follows").select("follower_id, profiles:follower_id(id, username, avatar_url)").eq("following_id",e);P(S||[]),j(!0)},H=async()=>{const{data:S}=await L.from("follows").select("following_id, profiles:following_id(id, username, avatar_url)").eq("follower_id",e);R(S||[]),_(!0)},oe=async S=>{if(!t)return;const{error:T}=await L.from("comments").delete().eq("id",S).eq("user_id",t);T?D.error("Failed to delete comment"):(D.success("Comment deleted"),l&&l())},q=async S=>{if(!t)return;const T=m.has(S);try{if(T)await L.from("likes").delete().match({post_id:S,user_id:t}),b(Z=>{const F=new Set(Z);return F.delete(S),F});else{await L.from("likes").insert({post_id:S,user_id:t});const Z=c.find(F=>F.id===S);Z&&Z.user_id!==t&&await L.from("notifications").insert({user_id:Z.user_id,actor_id:t,type:"like",post_id:S}),b(F=>new Set(F).add(S))}}catch(Z){console.error("Error toggling like:",Z),D.error("Failed to update like")}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3 shadow-sm",children:s.jsxs(te,{onClick:o,variant:"ghost",className:"min-h-[44px] gap-2 touch-manipulation active:scale-95 transition-all",children:[s.jsx(Yo,{className:"w-5 h-5"}),"Back to Feed"]})}),s.jsxs("div",{className:"bg-white border-b border-gray-200",children:[s.jsx("div",{className:"relative h-32",children:d!=null&&d.banner_url?s.jsx("img",{src:d.banner_url,alt:"Banner",className:"w-full h-full object-cover",loading:"lazy"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-100 to-amber-100"})}),s.jsxs("div",{className:"relative px-4 pb-3",children:[s.jsxs("div",{className:"flex items-start gap-3 -mt-10",children:[s.jsx("div",{className:"relative flex-shrink-0",children:d!=null&&d.avatar_url?s.jsx("img",{src:d.avatar_url,alt:d.username,className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white text-2xl font-bold border-4 border-white shadow-lg",children:(I=(G=d==null?void 0:d.username)==null?void 0:G[0])==null?void 0:I.toUpperCase()})}),s.jsx("div",{className:"flex-1 pt-10 min-w-0",children:d!=null&&d.bio?s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 break-words",children:d.bio}):s.jsx("p",{className:"text-sm text-gray-400 italic",children:"No bio"})})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 truncate",children:(d==null?void 0:d.username)||"Loading..."}),e==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&s.jsx(Ka,{className:"w-5 h-5 text-yellow-500 fill-yellow-500 flex-shrink-0"})]}),e!==t&&s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsxs(te,{onClick:()=>{i&&d&&i(e,d.username)},variant:"outline",size:"sm",className:"flex-1 min-h-[44px] touch-manipulation active:scale-95 transition-all",children:[s.jsx(Mo,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Message"})]}),s.jsx(te,{onClick:()=>a(e),variant:n?"outline":"default",size:"sm",className:`flex-1 min-h-[44px] touch-manipulation active:scale-95 transition-all ${n?"":"bg-orange-500 hover:bg-orange-600"}`,children:n?s.jsxs(s.Fragment,{children:[s.jsx(JE,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Supporting"})]}):s.jsxs(s.Fragment,{children:[s.jsx(XE,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Support"})]})})]})]}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-center gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-base font-bold",children:c.length}),s.jsx("div",{className:"text-xs text-gray-500",children:"posts"})]}),s.jsxs("button",{onClick:Q,className:"text-center hover:bg-gray-50 px-3 py-1 rounded-lg transition-colors min-h-[44px] touch-manipulation active:scale-95",children:[s.jsx("div",{className:"text-base font-bold",children:g}),s.jsx("div",{className:"text-xs text-gray-500",children:"supporters"})]}),s.jsxs("button",{onClick:H,className:"text-center hover:bg-gray-50 px-3 py-1 rounded-lg transition-colors min-h-[44px] touch-manipulation active:scale-95",children:[s.jsx("div",{className:"text-base font-bold",children:y}),s.jsx("div",{className:"text-xs text-gray-500",children:"supporting"})]})]})})]}),s.jsx("div",{className:"p-4",children:c.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No posts yet"}):s.jsx("div",{className:"space-y-4",children:c.map(S=>{var Z,F,W;const T=m.has(S.id);return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"relative",children:[S.image_url?s.jsx("img",{src:S.image_url,alt:S.title||"Post",className:"w-full aspect-square object-cover",loading:"lazy"}):S.video_url?s.jsx("video",{src:S.video_url,controls:!0,className:"w-full aspect-square object-cover"}):null,S.title&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-3 py-2",children:s.jsx("h3",{className:"text-white text-sm font-semibold line-clamp-2",children:S.title})})]}),s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex gap-4 mb-2",children:[s.jsx("button",{onClick:()=>q(S.id),className:"transition-transform hover:scale-110 active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center -ml-2 touch-manipulation",children:s.jsx(ym,{className:`w-6 h-6 ${T?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx("button",{onClick:()=>p(S.id),className:"transition-transform hover:scale-110 active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center -ml-2 touch-manipulation",children:s.jsx(bm,{className:"w-6 h-6 text-gray-600"})})]}),s.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[((Z=S._count)==null?void 0:Z.likes)||0," ",((F=S._count)==null?void 0:F.likes)===1?"like":"likes"]}),S.caption&&s.jsx("p",{className:"text-sm leading-relaxed break-words",children:S.caption}),S.latest_comment&&s.jsxs("div",{className:"mt-3 relative",onTouchStart:()=>{var A;return((A=S.latest_comment)==null?void 0:A.user_id)===t&&$(S.latest_comment.id)},onTouchEnd:()=>setTimeout(()=>$(null),3e3),children:[s.jsxs("div",{className:"flex items-start gap-2 pr-10",children:[s.jsx("span",{className:"font-semibold text-sm flex-shrink-0",children:(W=S.latest_comment.profiles)==null?void 0:W.username}),s.jsx("span",{className:"text-sm text-gray-700 break-words",children:S.latest_comment.text})]}),S.latest_comment.user_id===t&&M===S.latest_comment.id&&s.jsx("button",{onClick:A=>{A.stopPropagation(),oe(S.latest_comment.id)},className:"absolute top-0 right-0 w-10 h-10 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 active:scale-90 z-10 touch-manipulation",title:"Delete comment",children:s.jsx(nr,{className:"w-4 h-4"})})]}),S._count&&S._count.comments>0&&s.jsxs("button",{onClick:()=>p(S.id),className:"text-sm text-gray-500 mt-2 hover:text-gray-700 block min-h-[36px] touch-manipulation",children:["View all ",S._count.comments," ",S._count.comments===1?"comment":"comments"]})]})]},S.id)})})}),f&&(()=>{const S=c.find(Z=>Z.id===f),T=S&&t&&t===S.user_id;return S?s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[s.jsx(fd,{postId:f,isOpen:!0,onClose:()=>p(null)}),s.jsx("button",{onClick:()=>p(null),className:"absolute top-3 left-3 bg-black/50 backdrop-blur-md text-white p-2.5 rounded-full shadow hover:bg-black/70 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Close",children:s.jsx(Yo,{className:"w-5 h-5"})}),T&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{const Z=prompt("Edit your caption:");Z&&L.from("posts").update({caption:Z}).eq("id",f).eq("user_id",t).then(({error:F})=>{F?D.error("Failed to update post"):(D.success("Post updated"),l&&l())})},className:"absolute top-3 right-14 bg-blue-600 text-white p-2.5 rounded-full shadow hover:bg-blue-700 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Edit post",children:""}),s.jsx("button",{onClick:async()=>{if(!confirm("Delete this post?"))return;const{error:Z}=await L.from("posts").delete().eq("id",f).eq("user_id",t);Z?D.error("Failed to delete post"):(D.success("Post deleted"),p(null),l&&l())},className:"absolute top-3 right-3 bg-red-600 text-white p-2.5 rounded-full shadow hover:bg-red-700 z-[100] min-h-[44px] min-w-[44px] touch-manipulation active:scale-95",title:"Delete post",children:s.jsx(nr,{className:"w-5 h-5"})})]})]})}):null})(),s.jsx(Ct,{open:v,onOpenChange:j,children:s.jsxs(bt,{className:"max-w-sm",style:{pointerEvents:"auto"},onPointerDown:S=>S.stopPropagation(),children:[s.jsx(Wt,{children:s.jsx($t,{children:"Supporters"})}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",style:{pointerEvents:"auto"},children:k.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No supporters yet"}):k.map(S=>{var F,W,A;const T=(F=S.profiles)==null?void 0:F.username,Z=(W=S.profiles)==null?void 0:W.avatar_url;return s.jsxs("div",{onPointerDown:X=>{X.stopPropagation(),console.log("CLICK DETECTED - Supporter:",T),j(!1),window.location.href=`/${T}`},className:"flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors select-none",style:{pointerEvents:"auto",touchAction:"manipulation",userSelect:"none"},children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold flex-shrink-0 overflow-hidden pointer-events-none",children:Z?s.jsx("img",{src:Z,alt:T,className:"w-full h-full object-cover pointer-events-none",draggable:!1}):((A=T==null?void 0:T[0])==null?void 0:A.toUpperCase())||s.jsx(Xo,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-medium truncate pointer-events-none",children:T||"User"})]},S.follower_id)})})]})}),s.jsx(Ct,{open:N,onOpenChange:_,children:s.jsxs(bt,{className:"max-w-sm",style:{pointerEvents:"auto"},onPointerDown:S=>S.stopPropagation(),children:[s.jsx(Wt,{children:s.jsx($t,{children:"Supporting"})}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",style:{pointerEvents:"auto"},children:C.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Not supporting anyone yet"}):C.map(S=>{var F,W,A;const T=(F=S.profiles)==null?void 0:F.username,Z=(W=S.profiles)==null?void 0:W.avatar_url;return s.jsxs("div",{onPointerDown:X=>{X.stopPropagation(),console.log("CLICK DETECTED - Following:",T),_(!1),window.location.href=`/${T}`},className:"flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors select-none",style:{pointerEvents:"auto",touchAction:"manipulation",userSelect:"none"},children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold flex-shrink-0 overflow-hidden pointer-events-none",children:Z?s.jsx("img",{src:Z,alt:T,className:"w-full h-full object-cover pointer-events-none",draggable:!1}):((A=T==null?void 0:T[0])==null?void 0:A.toUpperCase())||s.jsx(Xo,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-medium truncate pointer-events-none",children:T||"User"})]},S.following_id)})})]})})]})}function Tx(e){const t=z4(e),r=u.forwardRef((n,o)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(V4);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function z4(e){const t=u.forwardRef((r,n)=>{const{children:o,...a}=r;if(u.isValidElement(o)){const i=q4(o),l=W4(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B4=Symbol("radix.slottable");function V4(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B4}function W4(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function q4(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Di(e){const t=e+"CollectionProvider",[r,n]=ir(t),[o,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:y}=g,x=se.useRef(null),v=se.useRef(new Map).current;return s.jsx(o,{scope:w,itemMap:v,collectionRef:x,children:y})};i.displayName=t;const l=e+"CollectionSlot",c=Tx(l),d=se.forwardRef((g,w)=>{const{scope:y,children:x}=g,v=a(l,y),j=$e(w,v.collectionRef);return s.jsx(c,{ref:j,children:x})});d.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",p=Tx(h),m=se.forwardRef((g,w)=>{const{scope:y,children:x,...v}=g,j=se.useRef(null),N=$e(w,j),_=a(h,y);return se.useEffect(()=>(_.itemMap.set(j,{ref:j,...v}),()=>void _.itemMap.delete(j))),s.jsx(p,{[f]:"",ref:N,children:x})});m.displayName=h;function b(g){const w=a(e+"CollectionConsumer",g);return se.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const v=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((_,k)=>v.indexOf(_.ref.current)-v.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},b,n]}var H4=u.createContext(void 0);function ia(e){const t=u.useContext(H4);return e||t||"ltr"}const K4=["top","right","bottom","left"],us=Math.min,dr=Math.max,Nc=Math.round,wl=Math.floor,fn=e=>({x:e,y:e}),G4={left:"right",right:"left",bottom:"top",top:"bottom"},Y4={start:"end",end:"start"};function Kh(e,t,r){return dr(e,us(t,r))}function In(e,t){return typeof e=="function"?e(t):e}function On(e){return e.split("-")[0]}function la(e){return e.split("-")[1]}function qm(e){return e==="x"?"y":"x"}function Hm(e){return e==="y"?"height":"width"}const J4=new Set(["top","bottom"]);function cn(e){return J4.has(On(e))?"y":"x"}function Km(e){return qm(cn(e))}function X4(e,t,r){r===void 0&&(r=!1);const n=la(e),o=Km(e),a=Hm(o);let i=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=_c(i)),[i,_c(i)]}function Q4(e){const t=_c(e);return[Gh(e),t,Gh(t)]}function Gh(e){return e.replace(/start|end/g,t=>Y4[t])}const Ax=["left","right"],Ix=["right","left"],Z4=["top","bottom"],eT=["bottom","top"];function tT(e,t,r){switch(e){case"top":case"bottom":return r?t?Ix:Ax:t?Ax:Ix;case"left":case"right":return t?Z4:eT;default:return[]}}function rT(e,t,r,n){const o=la(e);let a=tT(On(e),r==="start",n);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Gh)))),a}function _c(e){return e.replace(/left|right|bottom|top/g,t=>G4[t])}function nT(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ob(e){return typeof e!="number"?nT(e):{top:e,right:e,bottom:e,left:e}}function Sc(e){const{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function Ox(e,t,r){let{reference:n,floating:o}=e;const a=cn(t),i=Km(t),l=Hm(i),c=On(t),d=a==="y",h=n.x+n.width/2-o.width/2,f=n.y+n.height/2-o.height/2,p=n[l]/2-o[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-o.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-o.width,y:f};break;default:m={x:n.x,y:n.y}}switch(la(t)){case"start":m[i]-=p*(r&&d?-1:1);break;case"end":m[i]+=p*(r&&d?-1:1);break}return m}const sT=async(e,t,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:h,y:f}=Ox(d,n,c),p=n,m={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:y}=l[g],{x,y:v,data:j,reset:N}=await y({x:h,y:f,initialPlacement:n,placement:p,strategy:o,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});h=x??h,f=v??f,m={...m,[w]:{...m[w],...j}},N&&b<=50&&(b++,typeof N=="object"&&(N.placement&&(p=N.placement),N.rects&&(d=N.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):N.rects),{x:h,y:f}=Ox(d,p,c)),g=-1)}return{x:h,y:f,placement:p,strategy:o,middlewareData:m}};async function gi(e,t){var r;t===void 0&&(t={});const{x:n,y:o,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=In(t,e),b=Ob(m),w=l[p?f==="floating"?"reference":"floating":f],y=Sc(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(w)))==null||r?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),x=f==="floating"?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},N=Sc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:v,strategy:c}):x);return{top:(y.top-N.top+b.top)/j.y,bottom:(N.bottom-y.bottom+b.bottom)/j.y,left:(y.left-N.left+b.left)/j.x,right:(N.right-y.right+b.right)/j.x}}const oT=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:o,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=In(e,t)||{};if(d==null)return{};const f=Ob(h),p={x:r,y:n},m=Km(o),b=Hm(m),g=await i.getDimensions(d),w=m==="y",y=w?"top":"left",x=w?"bottom":"right",v=w?"clientHeight":"clientWidth",j=a.reference[b]+a.reference[m]-p[m]-a.floating[b],N=p[m]-a.reference[m],_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let k=_?_[v]:0;(!k||!await(i.isElement==null?void 0:i.isElement(_)))&&(k=l.floating[v]||a.floating[b]);const P=j/2-N/2,C=k/2-g[b]/2-1,R=us(f[y],C),M=us(f[x],C),$=R,Q=k-g[b]-M,H=k/2-g[b]/2+P,oe=Kh($,H,Q),q=!c.arrow&&la(o)!=null&&H!==oe&&a.reference[b]/2-(H<$?R:M)-g[b]/2<0,G=q?H<$?H-$:H-Q:0;return{[m]:p[m]+G,data:{[m]:oe,centerOffset:H-oe-G,...q&&{alignmentOffset:G}},reset:q}}}),aT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:o,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=In(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const y=On(o),x=cn(l),v=On(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=p||(v||!g?[_c(l)]:Q4(l)),_=b!=="none";!p&&_&&N.push(...rT(l,g,b,j));const k=[l,...N],P=await gi(t,w),C=[];let R=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&C.push(P[y]),f){const H=X4(o,i,j);C.push(P[H[0]],P[H[1]])}if(R=[...R,{placement:o,overflows:C}],!C.every(H=>H<=0)){var M,$;const H=(((M=a.flip)==null?void 0:M.index)||0)+1,oe=k[H];if(oe&&(!(f==="alignment"?x!==cn(oe):!1)||R.every(I=>cn(I.placement)===x?I.overflows[0]>0:!0)))return{data:{index:H,overflows:R},reset:{placement:oe}};let q=($=R.filter(G=>G.overflows[0]<=0).sort((G,I)=>G.overflows[1]-I.overflows[1])[0])==null?void 0:$.placement;if(!q)switch(m){case"bestFit":{var Q;const G=(Q=R.filter(I=>{if(_){const S=cn(I.placement);return S===x||S==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(S=>S>0).reduce((S,T)=>S+T,0)]).sort((I,S)=>I[1]-S[1])[0])==null?void 0:Q[0];G&&(q=G);break}case"initialPlacement":q=l;break}if(o!==q)return{reset:{placement:q}}}return{}}}};function Mx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Dx(e){return K4.some(t=>e[t]>=0)}const iT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...o}=In(e,t);switch(n){case"referenceHidden":{const a=await gi(t,{...o,elementContext:"reference"}),i=Mx(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Dx(i)}}}case"escaped":{const a=await gi(t,{...o,altBoundary:!0}),i=Mx(a,r.floating);return{data:{escapedOffsets:i,escaped:Dx(i)}}}default:return{}}}}},Mb=new Set(["left","top"]);async function lT(e,t){const{placement:r,platform:n,elements:o}=e,a=await(n.isRTL==null?void 0:n.isRTL(o.floating)),i=On(r),l=la(r),c=cn(r)==="y",d=Mb.has(i)?-1:1,h=a&&c?-1:1,f=In(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*h,y:p*d}:{x:p*d,y:m*h}}const cT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:o,y:a,placement:i,middlewareData:l}=t,c=await lT(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},dT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:y,y:x}=w;return{x:y,y:x}}},...c}=In(e,t),d={x:r,y:n},h=await gi(t,c),f=cn(On(o)),p=qm(f);let m=d[p],b=d[f];if(a){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",x=m+h[w],v=m-h[y];m=Kh(x,m,v)}if(i){const w=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=b+h[w],v=b-h[y];b=Kh(x,b,v)}const g=l.fn({...t,[p]:m,[f]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[p]:a,[f]:i}}}}}},uT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:o,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=In(e,t),h={x:r,y:n},f=cn(o),p=qm(f);let m=h[p],b=h[f];const g=In(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const v=p==="y"?"height":"width",j=a.reference[p]-a.floating[v]+w.mainAxis,N=a.reference[p]+a.reference[v]-w.mainAxis;m<j?m=j:m>N&&(m=N)}if(d){var y,x;const v=p==="y"?"width":"height",j=Mb.has(On(o)),N=a.reference[f]-a.floating[v]+(j&&((y=i.offset)==null?void 0:y[f])||0)+(j?0:w.crossAxis),_=a.reference[f]+a.reference[v]+(j?0:((x=i.offset)==null?void 0:x[f])||0)-(j?w.crossAxis:0);b<N?b=N:b>_&&(b=_)}return{[p]:m,[f]:b}}}},hT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:o,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...d}=In(e,t),h=await gi(t,d),f=On(o),p=la(o),m=cn(o)==="y",{width:b,height:g}=a.floating;let w,y;f==="top"||f==="bottom"?(w=f,y=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,w=p==="end"?"top":"bottom");const x=g-h.top-h.bottom,v=b-h.left-h.right,j=us(g-h[w],x),N=us(b-h[y],v),_=!t.middlewareData.shift;let k=j,P=N;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=x),_&&!p){const R=dr(h.left,0),M=dr(h.right,0),$=dr(h.top,0),Q=dr(h.bottom,0);m?P=b-2*(R!==0||M!==0?R+M:dr(h.left,h.right)):k=g-2*($!==0||Q!==0?$+Q:dr(h.top,h.bottom))}await c({...t,availableWidth:P,availableHeight:k});const C=await i.getDimensions(l.floating);return b!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function md(){return typeof window<"u"}function ca(e){return Db(e)?(e.nodeName||"").toLowerCase():"#document"}function gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xn(e){var t;return(t=(Db(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Db(e){return md()?e instanceof Node||e instanceof gr(e).Node:!1}function Zr(e){return md()?e instanceof Element||e instanceof gr(e).Element:!1}function gn(e){return md()?e instanceof HTMLElement||e instanceof gr(e).HTMLElement:!1}function $x(e){return!md()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gr(e).ShadowRoot}const fT=new Set(["inline","contents"]);function $i(e){const{overflow:t,overflowX:r,overflowY:n,display:o}=en(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!fT.has(o)}const mT=new Set(["table","td","th"]);function pT(e){return mT.has(ca(e))}const gT=[":popover-open",":modal"];function pd(e){return gT.some(t=>{try{return e.matches(t)}catch{return!1}})}const xT=["transform","translate","scale","rotate","perspective"],vT=["transform","translate","scale","rotate","perspective","filter"],yT=["paint","layout","strict","content"];function Gm(e){const t=Ym(),r=Zr(e)?en(e):e;return xT.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||vT.some(n=>(r.willChange||"").includes(n))||yT.some(n=>(r.contain||"").includes(n))}function wT(e){let t=hs(e);for(;gn(t)&&!Qo(t);){if(Gm(t))return t;if(pd(t))return null;t=hs(t)}return null}function Ym(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bT=new Set(["html","body","#document"]);function Qo(e){return bT.has(ca(e))}function en(e){return gr(e).getComputedStyle(e)}function gd(e){return Zr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hs(e){if(ca(e)==="html")return e;const t=e.assignedSlot||e.parentNode||$x(e)&&e.host||xn(e);return $x(t)?t.host:t}function $b(e){const t=hs(e);return Qo(t)?e.ownerDocument?e.ownerDocument.body:e.body:gn(t)&&$i(t)?t:$b(t)}function xi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=$b(e),a=o===((n=e.ownerDocument)==null?void 0:n.body),i=gr(o);if(a){const l=Yh(i);return t.concat(i,i.visualViewport||[],$i(o)?o:[],l&&r?xi(l):[])}return t.concat(o,xi(o,[],r))}function Yh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Lb(e){const t=en(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=gn(e),a=o?e.offsetWidth:r,i=o?e.offsetHeight:n,l=Nc(r)!==a||Nc(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function Jm(e){return Zr(e)?e:e.contextElement}function Lo(e){const t=Jm(e);if(!gn(t))return fn(1);const r=t.getBoundingClientRect(),{width:n,height:o,$:a}=Lb(t);let i=(a?Nc(r.width):r.width)/n,l=(a?Nc(r.height):r.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const jT=fn(0);function Ub(e){const t=gr(e);return!Ym()||!t.visualViewport?jT:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function NT(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==gr(e)?!1:t}function qs(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=e.getBoundingClientRect(),a=Jm(e);let i=fn(1);t&&(n?Zr(n)&&(i=Lo(n)):i=Lo(e));const l=NT(a,r,n)?Ub(a):fn(0);let c=(o.left+l.x)/i.x,d=(o.top+l.y)/i.y,h=o.width/i.x,f=o.height/i.y;if(a){const p=gr(a),m=n&&Zr(n)?gr(n):n;let b=p,g=Yh(b);for(;g&&n&&m!==b;){const w=Lo(g),y=g.getBoundingClientRect(),x=en(g),v=y.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,j=y.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=v,d+=j,b=gr(g),g=Yh(b)}}return Sc({width:h,height:f,x:c,y:d})}function xd(e,t){const r=gd(e).scrollLeft;return t?t.left+r:qs(xn(e)).left+r}function Fb(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-xd(e,r),o=r.top+t.scrollTop;return{x:n,y:o}}function _T(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e;const a=o==="fixed",i=xn(n),l=t?pd(t.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=fn(1);const h=fn(0),f=gn(n);if((f||!f&&!a)&&((ca(n)!=="body"||$i(i))&&(c=gd(n)),gn(n))){const m=qs(n);d=Lo(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const p=i&&!f&&!a?Fb(i,c):fn(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:r.y*d.y-c.scrollTop*d.y+h.y+p.y}}function ST(e){return Array.from(e.getClientRects())}function kT(e){const t=xn(e),r=gd(e),n=e.ownerDocument.body,o=dr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=dr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+xd(e);const l=-r.scrollTop;return en(n).direction==="rtl"&&(i+=dr(t.clientWidth,n.clientWidth)-o),{width:o,height:a,x:i,y:l}}const Lx=25;function CT(e,t){const r=gr(e),n=xn(e),o=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(o){a=o.width,i=o.height;const h=Ym();(!h||h&&t==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}const d=xd(n);if(d<=0){const h=n.ownerDocument,f=h.body,p=getComputedStyle(f),m=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,b=Math.abs(n.clientWidth-f.clientWidth-m);b<=Lx&&(a-=b)}else d<=Lx&&(a+=d);return{width:a,height:i,x:l,y:c}}const ET=new Set(["absolute","fixed"]);function RT(e,t){const r=qs(e,!0,t==="fixed"),n=r.top+e.clientTop,o=r.left+e.clientLeft,a=gn(e)?Lo(e):fn(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=o*a.x,d=n*a.y;return{width:i,height:l,x:c,y:d}}function Ux(e,t,r){let n;if(t==="viewport")n=CT(e,r);else if(t==="document")n=kT(xn(e));else if(Zr(t))n=RT(t,r);else{const o=Ub(e);n={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Sc(n)}function zb(e,t){const r=hs(e);return r===t||!Zr(r)||Qo(r)?!1:en(r).position==="fixed"||zb(r,t)}function PT(e,t){const r=t.get(e);if(r)return r;let n=xi(e,[],!1).filter(l=>Zr(l)&&ca(l)!=="body"),o=null;const a=en(e).position==="fixed";let i=a?hs(e):e;for(;Zr(i)&&!Qo(i);){const l=en(i),c=Gm(i);!c&&l.position==="fixed"&&(o=null),(a?!c&&!o:!c&&l.position==="static"&&!!o&&ET.has(o.position)||$i(i)&&!c&&zb(e,i))?n=n.filter(h=>h!==i):o=l,i=hs(i)}return t.set(e,n),n}function TT(e){let{element:t,boundary:r,rootBoundary:n,strategy:o}=e;const i=[...r==="clippingAncestors"?pd(t)?[]:PT(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,h)=>{const f=Ux(t,h,o);return d.top=dr(f.top,d.top),d.right=us(f.right,d.right),d.bottom=us(f.bottom,d.bottom),d.left=dr(f.left,d.left),d},Ux(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function AT(e){const{width:t,height:r}=Lb(e);return{width:t,height:r}}function IT(e,t,r){const n=gn(t),o=xn(t),a=r==="fixed",i=qs(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=fn(0);function d(){c.x=xd(o)}if(n||!n&&!a)if((ca(t)!=="body"||$i(o))&&(l=gd(t)),n){const m=qs(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else o&&d();a&&!n&&o&&d();const h=o&&!n&&!a?Fb(o,l):fn(0),f=i.left+l.scrollLeft-c.x-h.x,p=i.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:i.width,height:i.height}}function Cu(e){return en(e).position==="static"}function Fx(e,t){if(!gn(e)||en(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return xn(e)===r&&(r=r.ownerDocument.body),r}function Bb(e,t){const r=gr(e);if(pd(e))return r;if(!gn(e)){let o=hs(e);for(;o&&!Qo(o);){if(Zr(o)&&!Cu(o))return o;o=hs(o)}return r}let n=Fx(e,t);for(;n&&pT(n)&&Cu(n);)n=Fx(n,t);return n&&Qo(n)&&Cu(n)&&!Gm(n)?r:n||wT(e)||r}const OT=async function(e){const t=this.getOffsetParent||Bb,r=this.getDimensions,n=await r(e.floating);return{reference:IT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function MT(e){return en(e).direction==="rtl"}const DT={convertOffsetParentRelativeRectToViewportRelativeRect:_T,getDocumentElement:xn,getClippingRect:TT,getOffsetParent:Bb,getElementRects:OT,getClientRects:ST,getDimensions:AT,getScale:Lo,isElement:Zr,isRTL:MT};function Vb(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $T(e,t){let r=null,n;const o=xn(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=d;if(l||t(),!p||!m)return;const b=wl(f),g=wl(o.clientWidth-(h+p)),w=wl(o.clientHeight-(f+m)),y=wl(h),v={rootMargin:-b+"px "+-g+"px "+-w+"px "+-y+"px",threshold:dr(0,us(1,c))||1};let j=!0;function N(_){const k=_[0].intersectionRatio;if(k!==c){if(!j)return i();k?i(!1,k):n=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!Vb(d,e.getBoundingClientRect())&&i(),j=!1}try{r=new IntersectionObserver(N,{...v,root:o.ownerDocument})}catch{r=new IntersectionObserver(N,v)}r.observe(e)}return i(!0),a}function LT(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Jm(e),h=o||a?[...d?xi(d):[],...xi(t)]:[];h.forEach(y=>{o&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const f=d&&l?$T(d,r):null;let p=-1,m=null;i&&(m=new ResizeObserver(y=>{let[x]=y;x&&x.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let b,g=c?qs(e):null;c&&w();function w(){const y=qs(e);g&&!Vb(g,y)&&r(),g=y,b=requestAnimationFrame(w)}return r(),()=>{var y;h.forEach(x=>{o&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),f==null||f(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const UT=cT,FT=dT,zT=aT,BT=hT,VT=iT,zx=oT,WT=uT,qT=(e,t,r)=>{const n=new Map,o={platform:DT,...r},a={...o.platform,_c:n};return sT(e,t,{...o,platform:a})};var HT=typeof document<"u",KT=function(){},Fl=HT?u.useLayoutEffect:KT;function kc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!kc(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=r;n--!==0;){const a=o[n];if(!(a==="_owner"&&e.$$typeof)&&!kc(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Wb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Bx(e,t){const r=Wb(e);return Math.round(t*r)/r}function Eu(e){const t=u.useRef(e);return Fl(()=>{t.current=e}),t}function GT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:o,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,f]=u.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(n);kc(p,n)||m(n);const[b,g]=u.useState(null),[w,y]=u.useState(null),x=u.useCallback(I=>{I!==_.current&&(_.current=I,g(I))},[]),v=u.useCallback(I=>{I!==k.current&&(k.current=I,y(I))},[]),j=a||b,N=i||w,_=u.useRef(null),k=u.useRef(null),P=u.useRef(h),C=c!=null,R=Eu(c),M=Eu(o),$=Eu(d),Q=u.useCallback(()=>{if(!_.current||!k.current)return;const I={placement:t,strategy:r,middleware:p};M.current&&(I.platform=M.current),qT(_.current,k.current,I).then(S=>{const T={...S,isPositioned:$.current!==!1};H.current&&!kc(P.current,T)&&(P.current=T,na.flushSync(()=>{f(T)}))})},[p,t,r,M,$]);Fl(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(I=>({...I,isPositioned:!1})))},[d]);const H=u.useRef(!1);Fl(()=>(H.current=!0,()=>{H.current=!1}),[]),Fl(()=>{if(j&&(_.current=j),N&&(k.current=N),j&&N){if(R.current)return R.current(j,N,Q);Q()}},[j,N,Q,R,C]);const oe=u.useMemo(()=>({reference:_,floating:k,setReference:x,setFloating:v}),[x,v]),q=u.useMemo(()=>({reference:j,floating:N}),[j,N]),G=u.useMemo(()=>{const I={position:r,left:0,top:0};if(!q.floating)return I;const S=Bx(q.floating,h.x),T=Bx(q.floating,h.y);return l?{...I,transform:"translate("+S+"px, "+T+"px)",...Wb(q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:S,top:T}},[r,l,q.floating,h.x,h.y]);return u.useMemo(()=>({...h,update:Q,refs:oe,elements:q,floatingStyles:G}),[h,Q,oe,q,G])}const YT=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:o}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?zx({element:n.current,padding:o}).fn(r):{}:n?zx({element:n,padding:o}).fn(r):{}}}},JT=(e,t)=>({...UT(e),options:[e,t]}),XT=(e,t)=>({...FT(e),options:[e,t]}),QT=(e,t)=>({...WT(e),options:[e,t]}),ZT=(e,t)=>({...zT(e),options:[e,t]}),e3=(e,t)=>({...BT(e),options:[e,t]}),t3=(e,t)=>({...VT(e),options:[e,t]}),r3=(e,t)=>({...YT(e),options:[e,t]});var n3="Arrow",qb=u.forwardRef((e,t)=>{const{children:r,width:n=10,height:o=5,...a}=e;return s.jsx(Ie.svg,{...a,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});qb.displayName=n3;var s3=qb,Xm="Popper",[Hb,vd]=ir(Xm),[o3,Kb]=Hb(Xm),Gb=e=>{const{__scopePopper:t,children:r}=e,[n,o]=u.useState(null);return s.jsx(o3,{scope:t,anchor:n,onAnchorChange:o,children:r})};Gb.displayName=Xm;var Yb="PopperAnchor",Jb=u.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...o}=e,a=Kb(Yb,r),i=u.useRef(null),l=$e(t,i),c=u.useRef(null);return u.useEffect(()=>{const d=c.current;c.current=(n==null?void 0:n.current)||i.current,d!==c.current&&a.onAnchorChange(c.current)}),n?null:s.jsx(Ie.div,{...o,ref:l})});Jb.displayName=Yb;var Qm="PopperContent",[a3,i3]=Hb(Qm),Xb=u.forwardRef((e,t)=>{var V,ee,pe,de,fe,z;const{__scopePopper:r,side:n="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=e,w=Kb(Qm,r),[y,x]=u.useState(null),v=$e(t,ie=>x(ie)),[j,N]=u.useState(null),_=ud(j),k=(_==null?void 0:_.width)??0,P=(_==null?void 0:_.height)??0,C=n+(a!=="center"?"-"+a:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],$=M.length>0,Q={padding:R,boundary:M.filter(c3),altBoundary:$},{refs:H,floatingStyles:oe,placement:q,isPositioned:G,middlewareData:I}=GT({strategy:"fixed",placement:C,whileElementsMounted:(...ie)=>LT(...ie,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[JT({mainAxis:o+P,alignmentAxis:i}),c&&XT({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?QT():void 0,...Q}),c&&ZT({...Q}),e3({...Q,apply:({elements:ie,rects:O,availableWidth:he,availableHeight:ge})=>{const{width:U,height:re}=O.reference,Y=ie.floating.style;Y.setProperty("--radix-popper-available-width",`${he}px`),Y.setProperty("--radix-popper-available-height",`${ge}px`),Y.setProperty("--radix-popper-anchor-width",`${U}px`),Y.setProperty("--radix-popper-anchor-height",`${re}px`)}}),j&&r3({element:j,padding:l}),d3({arrowWidth:k,arrowHeight:P}),p&&t3({strategy:"referenceHidden",...Q})]}),[S,T]=e1(q),Z=Mt(b);It(()=>{G&&(Z==null||Z())},[G,Z]);const F=(V=I.arrow)==null?void 0:V.x,W=(ee=I.arrow)==null?void 0:ee.y,A=((pe=I.arrow)==null?void 0:pe.centerOffset)!==0,[X,J]=u.useState();return It(()=>{y&&J(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:G?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(de=I.transformOrigin)==null?void 0:de.x,(fe=I.transformOrigin)==null?void 0:fe.y].join(" "),...((z=I.hide)==null?void 0:z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(a3,{scope:r,placedSide:S,onArrowChange:N,arrowX:F,arrowY:W,shouldHideArrow:A,children:s.jsx(Ie.div,{"data-side":S,"data-align":T,...g,ref:v,style:{...g.style,animation:G?void 0:"none"}})})})});Xb.displayName=Qm;var Qb="PopperArrow",l3={top:"bottom",right:"left",bottom:"top",left:"right"},Zb=u.forwardRef(function(t,r){const{__scopePopper:n,...o}=t,a=i3(Qb,n),i=l3[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(s3,{...o,ref:r,style:{...o.style,display:"block"}})})});Zb.displayName=Qb;function c3(e){return e!==null}var d3=e=>({name:"transformOrigin",options:e,fn(t){var w,y,x;const{placement:r,rects:n,middlewareData:o}=t,i=((w=o.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,h]=e1(r),f={start:"0%",center:"50%",end:"100%"}[h],p=(((y=o.arrow)==null?void 0:y.x)??0)+l/2,m=(((x=o.arrow)==null?void 0:x.y)??0)+c/2;let b="",g="";return d==="bottom"?(b=i?f:`${p}px`,g=`${-c}px`):d==="top"?(b=i?f:`${p}px`,g=`${n.floating.height+c}px`):d==="right"?(b=`${-c}px`,g=i?f:`${m}px`):d==="left"&&(b=`${n.floating.width+c}px`,g=i?f:`${m}px`),{data:{x:b,y:g}}}});function e1(e){const[t,r="center"]=e.split("-");return[t,r]}var t1=Gb,r1=Jb,n1=Xb,s1=Zb,Ru="rovingFocusGroup.onEntryFocus",u3={bubbles:!1,cancelable:!0},Li="RovingFocusGroup",[Jh,o1,h3]=Di(Li),[f3,a1]=ir(Li,[h3]),[m3,p3]=f3(Li),i1=u.forwardRef((e,t)=>s.jsx(Jh.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Jh.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(g3,{...e,ref:t})})}));i1.displayName=Li;var g3=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=e,p=u.useRef(null),m=$e(t,p),b=ia(a),[g,w]=Qr({prop:i,defaultProp:l??null,onChange:c,caller:Li}),[y,x]=u.useState(!1),v=Mt(d),j=o1(r),N=u.useRef(!1),[_,k]=u.useState(0);return u.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(Ru,v),()=>P.removeEventListener(Ru,v)},[v]),s.jsx(m3,{scope:r,orientation:n,dir:b,loop:o,currentTabStopId:g,onItemFocus:u.useCallback(P=>w(P),[w]),onItemShiftTab:u.useCallback(()=>x(!0),[]),onFocusableItemAdd:u.useCallback(()=>k(P=>P+1),[]),onFocusableItemRemove:u.useCallback(()=>k(P=>P-1),[]),children:s.jsx(Ie.div,{tabIndex:y||_===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:ye(e.onMouseDown,()=>{N.current=!0}),onFocus:ye(e.onFocus,P=>{const C=!N.current;if(P.target===P.currentTarget&&C&&!y){const R=new CustomEvent(Ru,u3);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const M=j().filter(q=>q.focusable),$=M.find(q=>q.active),Q=M.find(q=>q.id===g),oe=[$,Q,...M].filter(Boolean).map(q=>q.ref.current);d1(oe,h)}}N.current=!1}),onBlur:ye(e.onBlur,()=>x(!1))})})}),l1="RovingFocusGroupItem",c1=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:o=!1,tabStopId:a,children:i,...l}=e,c=Kr(),d=a||c,h=p3(l1,r),f=h.currentTabStopId===d,p=o1(r),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=h;return u.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),s.jsx(Jh.ItemSlot,{scope:r,id:d,focusable:n,active:o,children:s.jsx(Ie.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:ye(e.onMouseDown,w=>{n?h.onItemFocus(d):w.preventDefault()}),onFocus:ye(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:ye(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=y3(w,h.orientation,h.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let v=p().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const j=v.indexOf(w.currentTarget);v=h.loop?w3(v,j+1):v.slice(j+1)}setTimeout(()=>d1(v))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:g!=null}):i})})});c1.displayName=l1;var x3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function y3(e,t,r){const n=v3(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return x3[n]}function d1(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function w3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var b3=i1,j3=c1;function N3(e){const t=_3(e),r=u.forwardRef((n,o)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(k3);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function _3(e){const t=u.forwardRef((r,n)=>{const{children:o,...a}=r;if(u.isValidElement(o)){const i=E3(o),l=C3(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var S3=Symbol("radix.slottable");function k3(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===S3}function C3(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function E3(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Xh=["Enter"," "],R3=["ArrowDown","PageUp","Home"],u1=["ArrowUp","PageDown","End"],P3=[...R3,...u1],T3={ltr:[...Xh,"ArrowRight"],rtl:[...Xh,"ArrowLeft"]},A3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ui="Menu",[vi,I3,O3]=Di(Ui),[Zs,h1]=ir(Ui,[O3,vd,a1]),yd=vd(),f1=a1(),[M3,eo]=Zs(Ui),[D3,Fi]=Zs(Ui),m1=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:o,onOpenChange:a,modal:i=!0}=e,l=yd(t),[c,d]=u.useState(null),h=u.useRef(!1),f=Mt(a),p=ia(o);return u.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),s.jsx(t1,{...l,children:s.jsx(M3,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:s.jsx(D3,{scope:t,onClose:u.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:i,children:n})})})};m1.displayName=Ui;var $3="MenuAnchor",Zm=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,o=yd(r);return s.jsx(r1,{...o,...n,ref:t})});Zm.displayName=$3;var ep="MenuPortal",[L3,p1]=Zs(ep,{forceMount:void 0}),g1=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:o}=e,a=eo(ep,t);return s.jsx(L3,{scope:t,forceMount:r,children:s.jsx(lr,{present:r||a.open,children:s.jsx(ad,{asChild:!0,container:o,children:n})})})};g1.displayName=ep;var Rr="MenuContent",[U3,tp]=Zs(Rr),x1=u.forwardRef((e,t)=>{const r=p1(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,a=eo(Rr,e.__scopeMenu),i=Fi(Rr,e.__scopeMenu);return s.jsx(vi.Provider,{scope:e.__scopeMenu,children:s.jsx(lr,{present:n||a.open,children:s.jsx(vi.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(F3,{...o,ref:t}):s.jsx(z3,{...o,ref:t})})})})}),F3=u.forwardRef((e,t)=>{const r=eo(Rr,e.__scopeMenu),n=u.useRef(null),o=$e(t,n);return u.useEffect(()=>{const a=n.current;if(a)return Rm(a)},[]),s.jsx(rp,{...e,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ye(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),z3=u.forwardRef((e,t)=>{const r=eo(Rr,e.__scopeMenu);return s.jsx(rp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),B3=N3("MenuContent.ScrollLock"),rp=u.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:b,...g}=e,w=eo(Rr,r),y=Fi(Rr,r),x=yd(r),v=f1(r),j=I3(r),[N,_]=u.useState(null),k=u.useRef(null),P=$e(t,k,w.onContentChange),C=u.useRef(0),R=u.useRef(""),M=u.useRef(0),$=u.useRef(null),Q=u.useRef("right"),H=u.useRef(0),oe=b?ld:u.Fragment,q=b?{as:B3,allowPinchZoom:!0}:void 0,G=S=>{var V,ee;const T=R.current+S,Z=j().filter(pe=>!pe.disabled),F=document.activeElement,W=(V=Z.find(pe=>pe.ref.current===F))==null?void 0:V.textValue,A=Z.map(pe=>pe.textValue),X=eA(A,T,W),J=(ee=Z.find(pe=>pe.textValue===X))==null?void 0:ee.ref.current;(function pe(de){R.current=de,window.clearTimeout(C.current),de!==""&&(C.current=window.setTimeout(()=>pe(""),1e3))})(T),J&&setTimeout(()=>J.focus())};u.useEffect(()=>()=>window.clearTimeout(C.current),[]),Em();const I=u.useCallback(S=>{var Z,F;return Q.current===((Z=$.current)==null?void 0:Z.side)&&rA(S,(F=$.current)==null?void 0:F.area)},[]);return s.jsx(U3,{scope:r,searchRef:R,onItemEnter:u.useCallback(S=>{I(S)&&S.preventDefault()},[I]),onItemLeave:u.useCallback(S=>{var T;I(S)||((T=k.current)==null||T.focus(),_(null))},[I]),onTriggerLeave:u.useCallback(S=>{I(S)&&S.preventDefault()},[I]),pointerGraceTimerRef:M,onPointerGraceIntentChange:u.useCallback(S=>{$.current=S},[]),children:s.jsx(oe,{...q,children:s.jsx(od,{asChild:!0,trapped:o,onMountAutoFocus:ye(a,S=>{var T;S.preventDefault(),(T=k.current)==null||T.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(sd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:s.jsx(b3,{asChild:!0,...v,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:ye(c,S=>{y.isUsingKeyboardRef.current||S.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(n1,{role:"menu","aria-orientation":"vertical","data-state":I1(w.open),"data-radix-menu-content":"",dir:y.dir,...x,...g,ref:P,style:{outline:"none",...g.style},onKeyDown:ye(g.onKeyDown,S=>{const Z=S.target.closest("[data-radix-menu-content]")===S.currentTarget,F=S.ctrlKey||S.altKey||S.metaKey,W=S.key.length===1;Z&&(S.key==="Tab"&&S.preventDefault(),!F&&W&&G(S.key));const A=k.current;if(S.target!==A||!P3.includes(S.key))return;S.preventDefault();const J=j().filter(V=>!V.disabled).map(V=>V.ref.current);u1.includes(S.key)&&J.reverse(),Q3(J)}),onBlur:ye(e.onBlur,S=>{S.currentTarget.contains(S.target)||(window.clearTimeout(C.current),R.current="")}),onPointerMove:ye(e.onPointerMove,yi(S=>{const T=S.target,Z=H.current!==S.clientX;if(S.currentTarget.contains(T)&&Z){const F=S.clientX>H.current?"right":"left";Q.current=F,H.current=S.clientX}}))})})})})})})});x1.displayName=Rr;var V3="MenuGroup",np=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ie.div,{role:"group",...n,ref:t})});np.displayName=V3;var W3="MenuLabel",v1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ie.div,{...n,ref:t})});v1.displayName=W3;var Cc="MenuItem",Vx="menu.itemSelect",wd=u.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...o}=e,a=u.useRef(null),i=Fi(Cc,e.__scopeMenu),l=tp(Cc,e.__scopeMenu),c=$e(t,a),d=u.useRef(!1),h=()=>{const f=a.current;if(!r&&f){const p=new CustomEvent(Vx,{bubbles:!0,cancelable:!0});f.addEventListener(Vx,m=>n==null?void 0:n(m),{once:!0}),Ww(f,p),p.defaultPrevented?d.current=!1:i.onClose()}};return s.jsx(y1,{...o,ref:c,disabled:r,onClick:ye(e.onClick,h),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),d.current=!0},onPointerUp:ye(e.onPointerUp,f=>{var p;d.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:ye(e.onKeyDown,f=>{const p=l.searchRef.current!=="";r||p&&f.key===" "||Xh.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});wd.displayName=Cc;var y1=u.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:o,...a}=e,i=tp(Cc,r),l=f1(r),c=u.useRef(null),d=$e(t,c),[h,f]=u.useState(!1),[p,m]=u.useState("");return u.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[a.children]),s.jsx(vi.ItemSlot,{scope:r,disabled:n,textValue:o??p,children:s.jsx(j3,{asChild:!0,...l,focusable:!n,children:s.jsx(Ie.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:ye(e.onPointerMove,yi(b=>{n?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(e.onPointerLeave,yi(b=>i.onItemLeave(b))),onFocus:ye(e.onFocus,()=>f(!0)),onBlur:ye(e.onBlur,()=>f(!1))})})})}),q3="MenuCheckboxItem",w1=u.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...o}=e;return s.jsx(S1,{scope:e.__scopeMenu,checked:r,children:s.jsx(wd,{role:"menuitemcheckbox","aria-checked":Ec(r)?"mixed":r,...o,ref:t,"data-state":op(r),onSelect:ye(o.onSelect,()=>n==null?void 0:n(Ec(r)?!0:!r),{checkForDefaultPrevented:!1})})})});w1.displayName=q3;var b1="MenuRadioGroup",[H3,K3]=Zs(b1,{value:void 0,onValueChange:()=>{}}),j1=u.forwardRef((e,t)=>{const{value:r,onValueChange:n,...o}=e,a=Mt(n);return s.jsx(H3,{scope:e.__scopeMenu,value:r,onValueChange:a,children:s.jsx(np,{...o,ref:t})})});j1.displayName=b1;var N1="MenuRadioItem",_1=u.forwardRef((e,t)=>{const{value:r,...n}=e,o=K3(N1,e.__scopeMenu),a=r===o.value;return s.jsx(S1,{scope:e.__scopeMenu,checked:a,children:s.jsx(wd,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":op(a),onSelect:ye(n.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,r)},{checkForDefaultPrevented:!1})})})});_1.displayName=N1;var sp="MenuItemIndicator",[S1,G3]=Zs(sp,{checked:!1}),k1=u.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...o}=e,a=G3(sp,r);return s.jsx(lr,{present:n||Ec(a.checked)||a.checked===!0,children:s.jsx(Ie.span,{...o,ref:t,"data-state":op(a.checked)})})});k1.displayName=sp;var Y3="MenuSeparator",C1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ie.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});C1.displayName=Y3;var J3="MenuArrow",E1=u.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,o=yd(r);return s.jsx(s1,{...o,...n,ref:t})});E1.displayName=J3;var X3="MenuSub",[Q6,R1]=Zs(X3),Ta="MenuSubTrigger",P1=u.forwardRef((e,t)=>{const r=eo(Ta,e.__scopeMenu),n=Fi(Ta,e.__scopeMenu),o=R1(Ta,e.__scopeMenu),a=tp(Ta,e.__scopeMenu),i=u.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},h=u.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return u.useEffect(()=>h,[h]),u.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(Zm,{asChild:!0,...d,children:s.jsx(y1,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":I1(r.open),...e,ref:Dn(t,o.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ye(e.onPointerMove,yi(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:ye(e.onPointerLeave,yi(f=>{var m,b;h();const p=(m=r.content)==null?void 0:m.getBoundingClientRect();if(p){const g=(b=r.content)==null?void 0:b.dataset.side,w=g==="right",y=w?-5:5,x=p[w?"left":"right"],v=p[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x,y:p.top},{x:v,y:p.top},{x:v,y:p.bottom},{x,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ye(e.onKeyDown,f=>{var m;const p=a.searchRef.current!=="";e.disabled||p&&f.key===" "||T3[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});P1.displayName=Ta;var T1="MenuSubContent",A1=u.forwardRef((e,t)=>{const r=p1(Rr,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,a=eo(Rr,e.__scopeMenu),i=Fi(Rr,e.__scopeMenu),l=R1(T1,e.__scopeMenu),c=u.useRef(null),d=$e(t,c);return s.jsx(vi.Provider,{scope:e.__scopeMenu,children:s.jsx(lr,{present:n||a.open,children:s.jsx(vi.Slot,{scope:e.__scopeMenu,children:s.jsx(rp,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ye(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ye(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:ye(e.onKeyDown,h=>{var m;const f=h.currentTarget.contains(h.target),p=A3[i.dir].includes(h.key);f&&p&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),h.preventDefault())})})})})})});A1.displayName=T1;function I1(e){return e?"open":"closed"}function Ec(e){return e==="indeterminate"}function op(e){return Ec(e)?"indeterminate":e?"checked":"unchecked"}function Q3(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Z3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function eA(e,t,r){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=Z3(e,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return c!==r?c:void 0}function tA(e,t){const{x:r,y:n}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],d=l.x,h=l.y,f=c.x,p=c.y;h>n!=p>n&&r<(f-d)*(n-h)/(p-h)+d&&(o=!o)}return o}function rA(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return tA(r,t)}function yi(e){return t=>t.pointerType==="mouse"?e(t):void 0}var nA=m1,sA=Zm,oA=g1,aA=x1,iA=np,lA=v1,cA=wd,dA=w1,uA=j1,hA=_1,fA=k1,mA=C1,pA=E1,gA=P1,xA=A1,bd="DropdownMenu",[vA]=ir(bd,[h1]),Xt=h1(),[yA,O1]=vA(bd),M1=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:o,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Xt(t),d=u.useRef(null),[h,f]=Qr({prop:o,defaultProp:a??!1,onChange:i,caller:bd});return s.jsx(yA,{scope:t,triggerId:Kr(),triggerRef:d,contentId:Kr(),open:h,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(p=>!p),[f]),modal:l,children:s.jsx(nA,{...c,open:h,onOpenChange:f,dir:n,modal:l,children:r})})};M1.displayName=bd;var D1="DropdownMenuTrigger",$1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...o}=e,a=O1(D1,r),i=Xt(r);return s.jsx(sA,{asChild:!0,...i,children:s.jsx(Ie.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:Dn(t,a.triggerRef),onPointerDown:ye(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ye(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$1.displayName=D1;var wA="DropdownMenuPortal",L1=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Xt(t);return s.jsx(oA,{...n,...r})};L1.displayName=wA;var U1="DropdownMenuContent",F1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=O1(U1,r),a=Xt(r),i=u.useRef(!1);return s.jsx(aA,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...n,ref:t,onCloseAutoFocus:ye(e.onCloseAutoFocus,l=>{var c;i.current||(c=o.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ye(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!o.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F1.displayName=U1;var bA="DropdownMenuGroup",jA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(iA,{...o,...n,ref:t})});jA.displayName=bA;var NA="DropdownMenuLabel",z1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(lA,{...o,...n,ref:t})});z1.displayName=NA;var _A="DropdownMenuItem",B1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(cA,{...o,...n,ref:t})});B1.displayName=_A;var SA="DropdownMenuCheckboxItem",V1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(dA,{...o,...n,ref:t})});V1.displayName=SA;var kA="DropdownMenuRadioGroup",CA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(uA,{...o,...n,ref:t})});CA.displayName=kA;var EA="DropdownMenuRadioItem",W1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(hA,{...o,...n,ref:t})});W1.displayName=EA;var RA="DropdownMenuItemIndicator",q1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(fA,{...o,...n,ref:t})});q1.displayName=RA;var PA="DropdownMenuSeparator",H1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(mA,{...o,...n,ref:t})});H1.displayName=PA;var TA="DropdownMenuArrow",AA=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(pA,{...o,...n,ref:t})});AA.displayName=TA;var IA="DropdownMenuSubTrigger",K1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(gA,{...o,...n,ref:t})});K1.displayName=IA;var OA="DropdownMenuSubContent",G1=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,o=Xt(r);return s.jsx(xA,{...o,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});G1.displayName=OA;var MA=M1,DA=$1,$A=L1,Y1=F1,J1=z1,X1=B1,Q1=V1,Z1=W1,ej=q1,tj=H1,rj=K1,nj=G1;const sj=MA,oj=DA,LA=u.forwardRef(({className:e,inset:t,children:r,...n},o)=>s.jsxs(rj,{ref:o,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(R5,{className:"ml-auto h-4 w-4"})]}));LA.displayName=rj.displayName;const UA=u.forwardRef(({className:e,...t},r)=>s.jsx(nj,{ref:r,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));UA.displayName=nj.displayName;const ap=u.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx($A,{children:s.jsx(Y1,{ref:n,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ap.displayName=Y1.displayName;const wi=u.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(X1,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));wi.displayName=X1.displayName;const FA=u.forwardRef(({className:e,children:t,checked:r,...n},o)=>s.jsxs(Q1,{ref:o,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(ej,{children:s.jsx(Lm,{className:"h-4 w-4"})})}),t]}));FA.displayName=Q1.displayName;const zA=u.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Z1,{ref:n,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(ej,{children:s.jsx(M5,{className:"h-4 w-4 fill-current"})})}),t]}));zA.displayName=Z1.displayName;const BA=u.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(J1,{ref:n,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));BA.displayName=J1.displayName;const VA=u.forwardRef(({className:e,...t},r)=>s.jsx(tj,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));VA.displayName=tj.displayName;var WA=Symbol("radix.slottable");function qA(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=WA,t}var aj="AlertDialog",[HA]=ir(aj,[rb]),$n=rb(),ij=e=>{const{__scopeAlertDialog:t,...r}=e,n=$n(t);return s.jsx(vb,{...n,...r,modal:!0})};ij.displayName=aj;var KA="AlertDialogTrigger",GA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,o=$n(r);return s.jsx(N5,{...o,...n,ref:t})});GA.displayName=KA;var YA="AlertDialogPortal",lj=e=>{const{__scopeAlertDialog:t,...r}=e,n=$n(t);return s.jsx(yb,{...n,...r})};lj.displayName=YA;var JA="AlertDialogOverlay",cj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,o=$n(r);return s.jsx(Im,{...o,...n,ref:t})});cj.displayName=JA;var Uo="AlertDialogContent",[XA,QA]=HA(Uo),ZA=qA("AlertDialogContent"),dj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...o}=e,a=$n(r),i=u.useRef(null),l=$e(t,i),c=u.useRef(null);return s.jsx(y5,{contentName:Uo,titleName:uj,docsSlug:"alert-dialog",children:s.jsx(XA,{scope:r,cancelRef:c,children:s.jsxs(Om,{role:"alertdialog",...a,...o,ref:l,onOpenAutoFocus:ye(o.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(ZA,{children:n}),s.jsx(tI,{contentRef:i})]})})})});dj.displayName=Uo;var uj="AlertDialogTitle",hj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,o=$n(r);return s.jsx(Mm,{...o,...n,ref:t})});hj.displayName=uj;var fj="AlertDialogDescription",mj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,o=$n(r);return s.jsx(Dm,{...o,...n,ref:t})});mj.displayName=fj;var eI="AlertDialogAction",pj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,o=$n(r);return s.jsx($m,{...o,...n,ref:t})});pj.displayName=eI;var gj="AlertDialogCancel",xj=u.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:o}=QA(gj,r),a=$n(r),i=$e(t,o);return s.jsx($m,{...a,...n,ref:i})});xj.displayName=gj;var tI=({contentRef:e})=>{const t=`\`${Uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Uo}\` by passing a \`${fj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},rI=ij,nI=lj,vj=cj,yj=dj,wj=pj,bj=xj,jj=hj,Nj=mj;const Rc=rI,sI=nI,_j=u.forwardRef(({className:e,...t},r)=>s.jsx(vj,{className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));_j.displayName=vj.displayName;const bi=u.forwardRef(({className:e,...t},r)=>s.jsxs(sI,{children:[s.jsx(_j,{}),s.jsx(yj,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));bi.displayName=yj.displayName;const ji=({className:e,...t})=>s.jsx("div",{className:Te("flex flex-col space-y-2 text-center sm:text-left",e),...t});ji.displayName="AlertDialogHeader";const Ni=({className:e,...t})=>s.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ni.displayName="AlertDialogFooter";const _i=u.forwardRef(({className:e,...t},r)=>s.jsx(jj,{ref:r,className:Te("text-lg font-semibold",e),...t}));_i.displayName=jj.displayName;const Si=u.forwardRef(({className:e,...t},r)=>s.jsx(Nj,{ref:r,className:Te("text-sm text-muted-foreground",e),...t}));Si.displayName=Nj.displayName;const ki=u.forwardRef(({className:e,...t},r)=>s.jsx(wj,{ref:r,className:Te(Cm(),e),...t}));ki.displayName=wj.displayName;const Ci=u.forwardRef(({className:e,...t},r)=>s.jsx(bj,{ref:r,className:Te(Cm({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ci.displayName=bj.displayName;const bl=e=>e?e.includes("/functions/v1/image-proxy")||e.includes("supabase.co/storage/v1/object/public/")?e:e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`:(console.log("[Discover] VITE_SUPABASE_URL:","https://vohvdarghgqskzqjclux.supabase.co"),e):null;function oI({onNavigateToMessages:e,onNavigate:t,sharedPostId:r,onPostViewed:n}={}){const{isAdmin:o}=td(),[a,i]=u.useState([]),[l,c]=u.useState(!0),[d,h]=u.useState(0),[f,p]=u.useState(!0),[m,b]=u.useState(null),[g,w]=u.useState(null),[y,x]=u.useState({}),[v,j]=u.useState(null),[N,_]=u.useState(null),[k,P]=u.useState(!1),[C,R]=u.useState(new Set),[M,$]=u.useState(null),[Q,H]=u.useState(""),[oe,q]=u.useState([]),[G,I]=u.useState(!1),[S,T]=u.useState(null),Z=u.useRef(null),[F,W]=u.useState(null),[A,X]=u.useState(0),[J,V]=u.useState(!1),[ee,pe]=u.useState([]),[de,fe]=u.useState(null),[z,ie]=u.useState("followers"),[O,he]=u.useState([]),[ge,U]=u.useState(new Set),[re,Y]=u.useState(new Map),[Ne,K]=u.useState(!1),[ce,we]=u.useState({}),Le=10;u.useEffect(()=>{L.auth.getUser().then(async({data:E})=>{var be;const le=((be=E.user)==null?void 0:be.id)||null;if(b(le),le){const{data:Ae}=await L.from("follows").select("following_id").eq("follower_id",le);Ae&&R(new Set(Ae.map(Se=>Se.following_id)))}})},[]),u.useEffect(()=>{const E=()=>{const Ae=window.location.pathname.match(/^\/post\/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})$/i);if(Ae){const Se=Ae[1];console.log("[Discover] Opening shared post from URL:",Se),w(Se),window.history.replaceState({},"","/discover")}};E(),window.addEventListener("popstate",E);const le=be=>{be.detail&&w(be.detail)};return window.addEventListener("open-shared-post",le),()=>{window.removeEventListener("popstate",E),window.removeEventListener("open-shared-post",le)}},[]),u.useEffect(()=>{if(!m)return;const E=async()=>{try{const{data:be,error:Ae}=await L.from("notifications").select("*").eq("user_id",m).neq("type","message").order("created_at",{ascending:!1}).limit(20);if(Ae){console.error("[Notifications] Error loading notifications:",Ae);return}if(be){const Se=[...new Set(be.map(ne=>ne.actor_id).filter(Boolean))];if(Se.length>0){const{data:ne}=await L.from("profiles").select("id, username, avatar_url").in("id",Se),xe=new Map((ne||[]).map(Be=>[Be.id,Be])),Ee=be.map(Be=>({...Be,actor:Be.actor_id?xe.get(Be.actor_id):null}));pe(Ee)}else pe(be);X(be.filter(ne=>!ne.read).length)}}catch(be){console.error("[Notifications] Exception:",be)}};E();const le=L.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${m}`},()=>{E()}).subscribe();return()=>{L.removeChannel(le)}},[m]),u.useEffect(()=>{r&&m&&(async()=>{const{data:le}=await L.from("posts").select("*, profiles(username, avatar_url), likes(user_id), comments(id)").eq("id",r).maybeSingle();le&&(w(r),n&&n())})()},[r,m,n]);const Pe=u.useCallback(async(E,le=!1)=>{try{let be=[];if(F){const{data:ue}=await L.from("hashtags").select("id").eq("tag",F.toLowerCase()).maybeSingle();if(ue){const{data:ke}=await L.from("post_hashtags").select("post_id").eq("hashtag_id",ue.id);if(be=(ke||[]).map(Ke=>Ke.post_id),be.length===0){i([]),p(!1),c(!1);return}}else{i([]),p(!1),c(!1);return}}let Ae=L.from("posts").select("*").order("created_at",{ascending:!1}).range(E*Le,(E+1)*Le-1);be.length>0&&(Ae=Ae.in("id",be));const{data:Se,error:ne}=await Ae;if(ne)throw console.error("Error fetching posts:",ne),ne;if(!Se||Se.length===0){le&&i([]),p(!1),c(!1);return}const xe=Se.map(ue=>ue.id),Ee=[...new Set(Se.map(ue=>ue.user_id))],[Be,ft,Ve,pt]=await Promise.all([L.from("profiles").select("id, username, avatar_url").in("id",Ee),L.from("likes").select("user_id, post_id").in("post_id",xe),L.from("comments").select("id, text, created_at, user_id, post_id, rating").in("post_id",xe).order("created_at",{ascending:!1}),L.from("post_ratings").select("rating, post_id").in("post_id",xe)]),qe=[...new Set((Ve.data||[]).map(ue=>ue.user_id))],{data:Et}=await L.from("profiles").select("id, username").in("id",qe),Ln=new Map((Be.data||[]).map(ue=>[ue.id,ue])),zi=new Map((Et||[]).map(ue=>[ue.id,ue])),Me=new Map;(ft.data||[]).forEach(ue=>{Me.has(ue.post_id)||Me.set(ue.post_id,[]),Me.get(ue.post_id).push(ue)});const Je=new Map;(Ve.data||[]).forEach(ue=>{Je.has(ue.post_id)||Je.set(ue.post_id,[]);const ke={...ue,profiles:zi.get(ue.user_id)||{username:"User"}};Je.get(ue.post_id).push(ke)});const Ut=new Map;(pt.data||[]).forEach(ue=>{Ut.has(ue.post_id)||Ut.set(ue.post_id,[]),Ut.get(ue.post_id).push(ue.rating)});const xt={};Ut.forEach((ue,ke)=>{const Ke=ue.length,nn=Ke>0?ue.reduce((ha,N_)=>ha+N_,0)/Ke:0;xt[ke]={average:nn,count:Ke}});const Un=Se.map(ue=>{const ke=Ln.get(ue.user_id)||{username:"User",avatar_url:null},Ke=Me.get(ue.id)||[],nn=Je.get(ue.id)||[];return{...ue,profiles:ke,likes:Ke,comments:nn.slice(0,2),_count:{likes:Ke.length,comments:nn.length}}});x(ue=>({...ue,...xt})),le?(i(Un),h(0)):i(ue=>[...ue,...Un]),p(Se.length===Le)}catch(be){console.error("Error fetching posts:",be),D.error("Failed to load posts")}finally{c(!1)}},[F]);u.useEffect(()=>{let E=!0,le=null;return(async()=>{E&&await Pe(0,!0)})(),le=L.channel("posts-and-comments-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async Ae=>{if(!E)return;const Se=Ae.new,{data:ne}=await L.from("profiles").select("username, avatar_url").eq("id",Se.user_id).maybeSingle(),xe={...Se,profiles:ne||{username:"User",avatar_url:null},likes:[],comments:[],_count:{likes:0,comments:0}};i(Ee=>Ee.some(Be=>Be.id===xe.id)?Ee:[xe,...Ee])}).subscribe(),()=>{E=!1,le&&L.removeChannel(le)}},[Pe]);const B=()=>{const E=d+1;h(E),Pe(E)},me=async E=>{if(m)try{if(C.has(E)){const{error:be}=await L.from("follows").delete().eq("follower_id",m).eq("following_id",E);if(be)throw be;R(Ae=>{const Se=new Set(Ae);return Se.delete(E),Se}),D.success("Unsupported")}else{const{error:be}=await L.from("follows").insert({follower_id:m,following_id:E});if(be)throw be;await L.from("notifications").insert({user_id:E,actor_id:m,type:"follow"}),R(Ae=>new Set([...Ae,E])),D.success("Supporting!")}}catch(le){console.error("Error toggling follow:",le),D.error("Failed to update follow status")}},_e=async()=>{if(v)try{const{error:E}=await L.from("posts").delete().eq("id",v);if(E)throw E;i(le=>le.filter(be=>be.id!==v)),D.success("Post deleted"),j(null)}catch(E){console.error("Error deleting post:",E),D.error("Failed to delete post")}},Oe=async E=>{var Ae;if(!m)return;const le=a.find(Se=>Se.id===E),be=(Ae=le==null?void 0:le.likes)==null?void 0:Ae.some(Se=>Se.user_id===m);i(Se=>Se.map(ne=>ne.id===E?{...ne,likes:be?ne.likes.filter(xe=>xe.user_id!==m):[...ne.likes,{user_id:m}],_count:{...ne._count,likes:be?ne._count.likes-1:ne._count.likes+1}}:ne));try{be?await L.from("likes").delete().match({post_id:E,user_id:m}):(await L.from("likes").insert({post_id:E,user_id:m}),le&&le.user_id!==m&&await L.from("notifications").insert({user_id:le.user_id,actor_id:m,type:"like",post_id:E}))}catch(Se){console.error("Error toggling like:",Se),D.error("Failed to update like"),i(ne=>ne.map(xe=>xe.id===E?{...xe,likes:be?[...xe.likes,{user_id:m}]:xe.likes.filter(Ee=>Ee.user_id!==m),_count:{...xe._count,likes:be?xe._count.likes+1:xe._count.likes-1}}:xe))}},ht=()=>s.jsxs("div",{className:"bg-white border-b border-gray-200 animate-pulse",children:[s.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-24"})]})]}),s.jsx("div",{className:"bg-gray-300 h-96 w-full"}),s.jsxs("div",{className:"px-4 py-3 space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),s.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full"}),s.jsx("div",{className:"h-9 w-20 bg-gray-300 rounded-full ml-auto"})]})]})]});if(l&&a.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:s.jsx("div",{className:"max-w-sm mx-auto w-full pt-24",children:[...Array(3)].map((E,le)=>s.jsx(ht,{},le))})});const Qt=async E=>{try{const{data:le,error:be}=await L.from("profiles").select("id, username, avatar_url").ilike("username",`${E}%`).limit(10);if(be){console.error("[Search] Error:",be),D.error("Search failed"),q([]),I(!1);return}q(le||[]),I(!0)}catch(le){console.error("[Search] Exception:",le),q([]),I(!1)}},Fe=E=>{if(H(E),Z.current&&clearTimeout(Z.current),!E.trim()){q([]),I(!1);return}Z.current=setTimeout(()=>{Qt(E)},300)},Zt=async E=>{await L.from("notifications").update({read:!0}).eq("id",E),pe(le=>le.map(be=>be.id===E?{...be,read:!0}:be)),X(le=>Math.max(0,le-1))},wr=E=>{E.key==="Enter"&&Q.trim()&&(E.preventDefault(),Z.current&&clearTimeout(Z.current),oe.length>0?(T(oe[0].id),I(!1),H("")):Qt(Q))},br=async E=>{if(fe(E),ie("followers"),U(new Set),K(!1),m){const{data:le}=await L.from("follows").select("following_id, profiles:following_id(id, username, avatar_url)").eq("follower_id",m);he(le||[])}},at=async E=>{var ne,xe;const le=a.find(Ee=>Ee.id===E);if(!le)return;const be=((ne=le.profiles)==null?void 0:ne.username)||"someone",Ae=`${window.location.origin}/${be}?post=${E}`,Se={title:le.title||"Check out this recipe on MealScrape!",text:le.caption?`${le.caption}

Shared via MealScrape`:"I found this fire recipe on MealScrape!",url:Ae};if(navigator.share&&((xe=navigator.canShare)!=null&&xe.call(navigator,Se)))try{await navigator.share(Se),D.success("Shared successfully!")}catch(Ee){Ee.name!=="AbortError"&&(console.error("Native share failed:",Ee),yn(Ae))}else yn(Ae)},yn=E=>{navigator.clipboard.writeText(E).then(()=>{D.success("Link copied to clipboard!")}).catch(()=>{D.error("Failed to copy link")})},Or=E=>{var Se;const le=a.find(ne=>ne.id===E);if(!le)return;const Ae=`https://mealscrape.com/${((Se=le.profiles)==null?void 0:Se.username)||"user"}?post=${E}`;navigator.clipboard.writeText(Ae).then(()=>{K(!0),D.success("Link copied!"),setTimeout(()=>K(!1),2e3)}).catch(ne=>{console.error("Failed to copy:",ne),D.error("Failed to copy link")})},wn=async()=>{var Se;if(!de||ge.size===0)return;const E=a.find(ne=>ne.id===de);if(!E)return;const be=`https://mealscrape.com/${((Se=E.profiles)==null?void 0:Se.username)||"user"}?post=${de}`,Ae=`Check out this recipe: ${E.title||"Shared post"}
${be}`;try{for(const ne of ge){let xe=null;const{data:Ee}=await L.from("conversations").select("id").or(`and(user1_id.eq.${m},user2_id.eq.${ne}),and(user1_id.eq.${ne},user2_id.eq.${m})`).maybeSingle();if(Ee)xe=Ee.id;else{const{data:Be,error:ft}=await L.from("conversations").insert({user1_id:m,user2_id:ne}).select().single();if(ft)throw ft;xe=Be.id}await L.from("direct_messages").insert({conversation_id:xe,sender_id:m,content:Ae}),await L.from("conversations").update({updated_at:new Date().toISOString(),last_message_at:new Date().toISOString()}).eq("id",xe)}if(D.success(`Shared with ${ge.size} ${ge.size===1?"person":"people"}!`),fe(null),U(new Set),ge.size===1&&e){const ne=Array.from(ge)[0],xe=O.find(Ee=>Ee.following_id===ne);xe!=null&&xe.profiles&&e(ne,xe.profiles.username)}}catch(ne){console.error("Error sharing post:",ne),D.error("Failed to share post")}};return s.jsx("div",{className:"min-h-screen bg-gray-50 pb-32 overflow-x-hidden",children:s.jsxs("div",{className:"max-w-sm mx-auto w-full",onClick:()=>{V(!1),I(!1)},children:[s.jsxs("div",{className:"fixed top-14 left-0 right-0 z-20 bg-white border-b border-gray-200 p-4 max-w-sm mx-auto lg:ml-64 lg:max-w-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:Q,onChange:E=>Fe(E.target.value),onKeyDown:wr,placeholder:"Search users...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"}),G&&s.jsx("div",{className:"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-lg max-h-60 overflow-y-auto shadow-lg z-50",children:oe.length>0?oe.map(E=>s.jsxs("button",{onClick:()=>{T(E.id),I(!1),H("")},className:"w-full flex items-center gap-2 p-2 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-0",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-orange-400 to-red-400 overflow-hidden flex items-center justify-center",children:E.avatar_url?s.jsx("img",{src:E.avatar_url,alt:E.username,className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-white font-semibold text-sm",children:E.username.charAt(0).toUpperCase()})}),s.jsx("span",{className:"font-medium text-gray-900",children:E.username})]},E.id)):s.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No users found"})})]}),s.jsxs("button",{onClick:async E=>{E.stopPropagation(),V(!J),!J&&m&&(await L.from("notifications").update({read:!0}).eq("user_id",m).eq("read",!1),X(0))},className:"relative p-2 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0",children:[s.jsx(CE,{className:"w-6 h-6 text-gray-700"}),A>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold",children:A>9?"9+":A})]})]}),J&&s.jsx("div",{className:"absolute left-4 right-4 top-full mt-2 bg-white border border-gray-200 rounded-lg max-h-96 overflow-y-auto shadow-lg z-50",children:ee.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No notifications yet"}):ee.map(E=>{var le;return s.jsx("div",{onClick:()=>{var be;E.read||Zt(E.id),V(!1),E.post_id&&(E.type==="like"||E.type==="comment")?w(E.post_id):E.type==="follow"&&((be=E.actor)!=null&&be.username)&&(window.location.href=`/${E.actor.username}`)},className:`p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${E.read?"":"bg-blue-50"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold",children:((le=E.actor)==null?void 0:le.username)||"Someone"}),E.type==="follow"&&" started following you",E.type==="like"&&" loved your post",E.type==="comment"&&" commented on your post",E.type==="message"&&" sent you a message"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(E.created_at).toLocaleDateString()," at"," ",new Date(E.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),!E.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]})},E.id)})})]}),s.jsxs("div",{className:"pt-24",style:{paddingTop:"calc(5rem + env(safe-area-inset-top))"},children:[F&&s.jsxs("div",{className:"bg-blue-50 border-b border-blue-200 p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(DE,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Posts tagged with #",F]})]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>W(null),className:"text-blue-600 hover:text-blue-700",children:"Clear"})]}),S?s.jsx(F4,{userId:S,currentUserId:m,posts:a,isFollowing:C.has(S),onBack:()=>T(null),onToggleFollow:me,onMessage:(E,le)=>{e&&e(E,le)},onRefresh:()=>Pe(0,!0)}):a.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500",children:"No posts yet. Be the first to share!"})}):s.jsxs(s.Fragment,{children:[a.map(E=>{var Se,ne,xe,Ee,Be,ft,Ve,pt,qe,Et,Ln,zi;console.log("[Discover] Post ID:",E.id),console.log("[Discover] Raw image_url:",E.image_url),console.log("[Discover] Raw video_url:",E.video_url);const le=(Se=E.likes)==null?void 0:Se.some(Me=>Me.user_id===m),be=((ne=E.comments)==null?void 0:ne.slice(0,2))||[],Ae=E.user_id===m;return s.jsxs("div",{className:"bg-white border-b border-gray-200 mb-2 flex flex-col min-h-0",children:[s.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[(xe=E.profiles)!=null&&xe.avatar_url?s.jsx("img",{src:E.profiles.avatar_url,alt:E.profiles.username,className:"w-8 h-8 rounded-full object-cover",loading:"lazy"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white font-medium text-sm",children:((ft=(Be=(Ee=E.profiles)==null?void 0:Ee.username)==null?void 0:Be[0])==null?void 0:ft.toUpperCase())||s.jsx(Xo,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{var Me;window.location.href=`/${(Me=E.profiles)==null?void 0:Me.username}`},className:"font-semibold text-sm hover:underline cursor-pointer",children:(Ve=E.profiles)==null?void 0:Ve.username}),E.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&s.jsx(Ka,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]})]}),(Ae||o)&&s.jsxs(sj,{children:[s.jsx(oj,{asChild:!0,children:s.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Cw,{className:"w-5 h-5 text-gray-600"})})}),s.jsxs(ap,{align:"end",children:[s.jsxs(wi,{onClick:()=>_({id:E.id,caption:E.caption||"",recipeUrl:E.recipe_url||"",photoUrl:E.image_url||"",deletedImages:[],newImages:[],newPreviews:[]}),className:"cursor-pointer",children:[s.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Edit post"]}),s.jsxs(wi,{onClick:()=>j(E.id),className:"cursor-pointer text-red-600",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"}),"Delete post"]})]})]})]}),s.jsxs("div",{className:"relative",children:[E.image_url||E.video_url?(()=>{let Me=[],Je=[];const Ut=ue=>{const ke=[".mp4",".mov",".webm",".avi",".mkv"],Ke=ue.toLowerCase();return ke.some(nn=>Ke.includes(nn))};if(E.image_url)try{const ue=JSON.parse(E.image_url);if(Array.isArray(ue))ue.forEach(ke=>{const Ke=bl(ke);Ke&&(Me.push(Ke),Je.push(Ut(ke)?"video":"image"))});else{const ke=bl(ue);ke&&(Me.push(ke),Je.push(Ut(ue)?"video":"image"))}}catch{if(E.image_url.includes(","))E.image_url.split(",").forEach(ue=>{const ke=ue.trim(),Ke=bl(ke);Ke&&(Me.push(Ke),Je.push(Ut(ke)?"video":"image"))});else{const ue=bl(E.image_url);ue&&(Me.push(ue),Je.push(Ut(E.image_url)?"video":"image"))}}if(E.video_url)try{const ue=JSON.parse(E.video_url);Array.isArray(ue)?ue.forEach(ke=>{Me.push(ke),Je.push("video")}):(Me.push(ue),Je.push("video"))}catch{Me.push(E.video_url),Je.push("video")}if(Me.length===0)return console.log("[Discover]  NO MEDIA FOUND for post:",E.id),s.jsx("div",{className:"w-full aspect-square bg-gray-200 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"No media available"})});console.log("[Discover]  Media parsed for post:",E.id),console.log("[Discover]  mediaUrls:",Me),console.log("[Discover]  mediaTypes:",Je),Me.forEach((ue,ke)=>{Je[ke]==="video"&&console.log("[Discover]  Video URL at index",ke,":",ue)});const xt=ce[E.id]||0,Un=ue=>{we(ke=>({...ke,[E.id]:typeof ue=="function"?ue(ke[E.id]||0):ue}))};return Me.length===1?(console.log("[Discover]  Single media:",Me[0]),Je[0]==="video"?s.jsx("video",{src:Me[0],controls:!0,playsInline:!0,className:"w-full aspect-square object-cover bg-black",preload:"auto",onClick:ue=>{const ke=ue.target;ke.paused?ke.play().catch(Ke=>console.error("[Discover] Play failed:",Ke)):ke.pause()},onError:ue=>{const ke=ue.target;console.error("[Discover] Single video failed:",Me[0]),console.error("[Discover] Video error details:",{error:ke.error,networkState:ke.networkState,readyState:ke.readyState,src:ke.src}),D.error("Video failed to load")},onLoadStart:()=>{console.log("[Discover] Single video loading:",Me[0])},onCanPlay:()=>{console.log("[Discover] Single video can play:",Me[0])}},Me[0]):s.jsx("img",{src:Me[0],alt:E.title||"Post",className:"w-full aspect-square object-cover",loading:"lazy",onError:ue=>{var Ke;console.error("[Discover] Image failed to load:",Me[0]);const ke=ue.target;ke.style.display="none",(Ke=ke.parentElement)==null||Ke.classList.add("bg-gray-200")}})):s.jsxs("div",{className:"relative w-full aspect-square bg-black",children:[Je[xt]==="video"?s.jsx("video",{src:Me[xt],controls:!0,playsInline:!0,className:"w-full h-full object-cover",preload:"auto",onClick:ue=>{ue.stopPropagation();const ke=ue.target;ke.paused?ke.play().catch(Ke=>console.error("[Discover] Play failed:",Ke)):ke.pause()},onError:ue=>{const ke=ue.target;console.error("[Discover] Carousel video failed:",Me[xt]),console.error("[Discover] Video error details:",{error:ke.error,networkState:ke.networkState,readyState:ke.readyState,src:ke.src}),D.error("Video failed to load")},onLoadStart:()=>{console.log("[Discover] Video loading...")},onCanPlay:()=>{console.log("[Discover] Video can play")}},Me[xt]):s.jsx("img",{src:Me[xt],alt:`${E.title||"Post"} ${xt+1}`,className:"w-full h-full object-cover",loading:"lazy",onError:ue=>{var Ke;console.error("[Discover] Carousel image failed:",Me[xt]);const ke=ue.target;ke.style.display="none",(Ke=ke.parentElement)==null||Ke.classList.add("bg-gray-200")}},Me[xt]),xt>0&&s.jsx("button",{onClick:ue=>{ue.stopPropagation(),Un(ke=>ke-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors z-10",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),xt<Me.length-1&&s.jsx("button",{onClick:ue=>{ue.stopPropagation(),Un(ke=>ke+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors z-10",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-1.5 z-10",children:Me.map((ue,ke)=>s.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),Un(ke)},className:`w-2 h-2 rounded-full transition-all ${ke===xt?"bg-white w-6":"bg-white/50"}`},ke))}),Je[xt]!=="video"&&s.jsx("div",{onTouchStart:ue=>{const ke=ue.touches[0];ue.currentTarget.touchStartX=ke.clientX},onTouchEnd:ue=>{const ke=ue.changedTouches[0],nn=ue.currentTarget.touchStartX-ke.clientX;Math.abs(nn)>50&&(nn>0&&xt<Me.length-1?Un(ha=>ha+1):nn<0&&xt>0&&Un(ha=>ha-1))},className:"absolute inset-0"})]})})():s.jsx("div",{className:"w-full aspect-square bg-gray-200 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-500",children:"No media"})}),E.spotify_preview_url&&s.jsxs("div",{className:"absolute top-4 right-4 z-10",children:[s.jsxs("button",{onClick:Me=>{Me.stopPropagation();const Je=document.getElementById(`audio-${E.id}`),Ut=Me.currentTarget.querySelector(".play-icon");document.querySelectorAll("audio").forEach(xt=>{xt.id!==`audio-${E.id}`&&xt.pause()}),Je.paused?(Je.play(),Ut&&(Ut.textContent="")):(Je.pause(),Ut&&(Ut.textContent=""))},className:"bg-black/70 hover:bg-black/90 backdrop-blur-sm text-white px-3 py-2 rounded-full shadow-lg transition-all flex items-center gap-2",children:[s.jsx("span",{className:"text-xl play-icon",children:""}),s.jsxs("div",{className:"text-left text-xs max-w-32",children:[s.jsx("div",{className:"font-semibold truncate",children:E.spotify_track_name}),s.jsx("div",{className:"text-white/80 truncate",children:E.spotify_artist_name})]})]}),s.jsx("audio",{id:`audio-${E.id}`,src:E.spotify_preview_url})]}),E.title&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-4 py-3",children:s.jsxs("div",{className:"flex items-end justify-between gap-2",children:[s.jsx("h3",{className:"text-white text-sm font-semibold flex-1",children:E.title}),y[E.id]&&y[E.id].count>0&&s.jsxs("div",{className:"flex items-center gap-1 bg-black/50 px-2 py-1 rounded-full",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-white text-xs font-semibold",children:y[E.id].average.toFixed(1)}),s.jsxs("span",{className:"text-white/70 text-xs",children:["(",y[E.id].count,")"]})]})]})})]}),s.jsxs("div",{className:"px-4 py-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>Oe(E.id),className:"transition-transform hover:scale-110 relative",children:[s.jsx(ym,{className:`w-7 h-7 ${le?"fill-red-500 text-red-500":"text-gray-700"}`}),((pt=E._count)==null?void 0:pt.likes)&&E._count.likes>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:E._count.likes})]}),s.jsxs("button",{onClick:()=>w(E.id),className:"transition-transform hover:scale-110 relative",children:[s.jsx(bm,{className:"w-7 h-7 text-gray-700"}),((qe=E._count)==null?void 0:qe.comments)&&E._count.comments>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:E._count.comments})]}),s.jsx("button",{onClick:()=>br(E.id),className:"ml-auto transition-transform hover:scale-110",children:s.jsx(Mo,{className:"w-7 h-7 text-gray-700 hover:text-orange-600 transition-colors"})})]}),E.caption&&s.jsxs("div",{className:"text-sm break-words overflow-wrap-anywhere",children:[s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold",children:(Et=E.profiles)==null?void 0:Et.username}),E.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&s.jsx(Ka,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"})]})," ",s.jsx("span",{className:"text-gray-700 break-all",children:U4(E.caption,Me=>{W(Me),T(null)})})]}),(((Ln=E._count)==null?void 0:Ln.comments)||0)>0&&s.jsxs("button",{onClick:()=>w(E.id),className:"text-sm text-gray-500 hover:text-gray-700",children:["View all ",(zi=E._count)==null?void 0:zi.comments," comments"]}),be.map(Me=>{var Je;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold",children:(Je=Me.profiles)==null?void 0:Je.username}),Me.user_id==="51ad04fa-6d63-4c45-9423-76183eea7b39"&&s.jsx(Ka,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"})]})," ",s.jsx("span",{className:"text-gray-700",children:Me.text})]},Me.id)}),(E.recipe_id||E.recipe_url)&&s.jsxs(te,{onClick:async()=>{if(E.recipe_id){const{getRecipeById:Me}=await ko(async()=>{const{getRecipeById:Ut}=await Promise.resolve().then(()=>Wm);return{getRecipeById:Ut}},void 0),Je=await Me(E.recipe_id);Je?$(Je):D.error("Recipe not found")}else E.recipe_url&&window.open(E.recipe_url,"_blank")},variant:"outline",size:"sm",className:"w-full mt-2 border-orange-600 text-orange-600 hover:bg-orange-50",children:[s.jsx(rd,{className:"w-4 h-4 mr-2"}),"View Recipe"]}),s.jsx("div",{className:"text-xs text-gray-400 uppercase pt-1",children:new Date(E.created_at).toLocaleDateString()})]})]},E.id)}),f&&s.jsx("div",{className:"py-8 text-center",children:s.jsx(te,{onClick:B,variant:"outline",children:"Load More"})})]})]}),g&&s.jsx(fd,{postId:g,isOpen:!!g,onClose:()=>w(null),onCommentPosted:()=>Pe(0,!0)}),s.jsx(Rc,{open:!!v,onOpenChange:E=>!E&&j(null),children:s.jsxs(bi,{children:[s.jsxs(ji,{children:[s.jsx(_i,{children:"Delete post?"}),s.jsx(Si,{children:"This action cannot be undone. This will permanently delete your post."})]}),s.jsxs(Ni,{children:[s.jsx(Ci,{children:"Cancel"}),s.jsx(ki,{onClick:_e,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(Rc,{open:!!N,onOpenChange:E=>!E&&_(null),children:s.jsxs(bi,{className:"max-h-[90vh] overflow-y-auto",children:[s.jsxs(ji,{children:[s.jsx(_i,{children:"Edit post"}),s.jsx(Si,{children:"Update your caption, recipe link, and images (up to 4 total)."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Caption"}),s.jsx(An,{value:(N==null?void 0:N.caption)||"",onChange:E=>_(le=>le?{...le,caption:E.target.value}:null),placeholder:"Write a caption...",className:"resize-none",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Recipe URL"}),s.jsx("input",{type:"url",value:(N==null?void 0:N.recipeUrl)||"",onChange:E=>_(le=>le?{...le,recipeUrl:E.target.value}:null),placeholder:"https://...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Current Images"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:(()=>{const E=a.find(Se=>Se.id===(N==null?void 0:N.id));if(!(E!=null&&E.image_url))return null;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(Se=>Se.trim()):[E.image_url]}const be=(N==null?void 0:N.deletedImages)||[];return le.filter(Se=>!be.includes(Se)).map((Se,ne)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:Se,alt:`Image ${ne+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200",loading:"lazy"}),s.jsx("button",{onClick:()=>{_(xe=>{if(!xe)return null;const Ee=xe.deletedImages||[];return{...xe,deletedImages:[...Ee,Se]}})},className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(At,{className:"w-4 h-4"})})]},ne))})()})]}),(()=>{const E=(N==null?void 0:N.newImages)||[],le=(N==null?void 0:N.newPreviews)||[];return E.length>0?s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block text-green-600",children:"New Images to Add"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:le.map((be,Ae)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:be,alt:`New image ${Ae+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-green-500",loading:"lazy"}),s.jsx("button",{onClick:()=>{_(Se=>{if(!Se)return null;const ne=Se.newImages||[],xe=Se.newPreviews||[];return URL.revokeObjectURL(xe[Ae]),{...Se,newImages:ne.filter((Ee,Be)=>Be!==Ae),newPreviews:xe.filter((Ee,Be)=>Be!==Ae)}})},className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(At,{className:"w-4 h-4"})})]},Ae))})]}):null})(),(()=>{const E=a.find(xe=>xe.id===(N==null?void 0:N.id));if(!(E!=null&&E.image_url))return null;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(xe=>xe.trim()):[E.image_url]}const be=(N==null?void 0:N.deletedImages)||[],Ae=le.length-be.length,Se=(N==null?void 0:N.newImages)||[],ne=Ae+Se.length;return ne>=4?s.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 4 images reached"}):s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Add More Photos"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:xe=>{const Ee=Array.from(xe.target.files||[]),Be=4-ne,ft=Ee.slice(0,Be),Ve=[],pt=[];for(const qe of ft){if(qe.size>10*1024*1024){D.error(`${qe.name} is too large (max 10MB)`);continue}if(!qe.type.startsWith("image/")){D.error(`${qe.name} is not an image`);continue}Ve.push(qe),pt.push(URL.createObjectURL(qe))}Ve.length>0&&(_(qe=>{if(!qe)return null;const Et=qe.newImages||[],Ln=qe.newPreviews||[];return{...qe,newImages:[...Et,...Ve],newPreviews:[...Ln,...pt]}}),D.success(`Added ${Ve.length} image${Ve.length>1?"s":""}`)),xe.target.value=""},disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ne,"/4 images selected"]})]})})()]}),s.jsxs(Ni,{children:[s.jsx(Ci,{children:"Cancel"}),s.jsx(ki,{onClick:async()=>{if(N)try{const E=a.find(Ve=>Ve.id===N.id);if(!(E!=null&&E.image_url))return;let le=[];try{le=JSON.parse(E.image_url)}catch{le=E.image_url.includes(",")?E.image_url.split(",").map(Ve=>Ve.trim()):[E.image_url]}const be=(N==null?void 0:N.deletedImages)||[],Ae=le.filter(Ve=>!be.includes(Ve)),Se=(N==null?void 0:N.newImages)||[],ne=[];if(Se.length>0){P(!0);for(const Ve of Se){const pt=Ve.name.split(".").pop(),qe=`${m}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${pt}`,{error:Et}=await L.storage.from("posts").upload(qe,Ve);if(Et)throw Et;const{data:Ln}=L.storage.from("posts").getPublicUrl(qe);ne.push(Ln.publicUrl)}P(!1)}const xe=[...Ae,...ne],Ee=xe.length>1?JSON.stringify(xe):xe[0]||null,{error:Be}=await L.from("posts").update({caption:N.caption.trim()||null,recipe_url:N.recipeUrl.trim()||null,image_url:Ee}).eq("id",N.id);if(Be)throw Be;i(Ve=>Ve.map(pt=>pt.id===N.id?{...pt,caption:N.caption.trim()||null,image_url:Ee,recipe_url:N.recipeUrl.trim()||null}:pt)),((N==null?void 0:N.newPreviews)||[]).forEach(Ve=>URL.revokeObjectURL(Ve)),D.success("Post updated"),_(null)}catch(E){console.error("Error updating post:",E),D.error("Failed to update post")}},className:"bg-orange-600 hover:bg-orange-700",disabled:k,children:k?"Uploading...":"Save changes"})]})]})}),M&&s.jsx(Bm,{recipe:M,open:!!M,onOpenChange:E=>!E&&$(null)}),s.jsx(Ct,{open:!!de,onOpenChange:E=>!E&&fe(null),children:s.jsxs(bt,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[s.jsx(Wt,{children:s.jsx($t,{children:"Share"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[s.jsx("button",{onClick:()=>ie("followers"),className:`flex-1 py-2 px-4 font-medium transition-colors ${z==="followers"?"text-orange-600 border-b-2 border-orange-600":"text-gray-500 hover:text-gray-700"}`,children:"Send to Followers"}),s.jsx("button",{onClick:()=>ie("link"),className:`flex-1 py-2 px-4 font-medium transition-colors ${z==="link"?"text-orange-600 border-b-2 border-orange-600":"text-gray-500 hover:text-gray-700"}`,children:"Share Link"})]}),z==="followers"&&s.jsx("div",{className:"space-y-4",children:O.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"You don't have any followers yet"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:O.map(E=>{var Ae,Se;const le=E.profiles,be=ge.has(E.following_id);return s.jsxs("button",{onClick:()=>{const ne=new Set(ge);be?ne.delete(E.following_id):ne.add(E.following_id),U(ne)},className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${be?"bg-orange-50 border-2 border-orange-500":"hover:bg-gray-50 border-2 border-transparent"}`,children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:le!=null&&le.avatar_url?s.jsx("img",{src:le.avatar_url,alt:le.username,className:"w-full h-full object-cover",loading:"lazy"}):(Se=(Ae=le==null?void 0:le.username)==null?void 0:Ae[0])==null?void 0:Se.toUpperCase()}),s.jsx("div",{className:"flex-1 text-left",children:s.jsx("div",{className:"font-semibold",children:le==null?void 0:le.username})}),be&&s.jsx(pc,{className:"w-5 h-5 text-orange-600"})]},E.following_id)})}),s.jsxs(te,{onClick:wn,disabled:ge.size===0,className:"w-full bg-orange-500 hover:bg-orange-600",children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Send to ",ge.size," ",ge.size===1?"person":"people"]})]})}),z==="link"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs(te,{onClick:()=>de&&at(de),className:"w-full bg-blue-500 hover:bg-blue-600",children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),"Share via Apps"]}),s.jsx(te,{onClick:()=>de&&Or(de),variant:"outline",className:"w-full",children:Ne?s.jsxs(s.Fragment,{children:[s.jsx(pc,{className:"w-4 h-4 mr-2"}),"Link Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Copy Link"]})})]})]})]})})]})})}function aI(){const{state:e}=Xs(),[t,r]=u.useState(null);return e.savedRecipes.length===0?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pt-safe pb-safe",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:py-8 pb-28 sm:pb-24",children:[s.jsxs("div",{className:"mb-8 sm:mb-6",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-1 sm:mb-2",children:"My Recipes"}),s.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-600",children:"Your saved recipes collection"})]}),s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 sm:py-12 md:py-20 px-4",children:[s.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 p-8 sm:p-6 md:p-8 rounded-full mb-6 shadow-lg",children:s.jsx(EE,{className:"w-20 h-20 sm:w-16 sm:h-16 md:w-20 md:h-20 text-emerald-600"})}),s.jsx("h2",{className:"text-xl sm:text-xl md:text-2xl font-bold text-gray-900 mb-3 text-center px-4 leading-tight",children:"No Saved Recipes Yet"}),s.jsx("p",{className:"text-gray-600 text-center max-w-md mb-6 px-4 text-base sm:text-sm md:text-base leading-relaxed",children:"Start building your recipe collection by exploring and saving your favorite recipes from the Discover page."}),s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-emerald-600 font-medium bg-emerald-50 px-4 py-2 rounded-full",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),s.jsx("span",{children:"Explore recipes to get started"})]})})]})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pt-safe pb-safe",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:py-6 pb-28 sm:pb-24",children:[s.jsxs("div",{className:"mb-6 sm:mb-6 flex items-start sm:items-center justify-between gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-1 leading-tight",children:"My Recipes"}),s.jsxs("p",{className:"text-sm sm:text-base md:text-xl text-gray-600 flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-semibold text-emerald-600",children:e.savedRecipes.length}),s.jsxs("span",{children:["saved recipe",e.savedRecipes.length!==1?"s":""]})]})]}),s.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 p-3 sm:p-3 md:p-4 rounded-2xl sm:rounded-full shadow-md shrink-0",children:s.jsx(Bs,{className:"w-6 h-6 sm:w-6 sm:h-6 md:w-8 md:h-8 text-emerald-600"})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:e.savedRecipes.map(n=>s.jsx("div",{className:"flex w-full",children:s.jsx(Hh,{recipe:n,showReviewButton:!0,onCook:o=>{const a=e.savedRecipes.find(i=>i.id===o);a&&r(a)}})},n.id))}),e.savedRecipes.length>6&&s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-300"})]})})]}),t&&s.jsx("div",{className:"fixed inset-0 z-50",children:s.jsx(zm,{recipe:t,onClose:()=>r(null)})})]})}var iI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lI=iI.reduce((e,t)=>{const r=Sm(`Primitive.${t}`),n=u.forwardRef((o,a)=>{const{asChild:i,...l}=o,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),cI="Label",Sj=u.forwardRef((e,t)=>s.jsx(lI.label,{...e,ref:t,onMouseDown:r=>{var o;r.target.closest("button, input, select, textarea")||((o=e.onMouseDown)==null||o.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Sj.displayName=cI;var kj=Sj;const dI=nd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),He=u.forwardRef(({className:e,...t},r)=>s.jsx(kj,{ref:r,className:Te(dI(),e),...t}));He.displayName=kj.displayName;function Ei(e,[t,r]){return Math.min(r,Math.max(t,e))}function uI(e){const t=hI(e),r=u.forwardRef((n,o)=>{const{children:a,...i}=n,l=u.Children.toArray(a),c=l.find(mI);if(c){const d=c.props.children,h=l.map(f=>f===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...i,ref:o,children:u.isValidElement(d)?u.cloneElement(d,void 0,h):null})}return s.jsx(t,{...i,ref:o,children:a})});return r.displayName=`${e}.Slot`,r}function hI(e){const t=u.forwardRef((r,n)=>{const{children:o,...a}=r;if(u.isValidElement(o)){const i=gI(o),l=pI(a,o.props);return o.type!==u.Fragment&&(l.ref=n?Dn(n,i):i),u.cloneElement(o,l)}return u.Children.count(o)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fI=Symbol("radix.slottable");function mI(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fI}function pI(e,t){const r={...t};for(const n in t){const o=e[n],a=t[n];/^on[A-Z]/.test(n)?o&&a?r[n]=(...l)=>{const c=a(...l);return o(...l),c}:o&&(r[n]=o):n==="style"?r[n]={...o,...a}:n==="className"&&(r[n]=[o,a].filter(Boolean).join(" "))}return{...e,...r}}function gI(e){var n,o;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Cj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),xI="VisuallyHidden",vI=u.forwardRef((e,t)=>s.jsx(Ie.span,{...e,ref:t,style:{...Cj,...e.style}}));vI.displayName=xI;var yI=[" ","Enter","ArrowUp","ArrowDown"],wI=[" ","Enter"],Hs="Select",[jd,Nd,bI]=Di(Hs),[da]=ir(Hs,[bI,vd]),_d=vd(),[jI,ys]=da(Hs),[NI,_I]=da(Hs),Ej=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:b}=e,g=_d(t),[w,y]=u.useState(null),[x,v]=u.useState(null),[j,N]=u.useState(!1),_=ia(d),[k,P]=Qr({prop:n,defaultProp:o??!1,onChange:a,caller:Hs}),[C,R]=Qr({prop:i,defaultProp:l,onChange:c,caller:Hs}),M=u.useRef(null),$=w?b||!!w.closest("form"):!0,[Q,H]=u.useState(new Set),oe=Array.from(Q).map(q=>q.props.value).join(";");return s.jsx(t1,{...g,children:s.jsxs(jI,{required:m,scope:t,trigger:w,onTriggerChange:y,valueNode:x,onValueNodeChange:v,valueNodeHasChildren:j,onValueNodeHasChildrenChange:N,contentId:Kr(),value:C,onValueChange:R,open:k,onOpenChange:P,dir:_,triggerPointerDownPosRef:M,disabled:p,children:[s.jsx(jd.Provider,{scope:t,children:s.jsx(NI,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(q=>{H(G=>new Set(G).add(q))},[]),onNativeOptionRemove:u.useCallback(q=>{H(G=>{const I=new Set(G);return I.delete(q),I})},[]),children:r})}),$?s.jsxs(Qj,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:q=>R(q.target.value),disabled:p,form:b,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(Q)]},oe):null]})})};Ej.displayName=Hs;var Rj="SelectTrigger",Pj=u.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...o}=e,a=_d(r),i=ys(Rj,r),l=i.disabled||n,c=$e(t,i.onTriggerChange),d=Nd(r),h=u.useRef("touch"),[f,p,m]=eN(g=>{const w=d().filter(v=>!v.disabled),y=w.find(v=>v.value===i.value),x=tN(w,g,y);x!==void 0&&i.onValueChange(x.value)}),b=g=>{l||(i.onOpenChange(!0),m()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(r1,{asChild:!0,...a,children:s.jsx(Ie.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Zj(i.value)?"":void 0,...o,ref:c,onClick:ye(o.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&b(g)}),onPointerDown:ye(o.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:ye(o.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&yI.includes(g.key)&&(b(),g.preventDefault())})})})});Pj.displayName=Rj;var Tj="SelectValue",Aj=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:o,children:a,placeholder:i="",...l}=e,c=ys(Tj,r),{onValueNodeHasChildrenChange:d}=c,h=a!==void 0,f=$e(t,c.onValueNodeChange);return It(()=>{d(h)},[d,h]),s.jsx(Ie.span,{...l,ref:f,style:{pointerEvents:"none"},children:Zj(c.value)?s.jsx(s.Fragment,{children:i}):a})});Aj.displayName=Tj;var SI="SelectIcon",Ij=u.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...o}=e;return s.jsx(Ie.span,{"aria-hidden":!0,...o,ref:t,children:n||""})});Ij.displayName=SI;var kI="SelectPortal",Oj=e=>s.jsx(ad,{asChild:!0,...e});Oj.displayName=kI;var Ks="SelectContent",Mj=u.forwardRef((e,t)=>{const r=ys(Ks,e.__scopeSelect),[n,o]=u.useState();if(It(()=>{o(new DocumentFragment)},[]),!r.open){const a=n;return a?na.createPortal(s.jsx(Dj,{scope:e.__scopeSelect,children:s.jsx(jd.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx($j,{...e,ref:t})});Mj.displayName=Ks;var Ur=10,[Dj,ws]=da(Ks),CI="SelectContentImpl",EI=uI("SelectContent.RemoveScroll"),$j=u.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:w,...y}=e,x=ys(Ks,r),[v,j]=u.useState(null),[N,_]=u.useState(null),k=$e(t,V=>j(V)),[P,C]=u.useState(null),[R,M]=u.useState(null),$=Nd(r),[Q,H]=u.useState(!1),oe=u.useRef(!1);u.useEffect(()=>{if(v)return Rm(v)},[v]),Em();const q=u.useCallback(V=>{const[ee,...pe]=$().map(z=>z.ref.current),[de]=pe.slice(-1),fe=document.activeElement;for(const z of V)if(z===fe||(z==null||z.scrollIntoView({block:"nearest"}),z===ee&&N&&(N.scrollTop=0),z===de&&N&&(N.scrollTop=N.scrollHeight),z==null||z.focus(),document.activeElement!==fe))return},[$,N]),G=u.useCallback(()=>q([P,v]),[q,P,v]);u.useEffect(()=>{Q&&G()},[Q,G]);const{onOpenChange:I,triggerPointerDownPosRef:S}=x;u.useEffect(()=>{if(v){let V={x:0,y:0};const ee=de=>{var fe,z;V={x:Math.abs(Math.round(de.pageX)-(((fe=S.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(de.pageY)-(((z=S.current)==null?void 0:z.y)??0))}},pe=de=>{V.x<=10&&V.y<=10?de.preventDefault():v.contains(de.target)||I(!1),document.removeEventListener("pointermove",ee),S.current=null};return S.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",pe,{capture:!0})}}},[v,I,S]),u.useEffect(()=>{const V=()=>I(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[I]);const[T,Z]=eN(V=>{const ee=$().filter(fe=>!fe.disabled),pe=ee.find(fe=>fe.ref.current===document.activeElement),de=tN(ee,V,pe);de&&setTimeout(()=>de.ref.current.focus())}),F=u.useCallback((V,ee,pe)=>{const de=!oe.current&&!pe;(x.value!==void 0&&x.value===ee||de)&&(C(V),de&&(oe.current=!0))},[x.value]),W=u.useCallback(()=>v==null?void 0:v.focus(),[v]),A=u.useCallback((V,ee,pe)=>{const de=!oe.current&&!pe;(x.value!==void 0&&x.value===ee||de)&&M(V)},[x.value]),X=n==="popper"?Qh:Lj,J=X===Qh?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:w}:{};return s.jsx(Dj,{scope:r,content:v,viewport:N,onViewportChange:_,itemRefCallback:F,selectedItem:P,onItemLeave:W,itemTextRefCallback:A,focusSelectedItem:G,selectedItemText:R,position:n,isPositioned:Q,searchRef:T,children:s.jsx(ld,{as:EI,allowPinchZoom:!0,children:s.jsx(od,{asChild:!0,trapped:x.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:ye(o,V=>{var ee;(ee=x.trigger)==null||ee.focus({preventScroll:!0}),V.preventDefault()}),children:s.jsx(sd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(X,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:V=>V.preventDefault(),...y,...J,onPlaced:()=>H(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ye(y.onKeyDown,V=>{const ee=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!ee&&V.key.length===1&&Z(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let de=$().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(V.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const fe=V.target,z=de.indexOf(fe);de=de.slice(z+1)}setTimeout(()=>q(de)),V.preventDefault()}})})})})})})});$j.displayName=CI;var RI="SelectItemAlignedPosition",Lj=u.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...o}=e,a=ys(Ks,r),i=ws(Ks,r),[l,c]=u.useState(null),[d,h]=u.useState(null),f=$e(t,k=>h(k)),p=Nd(r),m=u.useRef(!1),b=u.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:y,focusSelectedItem:x}=i,v=u.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&w&&y){const k=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(a.dir!=="rtl"){const fe=R.left-P.left,z=C.left-fe,ie=k.left-z,O=k.width+ie,he=Math.max(O,P.width),ge=window.innerWidth-Ur,U=Ei(z,[Ur,Math.max(Ur,ge-he)]);l.style.minWidth=O+"px",l.style.left=U+"px"}else{const fe=P.right-R.right,z=window.innerWidth-C.right-fe,ie=window.innerWidth-k.right-z,O=k.width+ie,he=Math.max(O,P.width),ge=window.innerWidth-Ur,U=Ei(z,[Ur,Math.max(Ur,ge-he)]);l.style.minWidth=O+"px",l.style.right=U+"px"}const M=p(),$=window.innerHeight-Ur*2,Q=g.scrollHeight,H=window.getComputedStyle(d),oe=parseInt(H.borderTopWidth,10),q=parseInt(H.paddingTop,10),G=parseInt(H.borderBottomWidth,10),I=parseInt(H.paddingBottom,10),S=oe+q+Q+I+G,T=Math.min(w.offsetHeight*5,S),Z=window.getComputedStyle(g),F=parseInt(Z.paddingTop,10),W=parseInt(Z.paddingBottom,10),A=k.top+k.height/2-Ur,X=$-A,J=w.offsetHeight/2,V=w.offsetTop+J,ee=oe+q+V,pe=S-ee;if(ee<=A){const fe=M.length>0&&w===M[M.length-1].ref.current;l.style.bottom="0px";const z=d.clientHeight-g.offsetTop-g.offsetHeight,ie=Math.max(X,J+(fe?W:0)+z+G),O=ee+ie;l.style.height=O+"px"}else{const fe=M.length>0&&w===M[0].ref.current;l.style.top="0px";const ie=Math.max(A,oe+g.offsetTop+(fe?F:0)+J)+pe;l.style.height=ie+"px",g.scrollTop=ee-A+g.offsetTop}l.style.margin=`${Ur}px 0`,l.style.minHeight=T+"px",l.style.maxHeight=$+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,l,d,g,w,y,a.dir,n]);It(()=>v(),[v]);const[j,N]=u.useState();It(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const _=u.useCallback(k=>{k&&b.current===!0&&(v(),x==null||x(),b.current=!1)},[v,x]);return s.jsx(TI,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Ie.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Lj.displayName=RI;var PI="SelectPopperPosition",Qh=u.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:o=Ur,...a}=e,i=_d(r);return s.jsx(n1,{...i,...a,ref:t,align:n,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Qh.displayName=PI;var[TI,ip]=da(Ks,{}),Zh="SelectViewport",Uj=u.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...o}=e,a=ws(Zh,r),i=ip(Zh,r),l=$e(t,a.onViewportChange),c=u.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(jd.Slot,{scope:r,children:s.jsx(Ie.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:ye(o.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&f){const m=Math.abs(c.current-h.scrollTop);if(m>0){const b=window.innerHeight-Ur*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),y=Math.max(g,w);if(y<b){const x=y+m,v=Math.min(b,x),j=x-v;f.style.height=v+"px",f.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Uj.displayName=Zh;var Fj="SelectGroup",[AI,II]=da(Fj),OI=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=Kr();return s.jsx(AI,{scope:r,id:o,children:s.jsx(Ie.div,{role:"group","aria-labelledby":o,...n,ref:t})})});OI.displayName=Fj;var zj="SelectLabel",Bj=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=II(zj,r);return s.jsx(Ie.div,{id:o.id,...n,ref:t})});Bj.displayName=zj;var Pc="SelectItem",[MI,Vj]=da(Pc),Wj=u.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:o=!1,textValue:a,...i}=e,l=ys(Pc,r),c=ws(Pc,r),d=l.value===n,[h,f]=u.useState(a??""),[p,m]=u.useState(!1),b=$e(t,x=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,x,n,o)}),g=Kr(),w=u.useRef("touch"),y=()=>{o||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(MI,{scope:r,value:n,disabled:o,textId:g,isSelected:d,onItemTextChange:u.useCallback(x=>{f(v=>v||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(jd.ItemSlot,{scope:r,value:n,disabled:o,textValue:h,children:s.jsx(Ie.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:b,onFocus:ye(i.onFocus,()=>m(!0)),onBlur:ye(i.onBlur,()=>m(!1)),onClick:ye(i.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:ye(i.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:ye(i.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:ye(i.onPointerMove,x=>{var v;w.current=x.pointerType,o?(v=c.onItemLeave)==null||v.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(i.onPointerLeave,x=>{var v;x.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:ye(i.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(wI.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});Wj.displayName=Pc;var Aa="SelectItemText",qj=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:o,...a}=e,i=ys(Aa,r),l=ws(Aa,r),c=Vj(Aa,r),d=_I(Aa,r),[h,f]=u.useState(null),p=$e(t,y=>f(y),c.onItemTextChange,y=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,y,c.value,c.disabled)}),m=h==null?void 0:h.textContent,b=u.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return It(()=>(g(b),()=>w(b)),[g,w,b]),s.jsxs(s.Fragment,{children:[s.jsx(Ie.span,{id:c.textId,...a,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?na.createPortal(a.children,i.valueNode):null]})});qj.displayName=Aa;var Hj="SelectItemIndicator",Kj=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Vj(Hj,r).isSelected?s.jsx(Ie.span,{"aria-hidden":!0,...n,ref:t}):null});Kj.displayName=Hj;var ef="SelectScrollUpButton",Gj=u.forwardRef((e,t)=>{const r=ws(ef,e.__scopeSelect),n=ip(ef,e.__scopeSelect),[o,a]=u.useState(!1),i=$e(t,n.onScrollButtonChange);return It(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?s.jsx(Jj,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Gj.displayName=ef;var tf="SelectScrollDownButton",Yj=u.forwardRef((e,t)=>{const r=ws(tf,e.__scopeSelect),n=ip(tf,e.__scopeSelect),[o,a]=u.useState(!1),i=$e(t,n.onScrollButtonChange);return It(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;a(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),o?s.jsx(Jj,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Yj.displayName=tf;var Jj=u.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...o}=e,a=ws("SelectScrollButton",r),i=u.useRef(null),l=Nd(r),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),It(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ie.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:ye(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:ye(o.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:ye(o.onPointerLeave,()=>{c()})})}),DI="SelectSeparator",Xj=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ie.div,{"aria-hidden":!0,...n,ref:t})});Xj.displayName=DI;var rf="SelectArrow",$I=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,o=_d(r),a=ys(rf,r),i=ws(rf,r);return a.open&&i.position==="popper"?s.jsx(s1,{...o,...n,ref:t}):null});$I.displayName=rf;var LI="SelectBubbleInput",Qj=u.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const o=u.useRef(null),a=$e(n,o),i=dd(t);return u.useEffect(()=>{const l=o.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),s.jsx(Ie.select,{...r,style:{...Cj,...r.style},ref:a,defaultValue:t})});Qj.displayName=LI;function Zj(e){return e===""||e===void 0}function eN(e){const t=Mt(e),r=u.useRef(""),n=u.useRef(0),o=u.useCallback(i=>{const l=r.current+i;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=u.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,o,a]}function tN(e,t,r){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=UI(e,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==r?c:void 0}function UI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var FI=Ej,rN=Pj,zI=Aj,BI=Ij,VI=Oj,nN=Mj,WI=Uj,sN=Bj,oN=Wj,qI=qj,HI=Kj,aN=Gj,iN=Yj,lN=Xj;const mn=FI,pn=zI,Yr=u.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(rN,{ref:n,className:Te("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(BI,{asChild:!0,children:s.jsx(S5,{className:"h-4 w-4 opacity-50"})})]}));Yr.displayName=rN.displayName;const cN=u.forwardRef(({className:e,...t},r)=>s.jsx(aN,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(T5,{})}));cN.displayName=aN.displayName;const dN=u.forwardRef(({className:e,...t},r)=>s.jsx(iN,{ref:r,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(wb,{})}));dN.displayName=iN.displayName;const Jr=u.forwardRef(({className:e,children:t,position:r="popper",...n},o)=>s.jsx(VI,{children:s.jsxs(nN,{ref:o,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(cN,{}),s.jsx(WI,{className:Te("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(dN,{})]})}));Jr.displayName=nN.displayName;const KI=u.forwardRef(({className:e,...t},r)=>s.jsx(sN,{ref:r,className:Te("px-2 py-1.5 text-sm font-semibold",e),...t}));KI.displayName=sN.displayName;const fr=u.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(oN,{ref:n,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(HI,{children:s.jsx(Lm,{className:"h-4 w-4"})})}),s.jsx(qI,{children:t})]}));fr.displayName=oN.displayName;const GI=u.forwardRef(({className:e,...t},r)=>s.jsx(lN,{ref:r,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));GI.displayName=lN.displayName;const uN="https://vohvdarghgqskzqjclux.supabase.co",Wx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvaHZkYXJnaGdxc2t6cWpjbHV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODgwMDcsImV4cCI6MjA3ODQ2NDAwN30.6povbtgWFLTvq6lxVrqii_-PrOiLZrUo1n-BMlpK4gc",YI=`${uN}/functions/v1/recipe-proxy`,JI="https://recipe-backend-nodejs-1.onrender.com/extract";async function qx(e){var l,c,d,h,f,p,m,b,g,w;if(!e.trim()||!hN(e))throw new Error("Please enter a valid URL");if(/tiktok\.com|instagram\.com|youtube\.com|youtu\.be/i.test(e))try{console.log("[Extractor] Sending to Render server:",e);const y=new AbortController,x=setTimeout(()=>y.abort(),5e4),v=await fetch(JI,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.trim()}),signal:y.signal});if(clearTimeout(x),!v.ok){if(console.error("[Extractor] Server response not OK:",v.status),v.status>=500||v.status===429)throw new Error("Server waking up  try again in 20 seconds");const C=await v.text();throw console.error("[Extractor] Error response:",C),new Error("Video extraction failed")}const j=await v.json();console.log("[Extractor] Raw data from server:",j);const N=j.thumbnail||j.image||"";console.log("[Extractor] Raw image URL:",N);let _=N;if(N)if(N.includes("cdninstagram.com")||N.includes("fbcdn.net")||N.includes("instagram.com")){const R=N.replace(/&amp;/g,"&");_=`${uN}/functions/v1/image-proxy?url=${encodeURIComponent(R)}`,console.log("[Extractor] Instagram image detected, proxying:",_)}else console.log("[Extractor] Direct image URL (no proxy needed):",_);const k=(j.ingredients||[]).map(C=>{const R=Nr(C.trim());if(!R)return{quantity:"",unit:"",name:""};const M=R.match(/^([\d\/\.\-\s\,]+)\s*/),$=M?M[1].trim():"",Q=fx($);let H=R.slice($.length).trim();const oe=H.match(/^(cups?|tbsps?|tablespoons?|tsps?|teaspoons?|oz|ounces?|lbs?|pounds?|grams?|g|kg|kilograms?|ml|milliliters?|l|liters?|pinch|dash|piece|pieces|clove|cloves|slice|slices|can|cans)\s+/i);let q="";if(oe){const G=oe[1].toLowerCase();H=H.slice(oe[0].length).trim(),G==="g"||G==="gram"||G==="grams"?q="g":G==="kg"||G==="kilogram"||G==="kilograms"?q="kg":G==="ml"||G==="milliliter"||G==="milliliters"?q="ml":G==="l"||G==="liter"||G==="liters"?q="l":G.startsWith("cup")?q="cup":G.startsWith("tbsp")||G.startsWith("tablespoon")?q="tbsp":G.startsWith("tsp")||G.startsWith("teaspoon")?q="tsp":G==="oz"||G.startsWith("ounce")?q="oz":G.startsWith("lb")||G.startsWith("pound")?q="lb":q=G}else q=Q?"piece":"";return{quantity:Q,unit:q,name:H||R}}),P=C=>{if(!C||C<=0)return"30 mins";if(C<60)return`${C} mins`;const R=Math.floor(C/60),M=C%60;return M?`${R} hr ${M} mins`:`${R} hr`};return console.log("[Extractor] Final image URL being returned:",_),{title:Nr(j.title||j.channel||"Video Recipe"),description:Nr(j.description||j.shortDescription||j.content||""),creator:Nr(j.channel||j.creator||"Unknown"),ingredients:k,instructions:(j.instructions||[]).map(C=>Nr(C)),prepTime:P(j.prep_time||15),cookTime:P(j.cook_time||35),servings:j.servings||j.yield||"4",cuisineType:"Global",difficulty:"Medium",mealTypes:["Dinner"],dietaryTags:[],imageUrl:_,videoUrl:e,notes:"Extracted using your Render server",sourceUrl:e}}catch(y){throw console.error("[Extractor] Catch block error:",y),y.name==="AbortError"?new Error("Server is waking up  please wait 20-30 seconds and try again"):new Error("Video extraction temporarily unavailable  try again soon")}const r=await fetch(YI,{method:"POST",headers:{"Content-Type":"application/json",apikey:Wx,Authorization:`Bearer ${Wx}`},body:JSON.stringify({url:e.trim()})});if(!r.ok)throw await r.text(),new Error("Failed to extract from website");const n=await r.json(),o=y=>y.map(x=>{const v=Nr(x.trim()),j=v.match(/^([\d\/\.\-\s\,]+)\s*/),N=j?j[1].trim():"",_=fx(N);let k=v.slice(N.length).trim();const P=k.match(/^(cups?|tbsps?|tablespoons?|tsps?|teaspoons?|oz|ounces?|lbs?|pounds?|grams?|g|kg|kilograms?|ml|milliliters?|l|liters?|pinch|dash|piece|pieces|clove|cloves|slice|slices|can|cans)\s+/i);let C="";if(P){const R=P[1].toLowerCase();k=k.slice(P[0].length).trim(),R==="g"||R==="gram"||R==="grams"?C="g":R==="kg"||R==="kilogram"||R==="kilograms"?C="kg":R==="ml"||R==="milliliter"||R==="milliliters"?C="ml":R==="l"||R==="liter"||R==="liters"?C="l":R.startsWith("cup")?C="cup":R.startsWith("tbsp")||R.startsWith("tablespoon")?C="tbsp":R.startsWith("tsp")||R.startsWith("teaspoon")?C="tsp":R==="oz"||R.startsWith("ounce")?C="oz":R.startsWith("lb")||R.startsWith("pound")?C="lb":C=R}else C=_?"piece":"";return{quantity:_,unit:C,name:k||v}}),a=o(n.ingredients||[]),i={title:Nr(n.title||"Untitled Recipe"),description:"Extracted recipe",creator:Nr(n.author||"Unknown"),ingredients:a,instructions:(n.instructions||[]).map(Nr),prepTime:n.prep_time?`${n.prep_time} mins`:"30 mins",cookTime:n.cook_time?`${n.cook_time} mins`:"45 mins",servings:String(n.yield||"4"),cuisineType:"Global",difficulty:"Medium",mealTypes:["Dinner"],dietaryTags:[],imageUrl:n.image||"",videoUrl:"",notes:n.notes||"",sourceUrl:e};return n.hasConflict&&(i.hasConflict=!0,i.structuredVersion={...i,ingredients:o(((l=n.structuredVersion)==null?void 0:l.ingredients)||[]),instructions:(((c=n.structuredVersion)==null?void 0:c.instructions)||[]).map(Nr),prepTime:(d=n.structuredVersion)!=null&&d.prep_time?`${n.structuredVersion.prep_time} mins`:"30 mins",cookTime:(h=n.structuredVersion)!=null&&h.cook_time?`${n.structuredVersion.cook_time} mins`:"45 mins",servings:String(((f=n.structuredVersion)==null?void 0:f.yield)||"4"),notes:""},i.aiVersion={...i,ingredients:o(((p=n.aiVersion)==null?void 0:p.ingredients)||[]),instructions:(((m=n.aiVersion)==null?void 0:m.instructions)||[]).map(Nr),prepTime:(b=n.aiVersion)!=null&&b.prep_time?`${n.aiVersion.prep_time} mins`:"30 mins",cookTime:(g=n.aiVersion)!=null&&g.cook_time?`${n.aiVersion.cook_time} mins`:"45 mins",servings:String(((w=n.aiVersion)==null?void 0:w.yield)||"4"),notes:""}),i}function hN(e){try{return new URL(e),!0}catch{return!1}}function XI(e,t){return u.useReducer((r,n)=>t[r][n]??r,e)}var lp="ScrollArea",[fN]=ir(lp),[QI,Ar]=fN(lp),mN=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:o,scrollHideDelay:a=600,...i}=e,[l,c]=u.useState(null),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(null),[g,w]=u.useState(null),[y,x]=u.useState(0),[v,j]=u.useState(0),[N,_]=u.useState(!1),[k,P]=u.useState(!1),C=$e(t,M=>c(M)),R=ia(o);return s.jsx(QI,{scope:r,type:n,dir:R,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:j,children:s.jsx(Ie.div,{dir:R,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});mN.displayName=lp;var pN="ScrollAreaViewport",gN=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:o,...a}=e,i=Ar(pN,r),l=u.useRef(null),c=$e(t,l,i.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),s.jsx(Ie.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});gN.displayName=pN;var vn="ScrollAreaScrollbar",cp=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Ar(vn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return u.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),o.type==="hover"?s.jsx(ZI,{...n,ref:t,forceMount:r}):o.type==="scroll"?s.jsx(eO,{...n,ref:t,forceMount:r}):o.type==="auto"?s.jsx(xN,{...n,ref:t,forceMount:r}):o.type==="always"?s.jsx(dp,{...n,ref:t}):null});cp.displayName=vn;var ZI=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Ar(vn,e.__scopeScrollArea),[a,i]=u.useState(!1);return u.useEffect(()=>{const l=o.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},h=()=>{c=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[o.scrollArea,o.scrollHideDelay]),s.jsx(lr,{present:r||a,children:s.jsx(xN,{"data-state":a?"visible":"hidden",...n,ref:t})})}),eO=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=Ar(vn,e.__scopeScrollArea),a=e.orientation==="horizontal",i=kd(()=>c("SCROLL_END"),100),[l,c]=XI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,o.scrollHideDelay,c]),u.useEffect(()=>{const d=o.viewport,h=a?"scrollLeft":"scrollTop";if(d){let f=d[h];const p=()=>{const m=d[h];f!==m&&(c("SCROLL"),i()),f=m};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[o.viewport,a,c,i]),s.jsx(lr,{present:r||l!=="hidden",children:s.jsx(dp,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ye(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ye(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),xN=u.forwardRef((e,t)=>{const r=Ar(vn,e.__scopeScrollArea),{forceMount:n,...o}=e,[a,i]=u.useState(!1),l=e.orientation==="horizontal",c=kd(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?d:h)}},10);return Zo(r.viewport,c),Zo(r.content,c),s.jsx(lr,{present:n||a,children:s.jsx(dp,{"data-state":a?"visible":"hidden",...o,ref:t})})}),dp=u.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,o=Ar(vn,e.__scopeScrollArea),a=u.useRef(null),i=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=jN(l.viewport,l.content),h={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function f(p,m){return aO(p,i.current,l,m)}return r==="horizontal"?s.jsx(tO,{...h,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollLeft,m=Hx(p,l,o.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollLeft=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollLeft=f(p,o.dir))}}):r==="vertical"?s.jsx(rO,{...h,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const p=o.viewport.scrollTop,m=Hx(p,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{o.viewport&&(o.viewport.scrollTop=p)},onDragScroll:p=>{o.viewport&&(o.viewport.scrollTop=f(p))}}):null}),tO=u.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...o}=e,a=Ar(vn,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=$e(t,c,a.onScrollbarXChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(yN,{"data-orientation":"horizontal",...o,ref:d,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sd(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(p),_N(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ac(i.paddingLeft),paddingEnd:Ac(i.paddingRight)}})}})}),rO=u.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...o}=e,a=Ar(vn,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=$e(t,c,a.onScrollbarYChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(yN,{"data-orientation":"vertical",...o,ref:d,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sd(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(p),_N(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ac(i.paddingTop),paddingEnd:Ac(i.paddingBottom)}})}})}),[nO,vN]=fN(vn),yN=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:o,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...p}=e,m=Ar(vn,r),[b,g]=u.useState(null),w=$e(t,C=>g(C)),y=u.useRef(null),x=u.useRef(""),v=m.viewport,j=n.content-n.viewport,N=Mt(h),_=Mt(c),k=kd(f,10);function P(C){if(y.current){const R=C.clientX-y.current.left,M=C.clientY-y.current.top;d({x:R,y:M})}}return u.useEffect(()=>{const C=R=>{const M=R.target;(b==null?void 0:b.contains(M))&&N(R,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,b,j,N]),u.useEffect(_,[n,_]),Zo(b,k),Zo(m.content,k),s.jsx(nO,{scope:r,scrollbar:b,hasThumb:o,onThumbChange:Mt(a),onThumbPointerUp:Mt(i),onThumbPositionChange:_,onThumbPointerDown:Mt(l),children:s.jsx(Ie.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:ye(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=b.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(C))}),onPointerMove:ye(e.onPointerMove,P),onPointerUp:ye(e.onPointerUp,C=>{const R=C.target;R.hasPointerCapture(C.pointerId)&&R.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),Tc="ScrollAreaThumb",wN=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=vN(Tc,e.__scopeScrollArea);return s.jsx(lr,{present:r||o.hasThumb,children:s.jsx(sO,{ref:t,...n})})}),sO=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...o}=e,a=Ar(Tc,r),i=vN(Tc,r),{onThumbPositionChange:l}=i,c=$e(t,f=>i.onThumbChange(f)),d=u.useRef(void 0),h=kd(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(h(),!d.current){const m=iO(f,l);d.current=m,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,h,l]),s.jsx(Ie.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ye(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),b=f.clientX-m.left,g=f.clientY-m.top;i.onThumbPointerDown({x:b,y:g})}),onPointerUp:ye(e.onPointerUp,i.onThumbPointerUp)})});wN.displayName=Tc;var up="ScrollAreaCorner",bN=u.forwardRef((e,t)=>{const r=Ar(up,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(oO,{...e,ref:t}):null});bN.displayName=up;var oO=u.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,o=Ar(up,r),[a,i]=u.useState(0),[l,c]=u.useState(0),d=!!(a&&l);return Zo(o.scrollbarX,()=>{var f;const h=((f=o.scrollbarX)==null?void 0:f.offsetHeight)||0;o.onCornerHeightChange(h),c(h)}),Zo(o.scrollbarY,()=>{var f;const h=((f=o.scrollbarY)==null?void 0:f.offsetWidth)||0;o.onCornerWidthChange(h),i(h)}),d?s.jsx(Ie.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ac(e){return e?parseInt(e,10):0}function jN(e,t){const r=e/t;return isNaN(r)?0:r}function Sd(e){const t=jN(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function aO(e,t,r,n="ltr"){const o=Sd(r),a=o/2,i=t||a,l=o-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return NN([c,d],f)(e)}function Hx(e,t,r="ltr"){const n=Sd(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-o,i=t.content-t.viewport,l=a-n,c=r==="ltr"?[0,i]:[i*-1,0],d=Ei(e,c);return NN([0,i],[0,l])(d)}function NN(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function _N(e,t){return e>0&&e<t}var iO=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function o(){const a={left:e.scrollLeft,top:e.scrollTop},i=r.left!==a.left,l=r.top!==a.top;(i||l)&&t(),r=a,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function kd(e,t){const r=Mt(e),n=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),u.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Zo(e,t){const r=Mt(t);It(()=>{let n=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return o.observe(e),()=>{window.cancelAnimationFrame(n),o.unobserve(e)}}},[e,r])}var SN=mN,lO=gN,cO=bN;const Fo=u.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(SN,{ref:n,className:Te("relative overflow-hidden",e),...r,children:[s.jsx(lO,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(kN,{}),s.jsx(cO,{})]}));Fo.displayName=SN.displayName;const kN=u.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(cp,{ref:n,orientation:t,className:Te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(wN,{className:"relative flex-1 rounded-full bg-border"})}));kN.displayName=cp.displayName;async function dO(e,t){try{console.log("[ImageStorage] Downloading image:",e);const r=e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net");let n=e;r&&(n=`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`);const o=await fetch(n);if(!o.ok)throw new Error(`Failed to fetch image: ${o.status}`);const a=await o.blob();console.log("[ImageStorage] Downloaded blob:",a.type,a.size);const i=a.type.split("/")[1]||"jpg",l=Date.now(),c=`recipes/${t}/${l}.${i}`;console.log("[ImageStorage] Uploading to:",c);const{data:d,error:h}=await L.storage.from("recipe-images").upload(c,a,{contentType:a.type,cacheControl:"31536000",upsert:!1});if(h)throw console.error("[ImageStorage] Upload error:",h),h;console.log("[ImageStorage] Upload successful:",d);const{data:{publicUrl:f}}=L.storage.from("recipe-images").getPublicUrl(c);return console.log("[ImageStorage]  Permanent URL:",f),f}catch(r){return console.error("[ImageStorage]  Failed to store image:",r),e}}async function uO(e,t){try{console.log("[ImageStorage] Downloading post image:",e);let r=e;if(e.includes("/functions/v1/image-proxy?url="))try{const b=new URL(e).searchParams.get("url");b&&(r=decodeURIComponent(b),console.log("[ImageStorage] Extracted original URL from proxy:",r))}catch(m){console.warn("[ImageStorage] Failed to extract URL from proxy:",m)}const n=r.includes("instagram.com")||r.includes("cdninstagram.com")||r.includes("fbcdn.net");if(n&&(r.includes("x-expires")||r.includes("_nc_ht")))throw console.warn("[ImageStorage]  Instagram URL has expired tokens, cannot download"),new Error("Instagram URL expired - image no longer accessible");let o=r;n&&(o=`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(r)}`);const a=await fetch(o);if(!a.ok)throw new Error(`Failed to fetch image: ${a.status}`);const i=await a.blob();console.log("[ImageStorage] Downloaded post blob:",i.type,i.size);const l=i.type.split("/")[1]||"jpg",c=Date.now(),d=`posts/${t}/${c}.${l}`;console.log("[ImageStorage] Uploading post image to:",d);const{data:h,error:f}=await L.storage.from("posts").upload(d,i,{contentType:i.type,cacheControl:"31536000",upsert:!1});if(f)throw console.error("[ImageStorage] Upload error:",f),f;console.log("[ImageStorage] Upload successful:",h);const{data:{publicUrl:p}}=L.storage.from("posts").getPublicUrl(d);return console.log("[ImageStorage]  Permanent post URL:",p),p}catch(r){return console.error("[ImageStorage]  Failed to store post image:",r),e}}async function hO(){console.log("[Migration] Starting post image migration...");const{data:e,error:t}=await L.from("posts").select("id, image_url, title").or("image_url.ilike.%instagram%,image_url.ilike.%cdninstagram%,image_url.ilike.%fbcdn%").not("image_url","is",null);if(t){console.error("[Migration] Error fetching posts:",t);return}console.log(`[Migration] Found ${(e==null?void 0:e.length)||0} posts to check`);let r=0,n=0,o=0;const a=[];for(const i of e||[])try{console.log(`[Migration] Processing post ${i.id} - "${i.title}"...`);let l=[];try{l=JSON.parse(i.image_url)}catch{l=i.image_url.includes(",")?i.image_url.split(",").map(f=>f.trim()):[i.image_url]}const c=[];let d=!1;for(const f of l)if(f.includes("instagram.com")||f.includes("cdninstagram.com")||f.includes("fbcdn.net"))try{const m=await uO(f,i.id);m!==f?c.push(m):c.push(f)}catch(m){m.message.includes("expired")?(console.warn(`[Migration]  Post ${i.id} has expired Instagram URL`),d=!0,a.push({id:i.id,title:i.title,url:f})):c.push(f)}else c.push(f);if(d){o++,n++;continue}const h=c.length>1?JSON.stringify(c):c[0];if(h!==i.image_url){const{error:f}=await L.from("posts").update({image_url:h}).eq("id",i.id);f?(console.error(`[Migration] Failed to update post ${i.id}:`,f),n++):(console.log(`[Migration]  Migrated post ${i.id}`),r++)}else console.log(`[Migration]  Skipped post ${i.id} (no change needed)`);await new Promise(f=>setTimeout(f,1e3))}catch(l){console.error(`[Migration] Error processing post ${i.id}:`,l),n++}return console.log("[Migration]  Complete!"),console.log(`  - Migrated: ${r}`),console.log(`  - Expired: ${o}`),console.log(`  - Failed: ${n-o}`),a.length>0&&(console.log(`
 Posts with expired Instagram URLs (need to be re-added):`),a.forEach(i=>console.log(`  - "${i.title}" (ID: ${i.id})`))),{successCount:r,failCount:n,expiredCount:o,expiredPosts:a,total:(e==null?void 0:e.length)||0}}function jl(e){if(typeof e=="number")return e;const t=String(e).trim();if(/^PT\d+[HM]$/i.test(t)){const n=t.match(/PT(\d+)H/i),o=t.match(/PT(\d+)M/i)||t.match(/(\d+)M/i);return(n?parseInt(n[1])*60:0)+(o?parseInt(o[1]):0)}const r=parseInt(t);return isNaN(r)?0:r}function Kx(e){if(typeof e=="number")return e;const t=String(e).trim(),r=t.match(/(\d+)/),n=parseInt(r?r[1]:t);return isNaN(n)?1:n}const fO=["cup","TBSP","tsp","oz","lb","g","kg","ml","l","piece(s)","whole","pinch","dash","egg(s)","to taste"],mO=["American","Chinese","Culinary/Baked Goods","French","Healing/Medicine","Indian","Italian","Juices/Smoothies","Japanese","Korean","Mediterranean","Mexican/Spanish","Other","Pet Meals","Supplements","Thai","Vegan/Vegetarian","Vietnamese"],pO=["Breakfast","Lunch","Dinner","Snack","Dessert"],gO=["Vegetarian","Vegan","Gluten-Free","Dairy-Free","Keto","Paleo","Low-Carb","High-Protein"];function xO({onNavigate:e}={}){const{dispatch:t}=Xs(),[r,n]=u.useState(""),[o,a]=u.useState([{quantity:"",unit:"cup",name:""}]),[i,l]=u.useState([""]),[c,d]=u.useState(""),[h,f]=u.useState(""),[p,m]=u.useState(""),[b,g]=u.useState(""),[w,y]=u.useState("Easy"),[x,v]=u.useState([]),[j,N]=u.useState([]),[_,k]=u.useState(""),[P,C]=u.useState(""),[R,M]=u.useState(""),[$,Q]=u.useState({}),[H,oe]=u.useState(!1),[q,G]=u.useState(""),[I,S]=u.useState(!1),[T,Z]=u.useState(null),[F,W]=u.useState(!1),[A,X]=u.useState(null),[J,V]=u.useState(""),[ee,pe]=u.useState(!1),[de,fe]=u.useState(!1),z=()=>{a([...o,{quantity:"",unit:"cup",name:""}])},ie=B=>{o.length>1&&a(o.filter((me,_e)=>_e!==B))},O=(B,me,_e)=>{const Oe=[...o];Oe[B]={...Oe[B],[me]:_e},a(Oe)},he=()=>{l([...i,""])},ge=B=>{i.length>1&&l(i.filter((me,_e)=>_e!==B))},U=(B,me)=>{const _e=[...i];_e[B]=me,l(_e)},re=B=>{v(me=>me.includes(B)?me.filter(_e=>_e!==B):[...me,B])},Y=B=>{N(me=>me.includes(B)?me.filter(_e=>_e!==B):[...me,B])},Ne=async B=>{var _e;const me=(_e=B.target.files)==null?void 0:_e[0];if(me){if(!me.type.startsWith("image/")){D.error("Please select an image file");return}if(me.size>5*1024*1024){D.error("Image must be less than 5MB");return}pe(!0);try{const{supabase:Oe}=await ko(async()=>{const{supabase:br}=await Promise.resolve().then(()=>pu);return{supabase:br}},void 0),{data:{user:ht}}=await Oe.auth.getUser();if(!ht){D.error("You must be logged in to upload images");return}const Qt=me.name.split(".").pop(),Fe=`${ht.id}/${Date.now()}.${Qt}`,{error:Zt}=await Oe.storage.from("recipe-images").upload(Fe,me,{cacheControl:"3600",upsert:!1});if(Zt)throw Zt;const{data:{publicUrl:wr}}=Oe.storage.from("recipe-images").getPublicUrl(Fe);X(me),V(wr),k(""),D.success("Image uploaded successfully!")}catch(Oe){D.error(Oe.message||"Failed to upload image")}finally{pe(!1)}}},K=async()=>{if(!q.trim()){D.error("Please enter a URL");return}if(!hN(q)){D.error("Please enter a valid URL");return}if([".jpg",".jpeg",".png",".gif",".webp",".bmp"].some(_e=>q.toLowerCase().includes(_e))){D.error("Please paste a recipe page URL, not a direct image link.");return}S(!0);try{D.loading("Extracting recipe...",{id:"extract"});const _e=await qx(q);Z(_e),_e.hasConflict?(fe(!0),D.warning("Multiple recipe versions found! Please choose which to use.",{id:"extract"})):(W(!0),D.success("Recipe extracted! Review and edit before saving.",{id:"extract"})),S(!1)}catch(_e){_e.message.includes("waking up")?(D.info("Server starting up... retrying in 30 seconds",{id:"extract",duration:3e4}),setTimeout(async()=>{try{D.loading("Retrying extraction...",{id:"extract"});const Oe=await qx(q);Z(Oe),W(!0),D.success("Recipe extracted!",{id:"extract"})}catch(Oe){D.error(Oe.message||"Extraction failed. Please try again.",{id:"extract"})}finally{S(!1)}},3e4)):(D.error(_e.message||"Failed to extract recipe.",{id:"extract"}),S(!1))}},ce=()=>{if(!T)return;n(T.title.replace(/\s+on\s+instagram$/i,""));const B=T.ingredients.map(_e=>({quantity:_e.quantity||"",unit:_e.unit||"cup",name:_e.name||""}));a(B),l(T.instructions),d(String(jl(T.prepTime))),f(String(jl(T.cookTime))),m(String(Kx(T.servings))),g(T.cuisineType),y(T.difficulty),v(T.mealTypes),N(T.dietaryTags),T.imageUrl&&k(T.imageUrl),C(T.videoUrl||"");const me=q?`Source: ${q}

`:"";M(me+(T.notes||"")),W(!1),Z(null),D.success("Recipe loaded! Edit any details as needed.")},we=()=>{W(!1),Z(null)},Le=()=>{const B={};return r.trim()||(B.title="Title is required"),b||(B.cuisineType="Cuisine type is required"),(!c||parseInt(c)<=0)&&(B.prepTime="Valid prep time is required"),(!h||parseInt(h)<=0)&&(B.cookTime="Valid cook time is required"),(!p||parseInt(p)<=0)&&(B.servings="Valid servings count is required"),x.length===0&&(B.mealTypes="Select at least one meal type"),o.filter(Oe=>Oe.name.trim()).length===0&&(B.ingredients="Add at least one ingredient"),i.filter(Oe=>Oe.trim()).length===0&&(B.instructions="Add at least one instruction"),Q(B),Object.keys(B).length===0},Pe=async B=>{if(B.preventDefault(),oe(!0),!Le()){D.error("Please fill in all required fields");return}const me=o.filter(Fe=>Fe.name.trim()),_e=i.filter(Fe=>Fe.trim());let Oe=J||_.trim()||void 0,ht=null;const Qt=Oe&&!J&&(Oe.includes("instagram.com")||Oe.includes("cdninstagram.com")||Oe.includes("fbcdn.net")||Oe.includes("tiktok")||Oe.includes("tiktokcdn"));try{const Fe=D.loading("Creating recipe..."),{createRecipe:Zt}=await ko(async()=>{const{createRecipe:at}=await Promise.resolve().then(()=>Wm);return{createRecipe:at}},void 0),wr={title:r.trim(),ingredients:me,instructions:_e,prepTime:jl(c),cookTime:jl(h),servings:Kx(p),tags:[...x,...j],cuisineType:b,difficulty:w,dietaryTags:j,mealType:x,imageUrl:Oe,videoUrl:P.trim()||void 0,sourceUrl:q.trim()||void 0,notes:R.trim()||void 0,isSaved:!0},br=await Zt(wr);if(console.log("[AddRecipe] Recipe created with ID:",br.id),Qt&&Oe)try{D.loading("Downloading and storing image permanently...",{id:Fe}),console.log("[AddRecipe] Downloading Instagram image:",Oe);const at=await dO(Oe,br.id);if(console.log("[AddRecipe] Permanent URL:",at),at!==Oe){const{supabase:yn}=await ko(async()=>{const{supabase:wn}=await Promise.resolve().then(()=>pu);return{supabase:wn}},void 0),{error:Or}=await yn.from("public_recipes").update({image_url:at}).eq("id",br.id);Or?console.error("[AddRecipe] Failed to update with permanent URL:",Or):(console.log("[AddRecipe]  Updated recipe with permanent URL"),Oe=at,ht=at)}}catch(at){console.error("[AddRecipe] Image storage failed, using original URL:",at)}try{const{supabase:at}=await ko(async()=>{const{supabase:Or}=await Promise.resolve().then(()=>pu);return{supabase:Or}},void 0),{data:{user:yn}}=await at.auth.getUser();if(yn){const Or=ht||J||Oe||null;console.log("[AddRecipe] Creating post with image URL:",Or);const{error:wn}=await at.from("posts").insert({user_id:yn.id,title:r.trim(),image_url:Or,video_url:P.trim()||null,caption:R.trim()||"Check out my recipe!",recipe_url:P.trim()||q.trim()||null,recipe_id:br.id});wn?(console.error("[AddRecipe] Post creation failed:",wn),D.success("Recipe created successfully!",{id:Fe})):D.success("Recipe created and posted to your profile!",{id:Fe})}else D.success("Recipe created successfully!",{id:Fe})}catch(at){console.error("[AddRecipe] Post creation error:",at),D.success("Recipe created successfully!",{id:Fe})}t({type:"SAVE_RECIPE",payload:br}),e&&e("my-recipes")}catch(Fe){console.error("[AddRecipe] Recipe creation failed:",Fe);const Zt=(Fe==null?void 0:Fe.message)||"Failed to create recipe. Please try again.";D.error(Zt)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 pb-32",children:[s.jsx("div",{className:"w-full bg-gradient-to-br from-blue-50 to-white border-b border-slate-200 py-4 md:py-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 text-center",children:"Create New Recipe"}),s.jsx("p",{className:"text-sm sm:text-base text-slate-600 text-center mt-1",children:"See a recipe online you like, add it here!"})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-4",children:[s.jsxs(Xe,{className:"border-slate-200 shadow-sm bg-gradient-to-br from-blue-50 to-white",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsxs(_t,{className:"flex items-center gap-2 text-lg",children:[s.jsx(xu,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"leading-tight",children:"Import from URL"})]}),s.jsx(Rt,{className:"text-xs leading-relaxed",children:s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("p",{className:"font-bold text-black pb-0.5 border-b-2 border-black inline-block",children:"INSTRUCTIONS"}),s.jsxs("ol",{className:"space-y-1.5 text-black ml-0.5",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"1."}),s.jsxs("span",{children:[s.jsx("span",{className:"font-bold text-black",children:"COPY"})," a link from online/social media &"," ",s.jsx("span",{className:"font-bold text-black",children:"PASTE"})," below"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"2."}),s.jsxs("span",{children:["Click ",s.jsx("span",{className:"font-bold text-blue-600",children:"Extract Recipe"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-bold text-black-600 min-w-[14px]",children:"3."}),s.jsx("span",{children:"Update as needed  AI does its best, some recipes may need manual editing"})]})]}),s.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 space-y-1 text-xs",children:[s.jsx("p",{className:"text-emerald-600 font-semibold",children:"Supported: All recipe websites & most blogs"}),s.jsx("p",{className:"text-orange-600",children:"Warning: Instagram & TikTok (may take 3060 seconds)"}),s.jsx("p",{className:"text-slate-500",children:"Coming Soon: YouTube videos"})]})]})})]}),s.jsxs(Ze,{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(FE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 flex-shrink-0"}),s.jsx(ct,{value:q,onChange:B=>G(B.target.value),placeholder:"Paste recipe link...",className:"pl-10 h-10 text-sm placeholder:text-slate-400",disabled:I,onKeyDown:B=>B.key==="Enter"&&K()})]}),s.jsx(te,{type:"button",onClick:async()=>{try{const B=await navigator.clipboard.readText();G(B),D.success("Pasted!")}catch{D.error("Failed to paste. Copy a URL first.")}},disabled:I,variant:"outline",className:"h-10",children:"Paste"})]}),s.jsx(te,{type:"button",onClick:K,disabled:I||!q.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-12",children:I?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-5 h-5 mr-2 animate-spin"}),"Extracting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xu,{className:"w-5 h-5 mr-2"}),"Extract Recipe"]})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-slate-200"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-gradient-to-br from-slate-50 via-white to-slate-50 px-3 py-1 text-slate-500",children:"Or enter manually"})})]}),s.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[H&&Object.keys($).length>0&&s.jsx(Xe,{className:"border-red-200 bg-red-50",children:s.jsx(Ze,{className:"pt-4 pb-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx("span",{className:"text-red-600 text-sm font-bold",children:"!"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Please fix these errors:"}),s.jsx("ul",{className:"space-y-1",children:Object.values($).map((B,me)=>s.jsxs("li",{className:"text-sm text-red-700 break-words",children:[" ",B]},me))})]})]})})}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Basic Information"}),s.jsx(Rt,{className:"text-xs",children:"Review extracted info"})]}),s.jsxs(Ze,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(He,{htmlFor:"title",className:"text-sm font-medium",children:"Recipe Title *"}),s.jsx(ct,{id:"title",value:r,onChange:B=>n(B.target.value),placeholder:"ex. Chocolate Chip Cookies",className:`mt-1.5 text-base ${$.title?"border-red-500":""}`}),$.title&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:$.title})]}),(J||_)&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-square rounded-lg overflow-hidden border-2 border-slate-200 bg-slate-100",children:s.jsx("img",{src:J||_,alt:r||"Recipe",className:"w-full h-full object-cover",onError:B=>{const me=B.target.parentElement;me&&(me.innerHTML=`
                            <div class="w-full h-full flex flex-col items-center justify-center text-slate-500 p-4 text-center">
                              <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                              </svg>
                              <p class="text-xs font-medium">Image unavailable</p>
                              <p class="text-xs text-slate-400">(Instagram images may not work)</p>
                            </div>
                          `)}})}),J&&s.jsx("div",{className:"text-center",children:s.jsxs(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>{X(null),V("")},className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs",children:[s.jsx(At,{className:"w-3 h-3 mr-1"}),"Remove image"]})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsxs(He,{htmlFor:"prepTime",className:"text-xs font-medium flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),"Prep (min) *"]}),s.jsx(ct,{id:"prepTime",type:"number",value:c,onChange:B=>d(B.target.value),placeholder:"15",className:`mt-1 text-base ${$.prepTime?"border-red-500":""}`})]}),s.jsxs("div",{children:[s.jsxs(He,{htmlFor:"cookTime",className:"text-xs font-medium flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),"Cook (min) *"]}),s.jsx(ct,{id:"cookTime",type:"number",value:h,onChange:B=>f(B.target.value),placeholder:"30",className:`mt-1 text-base ${$.cookTime?"border-red-500":""}`})]}),s.jsxs("div",{children:[s.jsxs(He,{htmlFor:"servings",className:"text-xs font-medium flex items-center gap-1",children:[s.jsx(Ds,{className:"w-3 h-3"}),"Servings *"]}),s.jsx(ct,{id:"servings",type:"number",value:p,onChange:B=>m(B.target.value),placeholder:"4",className:`mt-1 text-base ${$.servings?"border-red-500":""}`})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(He,{htmlFor:"cuisineType",className:"text-sm font-medium",children:"Cuisine Type *"}),s.jsxs(mn,{value:b,onValueChange:g,children:[s.jsx(Yr,{className:`mt-1.5 ${$.cuisineType?"border-red-500":""}`,children:s.jsx(pn,{placeholder:"Select cuisine"})}),s.jsx(Jr,{children:mO.map(B=>s.jsx(fr,{value:B,children:B},B))})]})]}),s.jsxs("div",{children:[s.jsxs(He,{htmlFor:"difficulty",className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Bs,{className:"w-4 h-4"}),"Difficulty *"]}),s.jsxs(mn,{value:w,onValueChange:B=>y(B),children:[s.jsx(Yr,{className:"mt-1.5",children:s.jsx(pn,{})}),s.jsxs(Jr,{children:[s.jsx(fr,{value:"Easy",children:"Easy"}),s.jsx(fr,{value:"Medium",children:"Medium"}),s.jsx(fr,{value:"Hard",children:"Hard"})]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs(He,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(vc,{className:"w-4 h-4"}),"Recipe Image"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1 mb-2",children:"Upload or paste URL"}),s.jsx("input",{type:"file",id:"imageUpload",accept:"image/*",onChange:Ne,className:"hidden",disabled:ee}),s.jsx(te,{type:"button",variant:"outline",onClick:()=>{var B;return(B=document.getElementById("imageUpload"))==null?void 0:B.click()},disabled:ee,className:"w-full h-12",children:ee?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_m,{className:"w-4 h-4 mr-2"}),"Upload Image"]})}),A&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-2 flex items-center gap-1 truncate",children:[s.jsx(vc,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:A.name})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t border-slate-200"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-white px-2 text-slate-500",children:"or"})})]}),s.jsxs("div",{children:[s.jsx(He,{htmlFor:"imageUrl",className:"text-sm font-medium",children:"Image URL"}),s.jsx(ct,{id:"imageUrl",value:_,onChange:B=>{k(B.target.value),X(null),V("")},placeholder:"https://example.com/image.jpg",className:"mt-1.5 text-base",disabled:!!A}),A&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Clear uploaded image to use URL"})]})]})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Meal Types *"}),s.jsx(Rt,{className:"text-xs",children:"When is this served?"})]}),s.jsxs(Ze,{children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:pO.map(B=>s.jsx(nt,{variant:x.includes(B)?"default":"outline",className:"cursor-pointer transition-all hover:scale-105 text-sm py-1.5 px-3",onClick:()=>re(B),children:B},B))}),$.mealTypes&&s.jsx("p",{className:"text-xs text-red-500 mt-2",children:$.mealTypes})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Dietary Tags"}),s.jsx(Rt,{className:"text-xs",children:"Select any that apply"})]}),s.jsx(Ze,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:gO.map(B=>s.jsx(nt,{variant:j.includes(B)?"default":"outline",className:"cursor-pointer transition-all hover:scale-105 text-sm py-1.5 px-3",onClick:()=>Y(B),children:B},B))})})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Ingredients *"}),s.jsx(Rt,{className:"text-xs",children:"List all ingredients"})]}),s.jsxs(Ze,{className:"space-y-3",children:[o.map((B,me)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(ct,{value:B.quantity,onChange:_e=>O(me,"quantity",_e.target.value),placeholder:"1",className:"w-16 text-center text-base"}),s.jsxs(mn,{value:B.unit,onValueChange:_e=>O(me,"unit",_e),children:[s.jsx(Yr,{className:"w-24",children:s.jsx(pn,{})}),s.jsx(Jr,{children:fO.map(_e=>s.jsx(fr,{value:_e,children:_e},_e))})]}),s.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>ie(me),disabled:o.length===1,className:"shrink-0",children:s.jsx(At,{className:"w-4 h-4"})})]}),s.jsx(ct,{value:B.name,onChange:_e=>O(me,"name",_e.target.value),placeholder:"Ingredient name",className:"text-base"})]},me)),$.ingredients&&s.jsx("p",{className:"text-xs text-red-500",children:$.ingredients}),s.jsxs(te,{type:"button",variant:"outline",onClick:z,className:"w-full mt-2 h-11",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Ingredient"]})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Instructions *"}),s.jsx(Rt,{className:"text-xs",children:"Step-by-step instructions"})]}),s.jsxs(Ze,{className:"space-y-3",children:[i.map((B,me)=>s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-sm font-semibold text-slate-700 mt-2",children:me+1}),s.jsx(An,{value:B,onChange:_e=>U(me,_e.target.value),placeholder:"Describe this step...",className:"flex-1 min-h-[100px] text-base"}),s.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>ge(me),disabled:i.length===1,className:"shrink-0 mt-2",children:s.jsx(At,{className:"w-4 h-4"})})]},me)),$.instructions&&s.jsx("p",{className:"text-xs text-red-500",children:$.instructions}),s.jsxs(te,{type:"button",variant:"outline",onClick:he,className:"w-full mt-2 h-11",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Step"]})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-lg",children:"Notes"}),s.jsx(Rt,{className:"text-xs",children:"Tips or variations"})]}),s.jsx(Ze,{children:s.jsx(An,{value:R,onChange:B=>M(B.target.value),placeholder:"Add any helpful notes...",className:"min-h-[120px] text-base"})})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex justify-center items-center gap-3",children:[e&&s.jsx(te,{type:"button",variant:"outline",onClick:()=>e("my-recipes"),className:"bg-white shadow-md border-2 border-gray-300 hover:bg-gray-50 px-6 h-12 text-base font-semibold rounded-full",children:"Cancel"}),s.jsx(te,{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-8 h-12 text-base font-semibold shadow-lg rounded-full transition-all transform active:scale-95",children:"Create Recipe"})]})})]}),"  ",s.jsx(Ct,{open:F,onOpenChange:W,children:s.jsxs(bt,{className:"max-w-[95vw] sm:max-w-4xl max-h-[90vh] p-0",children:[s.jsxs(Wt,{className:"p-4 pb-3 border-b",children:[s.jsxs($t,{className:"text-xl flex items-center gap-2",children:[s.jsx(xu,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"leading-tight",children:"Review Recipe"})]}),"]"]}),T&&s.jsx(Fo,{className:"max-h-[calc(90vh-180px)]",children:s.jsxs("div",{className:"space-y-4 p-4",children:[T.imageUrl&&s.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-square rounded-lg overflow-hidden border-2 border-slate-200 bg-slate-100",children:s.jsx("img",{src:T.imageUrl,alt:T.title,className:"w-full h-full object-cover",onError:B=>{const me=B.target.parentElement;me&&(me.innerHTML=`
                              <div class="w-full h-full flex flex-col items-center justify-center text-slate-500 p-4">
                                <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <p class="text-xs">No image</p>
                              </div>
                            `)}})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1 leading-tight",children:T.title}),T.description&&s.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:T.description})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx(ln,{className:"w-3 h-3 text-slate-600"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Prep"})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[T.prepTime," min"]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx(ln,{className:"w-3 h-3 text-slate-600"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Cook"})]}),s.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[T.cookTime," min"]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx(Ds,{className:"w-3 h-3 text-slate-600"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Serves"})]}),s.jsx("p",{className:"text-sm font-bold text-slate-900",children:T.servings})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx(nt,{variant:"secondary",className:"bg-blue-100 text-blue-700 text-xs",children:T.cuisineType}),s.jsx(nt,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 text-xs",children:T.difficulty}),T.mealTypes.map(B=>s.jsx(nt,{variant:"outline",className:"text-xs",children:B},B)),T.dietaryTags.map(B=>s.jsx(nt,{variant:"outline",className:"bg-amber-50 text-amber-700 text-xs",children:B},B))]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2 text-sm",children:"Ingredients"}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:s.jsx("ul",{className:"space-y-1.5",children:T.ingredients.map((B,me)=>s.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[s.jsx("span",{className:"text-slate-400 mt-0.5 flex-shrink-0",children:""}),s.jsxs("span",{className:"text-slate-700 break-words",children:[s.jsxs("span",{className:"font-semibold",children:[B.quantity," ",B.unit]})," ",B.name]})]},me))})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2 text-sm",children:"Instructions"}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:s.jsx("ol",{className:"space-y-2",children:T.instructions.map((B,me)=>s.jsxs("li",{className:"flex gap-2 text-xs",children:[s.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-slate-900 text-white flex items-center justify-center text-xs font-bold",children:me+1}),s.jsx("span",{className:"text-slate-700 pt-0.5 break-words",children:B})]},me))})})]}),T.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-1.5 text-sm",children:"Notes"}),s.jsx("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-200",children:s.jsx("p",{className:"text-xs text-slate-700 break-words",children:T.notes})})]})]})]})}),s.jsxs(ds,{className:"sticky bottom-0 bg-white border-t p-4 flex flex-row justify-center items-center gap-3 shadow-lg",children:[s.jsx(te,{type:"button",variant:"outline",onClick:we,className:"px-6 h-12 text-base font-semibold rounded-full",children:"Cancel"}),s.jsx(te,{type:"button",onClick:ce,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 h-12 text-base font-semibold rounded-full shadow-lg",children:"Use This Recipe"})]})]})}),s.jsx(Ct,{open:de,onOpenChange:fe,children:s.jsxs(bt,{className:"max-w-[95vw] sm:max-w-5xl max-h-[90vh] p-0",children:[s.jsxs(Wt,{className:"p-4 pb-3 border-b",children:[s.jsx($t,{className:"text-lg leading-tight",children:"Multiple Versions Found"}),s.jsx(Gr,{className:"text-xs",children:"Choose which version to use:"})]}),s.jsx(Fo,{className:"h-[60vh] p-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(T==null?void 0:T.structuredVersion)&&s.jsxs(Xe,{className:"cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>{T.structuredVersion&&(Z(T.structuredVersion),fe(!1),W(!0),D.success("Using recipe card version"))},children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-base",children:"Recipe Card"}),s.jsx(Rt,{className:"text-xs",children:"From structured data"})]}),s.jsxs(Ze,{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[s.jsxs(nt,{variant:"secondary",children:[T.structuredVersion.servings," servings"]}),s.jsxs(nt,{variant:"secondary",children:[T.structuredVersion.prepTime,"min"]}),s.jsxs(nt,{variant:"secondary",children:[T.structuredVersion.cookTime,"min"]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-xs mb-1.5",children:["Ingredients (",T.structuredVersion.ingredients.length,"):"]}),s.jsxs("ul",{className:"space-y-1 text-xs text-slate-600 max-h-32 overflow-y-auto",children:[T.structuredVersion.ingredients.slice(0,6).map((B,me)=>s.jsxs("li",{className:"break-words",children:[" ",B.quantity," ",B.unit," ",B.name]},me)),T.structuredVersion.ingredients.length>6&&s.jsxs("li",{className:"text-slate-400",children:["+ ",T.structuredVersion.ingredients.length-6," more..."]})]})]})]})]}),(T==null?void 0:T.aiVersion)&&s.jsxs(Xe,{className:"cursor-pointer hover:border-green-500 transition-colors",onClick:()=>{T.aiVersion&&(Z(T.aiVersion),fe(!1),W(!0),D.success("Using blog content version"))},children:[s.jsxs(Nt,{className:"pb-3",children:[s.jsx(_t,{className:"text-base",children:"Blog Content"}),s.jsx(Rt,{className:"text-xs",children:"From blog post"})]}),s.jsxs(Ze,{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs",children:[s.jsxs(nt,{variant:"secondary",children:[T.aiVersion.servings," servings"]}),s.jsxs(nt,{variant:"secondary",children:[T.aiVersion.prepTime,"min"]}),s.jsxs(nt,{variant:"secondary",children:[T.aiVersion.cookTime,"min"]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-xs mb-1.5",children:["Ingredients (",T.aiVersion.ingredients.length,"):"]}),s.jsxs("ul",{className:"space-y-1 text-xs text-slate-600 max-h-32 overflow-y-auto",children:[T.aiVersion.ingredients.slice(0,6).map((B,me)=>s.jsxs("li",{className:"break-words",children:[" ",B.quantity," ",B.unit," ",B.name]},me)),T.aiVersion.ingredients.length>6&&s.jsxs("li",{className:"text-slate-400",children:["+ ",T.aiVersion.ingredients.length-6," more..."]})]})]})]})]})]})}),s.jsx(ds,{className:"p-4 border-t",children:s.jsx(te,{variant:"outline",onClick:()=>fe(!1),className:"w-full sm:w-auto",children:"Cancel"})})]})})]})]})}var Cd="Collapsible",[vO,CN]=ir(Cd),[yO,hp]=vO(Cd),EN=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:o,disabled:a,onOpenChange:i,...l}=e,[c,d]=Qr({prop:n,defaultProp:o??!1,onChange:i,caller:Cd});return s.jsx(yO,{scope:r,disabled:a,contentId:Kr(),open:c,onOpenToggle:u.useCallback(()=>d(h=>!h),[d]),children:s.jsx(Ie.div,{"data-state":mp(c),"data-disabled":a?"":void 0,...l,ref:t})})});EN.displayName=Cd;var RN="CollapsibleTrigger",PN=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,o=hp(RN,r);return s.jsx(Ie.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":mp(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...n,ref:t,onClick:ye(e.onClick,o.onOpenToggle)})});PN.displayName=RN;var fp="CollapsibleContent",TN=u.forwardRef((e,t)=>{const{forceMount:r,...n}=e,o=hp(fp,e.__scopeCollapsible);return s.jsx(lr,{present:r||o.open,children:({present:a})=>s.jsx(wO,{...n,ref:t,present:a})})});TN.displayName=fp;var wO=u.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:o,...a}=e,i=hp(fp,r),[l,c]=u.useState(n),d=u.useRef(null),h=$e(t,d),f=u.useRef(0),p=f.current,m=u.useRef(0),b=m.current,g=i.open||l,w=u.useRef(g),y=u.useRef(void 0);return u.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),It(()=>{const x=d.current;if(x){y.current=y.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const v=x.getBoundingClientRect();f.current=v.height,m.current=v.width,w.current||(x.style.transitionDuration=y.current.transitionDuration,x.style.animationName=y.current.animationName),c(n)}},[i.open,n]),s.jsx(Ie.div,{"data-state":mp(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&o})});function mp(e){return e?"open":"closed"}var bO=EN,jO=PN,NO=TN,rn="Accordion",_O=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[pp,SO,kO]=Di(rn),[Ed]=ir(rn,[kO,CN]),gp=CN(),AN=se.forwardRef((e,t)=>{const{type:r,...n}=e,o=n,a=n;return s.jsx(pp.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?s.jsx(PO,{...a,ref:t}):s.jsx(RO,{...o,ref:t})})});AN.displayName=rn;var[IN,CO]=Ed(rn),[ON,EO]=Ed(rn,{collapsible:!1}),RO=se.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[l,c]=Qr({prop:r,defaultProp:n??"",onChange:o,caller:rn});return s.jsx(IN,{scope:e.__scopeAccordion,value:se.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:se.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(ON,{scope:e.__scopeAccordion,collapsible:a,children:s.jsx(MN,{...i,ref:t})})})}),PO=se.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:o=()=>{},...a}=e,[i,l]=Qr({prop:r,defaultProp:n??[],onChange:o,caller:rn}),c=se.useCallback(h=>l((f=[])=>[...f,h]),[l]),d=se.useCallback(h=>l((f=[])=>f.filter(p=>p!==h)),[l]);return s.jsx(IN,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:d,children:s.jsx(ON,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(MN,{...a,ref:t})})})}),[TO,Rd]=Ed(rn),MN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:o,orientation:a="vertical",...i}=e,l=se.useRef(null),c=$e(l,t),d=SO(r),f=ia(o)==="ltr",p=ye(e.onKeyDown,m=>{var P;if(!_O.includes(m.key))return;const b=m.target,g=d().filter(C=>{var R;return!((R=C.ref.current)!=null&&R.disabled)}),w=g.findIndex(C=>C.ref.current===b),y=g.length;if(w===-1)return;m.preventDefault();let x=w;const v=0,j=y-1,N=()=>{x=w+1,x>j&&(x=v)},_=()=>{x=w-1,x<v&&(x=j)};switch(m.key){case"Home":x=v;break;case"End":x=j;break;case"ArrowRight":a==="horizontal"&&(f?N():_());break;case"ArrowDown":a==="vertical"&&N();break;case"ArrowLeft":a==="horizontal"&&(f?_():N());break;case"ArrowUp":a==="vertical"&&_();break}const k=x%y;(P=g[k].ref.current)==null||P.focus()});return s.jsx(TO,{scope:r,disabled:n,direction:o,orientation:a,children:s.jsx(pp.Slot,{scope:r,children:s.jsx(Ie.div,{...i,"data-orientation":a,ref:c,onKeyDown:n?void 0:p})})})}),Ic="AccordionItem",[AO,xp]=Ed(Ic),DN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...o}=e,a=Rd(Ic,r),i=CO(Ic,r),l=gp(r),c=Kr(),d=n&&i.value.includes(n)||!1,h=a.disabled||e.disabled;return s.jsx(AO,{scope:r,open:d,disabled:h,triggerId:c,children:s.jsx(bO,{"data-orientation":a.orientation,"data-state":BN(d),...l,...o,ref:t,disabled:h,open:d,onOpenChange:f=>{f?i.onItemOpen(n):i.onItemClose(n)}})})});DN.displayName=Ic;var $N="AccordionHeader",LN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,o=Rd(rn,r),a=xp($N,r);return s.jsx(Ie.h3,{"data-orientation":o.orientation,"data-state":BN(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:t})});LN.displayName=$N;var nf="AccordionTrigger",UN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,o=Rd(rn,r),a=xp(nf,r),i=EO(nf,r),l=gp(r);return s.jsx(pp.ItemSlot,{scope:r,children:s.jsx(jO,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...l,...n,ref:t})})});UN.displayName=nf;var FN="AccordionContent",zN=se.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,o=Rd(rn,r),a=xp(FN,r),i=gp(r);return s.jsx(NO,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});zN.displayName=FN;function BN(e){return e?"open":"closed"}var IO=AN,OO=DN,MO=LN,VN=UN,WN=zN;const Gx=IO,sf=u.forwardRef(({className:e,...t},r)=>s.jsx(OO,{ref:r,className:Te("border-b",e),...t}));sf.displayName="AccordionItem";const of=u.forwardRef(({className:e,children:t,...r},n)=>s.jsx(MO,{className:"flex",children:s.jsxs(VN,{ref:n,className:Te("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,s.jsx(wb,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));of.displayName=VN.displayName;const af=u.forwardRef(({className:e,children:t,...r},n)=>s.jsx(WN,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:s.jsx("div",{className:Te("pb-4 pt-0",e),children:t})}));af.displayName=WN.displayName;function Ir(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ia(e,t){const r=Ir(e);return isNaN(t)?fs(e,NaN):(t&&r.setDate(r.getDate()+t),r)}const qN=6048e5,DO=864e5;let $O={};function Pd(){return $O}function Gs(e,t){var l,c,d,h;const r=Pd(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,o=Ir(e),a=o.getDay(),i=(a<n?7:0)+a-n;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Oc(e){return Gs(e,{weekStartsOn:1})}function HN(e){const t=Ir(e),r=t.getFullYear(),n=fs(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const o=Oc(n),a=fs(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=Oc(a);return t.getTime()>=o.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Mc(e){const t=Ir(e);return t.setHours(0,0,0,0),t}function Yx(e){const t=Ir(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function LO(e,t){const r=Mc(e),n=Mc(t),o=+r-Yx(r),a=+n-Yx(n);return Math.round((o-a)/DO)}function UO(e){const t=HN(e),r=fs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Oc(r)}function KN(e,t){const r=t*7;return Ia(e,r)}function Nl(e,t){const r=Mc(e),n=Mc(t);return+r==+n}function FO(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function zO(e){if(!FO(e)&&typeof e!="number")return!1;const t=Ir(e);return!isNaN(Number(t))}function BO(e){const t=Ir(e),r=fs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const VO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WO=(e,t,r)=>{let n;const o=VO[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Pu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const qO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GO={date:Pu({formats:qO,defaultWidth:"full"}),time:Pu({formats:HO,defaultWidth:"full"}),dateTime:Pu({formats:KO,defaultWidth:"full"})},YO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JO=(e,t,r,n)=>YO[e];function Na(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let o;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;o=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return o[a]}}const XO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nM=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},sM={ordinalNumber:nM,era:Na({values:XO,defaultWidth:"wide"}),quarter:Na({values:QO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Na({values:ZO,defaultWidth:"wide"}),day:Na({values:eM,defaultWidth:"wide"}),dayPeriod:Na({values:tM,defaultWidth:"wide",formattingValues:rM,defaultFormattingWidth:"wide"})};function _a(e){return(t,r={})=>{const n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;const i=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?aM(l,f=>f.test(i)):oM(l,f=>f.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const h=t.slice(i.length);return{value:d,rest:h}}}function oM(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function aM(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function iM(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const o=n[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(o.length);return{value:i,rest:l}}}const lM=/^(\d+)(th|st|nd|rd)?/i,cM=/\d+/i,dM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uM={any:[/^b/i,/^(a|c)/i]},hM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fM={any:[/1/i,/2/i,/3/i,/4/i]},mM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wM={ordinalNumber:iM({matchPattern:lM,parsePattern:cM,valueCallback:e=>parseInt(e,10)}),era:_a({matchPatterns:dM,defaultMatchWidth:"wide",parsePatterns:uM,defaultParseWidth:"any"}),quarter:_a({matchPatterns:hM,defaultMatchWidth:"wide",parsePatterns:fM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_a({matchPatterns:mM,defaultMatchWidth:"wide",parsePatterns:pM,defaultParseWidth:"any"}),day:_a({matchPatterns:gM,defaultMatchWidth:"wide",parsePatterns:xM,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:vM,defaultMatchWidth:"any",parsePatterns:yM,defaultParseWidth:"any"})},bM={code:"en-US",formatDistance:WO,formatLong:GO,formatRelative:JO,localize:sM,match:wM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jM(e){const t=Ir(e);return LO(t,BO(t))+1}function NM(e){const t=Ir(e),r=+Oc(t)-+UO(t);return Math.round(r/qN)+1}function GN(e,t){var h,f,p,m;const r=Ir(e),n=r.getFullYear(),o=Pd(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((m=(p=o.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=fs(e,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const l=Gs(i,t),c=fs(e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const d=Gs(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function _M(e,t){var l,c,d,h;const r=Pd(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=GN(e,t),a=fs(e,0);return a.setFullYear(o,0,n),a.setHours(0,0,0,0),Gs(a,t)}function SM(e,t){const r=Ir(e),n=+Gs(r,t)-+_M(r,t);return Math.round(n/qN)+1}function Ge(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Wn={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ge(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ge(r+1,2)},d(e,t){return Ge(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ge(e.getHours()%12||12,t.length)},H(e,t){return Ge(e.getHours(),t.length)},m(e,t){return Ge(e.getMinutes(),t.length)},s(e,t){return Ge(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return Ge(o,t.length)}},uo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jx={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return Wn.y(e,t)},Y:function(e,t,r,n){const o=GN(e,n),a=o>0?o:1-o;if(t==="YY"){const i=a%100;return Ge(i,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ge(a,t.length)},R:function(e,t){const r=HN(e);return Ge(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ge(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ge(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ge(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Wn.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ge(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const o=SM(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):Ge(o,t.length)},I:function(e,t,r){const n=NM(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ge(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Wn.d(e,t)},D:function(e,t,r){const n=jM(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ge(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const o=e.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ge(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const o=e.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ge(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Ge(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let o;switch(n===12?o=uo.noon:n===0?o=uo.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let o;switch(n>=17?o=uo.evening:n>=12?o=uo.afternoon:n>=4?o=uo.morning:o=uo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Wn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Wn.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ge(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Wn.s(e,t)},S:function(e,t){return Wn.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Qx(n);case"XXXX":case"XX":return ks(n);case"XXXXX":case"XXX":default:return ks(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Qx(n);case"xxxx":case"xx":return ks(n);case"xxxxx":case"xxx":default:return ks(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Xx(n,":");case"OOOO":default:return"GMT"+ks(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Xx(n,":");case"zzzz":default:return"GMT"+ks(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Ge(n,t.length)},T:function(e,t,r){const n=e.getTime();return Ge(n,t.length)}};function Xx(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),a=n%60;return a===0?r+String(o):r+String(o)+t+Ge(a,2)}function Qx(e,t){return e%60===0?(e>0?"-":"+")+Ge(Math.abs(e)/60,2):ks(e,t)}function ks(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),o=Ge(Math.trunc(n/60),2),a=Ge(n%60,2);return r+o+t+a}const Zx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},YN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kM=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return Zx(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Zx(n,t)).replace("{{time}}",YN(o,t))},CM={p:YN,P:kM},EM=/^D+$/,RM=/^Y+$/,PM=["D","DD","YY","YYYY"];function TM(e){return EM.test(e)}function AM(e){return RM.test(e)}function IM(e,t,r){const n=OM(e,t,r);if(console.warn(n),PM.includes(e))throw new RangeError(n)}function OM(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const MM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$M=/^'([^]*?)'?$/,LM=/''/g,UM=/[a-zA-Z]/;function jr(e,t,r){var h,f,p,m;const n=Pd(),o=n.locale??bM,a=n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,l=Ir(e);if(!zO(l))throw new RangeError("Invalid time value");let c=t.match(DM).map(b=>{const g=b[0];if(g==="p"||g==="P"){const w=CM[g];return w(b,o.formatLong)}return b}).join("").match(MM).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:FM(b)};if(Jx[g])return{isToken:!0,value:b};if(g.match(UM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});o.localize.preprocessor&&(c=o.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:i,locale:o};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(AM(g)||TM(g))&&IM(g,t,String(e));const w=Jx[g[0]];return w(l,g,o.localize,d)}).join("")}function FM(e){const t=e.match($M);return t?t[1].replace(LM,"'"):e}function zM(e,t){return KN(e,-t)}const BM={cup:{type:"volume",toBase:240},cups:{type:"volume",toBase:240},c:{type:"volume",toBase:240},tablespoon:{type:"volume",toBase:15},tablespoons:{type:"volume",toBase:15},tbsp:{type:"volume",toBase:15},teaspoon:{type:"volume",toBase:5},teaspoons:{type:"volume",toBase:5},tsp:{type:"volume",toBase:5},milliliter:{type:"volume",toBase:1},milliliters:{type:"volume",toBase:1},ml:{type:"volume",toBase:1},liter:{type:"volume",toBase:1e3},liters:{type:"volume",toBase:1e3},l:{type:"volume",toBase:1e3},"fluid ounce":{type:"volume",toBase:30},"fluid ounces":{type:"volume",toBase:30},"fl oz":{type:"volume",toBase:30},pint:{type:"volume",toBase:480},pints:{type:"volume",toBase:480},pt:{type:"volume",toBase:480},quart:{type:"volume",toBase:960},quarts:{type:"volume",toBase:960},qt:{type:"volume",toBase:960},gallon:{type:"volume",toBase:3840},gallons:{type:"volume",toBase:3840},gal:{type:"volume",toBase:3840},gram:{type:"weight",toBase:1},grams:{type:"weight",toBase:1},g:{type:"weight",toBase:1},kilogram:{type:"weight",toBase:1e3},kilograms:{type:"weight",toBase:1e3},kg:{type:"weight",toBase:1e3},ounce:{type:"weight",toBase:28.35},ounces:{type:"weight",toBase:28.35},oz:{type:"weight",toBase:28.35},pound:{type:"weight",toBase:453.59},pounds:{type:"weight",toBase:453.59},lb:{type:"weight",toBase:453.59},lbs:{type:"weight",toBase:453.59},milligram:{type:"weight",toBase:.001},milligrams:{type:"weight",toBase:.001},mg:{type:"weight",toBase:.001},piece:{type:"count",toBase:1},pieces:{type:"count",toBase:1},whole:{type:"count",toBase:1},item:{type:"count",toBase:1},items:{type:"count",toBase:1},clove:{type:"count",toBase:1},cloves:{type:"count",toBase:1},slice:{type:"count",toBase:1},slices:{type:"count",toBase:1},"":{type:"count",toBase:1}};function JN(e){return e.toLowerCase().trim()}function Dc(e){const t=JN(e);return BM[t]||null}function VM(e,t){const r=Dc(e),n=Dc(t);return!r||!n?!1:r.type===n.type}function e0(e,t){const r=Dc(t);return r?e*r.toBase:null}function WM(e,t){return t==="volume"?e>=3840?{quantity:e/3840,unit:"gallon"}:e>=960?{quantity:e/960,unit:"quart"}:e>=240?{quantity:e/240,unit:"cup"}:e>=15?{quantity:e/15,unit:"tbsp"}:{quantity:e/5,unit:"tsp"}:t==="weight"?e>=1e3?{quantity:e/1e3,unit:"kg"}:e>=453.59?{quantity:e/453.59,unit:"lb"}:e>=28.35?{quantity:e/28.35,unit:"oz"}:{quantity:e,unit:"g"}:{quantity:e,unit:""}}function qM(e){if(e=e.trim(),e.includes("/")){const r=e.split(/\s+/);let n=0;for(const o of r)if(o.includes("/")){const[a,i]=o.split("/").map(l=>parseFloat(l));!isNaN(a)&&!isNaN(i)&&i!==0&&(n+=a/i)}else{const a=parseFloat(o);isNaN(a)||(n+=a)}return n}const t=parseFloat(e);return isNaN(t)?0:t}function HM(e){if(e===Math.floor(e))return e.toString();const t={"0.25":"1/4","0.33":"1/3","0.5":"1/2","0.66":"2/3","0.67":"2/3","0.75":"3/4"},r=Math.floor(e),n=e-r,o=n.toFixed(2);return t[o]?r>0?`${r} ${t[o]}`:t[o]:n<.01?r.toString():e.toFixed(2).replace(/\.?0+$/,"")}const KM=[{name:"Produce",sortOrder:0},{name:"Meat & Seafood",sortOrder:1},{name:"Dairy & Eggs",sortOrder:2},{name:"Bakery",sortOrder:3},{name:"Pantry",sortOrder:4},{name:"Frozen",sortOrder:5},{name:"Beverages",sortOrder:6},{name:"Other",sortOrder:7}],GM={tomato:"Produce",tomatoes:"Produce",onion:"Produce",onions:"Produce",garlic:"Produce",carrot:"Produce",carrots:"Produce",potato:"Produce",potatoes:"Produce",lettuce:"Produce",spinach:"Produce",broccoli:"Produce","bell pepper":"Produce",peppers:"Produce",mushroom:"Produce",mushrooms:"Produce",cucumber:"Produce",zucchini:"Produce",apple:"Produce",apples:"Produce",banana:"Produce",bananas:"Produce",lemon:"Produce",lemons:"Produce",lime:"Produce",limes:"Produce",avocado:"Produce",cilantro:"Produce",parsley:"Produce",basil:"Produce",chicken:"Meat & Seafood",beef:"Meat & Seafood",pork:"Meat & Seafood",turkey:"Meat & Seafood",salmon:"Meat & Seafood",shrimp:"Meat & Seafood",fish:"Meat & Seafood",bacon:"Meat & Seafood",sausage:"Meat & Seafood","ground beef":"Meat & Seafood",milk:"Dairy & Eggs",cheese:"Dairy & Eggs",butter:"Dairy & Eggs",eggs:"Dairy & Eggs",egg:"Dairy & Eggs",yogurt:"Dairy & Eggs",cream:"Dairy & Eggs","sour cream":"Dairy & Eggs",cheddar:"Dairy & Eggs",mozzarella:"Dairy & Eggs",parmesan:"Dairy & Eggs",bread:"Bakery",tortilla:"Bakery",tortillas:"Bakery",buns:"Bakery",rolls:"Bakery",bagels:"Bakery",croissant:"Bakery",rice:"Pantry",pasta:"Pantry",flour:"Pantry",sugar:"Pantry",salt:"Pantry",pepper:"Pantry",oil:"Pantry","olive oil":"Pantry","vegetable oil":"Pantry",vinegar:"Pantry","soy sauce":"Pantry",beans:"Pantry",chickpeas:"Pantry",lentils:"Pantry","tomato sauce":"Pantry","tomato paste":"Pantry",broth:"Pantry",stock:"Pantry",honey:"Pantry","peanut butter":"Pantry","canned tomatoes":"Pantry","ice cream":"Frozen","frozen vegetables":"Frozen","frozen peas":"Frozen","frozen corn":"Frozen",water:"Beverages",juice:"Beverages",coffee:"Beverages",tea:"Beverages",soda:"Beverages"};function XN(e){return e.toLowerCase().trim().replace(/\s+/g," ").replace(/[^a-z0-9\s]/g,"")}function YM(e,t){var o;const r=XN(e);for(const[a,i]of Object.entries(GM))if(r.includes(a)){const l=t.find(c=>c.name===i);if(l)return l.id}const n=t.find(a=>a.name==="Other");return(n==null?void 0:n.id)||((o=t[0])==null?void 0:o.id)||""}function QN(){return KM.map((e,t)=>({id:`cat-${t}`,name:e.name,sortOrder:e.sortOrder}))}function JM(e,t){const r=QN(),n=new Map;for(const o of e){const a=t.find(l=>l.id===o.recipeId);if(!a)continue;const i=o.servings/a.servings;for(const l of a.ingredients){const c=qM(l.quantity)*i,h=`${XN(l.name)}-${JN(l.unit)}`,f=n.get(h);if(f){if(VM(f.unit,l.unit)){const p=e0(f.quantity,f.unit)||0,m=e0(c,l.unit)||0,b=p+m,g=Dc(f.unit);if(g){const w=WM(b,g.type);f.quantity=w.quantity,f.unit=w.unit}}else f.quantity+=c;f.sourceRecipeIds.includes(a.id)||f.sourceRecipeIds.push(a.id)}else{const p=YM(l.name,r),m={id:`item-${Date.now()}-${Math.random()}`,name:l.name,quantity:c,unit:l.unit,categoryId:p,checked:!1,sourceRecipeIds:[a.id]};n.set(h,m)}}}return Array.from(n.values())}function XM(e,t){const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${r}-${n}-${o}`}function QM(e){const[t,r,n]=e.split("-").map(Number);return new Date(t,r-1,n,0,0,0,0)}const Tu=["Breakfast","Lunch","Dinner","Snack"];function ZM({onNavigate:e}={}){const{state:t,dispatch:r}=Xs(),[n,o]=u.useState(Gs(new Date,{weekStartsOn:0})),[a,i]=u.useState(1),[l,c]=u.useState([]),[d,h]=u.useState(!0),[f,p]=u.useState(""),[m,b]=u.useState(!1),[g,w]=u.useState(null),[y,x]=u.useState(""),[v,j]=u.useState(""),[N,_]=u.useState(!1),[k,P]=u.useState(null),[C,R]=u.useState(null),[M,$]=u.useState(null),[Q,H]=u.useState(!1),[oe,q]=u.useState(window.innerWidth<768),[G,I]=u.useState(new Date);u.useEffect(()=>{const U=()=>q(window.innerWidth<768);return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),u.useEffect(()=>{const U=localStorage.getItem("userId");U?p(U):h(!1)},[]),u.useEffect(()=>{T()},[f,n,a,t.mealPlan,t.savedRecipes]);const S=u.useMemo(()=>{const U={};return t.savedRecipes.forEach(re=>{const Y=re.cuisineType||"Other";U[Y]||(U[Y]=[]),U[Y].push(re)}),Object.entries(U).sort(([re],[Y])=>re.localeCompare(Y)).map(([re,Y])=>({cuisine:re,recipes:Y}))},[t.savedRecipes]),T=async()=>{h(!0);try{const U=t.mealPlan.map(re=>{const Y=t.savedRecipes.find(Ne=>Ne.id===re.recipeId);return{...re,recipe:Y}});c(U)}catch(U){console.error("Error loading meal plans:",U),D.error("Failed to load meal plans")}finally{h(!1)}},Z=async()=>{try{const U=t.mealPlan.map(Y=>({recipeId:Y.recipeId,servings:Y.servings||2})),re=JM(U,t.savedRecipes);r({type:"UPDATE_GROCERY_LIST",payload:re}),D.success("Grocery list updated!")}catch(U){console.error("Error syncing grocery list:",U),D.error("Failed to update grocery list")}},F=(U,re)=>l.find(Y=>Nl(QM(Y.date),U)&&Y.mealType===re),W=U=>{(M==null?void 0:M.id)===U.id?($(null),D.info("Recipe deselected")):($(U),D.success("Recipe selected - now click a meal slot to assign"),oe&&H(!1))},A=async(U,re,Y)=>{const Ne=XM(U),K=F(U,re);try{r(K?{type:"UPDATE_MEAL_PLAN",payload:{id:K.id,recipeId:Y.id,date:Ne,mealType:re,servings:Y.servings}}:{type:"ADD_MEAL_PLAN",payload:{id:`meal-${Date.now()}`,recipeId:Y.id,date:Ne,mealType:re,servings:Y.servings}}),await T(),await Z()}catch(ce){throw console.error("Error adding meal:",ce),ce}},X=async(U,re)=>{const Y=M;if(Y)try{await A(U,re,Y),D.success("Meal assigned to calendar"),$(null)}catch{D.error("Failed to add meal")}},J=async U=>{try{r({type:"REMOVE_MEAL_PLAN",payload:U}),D.success("Meal removed"),await T(),await Z()}catch(re){console.error("Error removing meal:",re),D.error("Failed to remove meal")}},V=()=>{o(U=>zM(U,a))},ee=()=>{o(U=>KN(U,a))},pe=U=>{w(U),b(!0)},de=async()=>{if(!g||!y||!v){D.error("Please select both date and meal type");return}const U=new Date(y);try{await A(U,v,g),D.success("Meal added to calendar"),b(!1),w(null),x(""),j("")}catch{D.error("Failed to add meal")}},fe=(U,re)=>{P(U),R(re),_(!0)},z=async U=>{if(!k||!C)return;const re=t.savedRecipes.find(Y=>Y.id===U);if(re)try{await A(k,C,re),D.success("Meal added to calendar"),_(!1),P(null),R(null)}catch{D.error("Failed to add meal")}},ie=()=>{const U=[],re=a*7;for(let Y=0;Y<re;Y++)U.push(Ia(n,Y));return U},O=()=>{const U=Gs(new Date,{weekStartsOn:0});o(U),I(new Date)},he=U=>{i(U),I(n)},ge=()=>s.jsx("div",{className:`${oe?"fixed inset-0 z-40 bg-black/50":""}`,onClick:()=>oe&&H(!1),children:s.jsxs("div",{className:`${oe?"fixed left-0 top-0 bottom-0 w-80 bg-white shadow-lg":"w-80 border-r border-slate-200 bg-white shadow-sm"} flex flex-col`,onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:s.jsx(ox,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"My Recipes"}),s.jsx("p",{className:"text-xs text-slate-600",children:"Select & click slot"})]})]}),oe&&s.jsx("button",{onClick:()=>H(!1),className:"p-1",children:s.jsx(At,{className:"w-6 h-6"})})]}),s.jsx(Fo,{className:"flex-1",children:s.jsx("div",{className:"p-4",children:t.savedRecipes.length===0?s.jsxs("div",{className:"text-center py-8 px-4",children:[s.jsx(ox,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-slate-500",children:"No saved recipes yet. Save recipes from the Discover page."})]}):s.jsx(Gx,{type:"multiple",defaultValue:S.map(U=>U.cuisine),className:"space-y-2",children:S.map(({cuisine:U,recipes:re})=>s.jsxs(sf,{value:U,className:"border rounded-lg px-4 bg-slate-50",children:[s.jsx(of,{className:"hover:no-underline py-3",children:s.jsxs("div",{className:"flex items-center justify-between w-full pr-2",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:U}),s.jsx(nt,{variant:"secondary",children:re.length})]})}),s.jsx(af,{className:"pb-3",children:s.jsx("div",{className:"space-y-3 pt-2",children:re.map(Y=>{var Ne,K;return s.jsx("div",{className:"group",children:s.jsx(Xe,{className:`overflow-hidden hover:shadow-md transition-all duration-200 ${(M==null?void 0:M.id)===Y.id?"border-2 border-orange-500 bg-orange-50":"border-slate-200 hover:border-blue-300 bg-white"}`,children:s.jsxs(Ze,{className:"p-0",children:[s.jsxs("div",{onClick:()=>W(Y),className:"flex gap-3 p-3 cursor-pointer",children:[Y.imageUrl&&s.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden shrink-0 bg-slate-100",children:s.jsx("img",{src:(Ne=Y.imageUrl)!=null&&Ne.includes("instagram.com")||(K=Y.imageUrl)!=null&&K.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(Y.imageUrl.replace(/&amp;/g,"&"))}`:Y.imageUrl,alt:Y.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-sm text-slate-900 line-clamp-2",children:Y.title}),(M==null?void 0:M.id)===Y.id&&s.jsx(pc,{className:"w-4 h-4 text-orange-600 shrink-0"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsxs("span",{children:[Y.prepTime+Y.cookTime,"m"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ds,{className:"w-3 h-3"}),s.jsx("span",{children:Y.servings})]})]}),Y.mealType.length>0&&s.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:Y.mealType.slice(0,2).map(ce=>s.jsx(nt,{variant:"secondary",className:"text-xs",children:ce},ce))})]})]}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs(te,{variant:"outline",size:"sm",className:"w-full",onClick:ce=>{ce.stopPropagation(),pe(Y)},children:[s.jsx(hn,{className:"w-4 h-4 mr-1"}),"Add to Plan"]})})]})})},Y.id)})})})]},U))})})})]})});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 flex flex-col md:flex-row",children:[!oe&&s.jsx(ge,{}),oe&&Q&&s.jsx(ge,{}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"border-b border-slate-200 bg-white shadow-sm",children:s.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-blue-600 to-cyan-600 flex items-center justify-center",children:s.jsx(Jo,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"Meal Planner"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600",children:"Select recipe, click slot"})]})]}),oe&&s.jsx("button",{onClick:()=>H(!Q),className:"p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(wm,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center",children:[s.jsxs(te,{variant:"destructive",size:"sm",onClick:()=>{confirm("Clear all meal plans?")&&(r({type:"CLEAR_MEAL_PLAN"}),D.success("All meals cleared"))},className:"gap-2 text-xs md:text-sm",children:[s.jsx(nr,{className:"w-4 h-4"}),"Clear"]}),!oe&&s.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 rounded-lg p-1",children:[s.jsx(te,{variant:a===1?"default":"ghost",size:"sm",onClick:()=>he(1),className:"h-8 text-xs",children:"1W"}),s.jsx(te,{variant:a===4?"default":"ghost",size:"sm",onClick:()=>he(4),className:"h-8 text-xs",children:"4W"})]})]}),s.jsxs(te,{onClick:()=>e==null?void 0:e("grocery-list"),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-medium shadow-lg text-xs md:text-sm",children:[s.jsx(Vs,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Grocery List"]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:V,className:"h-8 w-8 p-0",children:s.jsx(gc,{className:"w-4 h-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:O,className:"h-8 text-xs px-2",children:"Today"}),s.jsx(te,{variant:"outline",size:"sm",onClick:ee,className:"h-8 w-8 p-0",children:s.jsx(xc,{className:"w-4 h-4"})})]}),s.jsxs("h2",{className:"text-sm md:text-lg font-semibold text-slate-700 whitespace-nowrap",children:[jr(n,"MMM d")," - ",jr(Ia(n,a*7-1),"MMM d")]})]})]})}),s.jsx(Fo,{className:"flex-1",children:s.jsx("div",{className:"p-4 md:p-6",children:d?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):oe?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 -mx-4 px-4",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:V,className:"h-8",children:s.jsx(gc,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-sm font-medium text-slate-600 whitespace-nowrap",children:[jr(n,"MMM d")," - ",jr(Ia(n,6),"MMM d")]}),s.jsx(te,{variant:"outline",size:"sm",onClick:ee,className:"h-8",children:s.jsx(xc,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:s.jsx("div",{className:"flex gap-2 pb-2",children:Array.from({length:7}).map((U,re)=>{const Y=Ia(n,re);return s.jsxs("button",{onClick:()=>I(Y),className:`flex-shrink-0 rounded-lg p-3 transition-all ${Nl(Y,G)?"bg-blue-600 text-white shadow-lg":Nl(Y,new Date)?"bg-blue-100 text-blue-600 border-2 border-blue-300":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[s.jsx("div",{className:"text-xs font-medium text-center",children:jr(Y,"EEE")}),s.jsx("div",{className:"text-lg font-bold text-center",children:jr(Y,"d")})]},Y.toISOString())})})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:jr(G,"EEEE, MMMM d")}),Tu.map(U=>{var Y,Ne;const re=F(G,U);return s.jsx("div",{onClick:()=>{M&&!re&&X(G,U)},className:`rounded-lg border-2 overflow-hidden transition-all ${re?"bg-white border-slate-200 shadow-sm":M?"border-orange-400 bg-orange-50 border-dashed cursor-pointer active:bg-orange-100":"border-slate-200 bg-slate-50 border-dashed"}`,children:re&&re.recipe?s.jsxs("div",{className:"group",children:[re.recipe.imageUrl&&s.jsxs("div",{className:"w-full h-48 overflow-hidden bg-slate-100 relative",children:[s.jsx("img",{src:(Y=re.recipe.imageUrl)!=null&&Y.includes("instagram.com")||(Ne=re.recipe.imageUrl)!=null&&Ne.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(re.recipe.imageUrl.replace(/&amp;/g,"&"))}`:re.recipe.imageUrl,alt:re.recipe.title,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:K=>{K.stopPropagation(),J(re.id)},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(At,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium text-slate-500 mb-2",children:U}),s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:re.recipe.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-4 h-4"}),s.jsxs("span",{children:[re.recipe.prepTime+re.recipe.cookTime,"m"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ds,{className:"w-4 h-4"}),s.jsxs("span",{children:[re.recipe.servings," servings"]})]})]})]})]}):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"text-sm font-medium text-slate-500 mb-2",children:U}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"No meal planned"}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>fe(G,U),className:"gap-2",children:[s.jsx(hn,{className:"w-4 h-4"}),"Add Meal"]})]})},U)})]})]}):s.jsx("div",{className:"grid gap-4 grid-cols-7",children:ie().map((U,re)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-center pb-2 border-b-2 border-slate-200",children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:jr(U,"EEE")}),s.jsx("div",{className:`text-lg font-bold ${Nl(U,new Date)?"text-blue-600":"text-slate-900"}`,children:jr(U,"d")})]}),s.jsx("div",{className:"space-y-2",children:Tu.map(Y=>{var K,ce;const Ne=F(U,Y);return s.jsx("div",{onClick:()=>{M&&X(U,Y)},className:`
                              min-h-[100px] rounded-lg border-2 p-2
                              transition-all relative group
                              ${M&&!Ne?"border-orange-400 bg-orange-50 cursor-pointer hover:bg-orange-100 hover:border-orange-500 border-dashed":"border-slate-200 bg-slate-50/50"}
                              ${Ne?"border-solid bg-white hover:shadow-md":"border-dashed"}
                            `,children:Ne&&Ne.recipe?s.jsxs("div",{className:"relative h-full",children:[s.jsx("button",{onClick:we=>{we.stopPropagation(),J(Ne.id)},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10 shadow-sm",children:s.jsx(At,{className:"w-3 h-3"})}),Ne.recipe.imageUrl&&s.jsx("div",{className:"w-full h-16 rounded-md overflow-hidden mb-2 bg-slate-100",children:s.jsx("img",{src:(K=Ne.recipe.imageUrl)!=null&&K.includes("instagram.com")||(ce=Ne.recipe.imageUrl)!=null&&ce.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(Ne.recipe.imageUrl.replace(/&amp;/g,"&"))}`:Ne.recipe.imageUrl,alt:Ne.recipe.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"text-xs",children:[s.jsx("div",{className:"font-medium text-slate-500 mb-1",children:Y}),s.jsx("div",{className:"font-semibold text-slate-900 line-clamp-2 text-xs",children:Ne.recipe.title}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 text-slate-500 text-xs",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsxs("span",{children:[Ne.recipe.prepTime+Ne.recipe.cookTime,"m"]})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center gap-1",children:[s.jsx("div",{className:"text-xs font-medium text-slate-400",children:Y}),s.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>fe(U,Y),className:"h-6 text-xs px-2 gap-1 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[s.jsx(hn,{className:"w-3 h-3"}),"Add"]})]})},`${re}-${Y}`)})})]},re))})})})]}),s.jsx(Ct,{open:m,onOpenChange:b,children:s.jsxs(bt,{className:"w-[95vw] max-w-sm",children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Add Meal to Plan"}),s.jsx(Gr,{children:g&&`Add "${g.title}" to your meal plan`})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date"}),s.jsxs(mn,{value:y,onValueChange:x,children:[s.jsx(Yr,{children:s.jsx(pn,{placeholder:"Select date"})}),s.jsx(Jr,{children:ie().map(U=>s.jsx(fr,{value:jr(U,"yyyy-MM-dd"),children:jr(U,"EEE, MMM d")},U.toISOString()))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Meal Type"}),s.jsxs(mn,{value:v,onValueChange:U=>j(U),children:[s.jsx(Yr,{children:s.jsx(pn,{placeholder:"Select meal type"})}),s.jsx(Jr,{children:Tu.map(U=>s.jsx(fr,{value:U,children:U},U))})]})]})]}),s.jsxs(ds,{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",onClick:()=>{b(!1),w(null),x(""),j("")},children:"Cancel"}),s.jsx(te,{onClick:de,disabled:!y||!v,children:"Add"})]})]})}),s.jsx(Ct,{open:N,onOpenChange:_,children:s.jsxs(bt,{className:"w-[95vw] max-w-2xl max-h-[80vh]",children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Select Recipe"}),s.jsx(Gr,{children:k&&C&&`Add a recipe for ${C} on ${jr(k,"EEE, MMM d")}`})]}),s.jsx(Fo,{className:"max-h-[50vh]",children:s.jsx("div",{className:"space-y-4 py-4 pr-4",children:S.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No saved recipes. Save recipes from the Discover page first."}):s.jsx(Gx,{type:"multiple",defaultValue:S.map(U=>U.cuisine),children:S.map(({cuisine:U,recipes:re})=>s.jsxs(sf,{value:U,children:[s.jsx(of,{children:s.jsxs("div",{className:"flex items-center justify-between w-full pr-2",children:[s.jsx("span",{className:"font-semibold",children:U}),s.jsx(nt,{variant:"secondary",children:re.length})]})}),s.jsx(af,{children:s.jsx("div",{className:"space-y-2 pt-2",children:re.map(Y=>{var Ne,K;return s.jsx("button",{onClick:()=>z(Y.id),className:"w-full text-left p-3 rounded-lg border border-slate-200 hover:border-blue-300 hover:bg-blue-50 transition-all",children:s.jsxs("div",{className:"flex gap-3",children:[Y.imageUrl&&s.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden shrink-0 bg-slate-100",children:s.jsx("img",{src:(Ne=Y.imageUrl)!=null&&Ne.includes("instagram.com")||(K=Y.imageUrl)!=null&&K.includes("cdninstagram.com")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(Y.imageUrl.replace(/&amp;/g,"&"))}`:Y.imageUrl,alt:Y.title,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-sm text-slate-900 mb-1",children:Y.title}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsxs("span",{children:[Y.prepTime+Y.cookTime,"m"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ds,{className:"w-3 h-3"}),s.jsx("span",{children:Y.servings})]})]})]})]})},Y.id)})})})]},U))})})}),s.jsx(ds,{children:s.jsx(te,{variant:"outline",onClick:()=>{_(!1),P(null),R(null)},children:"Cancel"})})]})})]})}function e6({onNavigate:e}={}){const{state:t,dispatch:r}=Xs(),[n,o]=u.useState(QN()),[a,i]=u.useState(!1),[l,c]=u.useState(null),[d,h]=u.useState(null),[f,p]=u.useState(""),[m,b]=u.useState(""),[g,w]=u.useState(""),[y,x]=u.useState(""),[v,j]=u.useState(!1),[N,_]=u.useState(""),[k,P]=u.useState(new Date().toISOString().split("T")[0]),[C,R]=u.useState(new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]),[M,$]=u.useState(!1),[Q,H]=u.useState(null),[oe,q]=u.useState(null),G=t.groceryList;u.useEffect(()=>{I()},[k,C]);function I(){const K=new Date(k);K.setHours(0,0,0,0);const ce=new Date(C);ce.setHours(23,59,59,999);const we=t.mealPlan.filter(me=>{const _e=new Date(me.date);return _e.setHours(0,0,0,0),_e>=K&&_e<=ce}),Le={};we.forEach(me=>{const _e=t.savedRecipes.find(Oe=>Oe.id===me.recipeId);_e&&_e.ingredients.forEach(Oe=>{const ht=`${Oe.name.toLowerCase()}-${Oe.unit}`;if(Le[ht])Le[ht].quantity+=parseFloat(Oe.quantity)||0,Le[ht].sourceRecipeIds.includes(_e.id)||Le[ht].sourceRecipeIds.push(_e.id);else{const Qt=S(Oe.name);Le[ht]={id:`item-${Date.now()}-${Math.random()}`,name:Oe.name,quantity:parseFloat(Oe.quantity)||1,unit:Oe.unit||"",categoryId:Qt,checked:!1,sourceRecipeIds:[_e.id]}}})});const Pe=new Set(G.map(me=>`${me.name.toLowerCase()}-${me.unit}`)),B=Object.values(Le).filter(me=>!Pe.has(`${me.name.toLowerCase()}-${me.unit}`));B.length>0&&r({type:"UPDATE_GROCERY_LIST",payload:[...G,...B]})}function S(K){const ce=K.toLowerCase();return ce.includes("milk")||ce.includes("cheese")||ce.includes("yogurt")||ce.includes("butter")||ce.includes("cream")?"dairy":ce.includes("chicken")||ce.includes("beef")||ce.includes("pork")||ce.includes("fish")||ce.includes("meat")?"meat":ce.includes("apple")||ce.includes("banana")||ce.includes("orange")||ce.includes("berry")||ce.includes("fruit")||ce.includes("lettuce")||ce.includes("tomato")||ce.includes("carrot")||ce.includes("onion")||ce.includes("vegetable")?"produce":ce.includes("bread")||ce.includes("pasta")||ce.includes("rice")||ce.includes("cereal")?"pantry":"other"}function T(K){r({type:"TOGGLE_GROCERY_ITEM",payload:K})}function Z(K){r({type:"REMOVE_GROCERY_ITEM",payload:K}),q(null)}function F(){const K=G.filter(ce=>!ce.checked);r({type:"UPDATE_GROCERY_LIST",payload:K})}function W(){window.confirm("Are you sure you want to clear all items from your grocery list?")&&r({type:"UPDATE_GROCERY_LIST",payload:[]})}function A(){if(!f.trim()||!y)return;const K={id:`item-${Date.now()}-${Math.random()}`,name:f.trim(),quantity:parseFloat(m)||1,unit:g||"",categoryId:y,checked:!1,sourceRecipeIds:[]};r({type:"ADD_GROCERY_ITEM",payload:K}),i(!1),p(""),b(""),w(""),x("")}function X(){if(!N)return;const K=t.savedRecipes.find(we=>we.id===N);if(!K){D.error("Recipe not found");return}const ce=K.ingredients.map((we,Le)=>{const Pe=S(we.name);return{id:`item-${Date.now()}-${Le}`,name:we.name,quantity:parseFloat(we.quantity)||1,unit:we.unit||"",categoryId:Pe,checked:!1,sourceRecipeIds:[K.id]}});r({type:"UPDATE_GROCERY_LIST",payload:[...G,...ce]}),D.success(`Added ${ce.length} ingredients from ${K.title}`),j(!1),_("")}function J(K,ce){const we=G.map(Le=>Le.id===K?{...Le,categoryId:ce}:Le);r({type:"UPDATE_GROCERY_LIST",payload:we})}function V(K){H(K),$(!0)}function ee(K){c(K)}function pe(K){K.preventDefault()}function de(K){l&&(J(l,K),c(null))}function fe(K){h(K)}async function z(K){if(!d||d===K){h(null);return}const ce=n.findIndex(me=>me.id===d),we=n.findIndex(me=>me.id===K);if(ce===-1||we===-1)return;const Le=[...n],[Pe]=Le.splice(ce,1);Le.splice(we,0,Pe);const B=Le.map((me,_e)=>({...me,sortOrder:_e}));o(B),h(null)}async function ie(){try{const{data:K}=await L.auth.getUser();if(!K.user){D.error("Please sign in to add items to cart");return}if(G.length===0){D.error("No items to send to cart");return}const ce=G.map(Le=>({user_id:K.user.id,product_name:Le.name,quantity:`${Le.quantity} ${Le.unit}`.trim(),price:"0.00",image_url:null,affiliate_link:null})),{error:we}=await L.from("cart_items").insert(ce);if(we)throw we;D.success(`Added ${G.length} items to cart!`),e&&setTimeout(()=>e("cart"),1e3)}catch(K){console.error("Failed to send to cart:",K),D.error("Failed to send items to cart")}}let O=0,he=0;function ge(K,ce){O=K.targetTouches[0].clientX}function U(K,ce){he=K.changedTouches[0].clientX;const we=O-he;we>100?q(ce):we<-50&&q(null)}const re=n.reduce((K,ce)=>(K[ce.id]=G.filter(we=>we.categoryId===ce.id),K),{}),Y=G.filter(K=>K.checked).length,Ne=G.length;return s.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Grocery List"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Y," of ",Ne," items checked"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(te,{onClick:()=>i(!0),className:"flex-1 min-w-[140px] h-12",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Add Item"]}),s.jsxs(te,{variant:"outline",onClick:()=>j(!0),className:"flex-1 min-w-[140px] h-12",children:[s.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Add Recipe"]})]}),(Y>0||Ne>0)&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Y>0&&s.jsxs(te,{variant:"outline",onClick:F,className:"flex-1 h-12",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"}),"Clear Checked"]}),Ne>0&&s.jsxs(s.Fragment,{children:[s.jsxs(te,{variant:"destructive",onClick:W,className:"flex-1 h-12",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"}),"Clear All"]}),s.jsxs(te,{onClick:ie,className:"w-full h-12 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600",children:[s.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Send to Cart"]})]})]})]}),s.jsx(Xe,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:s.jsx(Ze,{className:"pt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jo,{className:"w-5 h-5 text-blue-600"}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Auto-populate from Meal Planner"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(He,{className:"text-xs text-gray-600",children:"From:"}),s.jsx(ct,{type:"date",value:k,onChange:K=>P(K.target.value),className:"w-full h-12"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(He,{className:"text-xs text-gray-600",children:"To:"}),s.jsx(ct,{type:"date",value:C,onChange:K=>R(K.target.value),className:"w-full h-12"})]}),s.jsx(te,{onClick:I,className:"h-12 sm:self-end",children:"Refresh"})]})]})})})]}),Ne===0?s.jsx(Xe,{children:s.jsxs(Ze,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"Your grocery list is empty. Add recipes to your meal plan to automatically generate a grocery list."}),s.jsxs(te,{onClick:()=>e==null?void 0:e("meal-planner"),className:"h-12",children:[s.jsx(Jo,{className:"w-4 h-4 mr-2"}),"Go to Meal Planner"]})]})}):s.jsx("div",{className:"space-y-4",children:n.map(K=>{const ce=re[K.id]||[];return ce.length===0?null:s.jsxs(Xe,{draggable:!0,onDragStart:()=>fe(K.id),onDragOver:pe,onDrop:()=>z(K.id),className:`transition-all ${d===K.id?"opacity-50":""}`,children:[s.jsx(Nt,{className:"pb-3 cursor-move",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gu,{className:"w-4 h-4 text-gray-400"}),s.jsx(_t,{className:"text-lg",children:K.name}),s.jsx(nt,{variant:"secondary",children:ce.length})]})})}),s.jsx(Ze,{onDragOver:pe,onDrop:()=>de(K.id),children:s.jsx("div",{className:"space-y-2",children:ce.map(we=>s.jsxs("div",{draggable:!0,onDragStart:()=>ee(we.id),onTouchStart:Le=>ge(Le,we.id),onTouchEnd:Le=>U(Le,we.id),className:`relative flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-all ${l===we.id?"opacity-50":""} ${we.checked?"opacity-60":""} ${oe===we.id?"bg-red-50":""}`,children:[s.jsx(gu,{className:"w-4 h-4 text-gray-400 cursor-move hidden md:block"}),s.jsx("button",{onClick:()=>V(we),className:"md:hidden p-2 -ml-2",children:s.jsx(gu,{className:"w-5 h-5 text-gray-400"})}),s.jsx(pi,{checked:we.checked,onCheckedChange:()=>T(we.id),className:"h-6 w-6"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:`font-medium text-base ${we.checked?"line-through text-gray-500":"text-gray-900"}`,children:we.name}),we.sourceRecipeIds.length>1&&s.jsxs(nt,{variant:"outline",className:"text-xs",children:[we.sourceRecipeIds.length," recipes"]})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[HM(we.quantity)," ",we.unit]})]}),s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Z(we.id),className:"shrink-0 h-10 w-10",children:s.jsx(nr,{className:"w-5 h-5 text-red-500"})})]},we.id))})})]},K.id)})}),s.jsx(Ct,{open:M,onOpenChange:$,children:s.jsxs(bt,{children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Move to Category"}),s.jsxs(Gr,{children:['Select a new category for "',Q==null?void 0:Q.name,'"']})]}),s.jsx("div",{className:"space-y-2 py-4",children:n.map(K=>s.jsx(te,{variant:"outline",className:"w-full h-14 justify-start text-left",onClick:()=>{Q&&J(Q.id,K.id),$(!1),H(null)},children:s.jsx("span",{className:"text-base font-medium",children:K.name})},K.id))})]})}),s.jsx(Ct,{open:a,onOpenChange:i,children:s.jsxs(bt,{children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Add Item"}),s.jsx(Gr,{children:"Add a new item to your grocery list."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"itemName",children:"Item Name *"}),s.jsx(ct,{id:"itemName",value:f,onChange:K=>p(K.target.value),placeholder:"e.g., Milk, Eggs",className:"h-12"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"itemQuantity",children:"Quantity"}),s.jsx(ct,{id:"itemQuantity",type:"number",value:m,onChange:K=>b(K.target.value),placeholder:"1",className:"h-12"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"itemUnit",children:"Unit"}),s.jsx(ct,{id:"itemUnit",value:g,onChange:K=>w(K.target.value),placeholder:"e.g., cups, lbs",className:"h-12"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"itemCategory",children:"Category *"}),s.jsxs(mn,{value:y,onValueChange:x,children:[s.jsx(Yr,{className:"h-12",children:s.jsx(pn,{placeholder:"Select category"})}),s.jsx(Jr,{children:n.map(K=>s.jsx(fr,{value:K.id,children:K.name},K.id))})]})]})]}),s.jsxs(ds,{children:[s.jsx(te,{variant:"outline",onClick:()=>i(!1),className:"h-12",children:"Cancel"}),s.jsx(te,{onClick:A,disabled:!f.trim()||!y,className:"h-12",children:"Add Item"})]})]})}),s.jsx(Ct,{open:v,onOpenChange:j,children:s.jsxs(bt,{children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Add Recipe to Grocery List"}),s.jsx(Gr,{children:"Select a recipe to add its ingredients to your grocery list."})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"recipeSelect",children:"Recipe *"}),s.jsxs(mn,{value:N,onValueChange:_,children:[s.jsx(Yr,{className:"h-12",children:s.jsx(pn,{placeholder:"Select a recipe"})}),s.jsx(Jr,{children:t.savedRecipes.map(K=>s.jsx(fr,{value:K.id,children:K.title},K.id))})]})]})}),s.jsxs(ds,{children:[s.jsx(te,{variant:"outline",onClick:()=>j(!1),className:"h-12",children:"Cancel"}),s.jsx(te,{onClick:X,disabled:!N,className:"h-12",children:"Add Ingredients"})]})]})})]})}function t6({onNavigate:e}={}){const[t,r]=u.useState([]),[n,o]=u.useState(!0),[a,i]=u.useState(null),[l,c]=u.useState(window.innerWidth<768);u.useEffect(()=>{const g=()=>c(window.innerWidth<768);return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),u.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:g}=await L.auth.getUser();if(!g.user)return;i(g.user.id);const{data:w,error:y}=await L.from("cart_items").select("*").eq("user_id",g.user.id).order("created_at",{ascending:!1});if(y)throw y;r(w||[])}catch(g){console.error("Error loading cart:",g),D.error("Failed to load cart")}finally{o(!1)}},h=async(g,w)=>{try{const{error:y}=await L.from("cart_items").update({quantity:w}).eq("id",g);if(y)throw y;r(x=>x.map(v=>v.id===g?{...v,quantity:w}:v)),D.success("Quantity updated")}catch(y){console.error("Error updating quantity:",y),D.error("Failed to update quantity")}},f=async g=>{try{const{error:w}=await L.from("cart_items").delete().eq("id",g);if(w)throw w;r(y=>y.filter(x=>x.id!==g)),D.success("Item removed from cart")}catch(w){console.error("Error removing item:",w),D.error("Failed to remove item")}},p=async()=>{if(a&&confirm("Are you sure you want to clear your entire cart?"))try{const{error:g}=await L.from("cart_items").delete().eq("user_id",a);if(g)throw g;r([]),D.success("Cart cleared")}catch(g){console.error("Error clearing cart:",g),D.error("Failed to clear cart")}},m=()=>t.reduce((g,w)=>{const y=w.price||0,x=parseFloat(w.quantity)||1;return g+y*x},0),b=()=>{D.info("Stripe checkout coming soon!")};return n?s.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-orange-50",children:[s.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-slate-200 shadow-sm",children:s.jsx("div",{className:"p-4 md:p-6",children:s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[s.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-orange-600 to-red-600 flex items-center justify-center",children:s.jsx(Vs,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-3xl font-bold text-slate-900",children:"Your Cart"}),s.jsxs("p",{className:"text-xs md:text-sm text-slate-600",children:[t.length," ",t.length===1?"item":"items"]})]})]}),t.length>0&&s.jsx(te,{variant:"ghost",size:"sm",onClick:p,className:"text-xs md:text-sm hover:bg-red-50 hover:text-red-600",children:"Clear"})]})})}),t.length===0?s.jsx("div",{className:"p-4 md:p-6 flex items-center justify-center min-h-[calc(100vh-200px)]",children:s.jsx(Xe,{className:"w-full max-w-sm",children:s.jsxs(Ze,{className:"flex flex-col items-center justify-center py-12 px-6",children:[s.jsx(Vs,{className:"w-16 h-16 text-gray-300 mb-4"}),s.jsx("p",{className:"text-gray-500 text-center mb-4 text-sm md:text-base",children:"Your cart is empty. Soon you will be able to order your ingredients and get them delivered!"}),s.jsx(te,{onClick:()=>e==null?void 0:e("meal-planner"),className:"bg-orange-600 hover:bg-orange-700 text-white",children:"Add Items from Meal Planner"})]})})}):s.jsxs("div",{className:"p-4 md:p-6 pb-32 md:pb-24",children:[s.jsx("div",{className:"space-y-3 md:space-y-4 mb-6 max-w-4xl mx-auto",children:t.map(g=>s.jsx(Xe,{className:"overflow-hidden hover:shadow-md transition-shadow",children:s.jsx(Ze,{className:"p-3 md:p-4",children:s.jsxs("div",{className:"flex gap-3 md:gap-4",children:[g.image_url&&s.jsx("div",{className:"shrink-0",children:s.jsx("img",{src:g.image_url,alt:g.amazon_product_name||g.ingredient_name,className:"w-20 h-20 md:w-24 md:h-24 object-cover rounded-lg bg-slate-100"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-sm md:text-lg text-slate-900 line-clamp-2 mb-1",children:g.amazon_product_name||g.ingredient_name}),g.ingredient_name!==g.amazon_product_name&&s.jsx("p",{className:"text-xs md:text-sm text-gray-600 italic mb-2 line-clamp-1",children:g.ingredient_name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg w-fit p-1",children:[s.jsx(te,{size:"sm",variant:"ghost",onClick:()=>{const w=parseFloat(g.quantity)||1;w>1&&h(g.id,(w-1).toString())},className:"h-7 w-7 p-0 hover:bg-slate-200",children:s.jsx(Pw,{className:"w-3 h-3"})}),s.jsx(ct,{type:"text",value:g.quantity,onChange:w=>h(g.id,w.target.value),className:"w-12 md:w-16 text-center text-sm h-7 border-0 bg-transparent"}),s.jsx(te,{size:"sm",variant:"ghost",onClick:()=>{const w=parseFloat(g.quantity)||1;h(g.id,(w+1).toString())},className:"h-7 w-7 p-0 hover:bg-slate-200",children:s.jsx(hn,{className:"w-3 h-3"})})]}),s.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:g.unit})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 justify-between",children:[g.price&&s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm md:text-lg font-semibold text-orange-600",children:["$",(g.price*(parseFloat(g.quantity)||1)).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["$",g.price.toFixed(2)," each"]})]}),s.jsxs("div",{className:"flex gap-1 flex-col",children:[g.amazon_product_url&&s.jsxs("a",{href:g.amazon_product_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 text-xs md:text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded px-2 py-1 transition-colors",children:[s.jsx(rd,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:"View"})]}),s.jsxs(te,{size:"sm",variant:"ghost",onClick:()=>f(g.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs md:text-sm h-7 px-2",children:[s.jsx(nr,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})]})]})]})})},g.id))}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(Xe,{className:"mb-4 bg-slate-50 border-slate-200",children:s.jsx(Ze,{className:"p-4 md:p-6",children:s.jsxs("div",{className:"space-y-2 text-sm md:text-base",children:[s.jsxs("div",{className:"flex justify-between text-slate-700",children:[s.jsxs("span",{children:["Subtotal (",t.length," items)"]}),s.jsxs("span",{className:"font-medium",children:["$",m().toFixed(2)]})]}),s.jsx("div",{className:"flex justify-between text-slate-600 text-xs md:text-sm",children:s.jsx("span",{children:"Shipping & taxes calculated at checkout"})})]})})}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 md:relative md:p-0 bg-white md:bg-transparent border-t md:border-t-0 border-slate-200",children:[s.jsxs(te,{className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-medium text-sm md:text-base h-12 md:h-14",size:"lg",onClick:b,children:[s.jsx(IE,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Proceed to Checkout"]}),s.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Stripe checkout integration coming soon"})]})]})]})]})}var ZN=["PageUp","PageDown"],e_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],t_={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ua="Slider",[lf,r6,n6]=Di(ua),[r_]=ir(ua,[n6]),[s6,Td]=r_(ua),n_=u.forwardRef((e,t)=>{const{name:r,min:n=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:h,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:b,...g}=e,w=u.useRef(new Set),y=u.useRef(0),v=i==="horizontal"?o6:a6,[j=[],N]=Qr({prop:h,defaultProp:d,onChange:M=>{var Q;(Q=[...w.current][y.current])==null||Q.focus(),f(M)}}),_=u.useRef(j);function k(M){const $=u6(j,M);R(M,$)}function P(M){R(M,y.current)}function C(){const M=_.current[y.current];j[y.current]!==M&&p(j)}function R(M,$,{commit:Q}={commit:!1}){const H=p6(a),oe=g6(Math.round((M-n)/a)*a+n,H),q=Ei(oe,[n,o]);N((G=[])=>{const I=c6(G,q,$);if(m6(I,c*a)){y.current=I.indexOf(q);const S=String(I)!==String(G);return S&&Q&&p(I),S?I:G}else return G})}return s.jsx(s6,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:o,valueIndexToChangeRef:y,thumbs:w.current,values:j,orientation:i,form:b,children:s.jsx(lf.Provider,{scope:e.__scopeSlider,children:s.jsx(lf.Slot,{scope:e.__scopeSlider,children:s.jsx(v,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:ye(g.onPointerDown,()=>{l||(_.current=j)}),min:n,max:o,inverted:m,onSlideStart:l?void 0:k,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&R(n,0,{commit:!0}),onEndKeyDown:()=>!l&&R(o,j.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:$})=>{if(!l){const oe=ZN.includes(M.key)||M.shiftKey&&e_.includes(M.key)?10:1,q=y.current,G=j[q],I=a*oe*$;R(G+I,q,{commit:!0})}}})})})})});n_.displayName=ua;var[s_,o_]=r_(ua,{startEdge:"left",endEdge:"right",size:"width",direction:1}),o6=u.forwardRef((e,t)=>{const{min:r,max:n,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[f,p]=u.useState(null),m=$e(t,v=>p(v)),b=u.useRef(void 0),g=ia(o),w=g==="ltr",y=w&&!a||!w&&a;function x(v){const j=b.current||f.getBoundingClientRect(),N=[0,j.width],k=vp(N,y?[r,n]:[n,r]);return b.current=j,k(v-j.left)}return s.jsx(s_,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:s.jsx(a_,{dir:g,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const j=x(v.clientX);i==null||i(j)},onSlideMove:v=>{const j=x(v.clientX);l==null||l(j)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:v=>{const N=t_[y?"from-left":"from-right"].includes(v.key);d==null||d({event:v,direction:N?-1:1})}})})}),a6=u.forwardRef((e,t)=>{const{min:r,max:n,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=u.useRef(null),f=$e(t,h),p=u.useRef(void 0),m=!o;function b(g){const w=p.current||h.current.getBoundingClientRect(),y=[0,w.height],v=vp(y,m?[n,r]:[r,n]);return p.current=w,v(g-w.top)}return s.jsx(s_,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(a_,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=b(g.clientY);a==null||a(w)},onSlideMove:g=>{const w=b(g.clientY);i==null||i(w)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:g=>{const y=t_[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:y?-1:1})}})})}),a_=u.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=Td(ua,r);return s.jsx(Ie.span,{...d,ref:t,onKeyDown:ye(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):ZN.concat(e_).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:ye(e.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(p)?p.focus():n(f)}),onPointerMove:ye(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&o(f)}),onPointerUp:ye(e.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),a(f))})})}),i_="SliderTrack",l_=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=Td(i_,r);return s.jsx(Ie.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:t})});l_.displayName=i_;var cf="SliderRange",c_=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,o=Td(cf,r),a=o_(cf,r),i=u.useRef(null),l=$e(t,i),c=o.values.length,d=o.values.map(p=>h_(p,o.min,o.max)),h=c>1?Math.min(...d):0,f=100-Math.max(...d);return s.jsx(Ie.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:f+"%"}})});c_.displayName=cf;var df="SliderThumb",d_=u.forwardRef((e,t)=>{const r=r6(e.__scopeSlider),[n,o]=u.useState(null),a=$e(t,l=>o(l)),i=u.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(i6,{...e,ref:a,index:i})}),i6=u.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:o,...a}=e,i=Td(df,r),l=o_(df,r),[c,d]=u.useState(null),h=$e(t,x=>d(x)),f=c?i.form||!!c.closest("form"):!0,p=ud(c),m=i.values[n],b=m===void 0?0:h_(m,i.min,i.max),g=d6(n,i.values.length),w=p==null?void 0:p[l.size],y=w?h6(w,b,l.direction):0;return u.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${y}px)`},children:[s.jsx(lf.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ie.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:ye(e.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),f&&s.jsx(u_,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},n)]})});d_.displayName=df;var l6="RadioBubbleInput",u_=u.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const o=u.useRef(null),a=$e(o,n),i=dd(t);return u.useEffect(()=>{const l=o.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),s.jsx(Ie.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});u_.displayName=l6;function c6(e=[],t,r){const n=[...e];return n[r]=t,n.sort((o,a)=>o-a)}function h_(e,t,r){const a=100/(r-t)*(e-t);return Ei(a,[0,100])}function d6(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function u6(e,t){if(e.length===1)return 0;const r=e.map(o=>Math.abs(o-t)),n=Math.min(...r);return r.indexOf(n)}function h6(e,t,r){const n=e/2,a=vp([0,50],[0,n]);return(n-a(t)*r)*r}function f6(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function m6(e,t){if(t>0){const r=f6(e);return Math.min(...r)>=t}return!0}function vp(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function p6(e){return(String(e).split(".")[1]||"").length}function g6(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var f_=n_,x6=l_,v6=c_,y6=d_;const m_=u.forwardRef(({className:e,...t},r)=>s.jsxs(f_,{ref:r,className:Te("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(x6,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(v6,{className:"absolute h-full bg-primary"})}),s.jsx(y6,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));m_.displayName=f_.displayName;var Ad="Switch",[w6]=ir(Ad),[b6,j6]=w6(Ad),p_=u.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:o,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=e,[p,m]=u.useState(null),b=$e(t,v=>m(v)),g=u.useRef(!1),w=p?h||!!p.closest("form"):!0,[y,x]=Qr({prop:o,defaultProp:a??!1,onChange:d,caller:Ad});return s.jsxs(b6,{scope:r,checked:y,disabled:l,children:[s.jsx(Ie.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":y_(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:ye(e.onClick,v=>{x(j=>!j),w&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),w&&s.jsx(v_,{control:p,bubbles:!g.current,name:n,value:c,checked:y,required:i,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});p_.displayName=Ad;var g_="SwitchThumb",x_=u.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,o=j6(g_,r);return s.jsx(Ie.span,{"data-state":y_(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t})});x_.displayName=g_;var N6="SwitchBubbleInput",v_=u.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...o},a)=>{const i=u.useRef(null),l=$e(i,a),c=dd(r),d=ud(t);return u.useEffect(()=>{const h=i.current;if(!h)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const b=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(b)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:l,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});v_.displayName=N6;function y_(e){return e?"checked":"unchecked"}var w_=p_,_6=x_;const b_=u.forwardRef(({className:e,...t},r)=>s.jsx(w_,{className:Te("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(_6,{className:Te("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));b_.displayName=w_.displayName;const S6=[{label:"Eastern Time (ET)",value:"America/New_York"},{label:"Central Time (CT)",value:"America/Chicago"},{label:"Mountain Time (MT)",value:"America/Denver"},{label:"Pacific Time (PT)",value:"America/Los_Angeles"}];function k6({onNavigate:e}){const[t,r]=u.useState("user-demo123@mealscrape.app"),[n,o]=u.useState(!1),[a,i]=u.useState(!1),[l,c]=u.useState(!1),[d,h]=u.useState(""),[f,p]=u.useState(!1),[m,b]=u.useState({speechRate:1,voiceIndex:0,autoRead:!0}),[g,w]=u.useState([]),[y,x]=u.useState(!1),[v,j]=u.useState("America/New_York"),[N,_]=u.useState(!1),[k,P]=u.useState(!1),[C,R]=u.useState(""),[M,$]=u.useState(""),[Q,H]=u.useState(!1),[oe,q]=u.useState(!1),[G,I]=u.useState(!1);u.useEffect(()=>{mi().then(q)},[]),u.useEffect(()=>{if("speechSynthesis"in window){const F=window.speechSynthesis.getVoices();w(F)}},[]);const S=async()=>{try{await navigator.clipboard.writeText(t),i(!0),setTimeout(()=>i(!1),2e3)}catch{console.error("Failed to copy")}},T=()=>{if("speechSynthesis"in window){x(!0),window.speechSynthesis.cancel();const F=new SpeechSynthesisUtterance("This is how I will read your recipe steps. Next, preheat the oven to 350 degrees Fahrenheit.");F.rate=m.speechRate,g.length>0&&m.voiceIndex<g.length&&(F.voice=g[m.voiceIndex]),F.onend=()=>x(!1),F.onerror=()=>x(!1),window.speechSynthesis.speak(F)}},Z=async()=>{if(window.confirm("This will download and store all Instagram images permanently. Continue?")){I(!0),D.loading("Migrating images... This may take a while",{id:"migrate",duration:0});try{const F=await hO();if(F){const{successCount:W,expiredCount:A,expiredPosts:X,total:J}=F;if(A>0){const V=(X==null?void 0:X.map(ee=>`"${ee.title}"`).join(", "))||"";D.warning(`Migration complete! Migrated: ${W}, Expired URLs: ${A}. These posts need to be re-added: ${V}`,{id:"migrate",duration:1e4})}else D.success(`Migration complete! Successfully migrated ${W} of ${J} posts`,{id:"migrate"})}else D.error("Migration failed - no result returned",{id:"migrate"})}catch(F){D.error("Migration failed: "+F.message,{id:"migrate"})}finally{I(!1)}}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[s.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-4 pb-20 sm:px-6 sm:py-6 md:px-8 md:py-8",children:[s.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 mb-1 sm:mb-2",children:"Settings"}),s.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:"Manage your account and preferences"})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-5 md:space-y-6",children:[s.jsx(Xe,{className:"border-slate-200 shadow-sm overflow-hidden",children:s.jsx(Nt,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-b border-orange-100 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-orange-600 flex items-center justify-center shrink-0",children:s.jsx(wc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900 truncate",children:"Account"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600 truncate",children:"user@example.com"})]}),s.jsxs(te,{onClick:()=>console.log("Logout"),variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50 shrink-0 text-xs sm:text-sm",children:[s.jsx(zE,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Log Out"})]})]})})}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm overflow-hidden",children:[s.jsx(Nt,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-b border-emerald-100 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-600 flex items-center justify-center shrink-0",children:s.jsx(Ew,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Timezone"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Set your timezone for accurate meal planning"})]})]})}),s.jsx(Ze,{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{children:[s.jsx(He,{htmlFor:"timezone-select",className:"text-xs sm:text-sm font-medium text-slate-700 mb-2 block",children:"Select Timezone"}),s.jsxs(mn,{value:v,onValueChange:j,disabled:N,children:[s.jsx(Yr,{id:"timezone-select",className:"w-full h-10 sm:h-11 text-sm sm:text-base",children:s.jsx(pn,{placeholder:"Select your timezone"})}),s.jsx(Jr,{children:S6.map(F=>s.jsx(fr,{value:F.value,className:"text-sm sm:text-base",children:F.label},F.value))})]}),s.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 mt-2",children:["Current: ",s.jsx("span",{className:"font-medium text-slate-700",children:v})]})]})})})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm overflow-hidden",children:[s.jsx(Nt,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-b border-purple-100 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-purple-600 flex items-center justify-center shrink-0",children:s.jsx(yc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Change Password"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Update your account password"})]})]})}),s.jsx(Ze,{className:"p-4 sm:p-6",children:s.jsxs(te,{onClick:()=>P(!0),className:"w-full bg-purple-600 hover:bg-purple-700 h-10 sm:h-11 text-sm sm:text-base",children:[s.jsx(yc,{className:"w-4 h-4 mr-2"}),"Change Password"]})})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm overflow-hidden",children:[s.jsx(Nt,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-b border-blue-100 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-600 flex items-center justify-center shrink-0",children:s.jsx(wc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Your Forwarding Email"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Coming soon... Email recipes to your personal inbox"})]})]})}),s.jsxs(Ze,{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border-2 border-slate-200",children:[s.jsx(He,{className:"text-xs font-medium text-slate-600 uppercase tracking-wide mb-2 block",children:"Your Unique Email Address"}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("code",{className:"flex-1 text-xs sm:text-sm md:text-base font-mono font-semibold text-slate-900 bg-white px-3 py-2 sm:px-4 sm:py-3 rounded-md border border-slate-200 overflow-x-auto",children:t}),s.jsx(te,{onClick:S,variant:"outline",size:"icon",className:"h-10 w-10 sm:h-12 sm:w-12 shrink-0",children:a?s.jsx(pc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"}):s.jsx(Uh,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),s.jsxs("div",{className:"mt-4 sm:mt-6 space-y-3",children:[s.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-100",children:s.jsxs("p",{className:"text-xs sm:text-sm text-slate-700",children:[s.jsx("span",{className:"font-semibold",children:"How it works:"})," Forward any recipe to this email, and it will automatically be saved to your collection."]})}),s.jsxs(te,{onClick:()=>c(!0),variant:"outline",className:"w-full border-blue-200 hover:bg-blue-50 h-10 sm:h-11 text-sm sm:text-base",children:[s.jsx(ix,{className:"w-4 h-4 mr-2"}),"Test Email Import"]})]})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsxs(Nt,{className:"p-4 sm:p-6",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"How to Save Recipes"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Multiple ways to add recipes automatically"})]}),s.jsxs(Ze,{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-4 md:grid md:grid-cols-2 md:gap-6 md:space-y-0",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center shrink-0",children:s.jsx(LE,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"From Instagram DMs - Feature Coming Soon..."})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[s.jsx("div",{className:"aspect-video bg-gradient-to-br from-pink-100 to-purple-100 rounded-md flex items-center justify-center mb-3",children:s.jsx(BE,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-purple-600"})}),s.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),s.jsx("span",{children:"Long-press on recipe post"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),s.jsx("span",{children:'Tap "Forward"  "Email"'})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),s.jsx("span",{children:"Paste forwarding email"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"4."}),s.jsx("span",{children:"Send and auto-save!"})]})]})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shrink-0",children:s.jsx(Ms,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"From Photos - Feature Coming Soon..."})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[s.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-cyan-100 rounded-md flex items-center justify-center mb-3",children:s.jsx(Ms,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-cyan-600"})}),s.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),s.jsx("span",{children:"Screenshot recipe"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),s.jsx("span",{children:"Open photos, select screenshot"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),s.jsx("span",{children:'Share  "Mail"'})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"4."}),s.jsx("span",{children:"Send to forwarding email"})]})]})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 md:col-span-2",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shrink-0",children:s.jsx(Uh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-slate-900",children:"Copy & Paste Link"})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[s.jsxs("ol",{className:"space-y-2 text-xs sm:text-sm text-slate-700 mb-3",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"1."}),s.jsx("span",{children:"Copy recipe URL from any website"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"2."}),s.jsx("span",{children:"Click button below to go to Add Recipe"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-blue-600 shrink-0",children:"3."}),s.jsx("span",{children:"Paste link and let AI extract!"})]})]}),s.jsxs(te,{onClick:()=>e("add-recipe"),className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 font-semibold shadow-lg h-12 text-base",children:[s.jsx(Ms,{className:"w-5 h-5 mr-3"}),"Go to Add Recipe"]})]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-lg p-3 sm:p-4 md:p-5 border-2 border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-600 flex items-center justify-center shrink-0",children:s.jsx(Sw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Pro Tip"}),s.jsx("p",{className:"text-xs sm:text-sm text-slate-700 leading-relaxed",children:"Save your forwarding email as a contact for quick access. Set up auto-forwarding rules to automatically send recipes."})]})]})})]})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-sm",children:[s.jsx(Nt,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-600 flex items-center justify-center shrink-0",children:s.jsx(Rw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Voice Control"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Customize voice commands in Cook Mode"})]})]})}),s.jsx(Ze,{className:"p-4 sm:p-6",children:"speechSynthesis"in window?s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:[s.jsxs("div",{className:"flex-1 min-w-0 mr-3",children:[s.jsx(He,{htmlFor:"auto-read",className:"text-sm sm:text-base font-semibold text-slate-900 cursor-pointer",children:"Auto-Read Steps"}),s.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Auto-read each step aloud"})]}),s.jsx(b_,{id:"auto-read",checked:m.autoRead,onCheckedChange:F=>b(W=>({...W,autoRead:F}))})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs(He,{className:"text-sm sm:text-base font-semibold text-slate-900",children:["Speech Rate: ",m.speechRate.toFixed(1),"x"]}),s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("span",{className:"text-xs sm:text-sm text-slate-600 w-10 sm:w-12",children:"Slow"}),s.jsx(m_,{value:[m.speechRate],onValueChange:F=>b(W=>({...W,speechRate:F[0]})),min:.5,max:2,step:.1,className:"flex-1"}),s.jsx("span",{className:"text-xs sm:text-sm text-slate-600 w-10 sm:w-12 text-right",children:"Fast"})]})]}),g.length>0&&s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsx(He,{className:"text-sm sm:text-base font-semibold text-slate-900",children:"Voice Selection"}),s.jsxs(mn,{value:m.voiceIndex.toString(),onValueChange:F=>b(W=>({...W,voiceIndex:parseInt(F)})),children:[s.jsx(Yr,{className:"w-full h-10 sm:h-11 text-sm sm:text-base",children:s.jsx(pn,{})}),s.jsx(Jr,{children:g.map((F,W)=>s.jsxs(fr,{value:W.toString(),className:"text-sm sm:text-base",children:[F.name," (",F.lang,")"]},W))})]})]}),s.jsxs(te,{onClick:T,disabled:y,variant:"outline",className:"w-full border-emerald-300 hover:bg-emerald-50 h-10 sm:h-11 text-sm sm:text-base",children:[s.jsx(Ow,{className:"w-4 h-4 mr-2"}),y?"Playing...":"Test Voice Settings"]}),s.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-xs sm:text-sm text-slate-700",children:[s.jsx("span",{className:"font-semibold",children:"Voice commands in Cook Mode:"}),s.jsx("br",{}),'"Next", "Previous", "Repeat", "Read ingredients", and more.']})})]}):s.jsx("div",{className:"p-3 sm:p-4 bg-amber-50 rounded-lg border border-amber-300",children:s.jsx("p",{className:"text-xs sm:text-sm text-amber-900",children:"Voice control not supported in your browser. Try Chrome, Edge, or Safari."})})})]}),oe&&s.jsxs(Xe,{className:"border-purple-200 shadow-sm overflow-hidden",children:[s.jsx(Nt,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-b border-purple-100 p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-purple-600 flex items-center justify-center shrink-0",children:s.jsx(sx,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900",children:"Admin Tools"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600",children:"Database maintenance and migration tools"})]})]})}),s.jsx(Ze,{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Migrate Instagram Images"}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Downloads all Instagram images from posts and stores them permanently in Supabase storage to prevent expiration."}),s.jsx(te,{onClick:Z,disabled:G,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-700",children:G?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}),"Migrating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sx,{className:"w-4 h-4 mr-2"}),"Migrate Images"]})})]})})})]})]})]}),s.jsx(Ct,{open:l,onOpenChange:c,children:s.jsxs(bt,{className:"w-[95vw] max-w-2xl max-h-[85vh] overflow-y-auto mx-auto",children:[s.jsxs(Wt,{children:[s.jsxs($t,{className:"text-lg sm:text-xl md:text-2xl flex items-center gap-2",children:[s.jsx(ix,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),"Test Email Import"]}),s.jsx(Gr,{className:"text-xs sm:text-sm",children:"Paste recipe text to simulate email import"})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 mt-4",children:[s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[s.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mb-2",children:s.jsx("span",{className:"font-semibold",children:"Example format:"})}),s.jsx("pre",{className:"text-[10px] sm:text-xs text-slate-700 bg-white p-2 sm:p-3 rounded border border-slate-200 overflow-x-auto",children:`Chocolate Chip Cookies

Ingredients:
2 cups flour
1 tsp baking soda
1 cup butter
2 eggs
2 cups chocolate chips

Instructions:
1. Preheat oven to 375F
2. Mix dry ingredients
3. Cream butter and sugar
4. Fold in chips
5. Bake 10-12 minutes`})]}),s.jsxs("div",{children:[s.jsx(He,{htmlFor:"recipe-text",className:"text-sm sm:text-base font-semibold mb-2 block",children:"Paste Recipe Text"}),s.jsx(An,{id:"recipe-text",placeholder:"Paste your recipe here...",value:d,onChange:F=>h(F.target.value),className:"min-h-[200px] sm:min-h-[300px] font-mono text-xs sm:text-sm"})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[s.jsx(te,{onClick:()=>{p(!0),setTimeout(()=>{p(!1),c(!1),h("")},1e3)},disabled:f||!d.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 h-10 sm:h-11 text-sm sm:text-base",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}),"Importing..."]}):"Import Recipe"}),s.jsx(te,{onClick:()=>{c(!1),h("")},variant:"outline",disabled:f,className:"h-10 sm:h-11 text-sm sm:text-base",children:"Cancel"})]})]})]})}),s.jsx(Ct,{open:k,onOpenChange:P,children:s.jsxs(bt,{className:"w-[95vw] max-w-md mx-auto",children:[s.jsxs(Wt,{children:[s.jsx($t,{className:"text-lg sm:text-xl",children:"Change Password"}),s.jsx(Gr,{className:"text-xs sm:text-sm",children:"Enter your new password. Must be at least 6 characters."})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx(He,{htmlFor:"new-password",className:"text-sm sm:text-base",children:"New Password"}),s.jsx("input",{id:"new-password",type:"password",value:C,onChange:F=>R(F.target.value),className:"w-full px-3 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter new password"})]}),s.jsxs("div",{children:[s.jsx(He,{htmlFor:"confirm-password",className:"text-sm sm:text-base",children:"Confirm Password"}),s.jsx("input",{id:"confirm-password",type:"password",value:M,onChange:F=>$(F.target.value),className:"w-full px-3 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Confirm new password"})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-2",children:[s.jsx(te,{onClick:()=>{if(C!==M){alert("Passwords do not match");return}if(C.length<6){alert("Password must be at least 6 characters");return}H(!0),setTimeout(()=>{H(!1),P(!1),R(""),$("")},1e3)},disabled:Q||!C||!M,className:"flex-1 bg-purple-600 hover:bg-purple-700 h-10 sm:h-11 text-sm sm:text-base",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Password"}),s.jsx(te,{onClick:()=>{P(!1),R(""),$("")},variant:"outline",disabled:Q,className:"h-10 sm:h-11 text-sm sm:text-base",children:"Cancel"})]})]})]})})]})}function C6({onNavigate:e}){var X;const[t,r]=u.useState([]),[n,o]=u.useState([]),[a,i]=u.useState(null),[l,c]=u.useState("post"),[d,h]=u.useState(""),[f,p]=u.useState(""),[m,b]=u.useState(""),[g,w]=u.useState([]),[y,x]=u.useState(!1),[v,j]=u.useState(0),[N,_]=u.useState(!1),[k,P]=u.useState(""),[C,R]=u.useState([]),[M,$]=u.useState(null),[Q,H]=u.useState(!1),[oe,q]=u.useState(!1),G=se.useRef(null);u.useEffect(()=>{I()},[]);const I=async()=>{try{const{data:J}=await L.auth.getUser();if(!J.user)return;const{data:V,error:ee}=await L.from("public_recipes").select("id, title, image_url").eq("user_id",J.user.id).order("created_at",{ascending:!1});if(ee)throw ee;w(V||[])}catch(J){console.error("Error loading recipes:",J)}},S=J=>new Promise((V,ee)=>{const pe=document.createElement("video");pe.preload="metadata",pe.onloadedmetadata=()=>{window.URL.revokeObjectURL(pe.src);const de=Math.floor(pe.duration);isNaN(de)||de===0?ee(new Error("Invalid video duration")):V(de)},pe.onerror=()=>{window.URL.revokeObjectURL(pe.src),ee(new Error("Failed to load video metadata"))},pe.src=URL.createObjectURL(J)}),T=async J=>{const V=Array.from(J.target.files||[]);if(V.length===0)return;const ee=V.filter(O=>O.type.startsWith("image/")),pe=V.filter(O=>O.type.startsWith("video/")),de=[...ee,...pe];if(de.length===0){D.error("Please select at least one image or video");return}if(de.length>4){D.error("You can only upload up to 4 images/videos total");return}const fe=[],z=[];let ie=!1;for(const O of de){const he=O.type.startsWith("image/"),ge=O.type.startsWith("video/");if(he&&O.size>10*1024*1024){D.error(`${O.name} is too large (max 10MB for images)`);continue}if(ge&&O.size>100*1024*1024){D.error(`${O.name} is too large (max 100MB for videos)`);continue}if(ge)try{const U=await S(O);if(l==="daily"&&U>30){D.error(`${O.name}: Daily videos must be 30 seconds or less`);continue}ie=!0}catch(U){console.error("Video load error:",U),D.error(`Failed to load ${O.name}`);continue}fe.push(O),z.push(URL.createObjectURL(O))}if(fe.length===0){D.error("No valid files to upload");return}r(fe),o(z),i(ie?"video":"image")},Z=()=>{n.forEach(J=>URL.revokeObjectURL(J)),r([]),o([]),i(null)},F=()=>{G.current&&(oe?G.current.pause():G.current.play(),q(!oe))},W=async J=>{if(!J.trim()){R([]);return}H(!0);try{const pe=((await(await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(J)}&media=music&entity=song&limit=20`)).json()).results||[]).map(de=>{var fe;return{id:de.trackId.toString(),name:de.trackName||"Unknown Song",artists:[{name:de.artistName||"Unknown Artist"}],album:{images:[{url:((fe=de.artworkUrl100)==null?void 0:fe.replace("100x100","300x300"))||"https://via.placeholder.com/300"}]},preview_url:de.previewUrl||null}});R(pe)}catch(V){console.error("Music search failed:",V),D.error("Search failed  try again"),R([])}finally{H(!1)}},A=async()=>{var J,V,ee,pe,de,fe,z;if(t.length===0){D.error("Please select an image or video");return}if(l==="post"&&!d.trim()){D.error("Please enter a title");return}if(l==="daily"&&a==="video"&&v>30){D.error("Daily videos must be 30 seconds or less");return}x(!0);try{const{data:ie}=await L.auth.getUser();if(!ie.user)throw new Error("Not authenticated");const{data:O}=await L.from("profiles").select("id").eq("id",ie.user.id).maybeSingle();O||await L.from("profiles").insert({id:ie.user.id,username:((J=ie.user.email)==null?void 0:J.split("@")[0])||"user",avatar_url:null});const he=[],ge=[];for(const K of t){const ce=(V=K.name.split(".").pop())==null?void 0:V.toLowerCase(),we=`${ie.user.id}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.${ce}`,{error:Le}=await L.storage.from("posts").upload(we,K,{cacheControl:"3600",upsert:!1});if(Le)throw Le;const{data:Pe}=L.storage.from("posts").getPublicUrl(we);["mp4","mov","webm","avi","mkv"].includes(ce||"")?ge.push(Pe.publicUrl):he.push(Pe.publicUrl)}const U=he.length>1?JSON.stringify(he):he.length===1?he[0]:null,re=ge.length>1?JSON.stringify(ge):ge.length===1?ge[0]:null,Y=he[0]||ge[0],Ne={spotify_track_id:(M==null?void 0:M.id)||null,spotify_track_name:(M==null?void 0:M.name)||null,spotify_artist_name:((pe=(ee=M==null?void 0:M.artists)==null?void 0:ee[0])==null?void 0:pe.name)||null,spotify_album_art:((z=(fe=(de=M==null?void 0:M.album)==null?void 0:de.images)==null?void 0:fe[0])==null?void 0:z.url)||null,spotify_preview_url:(M==null?void 0:M.preview_url)||null};if(l==="daily"){const K={user_id:ie.user.id,media_url:Y,media_type:a==="image"?"photo":"video",caption:f.trim()||null,duration:a==="video"?v:null,...Ne},{error:ce}=await L.from("dailies").insert(K);if(ce)throw ce;await L.from("posts").insert({user_id:ie.user.id,title:"Daily",caption:f.trim()||null,[a==="image"?"image_url":"video_url"]:Y,...Ne}),D.success("Daily posted successfully!")}else{let K=m?`${window.location.origin}/#recipe/${m}`:null;const ce={user_id:ie.user.id,title:d.trim(),caption:f.trim()||null,recipe_url:K,image_url:U,video_url:re,...Ne},{data:we,error:Le}=await L.from("posts").insert(ce).select().single();if(Le)throw Le;const Pe=L4(f);if(Pe.length>0&&we)for(const B of Pe){const{data:me}=await L.from("hashtags").select("id, usage_count").eq("tag",B).maybeSingle();let _e;if(me)_e=me.id,await L.from("hashtags").update({usage_count:me.usage_count+1}).eq("id",me.id);else{const{data:Oe}=await L.from("hashtags").insert({tag:B,usage_count:1}).select().single();_e=Oe.id}await L.from("post_hashtags").insert({post_id:we.id,hashtag_id:_e})}D.success("Post uploaded successfully!")}Z(),h(""),p(""),b(""),$(null),window.history.replaceState({},"","/discover"),e("discover")}catch(ie){console.error("Upload error:",ie),D.error(ie.message||"Failed to upload")}finally{x(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-40 overflow-x-hidden",style:{paddingBottom:"max(10rem, env(safe-area-inset-bottom))"},children:[s.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-20",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center justify-between",children:[s.jsx("button",{type:"button",onClick:J=>{J.preventDefault(),e("discover")},className:"text-gray-600 hover:text-gray-900 font-medium",children:"Cancel"}),s.jsxs("h1",{className:"text-lg font-semibold",children:["New ",l==="daily"?"Daily":"Post"]}),s.jsx("div",{className:"w-16"})]})}),s.jsxs("div",{className:"max-w-lg mx-auto p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Post Type"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>c("post"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${l==="post"?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Post"}),s.jsx("button",{onClick:()=>c("daily"),className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${l==="daily"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Daily"})]}),l==="daily"&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Dailies expire after 24 hours. Videos must be 30 seconds or less."})]}),n.length===0?s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 sm:p-12 text-center hover:border-orange-500 transition-colors cursor-pointer",children:s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:T,className:"hidden"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-3 sm:gap-4 justify-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl shadow-lg",children:s.jsx(vc,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg",children:s.jsx(QE,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-1",children:"Upload a photo or video"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Click to select a file from your device"})]})]})]})}):s.jsxs("div",{className:"space-y-2",children:[n.map((J,V)=>{const ee=t[V],pe=ee==null?void 0:ee.type.startsWith("video/");return s.jsxs("div",{className:"relative",children:[pe?s.jsx("video",{src:J,controls:!0,className:"w-full aspect-square object-cover rounded-xl"}):s.jsx("img",{src:J,alt:`Preview ${V+1}`,className:"w-full aspect-square object-cover rounded-xl"}),s.jsx("button",{onClick:Z,className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full p-2",children:s.jsx(At,{className:"w-5 h-5"})})]},V)}),t.length<4&&s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:J=>{const V=Array.from(J.target.files||[]),ee=4-t.length,pe=V.slice(0,ee),de=[],fe=[];for(const z of pe){if(z.size>10*1024*1024){D.error(`${z.name} is too large (max 10MB)`);continue}if(!z.type.startsWith("image/")){D.error(`${z.name} is not an image`);continue}de.push(z),fe.push(URL.createObjectURL(z))}de.length>0&&(r([...t,...de]),o([...n,...fe]),D.success(`Added ${de.length} image${de.length>1?"s":""}`))},className:"hidden"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-500 transition-colors",children:[s.jsx(vc,{className:"w-8 h-8 mx-auto text-gray-400 mb-2"}),s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Add More Photos"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.length,"/4 selected"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Add Music (optional)"}),s.jsxs("button",{onClick:()=>_(!0),className:"text-sm font-medium text-orange-600 hover:text-orange-700 flex items-center gap-1.5",children:[s.jsx(WE,{className:"w-5 h-5"}),M?"Change Music":"Add Music"]})]}),M&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("img",{src:(X=M.album.images[0])==null?void 0:X.url,alt:"album",className:"w-12 h-12 rounded object-cover"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:M.name}),s.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.artists[0].name})]}),s.jsx("button",{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white rounded-full p-2 transition-colors",children:oe?s.jsx(jm,{className:"w-4 h-4"}):s.jsx(Nm,{className:"w-4 h-4 ml-0.5"})}),s.jsx("button",{onClick:()=>$(null),className:"text-red-600",children:s.jsx(At,{className:"w-5 h-5"})}),s.jsx("audio",{ref:G,src:M.preview_url,onEnded:()=>q(!1),onPlay:()=>q(!0),onPause:()=>q(!1)})]})]}),s.jsxs("div",{className:"space-y-4 bg-white rounded-xl p-4 shadow-sm",children:[l==="post"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:d,onChange:J=>h(J.target.value),placeholder:"Enter a title for your post",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",maxLength:200}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d.length,"/200"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption"}),s.jsx(An,{value:f,onChange:J=>p(J.target.value),placeholder:"Write a caption...",className:"min-h-24 resize-none",maxLength:2200}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[f.length,"/2200"]})]}),l==="post"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link to Recipe (optional)"}),s.jsxs(mn,{value:m,onValueChange:b,children:[s.jsx(Yr,{children:s.jsx(pn,{placeholder:"Select a recipe from your collection"})}),s.jsx(Jr,{children:g.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No recipes yet. Add some recipes first!"}):g.map(J=>s.jsx(fr,{value:J.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[J.image_url&&s.jsx("img",{src:J.image_url,alt:J.title,className:"w-8 h-8 rounded object-cover"}),s.jsx("span",{children:J.title})]})},J.id))})]})]})]}),t.length>0&&s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(_m,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Ready to post"}),s.jsxs("p",{className:"text-xs text-orange-700 mt-1 truncate",children:[t.length," image",t.length>1?"s":""," selected"]}),"              "]})]})})]}),s.jsx("div",{className:"fixed left-0 right-0 px-4 pb-6 bg-gradient-to-t from-white via-white to-transparent z-[60] lg:z-10 lg:bottom-0",style:{bottom:"80px",paddingBottom:"max(1.5rem, env(safe-area-inset-bottom))"},children:s.jsx("div",{className:"max-w-lg mx-auto flex justify-center",children:s.jsx(te,{onClick:A,disabled:t.length===0||l==="post"&&!d.trim()||y,className:"px-12 sm:px-16 py-5 sm:py-6 text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 shadow-lg rounded-full",children:y?"Submitting...":"Submit"})})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-end md:items-center justify-center",children:s.jsxs("div",{className:"bg-white w-full md:max-w-lg md:rounded-2xl flex flex-col",style:{maxHeight:"85vh",paddingBottom:"env(safe-area-inset-bottom)"},children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Choose Music"}),s.jsx("button",{onClick:()=>_(!1),children:s.jsx(At,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"p-4 flex-shrink-0",children:s.jsx("input",{type:"text",value:k,onChange:J=>{P(J.target.value),W(J.target.value)},placeholder:"Search any song...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500",autoFocus:!0})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-4 space-y-2",children:[Q&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Searching..."}),C.map(J=>{var V;return s.jsxs("button",{onClick:()=>{$(J),_(!1),D.success("Music added!")},className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition text-left",children:[s.jsx("img",{src:((V=J.album.images[0])==null?void 0:V.url)||"/placeholder.png",alt:"album",className:"w-12 h-12 rounded flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:J.name}),s.jsx("p",{className:"text-xs text-gray-600 truncate",children:J.artists.map(ee=>ee.name).join(", ")})]}),s.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded flex-shrink-0",children:"30s Preview"})]},J.id)}),k&&C.length===0&&!Q&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tracks found"})]})]})})]})}function E6({isOpen:e,onClose:t,userId:r,type:n}){const[o,a]=u.useState([]),[i,l]=u.useState(!0);u.useEffect(()=>{if(!e)return;(async()=>{l(!0);try{if(n==="followers"){const{data:h}=await L.from("follows").select("follower_id, profiles:follower_id(id, username, avatar_url)").eq("following_id",r);h&&a(h.map(f=>f.profiles).filter(Boolean))}else{const{data:h}=await L.from("follows").select("following_id, profiles:following_id(id, username, avatar_url)").eq("follower_id",r);h&&a(h.map(f=>f.profiles).filter(Boolean))}}catch(h){console.error("Error loading users:",h)}finally{l(!1)}})()},[e,r,n]);const c=d=>{t(),window.location.href=`/profile/${d}`};return s.jsx(Ct,{open:e,onOpenChange:t,children:s.jsxs(bt,{className:"max-w-sm max-h-[70vh]",children:[s.jsx(Wt,{children:s.jsx($t,{children:n==="followers"?"Supporters":"Supporting"})}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(70vh-8rem)]",children:i?s.jsx("div",{className:"space-y-3 py-4",children:[1,2,3].map(d=>s.jsxs("div",{className:"flex items-center gap-3 p-3 animate-pulse",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200"}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})})]},d))}):o.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500",children:n==="followers"?"No supporters yet":"Not supporting anyone yet"}):s.jsx("div",{className:"space-y-1",children:o.map(d=>{var h;return s.jsxs("button",{onClick:()=>c(d.username),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold flex-shrink-0 overflow-hidden",children:d.avatar_url?s.jsx("img",{src:d.avatar_url,alt:d.username,className:"w-full h-full object-cover"}):((h=d.username[0])==null?void 0:h.toUpperCase())||s.jsx(Xo,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-medium text-gray-900 truncate",children:d.username})]},d.id)})})})]})})}const R6=()=>s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-32 overflow-x-hidden animate-pulse",children:[s.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-30",children:s.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})}),s.jsxs("div",{className:"max-w-lg mx-auto w-full",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200",children:[s.jsx("div",{className:"h-28 sm:h-32 bg-gray-200"}),s.jsxs("div",{className:"relative px-4 pb-3",children:[s.jsxs("div",{className:"flex items-start gap-3 -mt-10",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gray-300 border-4 border-white"}),s.jsxs("div",{className:"flex-1 pt-8 sm:pt-11 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mx-auto"})]})]}),s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx("div",{className:"h-10 bg-gray-200 rounded-full w-32"})})]}),s.jsx("div",{className:"px-4 py-3 sm:py-4 border-t border-gray-200",children:s.jsx("div",{className:"flex justify-center gap-8 sm:gap-10",children:[1,2,3].map(e=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-6 w-12 bg-gray-200 rounded mx-auto mb-1"}),s.jsx("div",{className:"h-3 w-16 bg-gray-200 rounded"})]},e))})})]}),s.jsx("div",{className:"border-b border-gray-200 bg-white py-3",children:s.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded mx-auto"})}),s.jsx("div",{className:"grid grid-cols-3 gap-0.5 sm:gap-1",children:[...Array(9)].map((e,t)=>s.jsx("div",{className:"aspect-square bg-gray-200"},t))})]})]}),Au=e=>e?e.includes("/functions/v1/image-proxy")||e.includes("supabase.co/storage/v1/object/public/")?e:e.includes("instagram.com")||e.includes("cdninstagram.com")||e.includes("fbcdn.net")?`https://vohvdarghgqskzqjclux.supabase.co/functions/v1/image-proxy?url=${encodeURIComponent(e)}`:e:null;console.log("[Profile] VITE_SUPABASE_URL:","https://vohvdarghgqskzqjclux.supabase.co");const P6=e=>{const t=e.trim();return t.length===0?"Username required":t.length>10?"Max 10 characters":t.includes(" ")?"No spaces allowed":/^[a-zA-Z0-9._]+$/.test(t)?/^[._]/.test(t)||/[._]$/.test(t)?"Cannot start or end with _ or .":null:"Only letters, numbers, _ . allowed"},t0=(e,t,r,n=.85)=>new Promise(o=>{const a=new Image,i=document.createElement("canvas"),l=i.getContext("2d");a.onload=()=>{let c=a.width,d=a.height;c>d?c>t&&(d=Math.round(d*t/c),c=t):d>r&&(c=Math.round(c*r/d),d=r),i.width=c,i.height=d,l.drawImage(a,0,0,c,d),i.toBlob(h=>{if(!h)return o(e);const f=new File([h],e.name,{type:e.type||"image/jpeg",lastModified:Date.now()});o(f)},e.type||"image/jpeg",n)},a.onerror=()=>o(e),a.src=URL.createObjectURL(e)});function r0({username:e}){var ie;const[t,r]=u.useState([]),[n,o]=u.useState(null),[a,i]=u.useState(!0),[l,c]=u.useState(!1),[d,h]=u.useState(null),[f,p]=u.useState(null),[m,b]=u.useState(!1),[g,w]=u.useState(!1),[y,x]=u.useState(""),[v,j]=u.useState(""),[N,_]=u.useState(""),[k,P]=u.useState(null),[C,R]=u.useState(!1),[M,$]=u.useState(!1),[Q,H]=u.useState(null),[oe,q]=u.useState(!1),[G,I]=u.useState("followers"),[S,T]=u.useState(null),[Z,F]=u.useState(!1),[W,A]=u.useState(null);u.useEffect(()=>{let O=!0;return(async()=>{var ge;if(O)try{const{data:{user:U}}=await L.auth.getUser();if(!U){D.error("Please log in"),window.history.pushState({},"","/");return}h(U.id);let re=null,Y=null;if(e){const{data:Pe,error:B}=await L.from("profiles").select("id, username, avatar_url, banner_url, bio, link").ilike("username",e).single();if(!O)return;if(B||!Pe){O&&D.error("User not found"),O&&window.history.pushState({},"","/discover"),O&&i(!1);return}re=Pe,Y=Pe.id}else{const{data:Pe}=await L.from("profiles").select("id, username, avatar_url, banner_url, bio, link").eq("id",U.id).single();if(Pe)re=Pe;else{const B=((ge=U.email)==null?void 0:ge.split("@")[0])||"user";await L.from("profiles").insert({id:U.id,username:B}),re={id:U.id,username:B,avatar_url:null}}Y=U.id}if(!O)return;p(Y),b(U.id===Y);const[Ne,K,ce,we,Le]=await Promise.all([L.from("follows").select("*",{count:"exact",head:!0}).eq("following_id",Y),L.from("follows").select("*",{count:"exact",head:!0}).eq("follower_id",Y),U.id!==Y?L.from("follows").select("id").eq("follower_id",U.id).eq("following_id",Y).maybeSingle():Promise.resolve({data:null}),L.from("posts").select("id, user_id, title, image_url, video_url, caption, recipe_url, recipe_id, created_at").eq("user_id",Y).order("created_at",{ascending:!1}),mi()]);if(!O)return;$(!!ce.data),r(we.data||[]),R(Le),o({...re,followers_count:Ne.count||0,following_count:K.count||0}),!e&&(re!=null&&re.username)&&window.history.replaceState({},"",`/profile/${re.username}`)}catch{O&&D.error("Failed to load profile")}finally{O&&i(!1)}})(),()=>{O=!1}},[e]),u.useEffect(()=>{const he=new URLSearchParams(window.location.search).get("post");he&&(P(he),window.history.replaceState({},"",window.location.pathname))},[]);const X=async O=>{var ge;const he=(ge=O.target.files)==null?void 0:ge[0];if(!(!he||!d)){if(!he.type.startsWith("image/")){D.error("Please select an image");return}c(!0),D.loading("Resizing & uploading avatar...",{duration:0});try{const U=await t0(he,1080,1080,.9),re=U.name.split(".").pop()||"jpg",Y=`${d}/avatar.${re}`,{error:Ne}=await L.storage.from("avatars").upload(Y,U,{upsert:!0});if(Ne)throw Ne;const{data:{publicUrl:K}}=L.storage.from("avatars").getPublicUrl(Y),{error:ce}=await L.from("profiles").update({avatar_url:K+"?t="+Date.now()}).eq("id",d);if(ce)throw ce;o(we=>we?{...we,avatar_url:K+"?t="+Date.now()}:null),D.dismiss(),D.success("Avatar updated instantly!")}catch(U){D.dismiss(),D.error("Upload failed: "+U.message)}finally{c(!1)}}},J=async O=>{var ge;const he=(ge=O.target.files)==null?void 0:ge[0];if(!(!he||!d)){if(!he.type.startsWith("image/")){D.error("Please select an image");return}c(!0),D.loading("Resizing & uploading banner...",{duration:0});try{const U=await t0(he,1920,600,.9),re=U.name.split(".").pop()||"jpg",Y=`${d}/banner.${re}`,{error:Ne}=await L.storage.from("banners").upload(Y,U,{upsert:!0});if(Ne)throw Ne;const{data:{publicUrl:K}}=L.storage.from("banners").getPublicUrl(Y),{error:ce}=await L.from("profiles").update({banner_url:K+"?t="+Date.now()}).eq("id",d);if(ce)throw ce;o(we=>we?{...we,banner_url:K+"?t="+Date.now()}:null),D.dismiss(),D.success("Banner updated instantly!")}catch(U){D.dismiss(),D.error("Upload failed: "+U.message)}finally{c(!1)}}},V=async()=>{d&&(await L.from("profiles").update({avatar_url:null}).eq("id",d),o(O=>O?{...O,avatar_url:null}:null),D.success("Avatar removed"))},ee=async()=>{d&&(await L.from("profiles").update({banner_url:null}).eq("id",d),o(O=>O?{...O,banner_url:null}:null),D.success("Banner removed"))},pe=async()=>{if(!d)return;const O=P6(y);if(O){H(O),D.error(O);return}H(null);const he=v.trim().split(`
`);if(he.length>3){D.error("Maximum 3 lines allowed");return}if(he.some(re=>re.length>40)){D.error("Maximum 40 characters per line");return}const ge={},U=y.trim();if(U!==(n==null?void 0:n.username)&&(ge.username=U),v.trim()!==((n==null?void 0:n.bio)||"").trim()&&(ge.bio=v.trim()||null),N.trim()!==((n==null?void 0:n.link)||"").trim()&&(ge.link=N.trim()||null),Object.keys(ge).length>0){const{error:re}=await L.from("profiles").update(ge).eq("id",d);if(re){re.message.includes("profiles_username_key")?D.error("Username already taken"):D.error("Failed to update profile");return}o(Y=>Y?{...Y,...ge}:null),D.success("Profile updated!"),ge.username&&window.history.replaceState({},"",`/profile/${ge.username}`)}w(!1)},de=async O=>{var ge;const he=(ge=O.target.files)==null?void 0:ge[0];if(!(!he||!S)){F(!0);try{const U=he.name.split(".").pop(),re=`${Math.random()}.${U}`,Y=`${d}/${re}`,{error:Ne}=await L.storage.from("posts").upload(Y,he);if(Ne)throw Ne;const{data:{publicUrl:K}}=L.storage.from("posts").getPublicUrl(Y);T(ce=>ce?{...ce,photoUrl:K}:null),D.success("Photo uploaded!")}catch(U){console.error("Upload error:",U),D.error("Failed to upload photo")}finally{F(!1)}}},fe=async()=>{if(S)try{const{error:O}=await L.from("posts").update({caption:S.caption.trim()||null,recipe_url:S.recipeUrl.trim()||null,image_url:S.photoUrl.trim()||null}).eq("id",S.id);if(O)throw O;r(he=>he.map(ge=>ge.id===S.id?{...ge,caption:S.caption.trim()||null,image_url:S.photoUrl.trim()||null,recipe_url:S.recipeUrl.trim()||null}:ge)),D.success("Post updated!"),T(null)}catch(O){console.error("Edit error:",O),D.error("Failed to update post")}},z=async()=>{if(W)try{const{error:O}=await L.from("posts").delete().eq("id",W);if(O)throw O;r(he=>he.filter(ge=>ge.id!==W)),D.success("Post deleted!"),A(null)}catch(O){console.error("Delete error:",O),D.error("Failed to delete post")}};return a?s.jsx(R6,{}):n?s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-32 overflow-x-hidden",style:{paddingBottom:"max(8rem, env(safe-area-inset-bottom))"},children:[s.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 z-30",style:{paddingTop:"env(safe-area-inset-top)"},children:s.jsxs("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yo,{className:"w-6 h-6"})}),s.jsxs("h1",{className:"text-lg font-semibold",children:["@",n.username]})]})}),s.jsxs("div",{className:"max-w-lg mx-auto w-full",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200",children:[s.jsxs("div",{className:"relative h-28 sm:h-32",children:[n.banner_url?s.jsx("img",{src:n.banner_url,alt:"Banner",className:"w-full h-full object-cover",loading:"lazy"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-orange-100 to-amber-100"}),m&&s.jsxs("label",{className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:J,disabled:l,className:"hidden"}),s.jsx(Ms,{className:"w-4 h-4 text-gray-600"})]})]}),s.jsxs("div",{className:"relative px-4 pb-3",children:[s.jsxs("div",{className:"flex items-start gap-3 -mt-10",children:[s.jsxs("div",{className:"flex-shrink-0",children:[s.jsxs("div",{className:"relative z-10 w-16 h-16 sm:w-20 sm:h-20",children:[n.avatar_url?s.jsx("img",{src:n.avatar_url,alt:n.username,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover border-4 border-white shadow-lg",loading:"lazy"}):s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white text-xl sm:text-2xl font-bold border-4 border-white shadow-lg",children:n.username[0].toUpperCase()}),m&&s.jsxs("label",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-1.5 shadow-md cursor-pointer hover:bg-gray-50 z-20",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:X,disabled:l,className:"hidden"}),s.jsx(Ms,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-700"})]})]}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:n.username}),C&&s.jsx(Ka,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-yellow-500"})]})})]}),s.jsxs("div",{className:"flex-1 pt-8 sm:pt-11 text-center min-w-0 max-w-[60%]",children:[n.bio?s.jsx("div",{className:"space-y-1 sm:space-y-2 mt-2",children:n.bio.split(`
`).slice(0,3).map((O,he)=>s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-800 italic tracking-wide leading-snug",style:{wordBreak:"break-word"},children:O.slice(0,40)},he))}):s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 italic font-light mt-3",children:m?"Tap Edit Profile to add a bio":"No bio yet"}),n.link&&s.jsx("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 mt-2 block underline break-all",children:n.link})]})]}),m&&s.jsx("div",{className:"mt-4 flex justify-center px-2",children:s.jsxs("button",{onClick:()=>{x(n.username||""),j(n.bio||""),_(n.link||""),w(!0)},className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-orange-600 text-white text-sm sm:text-base font-medium rounded-full hover:bg-orange-700 shadow-md",children:[s.jsx(qE,{className:"w-4 h-4"}),"Edit Profile"]})})]}),!m&&s.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{onClick:async()=>{if(!(!d||!f))try{M?(await L.from("follows").delete().eq("follower_id",d).eq("following_id",f),$(!1),o(O=>O?{...O,followers_count:(O.followers_count||0)-1}:null),D.success("Unsupported")):(await L.from("follows").insert({follower_id:d,following_id:f}),$(!0),o(O=>O?{...O,followers_count:(O.followers_count||0)+1}:null),D.success("Supporting!"))}catch{D.error("Failed to update")}},className:`flex-1 h-10 text-sm ${M?"bg-gray-200 text-gray-900 hover:bg-gray-300":"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600"}`,children:M?"Supporting":"Support"}),s.jsx(te,{onClick:()=>{n!=null&&n.username&&(window.location.href=`/messages?user=${n.username}`)},className:"flex-1 h-10 text-sm bg-white border-2 border-gray-300 text-gray-900 hover:bg-gray-50",children:"Message"})]})}),s.jsx("div",{className:"px-4 py-3 sm:py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-center gap-8 sm:gap-10",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold",children:t.length}),s.jsx("div",{className:"text-xs text-gray-500",children:"posts"})]}),s.jsxs("button",{onClick:()=>{I("followers"),q(!0)},className:"text-center hover:bg-gray-50 px-3 py-2 rounded-lg transition-colors",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold",children:n.followers_count||0}),s.jsx("div",{className:"text-xs text-gray-500",children:"supporters"})]}),s.jsxs("button",{onClick:()=>{I("following"),q(!0)},className:"text-center hover:bg-gray-50 px-3 py-2 rounded-lg transition-colors",children:[s.jsx("div",{className:"text-lg sm:text-xl font-bold",children:n.following_count||0}),s.jsx("div",{className:"text-xs text-gray-500",children:"supporting"})]})]})})]}),s.jsx("div",{className:"border-b border-gray-200 bg-white",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 py-3",children:[s.jsx(ME,{className:"w-5 h-5 text-gray-900"}),s.jsx("span",{className:"text-sm font-semibold uppercase tracking-wider",children:"Posts"})]})}),t.length===0?s.jsxs("div",{className:"text-center py-12 sm:py-16 px-4",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl shadow-lg mb-4",children:s.jsx(_m,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),s.jsx("p",{className:"text-gray-900 font-semibold text-base sm:text-lg mb-2",children:"No posts yet"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"Share your first recipe!"})]}):s.jsx("div",{className:"grid grid-cols-3 gap-0.5 sm:gap-1",children:t.map(O=>{console.log("[Profile Grid] Post ID:",O.id,"Raw image_url:",O.image_url);const he=Au(O.image_url);let ge=he;if(he)try{const U=JSON.parse(he);Array.isArray(U)&&U.length>0&&(ge=Au(U[0]))}catch{if(he.includes(",")){const U=he.split(",").map(re=>re.trim());ge=Au(U[0])}}return s.jsxs("div",{className:"aspect-square bg-gray-100 overflow-hidden relative group",children:[s.jsxs("div",{onClick:()=>P(O.id),className:"cursor-pointer hover:opacity-90 w-full h-full",children:[ge?s.jsx("img",{src:ge,alt:O.title||"Post",className:"w-full h-full object-cover",loading:"lazy",onError:U=>{console.error("[Profile] Image failed to load:",ge);const re=U.target;re.style.display="none";const Y=re.parentElement;Y&&(Y.innerHTML='<div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs">No image</div>')}}):O.video_url?s.jsx("video",{src:O.video_url,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs",children:"No media"}),O.title&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:s.jsx("p",{className:"text-white text-xs font-semibold truncate",children:O.title})})]}),(m||C)&&s.jsx("div",{className:"absolute top-2 right-2 z-10",onClick:U=>U.stopPropagation(),children:s.jsxs(sj,{children:[s.jsx(oj,{asChild:!0,children:s.jsx("button",{className:"p-1.5 bg-black/50 hover:bg-black/70 rounded-full backdrop-blur-sm",children:s.jsx(Cw,{className:"w-4 h-4 text-white"})})}),s.jsxs(ap,{align:"end",children:[s.jsxs(wi,{onClick:()=>{T({id:O.id,title:O.title||"",caption:O.caption||"",recipeUrl:O.recipe_url||"",photoUrl:O.image_url||O.video_url||""})},className:"cursor-pointer",children:[s.jsx(Fh,{className:"w-4 h-4 mr-2"}),"Edit post"]}),s.jsxs(wi,{onClick:()=>A(O.id),className:"cursor-pointer text-red-600",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"}),"Delete post"]})]})]})})]},O.id)})})]}),s.jsx(Ct,{open:g,onOpenChange:w,children:s.jsxs(bt,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsxs(Wt,{children:[s.jsx($t,{children:"Edit Profile"}),s.jsx(Gr,{children:"Max 40 characters per line  Max 3 lines"})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-5 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"username",children:"Username"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ct,{id:"username",value:y,onChange:O=>{x(O.target.value),H(null)},placeholder:"max 20 chars, no spaces",maxLength:20,className:Q?"border-red-500":""}),Q&&s.jsx("p",{className:"text-xs text-red-600 font-medium",children:Q}),s.jsxs("p",{className:"text-xs text-gray-500",children:[y.length,"/20  letters, numbers, _ ."]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(He,{htmlFor:"bio",children:"Bio"}),s.jsxs("span",{className:`text-xs font-medium ${v.length>120||v.split(`
`).length>3?"text-red-600":"text-gray-500"}`,children:[v.length,"/120  ",v.split(`
`).length,"/3 lines"]})]}),s.jsx(An,{id:"bio",value:v,onChange:O=>{let he=O.target.value;const ge=he.split(`
`);ge.length>3&&(he=ge.slice(0,3).join(`
`)),he=he.split(`
`).map(U=>U.slice(0,40)).join(`
`),j(he)},placeholder:"i love peegi love peegi love peegi\\ni love peegi love peegi love peegi\\ni love peegi love peegi snguyen7",className:"min-h-[110px] resize-none text-center font-medium",rows:3}),s.jsx("p",{className:"text-xs text-gray-500 text-center -mt-2",children:"Press Enter for new line"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(He,{htmlFor:"link",children:"Link"}),s.jsx(ct,{id:"link",value:N,onChange:O=>_(O.target.value),placeholder:"https://example.com",type:"url"})]}),s.jsxs("div",{className:"flex gap-2",children:[n.avatar_url&&s.jsxs(te,{variant:"outline",onClick:V,disabled:l,className:"flex-1 text-red-600",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"})," Remove Avatar"]}),n.banner_url&&s.jsxs(te,{variant:"outline",onClick:ee,disabled:l,className:"flex-1 text-red-600",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"})," Remove Banner"]})]})]}),s.jsxs(ds,{children:[s.jsx(te,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),s.jsx(te,{onClick:pe,children:"Save Changes"})]})]})}),k&&s.jsx(Ct,{open:!!k,onOpenChange:()=>P(null),children:s.jsxs(bt,{className:"max-w-lg p-0 overflow-hidden bg-black relative max-h-[90vh]",children:[s.jsx(fd,{postId:k,isOpen:!0,onClose:()=>P(null)}),s.jsxs("div",{className:"absolute inset-x-0 top-0 z-[100] flex items-center justify-between px-4 pt-4 pb-6 pointer-events-none",children:[s.jsx("button",{onClick:()=>P(null),className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-black/70 rounded-full transition-all shadow-lg",children:s.jsx(Yo,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(m||C)&&d===((ie=t.find(O=>O.id===k))==null?void 0:ie.user_id)&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{const O=t.find(he=>he.id===k);O&&T({id:O.id,title:O.title||"",caption:O.caption||"",recipeUrl:O.recipe_url||"",photoUrl:O.image_url||O.video_url||""}),P(null)},className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-orange-600/70 rounded-full transition-all shadow-lg",title:"Edit post",children:s.jsx(Fh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("button",{onClick:()=>{A(k),P(null)},className:"pointer-events-auto p-2 sm:p-3 bg-black/50 backdrop-blur-md hover:bg-red-600/70 rounded-full transition-all shadow-lg",title:"Delete post",children:s.jsx(nr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})]})]})]})}),s.jsx(Rc,{open:!!S,onOpenChange:O=>!O&&T(null),children:s.jsxs(bi,{className:"max-h-[85vh] overflow-y-auto",children:[s.jsxs(ji,{children:[s.jsx(_i,{children:"Edit post"}),s.jsx(Si,{children:"Update your caption and recipe link."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Caption"}),s.jsx(An,{value:(S==null?void 0:S.caption)||"",onChange:O=>T(he=>he?{...he,caption:O.target.value}:null),placeholder:"Write a caption...",className:"resize-none",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Recipe URL"}),s.jsx("input",{type:"url",value:(S==null?void 0:S.recipeUrl)||"",onChange:O=>T(he=>he?{...he,recipeUrl:O.target.value}:null),placeholder:"https://...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Change Photo/Video (Upload from device)"}),s.jsx("input",{type:"file",accept:"image/*,video/*",onChange:de,disabled:Z,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),Z&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Uploading..."}),(S==null?void 0:S.photoUrl)&&s.jsx("img",{src:S.photoUrl,alt:"Preview",className:"mt-2 w-32 h-32 object-cover rounded-lg",loading:"lazy"})]})]}),s.jsxs(Ni,{children:[s.jsx(Ci,{children:"Cancel"}),s.jsx(ki,{onClick:fe,className:"bg-orange-600 hover:bg-orange-700",children:"Save changes"})]})]})}),s.jsx(Rc,{open:!!W,onOpenChange:O=>!O&&A(null),children:s.jsxs(bi,{children:[s.jsxs(ji,{children:[s.jsx(_i,{children:"Delete post"}),s.jsx(Si,{children:"Are you sure you want to delete this post? This action cannot be undone."})]}),s.jsxs(Ni,{children:[s.jsx(Ci,{children:"Cancel"}),s.jsx(ki,{onClick:z,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),s.jsx(E6,{isOpen:oe,onClose:()=>q(!1),userId:f||"",type:G})]}):s.jsx("div",{className:"text-center py-20 text-gray-500",children:"Profile not found"})}function T6(){const[e,t]=u.useState(!1),[r,n]=u.useState(null),[o,a]=u.useState(null),{user:i}=td(),l=async()=>{if(i!=null&&i.email){t(!0),a(null),n(null);try{const{error:c}=await L.auth.resend({type:"signup",email:i.email});if(c)throw c;n("Verification email sent! Check your inbox.")}catch(c){a(c.message||"Failed to resend verification email")}finally{t(!1)}}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-amber-50 flex items-center justify-center px-4 overflow-hidden",style:{paddingTop:"max(1rem, env(safe-area-inset-top))",paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-red-200/30 to-transparent rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-orange-200/30 to-transparent rounded-full blur-3xl"}),s.jsx("div",{className:"relative z-10 w-full max-w-md",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 border border-red-100",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl shadow-lg mb-4",children:s.jsx(wc,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Check your email and click the link to verify."})]}),s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(kw,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-orange-800 min-w-0",children:[s.jsx("p",{className:"font-medium mb-1",children:"Email sent to:"}),s.jsx("p",{className:"font-mono text-xs sm:text-sm text-orange-900 break-all",children:i==null?void 0:i.email})]})]})}),s.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[s.jsx(Dl,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{children:"Check your inbox and spam folder"})]}),s.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[s.jsx(Dl,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{children:"Click the verification link in the email"})]}),s.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-700",children:[s.jsx(Dl,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{children:"Return to this page after verifying"})]})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm mb-4",children:o}),r&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 sm:px-4 py-2 sm:py-3 rounded-lg text-xs sm:text-sm mb-4",children:r}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(te,{onClick:l,disabled:e,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-semibold h-11 sm:h-12 text-sm sm:text-base shadow-lg",children:e?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(zh,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(zh,{className:"w-4 h-4"}),"Resend Verification Email"]})}),s.jsx(te,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full border-orange-300 text-orange-700 hover:bg-orange-50 h-11 sm:h-12 text-sm sm:text-base",children:"I've Verified - Refresh Page"})]}),s.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:s.jsx("button",{onClick:async()=>{await L.auth.signOut(),window.location.reload()},className:"text-xs sm:text-sm text-gray-600 hover:text-gray-700",children:"Sign out"})})]})})]})}function A6({recipientUserId:e,recipientUsername:t,onBack:r}){const[n,o]=u.useState(null),[a,i]=u.useState([]),[l,c]=u.useState(null),[d,h]=u.useState([]),[f,p]=u.useState(""),[m,b]=u.useState(!0),g=u.useRef(null);u.useEffect(()=>{(async()=>{const{data:R}=await L.auth.getUser();R.user&&(o(R.user.id),await w(R.user.id),e&&t?await x(e,t,R.user.id):await y(R.user.id)),b(!1)})()},[e]);const w=async C=>{try{await L.from("notifications").update({read:!0}).eq("user_id",C).eq("type","message").eq("read",!1)}catch(R){console.error("Error marking notifications as read:",R)}};u.useEffect(()=>{if(!l||!n)return;const C=L.channel(`messages:${l.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages",filter:`conversation_id=eq.${l.id}`},async R=>{const M=R.new;h($=>$.find(H=>H.id===M.id)?$:[...$,M]),M.sender_id!==n&&await L.from("direct_messages").update({read:!0}).eq("id",M.id)}).subscribe();return()=>{L.removeChannel(C)}},[l,n]),u.useEffect(()=>{l&&(v(l.id),j(l.id))},[l]),u.useEffect(()=>{var C;(C=g.current)==null||C.scrollIntoView({behavior:"smooth"})},[d]);const y=async C=>{const{data:R,error:M}=await L.from("conversations").select("*").or(`user1_id.eq.${C},user2_id.eq.${C}`).order("last_message_at",{ascending:!1});if(M){console.error("Error loading conversations:",M);return}const $=await Promise.all((R||[]).map(async Q=>{const H=Q.user1_id===C?Q.user2_id:Q.user1_id,{data:oe}=await L.from("profiles").select("id, username, avatar_url").eq("id",H).maybeSingle(),{data:q}=await L.from("direct_messages").select("content, created_at").eq("conversation_id",Q.id).order("created_at",{ascending:!1}).limit(1).maybeSingle(),{count:G}=await L.from("direct_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",Q.id).eq("read",!1).neq("sender_id",C);return{...Q,other_user:oe||{id:H,username:"Unknown",avatar_url:null},last_message:q,unread_count:G||0}}));i($)},x=async(C,R,M)=>{const $=M||n;if(!$)return;const[Q,H]=$<C?[$,C]:[C,$];let{data:oe}=await L.from("conversations").select("*").eq("user1_id",Q).eq("user2_id",H).maybeSingle();if(!oe){const{data:G,error:I}=await L.from("conversations").insert({user1_id:Q,user2_id:H}).select().single();if(I){console.error("Error creating conversation:",I),D.error("Failed to start conversation");return}oe=G}const{data:q}=await L.from("profiles").select("id, username, avatar_url").eq("id",C).maybeSingle();c({...oe,other_user:q||{id:C,username:R,avatar_url:null},unread_count:0})},v=async C=>{const{data:R,error:M}=await L.from("direct_messages").select("*").eq("conversation_id",C).order("created_at",{ascending:!0});if(M){console.error("Error loading messages:",M);return}h(R||[])},j=async C=>{n&&await L.from("direct_messages").update({read:!0}).eq("conversation_id",C).neq("sender_id",n).eq("read",!1)},N=async()=>{if(!f.trim()||!l||!n)return;const C=f.trim();p("");const{error:R,data:M}=await L.from("direct_messages").insert({conversation_id:l.id,sender_id:n,content:C}).select();if(R){console.error("Error sending message:",R),D.error("Failed to send message"),p(C);return}M&&M[0]&&h(Q=>[...Q,M[0]]),await L.from("conversations").update({last_message_at:new Date().toISOString()}).eq("id",l.id);const $=l.user1_id===n?l.user2_id:l.user1_id;$!==n&&await L.from("notifications").insert({user_id:$,actor_id:n,type:"message",conversation_id:l.id})},_=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),N())},k=C=>{const R=/(https?:\/\/[^\s]+)/g;return C.split(R).map(($,Q)=>$.match(R)?s.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80",onClick:H=>H.stopPropagation(),children:$},Q):s.jsx("span",{children:$},Q))},P=async C=>{if(!n)return;h(M=>M.filter($=>$.id!==C));const{error:R}=await L.from("direct_messages").delete().eq("id",C).eq("sender_id",n);R?(console.error("Failed to delete message:",R),D.error("Could not delete message"),l&&v(l.id)):D.success("Message deleted")};return m?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-20",children:s.jsx("div",{className:"text-gray-600",children:"Loading messages..."})}):l?s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>{c(null),h([]),r&&e?r():n&&y(n)},className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yo,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:l.other_user.avatar_url?s.jsx("img",{src:l.other_user.avatar_url,alt:l.other_user.username,className:"w-full h-full object-cover"}):l.other_user.username.charAt(0).toUpperCase()}),s.jsx("span",{className:"font-semibold",children:l.other_user.username})]})]})}),s.jsx("div",{className:"pt-16 flex-1 overflow-y-auto px-4 pb-[88px]",children:s.jsxs("div",{className:"space-y-4 py-4",children:[d.map(C=>s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"relative group max-w-[75%]",onTouchStart:R=>{if(C.sender_id!==n)return;const M=setTimeout(()=>{var H;(H=R.target.closest(".group"))==null||H.classList.add("show-delete")},400),$=()=>{clearTimeout(M),document.removeEventListener("touchend",$)};document.addEventListener("touchend",$)},children:[s.jsxs("div",{className:`rounded-2xl px-4 py-2.5 text-sm leading-tight break-words shadow-sm ${C.sender_id===n?"bg-gray-200 text-gray-900":"bg-orange-500 text-white"}`,children:[s.jsx("p",{className:"whitespace-pre-wrap",children:k(C.content)}),s.jsx("span",{className:"text-xs opacity-70 mt-1 block text-right",children:new Date(C.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),C.sender_id===n&&s.jsx("button",{onClick:R=>{R.stopPropagation(),P(C.id)},className:`
                absolute -top-3 -right-3 
                w-9 h-9 rounded-full 
                bg-red-500 text-white 
                flex items-center justify-center 
                shadow-lg text-lg
                opacity-0 
                group-hover:opacity-100 
                group-[.show-delete]:opacity-100 
                transition-all duration-200 
                hover:bg-red-600 active:scale-95
                z-10
              `,children:""})]})},C.id)),s.jsx("div",{ref:g})]})}),s.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 w-80 bg-white border-t border-gray-200 px-4 py-3 z-50",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:f,onChange:C=>p(C.target.value),onKeyPress:_,placeholder:"Type a message...",className:"w-[80%] px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500"}),s.jsx(te,{onClick:N,disabled:!f.trim(),className:"rounded-full bg-orange-500 hover:bg-orange-600 text-white px-6",children:s.jsx(Mo,{className:"w-5 h-5"})})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[r&&s.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yo,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-xl font-bold",children:r?"Social Feed":"Messages"})]})}),s.jsx("div",{className:"pt-16 pb-20 px-4",children:a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"No conversations yet"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Start a conversation from a user's profile"})]}):s.jsx("div",{className:"space-y-2",children:a.map(C=>s.jsxs("button",{onClick:()=>c(C),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-semibold overflow-hidden",children:C.other_user.avatar_url?s.jsx("img",{src:C.other_user.avatar_url,alt:C.other_user.username,className:"w-full h-full object-cover"}):C.other_user.username.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold truncate",children:C.other_user.username}),C.last_message&&s.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:new Date(C.last_message.created_at).toLocaleDateString()})]}),C.last_message&&s.jsx("p",{className:"text-sm text-gray-600 truncate",children:C.last_message.content}),C.unread_count>0&&s.jsx("span",{className:"inline-block mt-1 bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full",children:C.unread_count})]})]},C.id))})})]})}var n0=["light","dark"],I6="(prefers-color-scheme: dark)",O6=u.createContext(void 0),M6={setTheme:e=>{},themes:[]},D6=()=>{var e;return(e=u.useContext(O6))!=null?e:M6};u.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:o,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let d=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=o?n0.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(b,g=!1,w=!0)=>{let y=i?i[b]:b,x=g?b+"|| ''":`'${y}'`,v="";return o&&w&&!g&&n0.includes(b)&&(v+=`d.style.colorScheme = '${b}';`),r==="class"?g||y?v+=`c.add(${x})`:v+="null":y&&(v+=`d[s](n,${x})`),v},m=e?`!function(){${h}${p(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${I6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}${d?"":"else{"+p(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${p(i?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${f}}catch(t){}}();`;return u.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});const $6=({...e})=>{const{theme:t="system"}=D6();return s.jsx(v4,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},L6=nd("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),uf=u.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Te(L6({variant:t}),e),...r}));uf.displayName="Alert";const U6=u.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Te("mb-1 font-medium leading-none tracking-tight",e),...t}));U6.displayName="AlertTitle";const hf=u.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Te("text-sm [&_p]:leading-relaxed",e),...t}));hf.displayName="AlertDescription";function F6(){const[e,t]=u.useState(!0),[r,n]=u.useState(!1),[o,a]=u.useState(""),[i,l]=u.useState(""),[c,d]=u.useState({email:"",password:"",confirmPassword:"",name:""}),h=()=>{const w=window.location.origin;return console.log(" Redirect URL will be:",w),w},f=async()=>{if(a(""),l(""),!c.email||!c.password){a("Please fill in all required fields");return}if(!e){if(!c.name){a("Please enter your name");return}if(c.password!==c.confirmPassword){a("Passwords do not match");return}if(c.password.length<6){a("Password must be at least 6 characters");return}}n(!0);try{if(e){console.log(" Attempting email/password sign in...");const{error:w}=await L.auth.signInWithPassword({email:c.email,password:c.password});if(w)throw w;console.log(" Sign in successful")}else{console.log(" Attempting sign up...");const{error:w}=await L.auth.signUp({email:c.email,password:c.password,options:{data:{full_name:c.name},emailRedirectTo:h()}});if(w)throw w;console.log(" Sign up successful - check email"),l("Check your email for the verification link!")}}catch(w){console.error(" Auth error:",w),a(w.message||"An error occurred")}finally{n(!1)}},p=async()=>{console.log(" Google login initiated"),n(!0),a("");try{const w=h();console.log(" Calling signInWithOAuth with redirectTo:",w);const{data:y,error:x}=await L.auth.signInWithOAuth({provider:"google",options:{redirectTo:w,queryParams:{access_type:"offline",prompt:"consent"}}});if(console.log(" OAuth response:",{data:y,error:x}),x)throw x;console.log(" OAuth called but no redirect happened")}catch(w){console.error(" Google OAuth error:",w),a(w.message||"Failed to sign in with Google"),n(!1)}},m=(w,y)=>{d(x=>({...x,[w]:y})),a("")},b=()=>{t(!e),a(""),l(""),d({email:"",password:"",confirmPassword:"",name:""})},g=w=>{w.key==="Enter"&&f()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-pink-50 flex items-center justify-center p-3 sm:p-4",style:{paddingTop:"max(0.75rem, env(safe-area-inset-top))",paddingBottom:"max(0.75rem, env(safe-area-inset-bottom))"},children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-4 sm:mb-6 md:mb-8",children:[s.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full bg-gradient-to-br from-orange-500 to-red-600 shadow-xl p-1.5 sm:p-2 overflow-hidden",children:s.jsx("img",{src:"/Woodenspoon.png",alt:"Meal Scrape",className:"w-full h-full object-contain drop-shadow-md"})})}),s.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900 mb-2 sm:mb-3 px-2",children:"Meal Scrape"}),s.jsx("p",{className:"text-sm sm:text-base md:text-lg text-slate-600 mb-1.5 max-w-sm mx-auto px-4",children:"The Only Recipe Book You'll Ever Need"}),s.jsx("p",{className:"text-xs sm:text-sm text-slate-500 px-4",children:"Meal Calendar  Shopping List  Social Community"})]}),s.jsxs(Xe,{className:"border-slate-200 shadow-xl overflow-hidden",children:[s.jsxs(Nt,{className:"bg-gradient-to-br from-orange-50 to-red-50 border-b border-orange-100 p-3 sm:p-4 md:p-6",children:[s.jsx(_t,{className:"text-lg sm:text-xl md:text-2xl text-slate-900 text-center",children:e?"Welcome Back":"Create Account"}),s.jsx(Rt,{className:"text-xs sm:text-sm text-slate-600 text-center",children:e?"Sign in to access your recipes":"Join to start saving and organizing recipes"})]}),s.jsx(Ze,{className:"p-3 sm:p-4 md:p-6",children:s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o&&s.jsxs(uf,{variant:"destructive",className:"bg-red-50 border-red-200 py-2 sm:py-3",children:[s.jsx(kw,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx(hf,{className:"text-xs sm:text-sm",children:o})]}),i&&s.jsx(uf,{className:"bg-green-50 border-green-200 py-2 sm:py-3",children:s.jsx(hf,{className:"text-xs sm:text-sm text-green-700",children:i})}),!e&&s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(He,{htmlFor:"name",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(Iw,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),s.jsx(ct,{id:"name",type:"text",placeholder:"John Doe",value:c.name,onChange:w=>m("name",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r})]})]}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(He,{htmlFor:"email",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(wc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),s.jsx(ct,{id:"email",type:"email",placeholder:"you@example.com",value:c.email,onChange:w=>m("email",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:"email"})]})]}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(He,{htmlFor:"password",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(yc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),s.jsx(ct,{id:"password",type:"password",placeholder:e?"Enter password":"Min. 6 characters",value:c.password,onChange:w=>m("password",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:e?"current-password":"new-password"})]})]}),!e&&s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx(He,{htmlFor:"confirmPassword",className:"text-xs sm:text-sm font-medium text-slate-700",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(yc,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 text-slate-400"}),s.jsx(ct,{id:"confirmPassword",type:"password",placeholder:"Re-enter password",value:c.confirmPassword,onChange:w=>m("confirmPassword",w.target.value),onKeyPress:g,className:"pl-8 sm:pl-10 md:pl-11 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base",disabled:r,autoComplete:"new-password"})]})]}),s.jsx(te,{onClick:f,disabled:r,className:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base font-semibold shadow-lg",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 mr-1.5 sm:mr-2 animate-spin"}),e?"Signing in...":"Creating account..."]}):s.jsxs(s.Fragment,{children:[e?"Sign In":"Create Account",s.jsx(Sw,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 ml-1.5 sm:ml-2"})]})}),s.jsxs("div",{className:"relative my-3 sm:my-4",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-slate-200"})}),s.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:s.jsx("span",{className:"px-2 bg-white text-slate-500",children:"OR"})})]}),s.jsxs(te,{variant:"outline",className:"w-full h-9 sm:h-10 md:h-12 text-xs sm:text-sm md:text-base border-slate-300 hover:bg-slate-50",onClick:p,disabled:r,children:[s.jsxs("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-5 md:h-5 mr-1.5 sm:mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]})}),s.jsx("div",{className:"bg-slate-50 px-3 py-3 sm:px-4 sm:py-4 border-t border-slate-200",children:s.jsxs("p",{className:"text-xs sm:text-sm text-center text-slate-600",children:[e?"Don't have an account? ":"Already have an account? ",s.jsx("button",{onClick:b,disabled:r,className:"font-semibold text-orange-600 hover:text-orange-700 disabled:opacity-50",children:e?"Sign up":"Sign in"})]})})]}),!e&&s.jsxs("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-center text-slate-500 mt-3 sm:mt-4 px-3 sm:px-4",children:["By creating an account, you agree to our"," ",s.jsx("button",{className:"underline hover:text-slate-700",children:"Terms of Service"})," ","and"," ",s.jsx("button",{className:"underline hover:text-slate-700",children:"Privacy Policy"})]})]})})}const z6=({children:e})=>s.jsx("div",{className:"min-h-screen pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-gradient-to-br from-orange-50 to-amber-50",children:e});function B6(){const{user:e,loading:t,isEmailVerified:r}=td(),[n,o]=u.useState(()=>{const l=window.location.pathname;if(l.match(/^\/post\/[a-f0-9-]{36}$/))return"discover";if(l==="/"||l==="/discover-recipes")return"discover-recipes";if(l==="/discover")return"discover";if(l==="/recipes"||l==="/my-recipes")return"my-recipes";if(l==="/add-recipe")return"add-recipe";if(l==="/meal-planner")return"meal-planner";if(l==="/grocery-list")return"grocery-list";if(l==="/cart")return"cart";if(l==="/upload")return"upload";if(l==="/profile")return"profile";if(l==="/messages")return"messages";if(l==="/settings")return"settings";if(l==="/onboarding")return"onboarding";if(l.startsWith("/profile/")&&l!=="/profile"){const c=l.split("/profile/")[1];if(c)return`profile:${c}`}if(l!=="/"&&l.length>1&&!l.includes(".")){const c=l.substring(1),d=["add-recipe","meal-planner","grocery-list","cart","upload","messages","settings"];if(c&&!c.includes("/")&&!d.includes(c))return`profile:${c}`}return"discover-recipes"});u.useEffect(()=>{const c=window.location.pathname.match(/^\/post\/([a-f0-9]{36})$/);if(c){const d=c[1];o("discover"),window.dispatchEvent(new CustomEvent("open-shared-post",{detail:d})),window.history.replaceState({},"","/discover")}},[]),u.useEffect(()=>{const l=()=>{const c=window.location.pathname;if(c==="/"||c==="/discover-recipes")o("discover-recipes");else if(c==="/discover")o("discover");else if(c==="/recipes"||c==="/my-recipes")o("my-recipes");else if(c==="/upload")o("upload");else if(c==="/messages")o("messages");else if(c==="/settings")o("settings");else if(c==="/profile")o("profile");else if(c.startsWith("/profile/")&&c!=="/profile"){const d=c.split("/profile/")[1];d&&o(`profile:${d}`)}else if(c.match(/^\/post\/[a-f0-9-]{36}$/))o("discover");else if(c!=="/"&&c.length>1&&!c.includes(".")){const d=c.substring(1),h=["add-recipe","meal-planner","grocery-list","cart"];d&&!d.includes("/")&&!h.includes(d)?o(`profile:${d}`):o("discover-recipes")}else o("discover-recipes")};return window.addEventListener("popstate",l),()=>window.removeEventListener("popstate",l)},[]);const a=l=>{const c={"discover-recipes":"/",discover:"/discover","my-recipes":"/recipes","add-recipe":"/add-recipe","meal-planner":"/meal-planner","grocery-list":"/grocery-list",cart:"/cart",upload:"/upload",profile:"/profile",messages:"/messages",settings:"/settings",onboarding:"/onboarding"};if(l.startsWith("profile:")){const h=l.split("profile:")[1];window.history.pushState({},"",`/${h}`),o(l);return}const d=c[l]||"/";window.history.pushState({},"",d),o(l)},i=()=>{if(n.startsWith("profile:")){const l=n.split("profile:")[1];return s.jsx(r0,{username:l})}switch(n){case"discover-recipes":return s.jsx(Px,{onNavigate:a});case"discover":return s.jsx(oI,{onNavigate:a});case"my-recipes":return s.jsx(aI,{});case"add-recipe":return s.jsx(xO,{onNavigate:a});case"meal-planner":return s.jsx(ZM,{onNavigate:a});case"grocery-list":return s.jsx(e6,{onNavigate:a});case"cart":return s.jsx(t6,{onNavigate:a});case"upload":return s.jsx(C6,{onNavigate:a});case"profile":return s.jsx(r0,{});case"messages":return s.jsx(A6,{onBack:()=>a("discover")});case"settings":return s.jsx(k6,{onNavigate:a});default:return s.jsx(Px,{onNavigate:a})}};return t||e&&r===void 0?s.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"relative w-20 h-28",children:[s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-16 h-12 border-8 border-orange-300 rounded-t-full"}),s.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-16 h-12 border-8 border-orange-300 rounded-b-full"}),s.jsx("div",{className:"absolute top-10 left-1/2 -translate-x-1/2 w-1 bg-orange-600 origin-top animate-sand"})]}),s.jsx("p",{className:"mt-8 text-lg font-medium text-orange-800",children:"Preparing your kitchen"})]}),s.jsx("style",{children:`
          @keyframes sand {
            0%, 100% { height: 0; opacity: 1; }
            50% { height: 40px; opacity: 1; }
          }
          .animate-sand { animation: sand 2.4s infinite ease-in-out; }
        `})]}):e?r?s.jsx(z6,{children:s.jsxs(BR,{currentPage:n,onNavigate:a,children:[i(),s.jsx($6,{})]})}):s.jsx(T6,{}):s.jsx(F6,{})}function V6(){return s.jsx(NE,{children:s.jsx(nk,{children:s.jsx(B6,{})})})}class W6 extends u.Component{constructor(r){super(r);Id(this,"handleReload",()=>{window.location.reload()});Id(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return console.error("ErrorBoundary caught error:",r),{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary componentDidCatch:",r,n),this.setState({errorInfo:n})}render(){var r;if(this.state.hasError){const n=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-pink-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-2xl",children:s.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden border-2 border-red-200",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-600 p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-3",children:s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:s.jsx(YE,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white",strokeWidth:2.5})})}),s.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-white text-center mb-2",children:"Oops! Something Went Wrong"}),s.jsx("p",{className:"text-sm sm:text-base text-white/90 text-center",children:"Don't worry, we're here to help you get back on track"})]}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[s.jsx("div",{className:"bg-orange-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-orange-200",children:s.jsx("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:"We encountered an unexpected error. This has been logged and we'll look into it. In the meantime, try refreshing the page or returning to the home screen."})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("button",{onClick:this.handleReload,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-semibold rounded-lg sm:rounded-xl px-4 py-3 sm:py-4 transition-all hover:scale-105 active:scale-95 shadow-lg",children:[s.jsx(zh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"text-sm sm:text-base",children:"Reload Page"})]}),s.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-50 text-gray-700 font-semibold rounded-lg sm:rounded-xl px-4 py-3 sm:py-4 transition-all hover:scale-105 active:scale-95 shadow-md border-2 border-gray-200",children:[s.jsx($E,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"text-sm sm:text-base",children:"Go Home"})]})]}),n&&this.state.error&&s.jsxs("details",{className:"bg-gray-50 rounded-lg sm:rounded-xl border border-gray-200",children:[s.jsxs("summary",{className:"px-3 py-2 sm:px-4 sm:py-3 cursor-pointer hover:bg-gray-100 rounded-lg sm:rounded-xl transition-colors flex items-center gap-2 text-xs sm:text-sm font-medium text-gray-700",children:[s.jsx(RE,{className:"w-4 h-4"}),s.jsx("span",{children:"Developer Info (Click to expand)"})]}),s.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Error Message"}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2 sm:p-3",children:s.jsx("code",{className:"text-[10px] sm:text-xs text-red-800 break-words",children:this.state.error.toString()})})]}),this.state.error.stack&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Stack Trace"}),s.jsx("div",{className:"bg-gray-900 rounded p-2 sm:p-3 overflow-x-auto max-h-48 sm:max-h-64",children:s.jsx("pre",{className:"text-[9px] sm:text-[10px] text-green-400 font-mono whitespace-pre-wrap break-words",children:this.state.error.stack})})]}),((r=this.state.errorInfo)==null?void 0:r.componentStack)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1 uppercase tracking-wide",children:"Component Stack"}),s.jsx("div",{className:"bg-gray-900 rounded p-2 sm:p-3 overflow-x-auto max-h-48 sm:max-h-64",children:s.jsx("pre",{className:"text-[9px] sm:text-[10px] text-blue-400 font-mono whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})})]})]})]}),!n&&s.jsxs("div",{className:"bg-blue-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-blue-200",children:[s.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Need Help?"})]}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"If this problem persists, please contact our support team."}),s.jsx("button",{onClick:()=>window.location.href="mailto:support@mealscrape.app",className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 font-semibold underline",children:"Contact Support "})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg sm:rounded-xl p-3 sm:p-4 border border-purple-200",children:[s.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:" Quick Fixes"}),s.jsxs("ul",{className:"text-xs sm:text-sm text-gray-600 space-y-1.5 sm:space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-600 shrink-0",children:""}),s.jsx("span",{children:"Try refreshing the page"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-600 shrink-0",children:""}),s.jsx("span",{children:"Clear your browser cache and cookies"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-600 shrink-0",children:""}),s.jsx("span",{children:"Check your internet connection"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-purple-600 shrink-0",children:""}),s.jsx("span",{children:"Update your browser to the latest version"})]})]})]})]}),s.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:py-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-[10px] sm:text-xs text-center text-gray-500",children:["Error ID: ",Date.now(),"  Meal Scrape v1.0"]})})]})})})}return this.props.children}}const j_=document.getElementById("root");if(!j_)throw new Error("Root element not found");yy(j_).render(s.jsx(u.StrictMode,{children:s.jsx(W6,{children:s.jsx(V6,{})})}));

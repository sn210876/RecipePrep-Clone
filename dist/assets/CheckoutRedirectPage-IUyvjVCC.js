import{r,j as e,C as o,t as d,v as x,L as N,x as m,m as w,B as c}from"./index-BbNpzWb-.js";import{E as u}from"./external-link-CIF7yaNw.js";import{A as y}from"./arrow-left-a7_wd5L3.js";function R(){const[t,h]=r.useState(""),[i,p]=r.useState("checkout"),[s,f]=r.useState(3),[a,b]=r.useState(!1);r.useEffect(()=>{const l=n=>{(n.data.type==="checkout"||n.data.type==="search")&&(h(n.data.url),p(n.data.type))};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[]),r.useEffect(()=>{if(!(!t||a)){if(s>0){const l=setTimeout(()=>f(s-1),1e3);return()=>clearTimeout(l)}s===0&&(window.location.href=t)}},[s,t,a]);const j=()=>{window.location.href=t},g=()=>{window.close()};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsxs(o,{className:"w-full max-w-2xl",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(u,{className:"w-6 h-6 text-blue-600"}),i==="checkout"?"Redirecting to Checkout":"Redirecting to Search"]}),e.jsx(m,{children:i==="checkout"?"You're being redirected to complete your purchase":"You're being redirected to search for products"})]}),e.jsxs(w,{className:"space-y-6",children:[!a&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"relative inline-flex items-center justify-center w-24 h-24 mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-100"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-600 border-t-transparent animate-spin",style:{animationDuration:"1s"}}),e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:s})]}),e.jsxs("p",{className:"text-lg text-gray-700 mb-2",children:["Redirecting in ",s," second",s!==1?"s":"","..."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"You'll be taken to the external site shortly"})]}),a&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"Auto-redirect paused. Click the button below when you're ready."}),e.jsxs(c,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",size:"lg",children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Continue to ",i==="checkout"?"Checkout":"Search"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"Leaving Our App"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"You're being redirected to an external website. We use affiliate links to support the app."})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{variant:"outline",onClick:()=>b(!a),className:"flex-1",children:a?"Resume Auto-Redirect":"Wait, Let Me Review"}),e.jsxs(c,{variant:"outline",onClick:g,className:"flex-1",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Cancel & Go Back"]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",e.jsx("span",{className:"font-mono text-gray-700",children:new URL(t).hostname})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:e.jsx(o,{className:"w-full max-w-md",children:e.jsxs(d,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 animate-spin"}),"Loading..."]}),e.jsx(m,{children:"Preparing your checkout experience"})]})})})}export{R as CheckoutRedirectPage};
